"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[591],{92304:(e,t,n)=>{n.d(t,{S:()=>v,w:()=>f});var r=n(18571),s=n(70126),i=n(54275),o=n(18751),a=n.n(o),c=n(79337),l=n(9995),d=n(56220),u=n(61053),h=n(15994);const p={root:"root-wurvCd",point:"point-E_OjHv",tooltipWrapper:"tooltipWrapper-f4Ku2I","fade-in":"fade-in-CYzcgC",fadeIn:"fade-in-CYzcgC",fadingOut:"fadingOut-WkHWF7","fade-out":"fade-out-S__jW6",fadeOut:"fade-out-S__jW6"};var m=n(72322);const g=(0,r.forwardRef)(((e,t)=>{const{tooltipProps:n,getPopupContainer:s,onClosePopover:o,position:l,cursor:d="default"}=e,[g,f]=(0,r.useState)(!0),[v,x]=(0,r.useState)(!1),{top:w}=l,y=l.left-10,C=(0,r.useRef)(null),_=(0,r.useRef)(null),b=(0,i.Z)((()=>{var e;null===(e=_.current)||void 0===e||e.destroy(),x(!1),f(!1)})),j=(0,i.Z)((()=>{var e;const t=s().querySelector(`.${p.tooltipWrapper}`);if(!t||(null===(e=_.current)||void 0===e?void 0:e.tooltipWrapper)===t)return;t.addEventListener("animationend",b);const n=new u.B;n.timeout(500).then(b),_.current={tooltipWrapper:t,destroy:()=>{t.removeEventListener("animationend",b),n.cancel(),_.current=null}}}));(0,r.useImperativeHandle)(t,(()=>({hide:()=>{j(),x(!0)}})));const k=(0,r.useMemo)((()=>({default:{height:18,width:12},"not-allowed":{height:(0,h.c)()?30:15,width:15}})),[]),S=k[d]||k.default;return(0,m.jsx)(c.u,{autoAdjustOverflow:!0,position:"bottomLeft",motion:!1,...n,className:a()(n.className,p.tooltipWrapper,v&&p.fadingOut),trigger:"custom",visible:g,showArrow:!1,rePosKey:`${w}-${y}`,getPopupContainer:s,onVisibleChange:e=>{var t;!e&&o(),null===(t=n.onVisibleChange)||void 0===t||t.call(n,e)},children:(0,m.jsx)("div",{className:p.point,tabIndex:-1,ref:C,style:{top:w,left:y,...S}})})}));function f(e){const{zIndex:t=1060,cursor:n="default",checkIsTarget:o,getEllipsisDOM:a,...c}=e,u=(0,r.useRef)(null),h=(0,r.useRef)(null),[f,v]=(0,r.useState)(null),{i18n:x}=(0,l.$)(),w=()=>{const{content:e}=c;if("function"!=typeof e)return e;if(!u.current)return null;const{targetElement:t}=u.current;return n=>e({...n,target:t})},y=(0,i.Z)((()=>{u.current&&(u.current.destroy(),u.current=null,v(null))})),C=(0,i.Z)((()=>{var e;null===(e=u.current)||void 0===e||e.destroy(),u.current=null})),_=(0,i.Z)((()=>{u.current&&(u.current.destroy(),u.current=null,v(null))})),b=(0,i.Z)(((e,n)=>{const r=null==a?void 0:a(n);if(r&&r.offsetWidth>=r.scrollWidth)return;if(u.current){if(!u.current.hasLeaved&&u.current.targetElement===n)return;y()}const i=document.createElement("div");i.className=p.root,i.style.zIndex=`${t}`;const o=e=>{v({left:e.clientX,top:e.clientY})},c=e=>{n===e.target&&(u.current&&(u.current.hasLeaved=!0),h.current?h.current.hide():y())};n.addEventListener("mousemove",o),n.addEventListener("mouseleave",c),document.body.appendChild(i);const l=(0,s.createRoot)(i);u.current={container:i,targetElement:n,hasLeaved:!1,reactRoot:l,destroy:()=>{i.remove(),Promise.resolve().then((()=>l.unmount())),n.removeEventListener("mousemove",o),n.removeEventListener("mouseleave",c)}},v({left:e.clientX,top:e.clientY})})),j=(0,i.Z)((e=>{const t=e.currentTarget;b(e,t)})),k=(0,i.Z)((e=>{var t;const n=e.target;(null!==(t=null==o?void 0:o(n))&&void 0!==t?t:e.currentTarget===n)&&b(e,n)}));return(0,r.useLayoutEffect)((()=>C),[]),(0,r.useLayoutEffect)((()=>{(()=>{if(!u.current||!f)return;const{reactRoot:e,container:r}=u.current;r.style.zIndex=`${t}`,e.render((0,m.jsx)(d.a,{i18n:x,children:(0,m.jsx)(g,{ref:h,tooltipProps:{...c,content:w()},getPopupContainer:()=>r,onClosePopover:y,position:f,cursor:n})}))})()})),{handleMouseEnter:j,handleMouseOver:k,destroyTooltip:_}}function v(e={}){const{getEllipsisDOM:t=e=>e,content:n=({target:e})=>e.textContent,...r}=e;return f({...r,getEllipsisDOM:t,content:n})}},99084:(e,t,n)=>{n.d(t,{c:()=>y});var r=n(88154),s=n(18751),i=n.n(s),o=n(84312);const a=new class{constructor(){(0,r.Z)(this,"documentLoadPromise",this.initDocumentLoadPromise())}initDocumentLoadPromise(){return new Promise((e=>{if("complete"===document.readyState)return void e();const t=()=>{e(),document.removeEventListener("load",t)};document.addEventListener("load",t)}))}async preloadImagesOnIdle(e){await this.documentLoadPromise;const t=window.requestIdleCallback||window.setTimeout;for(const n of e)await new Promise((e=>{t((()=>{const t=new Image;t.src=n.src,t.onload=()=>e(),t.onerror=()=>e(),window.setTimeout(e,3e3)}))}))}},c="root-VcsGtp";var l=n(72322);const d=e=>{const{className:t,size:n=64}=e;return(0,l.jsx)("img",{src:o.RO,className:i()(t,c),style:{height:n,width:n}})};a.preloadImagesOnIdle([{src:o.RO}]);var u=n(9995),h=n(56220),p=n(79292),m=n(70126);const g="root-LGkvBj",f="panel-fE_gjU",v="icon-jLOlfC",x="text-qnYZsw",w=()=>{const{t:e}=(0,u.$)();return(0,l.jsxs)("div",{className:f,children:[(0,l.jsx)(d,{className:v}),(0,l.jsx)("div",{className:x,children:e("pc_sticker_load_web")})]})};const y=new class{constructor(){(0,r.Z)(this,"destroyLoading",null)}async show(e){try{const t=e();this.showImpl(),await t}finally{this.hide()}}hide(){var e;null===(e=this.destroyLoading)||void 0===e||e.call(this),this.destroyLoading=null}showImpl(){if(this.destroyLoading)return;const e=document.createElement("div");e.className=g,document.body.appendChild(e);const t=(0,m.createRoot)(e);this.destroyLoading=()=>{e.remove(),Promise.resolve().then((()=>t.unmount()))},t.render((0,l.jsx)(h.a,{i18n:p.I18n.i18nInstance.instance,children:(0,l.jsx)(w,{})}))}}},98227:(e,t,n)=>{n.d(t,{Y:()=>l});var r=n(18751),s=n.n(r),i=n(33310);const o="card-f4fcSb",a="text-RGDuHx";var c=n(72322);const l=e=>{const{className:t,status:n,children:r}=e;return(0,c.jsxs)("div",{className:s()(t,o),children:["loading"===n?(0,c.jsx)(i.a,{size:18},n):(0,c.jsx)(i.a,{size:18,circleColor:"#c30000",animated:!1},n),r&&(0,c.jsx)("div",{className:a,children:r})]})}},33310:(e,t,n)=>{n.d(t,{a:()=>p});var r,s,i=n(18571),o=n(18751),a=n.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}const l=e=>i.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},e),r||(r=i.createElement("rect",{width:18,height:18,fill:"#29292D",opacity:.5,rx:9})),s||(s=i.createElement("path",{stroke:"#FAFAFA",strokeWidth:1.35,d:"M13.925 9a4.924 4.924 0 1 0-1.443 3.482"}))),d="root-yumxDJ",u="animated-IHczOy";var h=n(72322);const p=(0,i.memo)((e=>{const{className:t,size:n,circleColor:r="var(--black-4)",arcColor:s="var(--white-0)",animated:i=!0}=e;return(0,h.jsx)(l,{className:a()(t,d,i&&u),width:n,height:n,style:{"--heycan-loading-circle-color":r,"--heycan-loading-arc-color":s}})}))},59217:(e,t,n)=>{n.d(t,{t:()=>u});var r,s=n(18751),i=n.n(s),o=n(18571);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const c=e=>o.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:34,height:28,fill:"none",viewBox:"0 0 34 28"},e),r||(r=o.createElement("path",{fill:"#fff",fillOpacity:.09,d:"M33.71 6.32V1.11l-6.268 3.291v-.196c0-2.076-1.489-3.33-3.643-3.33H3.935C1.662.875.292 2.129.292 4.205v5.25L9.067 14 .291 18.584v5.25c0 2.037 1.371 3.291 3.643 3.291H23.8c2.154 0 3.643-1.254 3.643-3.291v-.274l6.269 3.33V21.6L19.136 14zM14.083 16.587l10.774 5.642H3.27zM24.778 5.773l-10.695 5.602L3.268 5.773z"}))),l="root-I5KeTG";var d=n(72322);const u=e=>{const{className:t,iconWidth:n}=e,r=Math.round(.785*n);return(0,d.jsx)("div",{className:i()(t,l),children:(0,d.jsx)(c,{height:r,width:n})})}},7059:(e,t,n)=>{n.d(t,{J:()=>c});var r=n(18571);const s="running-h0Lfzw";var i=n(72322);const o=26,a=e=>{const{text:t,gap:n,speed:a=o}=e,c=(0,r.useRef)(null),l=(0,r.useRef)(null),[d,u]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=c.current,t=l.current;if(!e||!t)return;const n=e.getBoundingClientRect().left,r=t.getBoundingClientRect().left;u(r-n)}),[]);const h={"--heycan-marquee-loop-text-animation-transform-to":`translateX(${-d}px)`,"--heycan-marquee-loop-text-animation-duration":`${(d/a).toFixed(2)}s`};return(0,i.jsxs)("span",{ref:c,className:d?s:"",style:h,children:[(0,i.jsx)("span",{children:t}),(0,i.jsx)("span",{ref:l,style:{marginInlineStart:n},children:t})]})},c=e=>{const{text:t,getEllipsisDOM:n}=e,[s,o]=(0,r.useState)(!1);return{isMarqueeLoopRunning:s,setIsMarqueeLoopRunning:e=>{const t=null==n?void 0:n();t&&t.offsetWidth>=t.scrollWidth||o(e)},reactNode:s?(0,i.jsx)(a,{...e}):(0,i.jsx)("span",{children:t})}}},23725:(e,t,n)=>{n.d(t,{u:()=>M});var r=n(18571),s=n(95291),i=n(79337),o=n(54275),a=n(61458),c=n(9995),l=n(65625),d=n(42012),u=n(55326),h=n(13805),p=n(71995),m=n(12599),g=n(45394),f=n(77936),v=n(18751),x=n.n(v);const w="tag-ZaY7YS",y="selected-umR1Vs",C="disabled-A37DzB";var _=n(72322);const b=({className:e,value:t,selected:n,disabled:r,onClick:s})=>(0,_.jsx)(i.Vp,{className:x()(e,w,n&&y,r&&C),color:n?"cyan":void 0,onClick:()=>null==s?void 0:s(t),children:t},t),j="block-smxiey",k="title-aqS4Cg",S="content-IyBLdN",T="loading-QuFv_G",E="text-ukrQOj",N=({className:e,title:t,loading:n,loadingText:s,value:o,options:a,onSelect:c})=>{const l=(0,r.useCallback)((e=>o.includes(e)),[o]),d=(0,r.useMemo)((()=>a.filter((e=>!o.includes(e)))),[o,a]);return 0===d.length?null:(0,_.jsxs)("div",{className:x()([j,e]),children:[(0,_.jsx)("p",{className:k,children:t}),(0,_.jsx)("div",{className:S,children:n?(0,_.jsxs)("div",{className:T,children:[(0,_.jsx)("span",{className:E,children:s}),(0,_.jsx)(i.yC,{size:"small"})]}):d.map((e=>(0,_.jsx)(b,{selected:l(e),value:e,onClick:()=>c(e)},e)))})]})},F=(0,l.Pi)((({value:e,onSelect:t})=>{const[n,s]=(0,r.useState)([]),{t:i}=(0,c.$)();return(0,r.useEffect)((()=>{const e=(0,u.cF)(u.Qt.TagEachUser,d.$.userInfo.uid).get();s(e)}),[d.$.userInfo.uid,e]),(0,_.jsx)(N,{title:i("pc_recently_used_web"),value:e,options:n,onSelect:t})})),I=((0,l.Pi)((({title:e,uri:t,value:n,itemType:s,onSelect:i})=>{const[l,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[p,m]=(0,r.useState)(!1),f=(0,r.useRef)({selfConfigTagsReady:{}}),{t:v}=(0,c.$)(),x=(0,r.useMemo)((()=>[...u,...l]),[l,u]),w=(0,o.Z)((e=>{const{title:t,uri:n}=e;return t?f.current.cvid&&f.current.uri===n?{cvid:f.current.cvid,title:t}:n?{image_uri:n,title:t}:null:null})),y=(0,r.useCallback)((async()=>{try{m(!0);const n=w({title:e,uri:t});await Promise.all([n&&(0,g.Uz)(n).then((e=>{h(e.cv_tags),f.current.cvid=e.cvid,n.image_uri&&(f.current.uri=n.image_uri)})),!f.current.selfConfigTagsReady[s]&&(0,g.On)({effect_type:s}).then((e=>{d(e.rec_tags),f.current.selfConfigTagsReady[s]=!0}))])}finally{m(!1)}}),[e,t,s]);return(0,a.Z)(y,500,[y]),(0,r.useEffect)((()=>{y()}),[s]),(0,_.jsx)(N,{title:v("recommend_signature_web"),loading:p,loadingText:v("loading_web"),value:n,options:x,onSelect:i})})),"tagSelect-KEPqcU"),P="dropItem-bpnHuZ",L="suggestListDropdown-fV0lMc",R=(0,l.Pi)((({recommendConfig:e,value:t=[],itemType:n,disabled:l,disableRecommend:v,disableLatest:x,onChange:w,placeholder:y,max:C=15,temporaryId:j,ignoreAddTagOnBlurSelector:k,onRecentTagSelect:S})=>{const T=(0,r.useRef)(!1),[E,N]=(0,r.useState)(""),[R,M]=(0,r.useState)(""),Z=(0,r.useRef)(!1),O=Z.current?R:E,[A,D]=(0,r.useState)([]),[U,z]=(0,r.useState)([]),{t:W}=(0,c.$)(),B=e=>(0,u.cF)(u.Qt.TagEachUser,d.$.userInfo.uid).set("add",[e]),$=(0,o.Z)((e=>{z(E?e:[])}));(0,a.Z)((async()=>{if(!n||!E)return;const e=await(0,g.EO)({query:E,count:10}),t=(null==e?void 0:e.sug_tags)||[];$(t)}),500,[E,n]),(0,r.useEffect)((()=>{E||z([])}),[E]);const V=(0,r.useCallback)((e=>{if(C&&e.length>C)return i.FN.error(W("pc_stickers_release_max_tag_web",{X:C})),void(null==w||w(e.slice(0,C)));null==w||w(e)}),[w]),K=(0,o.Z)((e=>{t.includes(e)||V([...t,e])})),H=(0,r.useMemo)((()=>new h.l),[]),q=(0,o.Z)((async e=>{const n=await H.lock("",(async()=>{if(t.includes(e))return!0;let n=!1;try{const t=await(0,g._K)({words:e,scene:g.Xb.Tag});n=!1===(null==t?void 0:t.is_hit)}catch(r){return(0,p.RF)("[TagSelect] call checkAntiDirt failed",r,{tag:e}),i.FN.error(W("pc_tag_retry_web")),!1}return n?(K(e),!0):((0,p.c6)("[TagSelect] checkAntiDirt not passed",{tag:e}),i.FN.error(W("pc_tag_illegal_fail_web")),!1)}));return null!=n&&n})),G=(0,o.Z)((e=>{if(0===e.length)return;const n=t.filter((t=>!e.includes(t)));V(n)})),Y=(0,r.useRef)(null),{saveSelectionIfNeeded:X}=(0,f.u)({getInputElem:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.inputRef.current}}),Q=e=>{const t=(0,m.aF)(e,30);X(t),N(t)},J=(0,o.Z)((e=>{Q(""),t.includes(e)?G([e]):(K(e),B(e))})),ee=e=>{const t=A.includes(e);D(t?A.filter((t=>t!==e)):[...A,e])},te=(0,o.Z)((()=>{G(A),D([])})),ne=(0,o.Z)((()=>Y.current&&Y.current.inputRef.current&&Y.current.tagInputRef.current?{tagInput:Y.current,tagInputElem:Y.current.tagInputRef.current,inputElem:Y.current.inputRef.current}:null)),re=(0,o.Z)((e=>{const t=ne();return!!(t&&e&&e instanceof Element)&&e.closest(".semi-tagInput")===t.tagInputElem})),se=(0,o.Z)((e=>!!(e&&e instanceof Element)&&null!==e.closest(".semi-tag"))),ie=(0,o.Z)((e=>{const t=e.target,n=ne();if(!n||!re(t))return;const{tagInput:r,tagInputElem:s,inputElem:i}=n,{selectionStart:o,selectionEnd:a}=i;return A.length>0&&se(t)?(te(),null==i||i.setSelectionRange(0,0),void r.focus()):void 0})),oe=(0,o.Z)((e=>{const t=e.target;ne()&&re(t)&&se(t)&&(re(e.relatedTarget)&&se(e.relatedTarget)||D([]))}));(0,r.useEffect)((()=>{const e=e=>{"Delete"===e.code||"Backspace"===e.code?(T.current=!0,ie(e)):T.current=!1};return window.addEventListener("keydown",e,!0),window.addEventListener("blur",oe,!0),()=>{window.removeEventListener("keydown",e,!0),window.removeEventListener("blur",oe,!0)}}),[]);const ae=(0,o.Z)((e=>{e.replace(/ {1,}/g,"")===E.replace(/ {1,}/g,"")&&Q("")})),ce=async e=>{const[t]=e;Promise.resolve().then((()=>Q(E)));const n=t.replace(/ {1,}/g,"");if(0===n.length)return;await q(n)&&(B(n),ae(E))},le=async e=>{if(Z.current)return void M(e);const t=e.replace(/ {1,}$/,""),n=t.replace(/ {1,}/g,"");if(Q(t),t===e||!t||T.current)return;await q(n)&&(B(n),ae(E))};(0,r.useEffect)((()=>{var e;const t=null===(e=Y.current)||void 0===e?void 0:e.inputRef.current;if(!t)return;const n=()=>{Z.current=!0,M(t.value)},r=()=>(0,s.unstable_batchedUpdates)((()=>{Z.current=!1,M(""),le(t.value)}));return t.addEventListener("compositionstart",n),t.addEventListener("compositionend",r),()=>{t.removeEventListener("compositionstart",n),t.removeEventListener("compositionend",r)}}),[]);(0,r.useEffect)((()=>{j&&N("")}),[j]);return(0,_.jsxs)("div",{className:I,children:[(0,_.jsx)(i.Lt,{position:"bottomLeft",trigger:"focus",className:L,style:{maxHeight:200,overflow:"scroll"},render:(0,_.jsx)(i.Lt.Menu,{children:U.map((e=>(0,_.jsx)(i.Lt.Item,{className:P,onClick:()=>J(e),children:e},e)))}),children:(0,_.jsx)(i.EG,{ref:Y,inputValue:O,onInputChange:le,value:t,placeholder:y,renderTagItem:(e,t,n)=>(0,_.jsx)(b,{value:e,selected:A.includes(e),disabled:l,onClick:ee},e),onAdd:ce,onBlur:e=>{if(e.relatedTarget&&e.relatedTarget instanceof Element){const t=[`.${L}`,k].filter((e=>e)).join(",");if(null!==e.relatedTarget.closest(t)||se(e.relatedTarget))return}ce([E])},disabled:l})}),!1,!l&&!x&&(0,_.jsx)(F,{value:t,onSelect:e=>{J(e),null==S||S()}})]})})),M=(0,i.Q2)(R)},12625:(e,t,n)=>{n.d(t,{l:()=>p});var r=n(18571),s=n(18751),i=n.n(s),o=n(79337),a=n(54275),c=n(12599),l=n(77936);const d="textarea-LCPYTj";var u=n(72322);const h=e=>{var t;const n=(0,r.useRef)(!1),[s,h]=(0,r.useState)(""),{allowEnter:p=!0,value:m,...g}=e,{className:f,maxLength:v,onChange:x,onCompositionEnd:w,onCompositionStart:y}=g,C=n.current?s:m,_=(0,a.Z)((e=>{const t=e||"";return p?t:t.replace(/\n/g,"")})),b=(0,a.Z)((e=>{const t=_(e);return void 0!==v?(0,c.aF)(t,v):t})),j=(0,a.Z)((e=>{n.current=!0,h(e.currentTarget.value),null==y||y(e)})),k=(0,r.useRef)(null),{saveSelectionIfNeeded:S}=(0,l.u)({getInputElem:()=>k.current}),T=(0,a.Z)(((e,t)=>{S(e),null==x||x(e,t)})),E=(0,a.Z)((e=>{const t=b(e.currentTarget.value);n.current=!1,h(t),T(t,e),null==w||w(e)})),N=(0,a.Z)(((e,t)=>{const r=_(e);if(n.current)return void h(r);if(void 0===v)return void T(r,t);const s=b(r);T(s,t)})),F=(0,r.useMemo)((()=>({maxRows:3})),[]);return(0,u.jsx)(o.Kx,{autoComplete:"off",...g,ref:k,value:C,className:i()(f,d),maxLength:void 0,autosize:null!==(t=g.autosize)&&void 0!==t?t:F,rows:1,onChange:N,onCompositionStart:j,onCompositionEnd:E})},p=(0,o.Q2)(h)},84312:(e,t,n)=>{n.d(t,{NZ:()=>a,OD:()=>o,RO:()=>s,dr:()=>i,kx:()=>c});const r=e=>`https://lf16-web-buz.capcutstatic-us.com/obj/capcut-web-buz-sg/artist-op-web${e}`,s=`${r("/LoadingScissorsCapCut.d9f5d23b.gif")}`,i=({lang:e,region:t})=>`https://www.capcut.com/clause/creator-agreement?lang=${e}&store_region=${t}`,o=()=>"https://www.capcut.com/clause/original-work-notice?lang=en",a=()=>"https://www.capcut.com/clause/original-work-notice-commercial-material?lang=en",c=()=>"https://www.capcut.com/clause/paid-materials?lang=en"},65751:(e,t,n)=>{n.d(t,{Ab:()=>r});let r=function(e){return e[e.WordArt=1]="WordArt",e[e.Sticker=2]="Sticker",e[e.AudioEffect=3]="AudioEffect",e[e.Video=4]="Video",e[e.Music=5]="Music",e[e.TextTemplate=6]="TextTemplate",e[e.Special=7]="Special",e[e.FaceSpecial=8]="FaceSpecial",e[e.Image=9]="Image",e[e.Font=10]="Font",e[e.Timbre=11]="Timbre",e[e.Filter=12]="Filter",e[e.VideoAnimation=13]="VideoAnimation",e[e.Transition=19]="Transition",e[e.SubtitleTemplate=48]="SubtitleTemplate",e[e.Formula=50]="Formula",e[e.WordArtCollection=101]="WordArtCollection",e[e.StickerCollection=102]="StickerCollection",e[e.AudioEffectCollection=103]="AudioEffectCollection",e[e.VideoCollection=104]="VideoCollection",e[e.Emoticons=105]="Emoticons",e[e.TextTemplateCollection=106]="TextTemplateCollection",e[e.FilterCollection=112]="FilterCollection",e[e.MultiLanguageTextTemplate=207]="MultiLanguageTextTemplate",e[e.MultiLanguageSubtitleTemplate=222]="MultiLanguageSubtitleTemplate",e[e.LocalEffects=-1]="LocalEffects",e}({})},21386:(e,t,n)=>{n.d(t,{Z:()=>r,d:()=>s});let r=function(e){return e[e.Unsigned=0]="Unsigned",e[e.Signing=1]="Signing",e[e.Signed=2]="Signed",e}({}),s=function(e){return e.BusinessArtist="business_artist",e}({})},18651:(e,t,n)=>{n.d(t,{r:()=>h});var r=n(88154),s=n(60963),i=n(79337),o=n(79292),a=n(76937),c=n(33876),l=n(71995),d=n(61053);class u{constructor(){(0,r.Z)(this,"fileList",[]),(0,s.ky)(this)}addFiles(e){e.some((e=>e.size>10485760))?i.FN.error(o.I18n.t("pc_template_authorize_exceed_size_web")):(e.forEach((e=>{this.fileList.push({id:(0,a.V)(),file:e,uri:"",progress:0})})),this.fileList.slice(-e.length).forEach((e=>this.uploadOneFile(e))))}async uploadOneFile(e){try{const{uploadResult:t}=await(0,c.ws)({file:e.file,onProgress:(0,s.aD)((({total:t,loaded:n})=>{e.progress=n/t||0}))});await(new d.B).timeout(500),(0,s.z)((()=>{e.uri=t.Uri}))}catch(t){i.FN.error(o.I18n.t("pc_template_authorize_upload_failed_web")),this.deleteFile(e.id),(0,l.RF)("[ThirdPartyAuthFileUploadService] file upload failed",t,{id:e.id,fileName:e.file.name})}}deleteFile(e){this.fileList=this.fileList.filter((t=>t.id!==e))}get isAllUploaded(){return this.fileList.every((e=>e.uri))}addOnlineFiles(e){e.forEach((e=>this.fileList.push({id:(0,a.V)(),file:e.file,uri:e.uri,progress:100})))}}class h{constructor(e){this.props=e,(0,r.Z)(this,"map",new Map)}getKey(e){var t,n,r;return null!==(t=null===(n=(r=this.props).getKey)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:String(e)}get(e){const t=this.getKey(e);return this.map.get(t)}ensure(e){const t=this.getKey(e);let n=this.map.get(t);return n||(n=new u,this.map.set(t,n)),n}getUploadedFiles(e){const t=this.getKey(e),n=this.map.get(t);return(null==n?void 0:n.fileList.filter((e=>e.uri)))||[]}}},85877:(e,t,n)=>{n.d(t,{P:()=>_});var r=n(18571),s=n(18751),i=n.n(s),o=n(79337),a=n(54275),c=n(9995),l=n(59359),d=n(42350),u=n(62027),h=n(1536),p=n(84312);const m="root-EgNFDI",g="left-E5g9si",f="right-rFTuHS",v="remind-yX4spY",x="protocol-M9K9e5",w="buttonContainer-pqhOLs",y="button-G4gKq0";var C=n(72322);const _=({className:e,leftText:t,isPublishDisabled:n,isPublishing:s,needConfirmModalOnClose:_,onPublish:b,beforeCancel:j,onCancel:k})=>{const{t:S}=(0,c.$)(),T=(0,a.Z)((async()=>{if(j&&j(),_){if(await d.Z.warn({mainText:S("pc_sticker_cancel_web"),subText:S("pc_sticker_click_unrecoverable_web"),confirmBtnText:S("pc_stickers_release_confirm_quit_web"),cancelBtnText:S("pc_stickers_release_cancel_web")})!==d.L.Confirm)return}k?k():(0,l.Nt)()})),E=u.YW.Creator,{language:N,region:F}=h.appModel.appInfo,I=(0,r.useMemo)((()=>(0,p.dr)({lang:N,region:F})),[N,F]);return(0,C.jsxs)("div",{className:i()(e,m),children:[(0,C.jsx)("div",{className:g,onClick:undefined,children:t}),(0,C.jsxs)("div",{className:f,children:[(0,C.jsx)("span",{className:v,onClick:()=>{window.open(I,"_blank")},children:S("pc_sticker_release_agree_{X}_web",{X:(0,C.jsx)("span",{className:x,children:u.rr[E]},"protocol")})}),(0,C.jsxs)("div",{className:w,children:[(0,C.jsx)(o.zx,{className:y,type:"primary",theme:"solid",disabled:n,loading:s,onClick:b,children:S("pc_stickers_release_web")}),(0,C.jsx)(o.zx,{className:y,type:"secondary",theme:"solid",onClick:T,children:S("pc_stickers_release_cancel_web")})]})]})]})}},71443:(e,t,n)=>{n.d(t,{v:()=>M});var r=n(18571),s=n(65625),i=n(18751),o=n.n(i),a=n(91720);const c="root-uLKAXM",l="title-zTU1ta",d="titleText-IBFt9m",u="icon-_YRcF7",h="rotate-biqGJK",p="bottom-line-nHX1wW",m="contentWrapper-Nsy6v8",g="content-nUJ6jp";var f=n(72322);const v=({visible:e,className:t,contentClassName:n,onChange:s,title:i,children:v})=>{const[x,w]=(0,r.useState)(e),[y,C]=(0,r.useState)(e?null:0),_=(0,r.useRef)(null),b=e=>{if(e!==x){var t,n;const e=null!==(t=null===(n=_.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==t?t:null;C(e)}w(e)};(0,r.useLayoutEffect)((()=>{x||requestAnimationFrame((()=>C(0)))}),[x]);return(0,r.useLayoutEffect)((()=>{b(e)}),[e]),(0,f.jsxs)("div",{className:o()(t,c),children:[(0,f.jsxs)("div",{className:l,onClick:()=>{b(!x),null==s||s(!e)},children:[(0,f.jsx)(a.Z,{className:o()(u,{[h]:x})}),(0,f.jsx)("div",{className:d,children:i})]}),(0,f.jsxs)("div",{className:m,style:{height:null!=y?y:"auto"},onTransitionEnd:()=>x&&C(null),children:[(0,f.jsx)("div",{className:p}),(0,f.jsx)("div",{ref:_,className:o()(n,g),children:v})]})]})};var x;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const y=e=>r.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:8,height:6,fill:"none",viewBox:"0 0 8 6"},e),x||(x=r.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 3 2.143 2L7 1"})));var C;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}const b=e=>r.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:6,height:6,fill:"none",viewBox:"0 0 6 6"},e),C||(C=r.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m1 1 4 4M5 1 1 5"}))),j="root-ZH_C8Z",k="icon-box-FdFonZ",S="dot-VyF22G",T="word-oYDchC",E="error-NPw70q",N=({className:e,status:t,text:n})=>{const r=o()(j,e);return"init"===t?(0,f.jsxs)("div",{className:r,children:[(0,f.jsx)("div",{className:k,children:(0,f.jsx)("span",{className:S})}),(0,f.jsx)("div",{className:T,children:n})]}):"error"===t?(0,f.jsxs)("div",{className:r,children:[(0,f.jsx)("div",{className:k,children:(0,f.jsx)(b,{className:E})}),(0,f.jsx)("div",{className:o()([T,E]),children:n})]}):(0,f.jsxs)("div",{className:r,children:[(0,f.jsx)("div",{className:k,children:(0,f.jsx)(y,{})}),(0,f.jsx)("div",{className:T,children:n})]})};var F=n(77642);const I="root-peWMdc",P="wrapper-W8rapW",L="download-MCE7pb",R="instruction-SvWEjU",M=(0,s.Pi)((e=>{const{className:t,groups:n,initGroup:s,activeGroup:i,resetExpandedGroupKey:a,getStatus:c,onClickGroupLink:l}=e,[d,u]=(0,r.useState)([s]),h=(0,r.useRef)(!1);(0,r.useLayoutEffect)((()=>{a&&h.current&&u([i])}),[a]),(0,r.useEffect)((()=>{h.current=!0}),[]);return(0,f.jsx)("div",{className:o()(t,I),children:(0,f.jsx)("div",{className:P,children:n.map((e=>(0,f.jsxs)(v,{title:e.title,visible:d.includes(e.key),onChange:()=>{return t=e.key,void(d.includes(t)?u(d.filter((e=>e!==t))):u([...d,t]));var t},children:[e.link&&(0,f.jsx)("div",{className:L,onClick:()=>{var t,n;return n=null===(t=e.link)||void 0===t?void 0:t.src,null==l||l(),void(n&&(0,F.Z)({url:n}))},children:e.link.text}),e.instructions.map((t=>{var n;return(0,f.jsx)(N,{className:R,status:null!==(n=t.status)&&void 0!==n?n:c(t,e),text:t.title},t.key)}))]},e.key)))})})}))},85543:(e,t,n)=>{n.d(t,{Y:()=>f});var r=n(18751),s=n.n(r),i=n(9995),o=n(59217);const a="root-QyKpzG",c="border-igpdqP",l="content-i0g8M8",d="invalid-E06Qru",u="selected-vCvIxt",h="icon-uXwoK2",p="customIcon-BcMgG4",m="isUpdatingHint-TmA7x3";var g=n(72322);const f=({src:e,className:t,onClick:n,onContextMenu:r,isSelected:f,isInvalid:v,isUpdating:x=!1,size:w,customRenderIcon:y})=>{const{t:C}=(0,i.$)();return(0,g.jsxs)("div",{className:s()(t,a,v&&d,f&&u),style:{width:w,height:w},onClick:n,onContextMenu:r,children:[(0,g.jsxs)("div",{className:l,children:[y?(0,g.jsx)("div",{className:p,children:y()}):e?(0,g.jsx)("img",{className:h,src:e}):(0,g.jsx)(o.t,{className:h,iconWidth:Math.round(.41*w)}),x&&(0,g.jsx)("div",{className:m,children:C("pc_sticker_upgrading_web")})]}),(0,g.jsx)("div",{className:c})]})}},84117:(e,t,n)=>{n.d(t,{S:()=>a});var r=n(18751),s=n.n(r);const i={root:"root-Jdq72k",title:"title-x8UGgH",line:"line-HKnXMT"};var o=n(72322);function a(e){const{className:t,title:n}=e;return(0,o.jsxs)("div",{className:s()(i.root,t),children:[(0,o.jsx)("div",{className:i.title,children:n}),(0,o.jsx)("div",{className:i.line})]})}},62369:(e,t,n)=>{n.d(t,{O:()=>w});var r,s,i=n(65625),o=n(18751),a=n.n(o),c=n(79337),l=n(9995),d=n(98227),u=n(18571);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}const p=e=>u.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30"},e),r||(r=u.createElement("rect",{width:30,height:30,fill:"#00C1CD",rx:15})),s||(s=u.createElement("path",{stroke:"#FAFAFA",strokeLinecap:"square",strokeWidth:1.875,d:"M9.001 15h12M15.001 21.001v-12"})));var m=n(92304);const g={root:"root-rylHEj","root--small":"root--small-aQdS7l",rootSmall:"root--small-aQdS7l",disabled:"disabled-UDlazI",box:"box-ZWa78Y",dragging:"dragging-vqbsIa",largeBox:"largeBox-WcUW_R",addIcon:"addIcon-qWe0Z9",titleContainer:"titleContainer-h3CoYT",title:"title-vs2_SI",subTitle:"subTitle-cCG07G",smallBox:"smallBox-gFzkvY"};var f=n(72322);const v=(0,u.memo)((({className:e,size:t,title:n,draggingTitle:r="",draggingDisabled:s,subTitle:i="",disabled:o,disabledTooltip:c="",onDrop:l,onClick:d})=>{const[h,v]=(0,u.useState)(!1),x=h?r:n,w=e=>{s||v(e)},{handleMouseEnter:y}=(0,m.w)({content:c,cursor:"not-allowed"}),C=e=>t=>{o||(t.preventDefault(),t.stopPropagation(),null==e||e(t))};return(0,f.jsx)("div",{className:a()(e,g.root,g[`root--${t}`],o&&g.disabled,h&&g.dragging),onDragEnter:C((()=>!h&&w(!0))),onDragOver:C(),onDragLeave:C((e=>{e.currentTarget===e.target&&h&&w(!1)})),onDrop:C((e=>{w(!1),l(e)})),onMouseEnter:o&&null!=c&&c.length?y:void 0,children:"large"===t?(0,f.jsxs)("div",{className:a()(g.box,g.largeBox),onClick:o?void 0:d,children:[(0,f.jsx)(p,{className:g.addIcon}),(0,f.jsxs)("div",{className:g.titleContainer,children:[(0,f.jsx)("div",{className:g.title,children:x}),(0,f.jsx)("div",{className:g.subTitle,children:i})]})]}):(0,f.jsxs)("div",{className:a()(g.box,g.smallBox),onClick:o?void 0:d,children:[(0,f.jsx)(p,{className:g.addIcon}),(0,f.jsx)("span",{className:g.title,children:x})]})})})),x={root:"root-qiLomF",uploadArea:"uploadArea-CUnzAK",uploadAreaWithoutStickers:"uploadAreaWithoutStickers-lupETK",retryText:"retryText-CmFKf2",mainForm:"mainForm-QtsMBI",importArea:"importArea-t3T7nf",formArea:"formArea-cY23J0"};function w(e){const{className:t,layout:n,setFormApi:r,renderImportArea:s,renderFormArea:i,onRetry:o,importLoadingText:u,scrollAreaRef:h,uploadAreaProps:p}=e,{titleForUploadArea:m,titleForMainForm:g,...w}=p,{t:y}=(0,l.$)();return(0,f.jsx)(c.Form,{className:a()(t,x.root),getFormApi:r,children:"loading"===n?(0,f.jsx)(d.Y,{status:"loading",children:u||y("pc_filter_material_loading")}):"error"===n?(0,f.jsx)(d.Y,{status:"error",children:y("pc_sticker_abnormal_{X}_web",{X:(0,f.jsx)("span",{className:x.retryText,onClick:o,children:y("pc_sticker_retry_web")},"X")})}):"mainForm"===n?(0,f.jsxs)("div",{className:x.mainForm,children:[(0,f.jsx)("div",{className:x.importArea,ref:h,children:s((0,f.jsx)(v,{className:x.uploadArea,size:"small",title:g,...w}))}),(0,f.jsx)("div",{className:x.formArea,id:"formAreaWrapper",children:i()})]}):(0,f.jsx)(v,{className:x.uploadAreaWithoutStickers,size:"large",title:m,...w})})}(0,i.Pi)((e=>w(e)))},15906:(e,t,n)=>{n.d(t,{q:()=>g});var r=n(18571),s=n(79337),i=n(54275),o=n(9995),a=n(42350);const c="modal-uSGTo3",l="title-h7CfEL",d="detail-JFW1Vi",u="retryText-b6tno6",h="progress-WRObzP",p="cancelButton-zcznQe";var m=n(72322);const g=(0,r.forwardRef)(((e,t)=>{const{uploadStats:n,onRetryUpload:g,onCancel:f,onShowUploadFail:v,onPromptConfirmToCancel:x,onError:w}=e,{pending:y,succeeded:C,failed:_,uninited:b=0}=n,j=y+C+_,k=Math.floor(C/j*100)||0,{t:S}=(0,o.$)(),[T,E]=(0,r.useState)(!1),N=y<=b&&_>0,F=(0,i.Z)((async()=>{try{return await a.Z.warn({mainText:S("pc_stickers_release_confirm_delete_web"),subText:S("pc_stickers_release_uploading_web"),confirmBtnText:S("pc_stickers_release_confirm_quit_web"),cancelBtnText:S("pc_stickers_release_cancel_web")})===a.L.Confirm}catch{return!1}})),I=(0,i.Z)((async()=>{if(!N){const e=F();x(e);if(!await e)return}f(),E(!1)}));(0,r.useEffect)((()=>{N&&(null==w||w())}),[N]);const P=()=>(0,m.jsx)(s.zx,{className:p,theme:"solid",type:"secondary",onClick:I,children:S("pc_stickers_release_cancel_web")});return(0,r.useImperativeHandle)(t,(()=>({show:()=>E(!0),hide:()=>E(!1)}))),(0,r.useEffect)((()=>{T&&N&&v()}),[T&&N]),(0,m.jsx)(s.u_,{visible:T,className:c,header:null,footer:null,width:"auto",centered:!0,maskClosable:!1,closable:!1,children:N?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:l,children:S("pc_stickers_release_network_anomaly_web")}),(0,m.jsx)("div",{className:d,children:(0,m.jsx)("span",{children:S("pc_stickers_release_upload_error_again_web",{X:(0,m.jsx)("span",{className:u,onClick:g,children:S("pc_sticker_retry_web")},"X")})})}),(0,m.jsx)(s.Ex,{className:h,percent:100,size:"small",stroke:"var(--yellow-0)"}),P()]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:l,children:S("pc_stickers_release_uploading_material_web")}),(0,m.jsx)("div",{className:d,children:S("pc_stickers_release_upload details_web",{X:C,Y:j,Z:k})}),(0,m.jsx)(s.Ex,{className:h,percent:k,size:"small",stroke:"var(--cyan-2)"}),P()]})})}))},50291:(e,t,n)=>{n.d(t,{r:()=>s});var r=n(88154);class s{constructor(e){this.props=e,(0,r.Z)(this,"fileMap",new Map)}ensureFile(e){let t=this.fileMap.get(e);return t||(t={data:this.props.initData(),events:{}},this.fileMap.set(e,t)),t}getFile(e){return this.fileMap.get(e)}register(e,t,n){this.ensureFile(t).events[e]=n}dispatch(e){var t,n;const r=this.fileMap.get(e.id);r&&(null===(t=(n=r.events)[e.type])||void 0===t||t.call(n,e,r))}removeFile(e){this.fileMap.delete(e)}}},72383:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(60963),s=n(75255),i=n(81071);function o(e){const t=(0,i.e)({watch:()=>e.watch()&&!n.isPromptingConfirmToCancel}),n=(0,s.fv)((()=>({start:()=>t.start(),stop:()=>t.stop(),isPromptingConfirmToCancel:!1,handlePromptConfirmToCancel:async e=>{n.isPromptingConfirmToCancel=!0;const s=await e;(0,r.z)((()=>{s&&t.stop(),n.isPromptingConfirmToCancel=!1}))}})));return n}},21798:(e,t,n)=>{n.d(t,{I:()=>c});var r=n(88154),s=n(71995),i=n(90343),o=n(21386),a=n(45394);class c{constructor(e){this.props=e,(0,r.Z)(this,"signCode",null),(0,r.Z)(this,"isRefreshing",!1),(0,r.Z)(this,"fetchRegionDataPromise",null),(0,r.Z)(this,"fetchRegionDataImpl",(async()=>{const[{country_code_list:e},{doc_type_info:t},n]=await Promise.all([(0,i.Jr)({sign_scene:this.props.signScene}),(0,i.Yg)(),(0,a.vW)()]);return{country_code_list:e,doc_type_info:t,region:n}}))}async init(){this.refreshSignInfo().catch((()=>{})),this.fetchRegionData().catch((()=>{}))}async refreshSignInfo(){const{signScene:e}=this.props;try{this.isRefreshing=!0;const{sign_status_infos:t=[]}=await(0,i.x3)(),n=t.find((t=>t.sign_scene===e)),r=(null==n?void 0:n.sign_code)||o.Z.Unsigned;return this.signCode=r,r}catch(t){throw(0,s.RF)("[AuthorSignService] refreshSignInfo failed",t,{signScene:e}),t}finally{this.isRefreshing=!1}}async checkAuthorHasSigned(){if(this.signCode===o.Z.Signed)return!0;return await this.refreshSignInfo()===o.Z.Signed}fetchRegionData(){return this.fetchRegionDataPromise||(this.fetchRegionDataPromise=this.fetchRegionDataImpl().catch((e=>{throw this.fetchRegionDataPromise=null,e}))),this.fetchRegionDataPromise}async createContract(e){const t=await(0,i.OP)({...e,sign_scene:this.props.signScene});return this.signCode=o.Z.Signing,this.refreshSignInfo(),t}}},61679:(e,t,n)=>{n.d(t,{Pk:()=>l,uY:()=>h,md:()=>p});var r=n(88154),s=n(56366),i=n(20322),o=n(77517);var a=n(71995),c=n(45725);const l="fmp";class d extends((()=>o.EventEmitter)()){constructor(){super(),(0,r.Z)(this,"category",{}),(0,r.Z)(this,"customTiming",{}),(0,r.Z)(this,"hasReportedFmp",!1),(0,r.Z)(this,"messageChannel",new MessageChannel),(0,r.Z)(this,"afterFramePromise",null),this.messageChannel.port2.onmessage=()=>this.emit("_messagechannel")}updateCategory(e){this.category={...e,...this.category}}getCategoryToReport(){return{scene:"success",...this.category}}addTiming(e,t=performance.now()){this.customTiming[e]||(this.customTiming[e]=t)}addSetStateTiming(e,t){this.customTiming[e]||(this.addTiming(`${e}-setState`),this.addRenderTiming(e),t&&this.updateCategory(t))}afterFrame(){return this.afterFramePromise||(this.afterFramePromise=new Promise((e=>{window.requestAnimationFrame((()=>{this.once("_messagechannel",(()=>{this.afterFramePromise=null,e()})),this.messageChannel.port1.postMessage(null)}))}))),this.afterFramePromise}async addRenderTiming(e,t){this.customTiming[e]||("visible"===document.visibilityState&&await this.afterFrame(),this.addTiming(e),t&&this.updateCategory(t),e!==l||this.hasReportedFmp||this.report())}report(){var e;const t=(0,s.Z)(performance.timing,["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"]),n=t.navigationStart,r=this.getMetrics(n,t);Object.assign(r,this.customTiming);const o=this.getCategoryToReport();(0,a.hC)({module:"fmp",scene:o.scene,categories:o,metrics:r}),(0,c.g)({eventName:"heycan_performance_timing",params:{pid:null===(e=i.Z.config)||void 0===e||null===(e=e.call(i.Z))||void 0===e?void 0:e.pid,...o,...r}}),this.hasReportedFmp=!0,this.emit("fmp",{startTime:n,category:o})}getMetrics(e,t){const n={};return Object.keys(t).forEach((r=>{t[r]&&(n[r]=t[r]-e)})),n}}let u=null;function h(){return u||(u=new d),u}function p(){return u}},71166:(e,t,n)=>{n.d(t,{w:()=>u});var r=n(88154),s=n(79292),i=n(79337),o=n(99084),a=n(71995);class c{constructor(e){var t;this.options=e,(0,r.Z)(this,"cacheData",null),this.cacheData=null!==(t=this.options.initCacheData)&&void 0!==t?t:null}async get(){if(this.cacheData&&!this.isExpired()){const{data:e}=this.cacheData;return this.silentRefreshIfNeeded(),e}return this.update()}getSync(){var e,t;return null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null}isExpired(){if(!this.cacheData)return!0;const{expireTime:e,refreshTime:t}=this.cacheData,n=Date.now();return n<t||e<=n}needSilentRefresh(){if(!this.cacheData)return!0;const{silentRefreshTime:e}=this.cacheData;return e<=Date.now()}async silentRefreshIfNeeded(){this.needSilentRefresh()&&await this.update()}async update(){var e,t;const{data:n,expireTime:r,silentRefreshTime:s}=await this.options.refresh(null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null);return this.cacheData={data:n,expireTime:r,silentRefreshTime:s,refreshTime:Date.now()},n}}var l=n(45394),d=n(22816);class u{constructor(){(0,r.Z)(this,"objectUploadType",l.AJ.Object),(0,r.Z)(this,"uploadConfigsCache",new c({refresh:async()=>{const[e,t,n]=await Promise.all([this.getUploadConfigByScene(l.AJ.Video),this.getUploadConfigByScene(l.AJ.Image),this.getUploadConfigByScene(this.objectUploadType)]),r={videoUploadConfig:e,imageUploadConfig:t,objectUploadConfig:n},s=new Date(t.currentTime).getTime();return{data:r,refreshTime:s,expireTime:Math.min(new Date(t.expiredTime).getTime(),s+18e5),silentRefreshTime:s+6e5}}}))}useVodObject(){this.objectUploadType=l.AJ.VodObject}async getUploadConfigs(e){try{return await this.uploadConfigsCache.get()}catch(t){throw(0,a.RF)(`[UploadConfigService] getUploadConfigs failed for ${e}`,t,{action:e}),t}}updateCache(){return this.uploadConfigsCache.update()}async refreshUploadConfigsIfNeeded({when:e,logPrefix:t,errorMsg:n=s.I18n.t("pc_sticker_failed_retry_web")}){if(this.uploadConfigsCache.isExpired())return o.c.show((async()=>{try{await this.uploadConfigsCache.update()}catch(r){throw i.FN.error(n),(0,a.RF)(`${t} refreshUploadConfigs failed when ${e}`,r,{action:e}),r}}))}async getUploadConfigByScene(e){const t=await(0,l._M)({scene:e});if(!t.upload_domain)throw new d.w("upload_domain is empty",{scene:e});return{currentTime:t.current_time,expiredTime:t.expired_time,accessKey:t.access_key_id,secretKey:t.secret_access_key,sessionToken:t.session_token,hostDomain:t.upload_domain,nameSpace:2===t.space_type?"":t.space_name,serviceId:2===t.space_type?t.space_name:"",region:t.region}}}},45725:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(99048);function s(e){console.log("[sendLog]",e.eventName,e.params),(0,r.Z)(e)}},13805:(e,t,n)=>{n.d(t,{l:()=>s});var r=n(88154);class s{constructor(){(0,r.Z)(this,"lockedKey",new Set)}async lock(e,t){if(this.lockedKey.has(e))return null;this.lockedKey.add(e);try{return await t()}finally{this.lockedKey.delete(e)}}}},15027:(e,t,n)=>{n.d(t,{q:()=>i});var r=n(88154),s=n(60963);class i{constructor(e){this.props=e,(0,r.Z)(this,"fetchStatus",{isPending:!1,isFailed:!1,hasFetched:!1,fetchVersion:0,hasMore:!1}),(0,r.Z)(this,"nextCursor",null),(0,r.Z)(this,"fetchContext",null),(0,s.ky)(this,{fetchContext:!1})}async fetchFirstPage(e){const t=this.fetchStatus.isFailed;try{e.isRefresh||this.runStartAction();const t=await this.props.fetchFirstPage(this.fetchContext),{action:n,hasMore:r,nextCursor:s}=this.normalizeFetchResult(t);this.runSuccessAction((()=>{this.fetchStatus.fetchVersion+=1,this.fetchStatus.hasMore=null!=r&&r,this.nextCursor=null!=s?s:null,n()}))}catch(n){this.runFailureAction({isFirstPage:!0,isRefresh:e.isRefresh});const r=e.isRefresh&&"refresh_first_page"||t&&"retry_fetch_first_page"||"init_fetch_first_page";throw this.props.slardarErrorLog(r,n,{}),n}}async fetchMorePage(){if(!this.props.fetchMorePage)throw new Error("props.fetchMorePage not implemented");const e=this.fetchStatus.isFailed,t=this.nextCursor;try{this.runStartAction();const e=await this.props.fetchMorePage(t,this.fetchContext),{action:n,hasMore:r,nextCursor:s}=this.normalizeFetchResult(e);this.runSuccessAction((()=>{this.fetchStatus.hasMore=null!=r&&r,this.nextCursor=null!=s?s:null,n()}))}catch(n){this.runFailureAction({isFirstPage:!1,isRefresh:!1});const r=e?"retry_fetch_more_page":"fetch_more_page";throw this.props.slardarErrorLog(r,n,{cursor:t}),n}}normalizeFetchResult(e){return"function"==typeof e?{action:e,hasMore:!1,nextCursor:null}:e}runStartAction(){this.fetchStatus.isPending=!0,this.fetchStatus.isFailed=!1}runSuccessAction(e){this.fetchStatus.isPending=!1,this.fetchStatus.isFailed=!1,this.fetchStatus.hasFetched=!0,e()}runFailureAction(e){var t,n;this.fetchStatus.isPending=!1,this.fetchStatus.isFailed=!0,null===(t=(n=this.props).actionOnFailure)||void 0===t||t.call(n,e,this.fetchContext)}async initFetchFirstPage(e){this.fetchContext=e;const{isPending:t,hasFetched:n}=this.fetchStatus;if(!t&&!n)return this.fetchFirstPage({isRefresh:!1})}async retryFetchFirstPage(){const{isPending:e}=this.fetchStatus;if(!e)return this.fetchFirstPage({isRefresh:!1})}async refreshFirstPage(){const{isPending:e}=this.fetchStatus;if(!e)return this.fetchFirstPage({isRefresh:!0})}async retryFetchMorePage(){const{isPending:e,hasMore:t}=this.fetchStatus;if(!e&&t)return this.fetchMorePage()}async fetchMorePageOnScrollToEnd(){const{isPending:e,hasMore:t,isFailed:n}=this.fetchStatus;if(!e&&t&&!n)return this.fetchMorePage()}reduceToFirstPageStatus(e){this.nextCursor=e,this.fetchStatus.hasMore=!0}}},42350:(e,t,n)=>{n.d(t,{L:()=>i,Z:()=>o});var r=n(39591);var s=function(e){return e[e.Unknown=0]="Unknown",e[e.InfoDialog=1]="InfoDialog",e[e.AlertDialog=2]="AlertDialog",e}(s||{});let i=function(e){return e.Unknown="Unknown",e.Confirm="confirm",e.Cancel="cancel",e.Optional="optional",e.CheckboxClick="checkboxClick",e}({});class o{static async callDialog(e,t){const{onConfirm:n,onCancel:s,...o}=t,a={id:"pc_heycan",type:e,...o},c=await(0,r.ZP)(a);let l=i.Cancel;return l=void 0!==c.data?c.data.actionType:c.actionType,l===i.Confirm&&(null==n||n()),l===i.Cancel&&(null==s||s()),l}static async confirm(e){return this.callDialog(s.InfoDialog,e)}static async warn(e){return this.callDialog(s.AlertDialog,e)}}},39106:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(88269),s=n(54275),i=n(9995);const o=()=>{const{i18n:e}=(0,i.$)();return{getDisplayLength:(0,s.Z)((t=>(0,r.xB)({len:t,i18n:e})))}}},81071:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(60963),s=n(75255),i=n(18571);const o=e=>{const t=(0,s.fv)((()=>({disposer:null,resolve:null,get watchResult(){return e.watch()},start:()=>(t.stop(),new Promise((e=>{t.resolve=e,t.disposer=(0,r.EH)((()=>{t.watchResult&&(e(),t.stop())}))}))),stop(){var e;null===(e=t.disposer)||void 0===e||e.call(t),t.disposer=null,t.resolve=null}})));return(0,i.useEffect)((()=>()=>t.stop()),[]),t}},71025:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(18571),s=n(61679);function i(){const e=(0,r.useRef)(!1);var t;e.current||(e.current=!0,null===(t=(0,s.md)())||void 0===t||t.addRenderTiming("renderInitPage"))}},39931:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(18571),s=n(59359),i=n(71995);const o=e=>{(0,r.useEffect)((()=>{(0,s.Td)({title:e.title}),(0,i.$G)({pid:e.pid})}),[])}},77936:(e,t,n)=>{n.d(t,{u:()=>i});var r=n(54275),s=n(18571);function i(e){const t=(0,r.Z)((()=>e.getInputElem())),n=(0,s.useRef)(null);return(0,s.useLayoutEffect)((()=>{const e=t();n.current&&e&&([e.selectionStart,e.selectionEnd]=n.current,n.current=null)})),{saveSelectionIfNeeded:e=>{const r=t();null!=(null==r?void 0:r.selectionStart)&&null!=r.selectionEnd&&e!==r.value&&(n.current=[Math.min(e.length,r.selectionStart),Math.min(e.length,r.selectionEnd)])}}}},12599:(e,t,n)=>{function r(e,t){return t[0]<=e&&e<=t[1]}n.d(t,{aF:()=>u});const s=[[8960,9215],[9728,55215],[65280,65519]];function i(e){const t=e.charCodeAt(0);return e.length>1||s.some((e=>r(t,e)))}const o=8205,a=[127462,127487],c=[[8419,8419],[65024,65039],[127995,127999],[917536,917631],[768,879],[3633,3633],[3636,3642],[3655,3662]];function l(e,t){const n=e.normalize(),s=[];let i=0,l=0,d="";for(;i<n.length;){const e=n.codePointAt(i),u=e>65535?2:1,h=n.slice(i,i+u),p=s.length-1,m=p>=0?s[p]:null;if(p>=0&&(e===o||l===o||r(e,a)&&r(l,a)&&m===d||c.some((t=>r(e,t))))&&(s[p]+=h),(p<0||m===s[p])&&h){if(null!=t&&t.maxLength&&s.length>=t.maxLength)return s;s.push(h)}l=e,d=h,i+=u}return s}function d(e,t,n){let r=0,s=0;for(;s<e.length;){const o=e[s],a=i(o)?2:1;if(r+=a,r>t&&s>0){s-=1,r-=a;break}if(n(o),r>=t)break;s+=1}return{segIndex:s,count:r}}function u(e,t){if(2*e.length<=t)return e;const n=l(e,{maxLength:t});let r="";return d(n,t,(e=>r=`${r}${e}`)),r}},33876:(e,t,n)=>{n.d(t,{ws:()=>h});var r=n(50140),s=n.n(r),i=n(79292),o=n(1536),a=n(42012),c=n(22816),l=n(45394);let d=function(e){return e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.Object=9]="Object",e}({});const u={[d.Video]:"video",[d.Image]:"image",[d.Object]:"object"};const h=e=>new Promise((async(t,n)=>{const{file:r,onProgress:h,onSuccess:p,onError:m,getUploadToken:g}=e,f=(v=r.type).includes("image")?d.Image:v.includes("video")?d.Video:d.Object;var v;const x=new Error("").stack,w=i.I18n.t("pc_upload_fail_web");let y=new c.w("upload failed: getUploadConfig error",{displayMessage:w,uploadType:f,uploadStack:x});const C=await async function(e){var t;const{uploadType:n,getUploadToken:r}=e,s=await(null!==(t=null==r?void 0:r())&&void 0!==t?t:(0,l._M)({scene:n})),i={CurrentTime:s.current_time,ExpiredTime:s.expired_time,SessionToken:s.session_token,AccessKeyId:s.access_key_id,SecretAccessKey:s.secret_access_key};return{config:{userId:a.$.userInfo.uid,appId:Number(o.appModel.appInfo.appID),region:s.region,videoHost:`https://${s.upload_domain}`,imageHost:`https://${s.upload_domain}`,useServerCurrentTime:!0,imageConfig:{serviceId:s.space_name},videoConfig:{spaceName:s.space_name,processAction:[{name:"GetMeta"},{name:"Snapshot",input:{SkipBlackDetect:!1,SnapshotTime:0}}]},objectConfig:{spaceName:1===s.space_type?s.space_name:void 0,serviceId:2===s.space_type?s.space_name:void 0}},stsToken:i}}({uploadType:f,getUploadToken:g}).catch((e=>{y=e||y}));if(!C)return null==m||m({status:-1,statusText:w}),void n(y);null==h||h({total:100,loaded:20});const{config:_,stsToken:b}=C,j=new(s())(_);j.on("complete",(e=>{null==h||h({total:100,loaded:100}),null==p||p(e),t(e)})),j.on("progress",(e=>{null==h||h({total:100,loaded:20+e.percent/100*80})})),j.on("error",(e=>{var t,r;null==m||m({status:(null===(t=e.extra)||void 0===t?void 0:t.errorCode)||-1,statusText:w});const s=new c.w("upload failed",{code:String((null===(r=e.extra)||void 0===r?void 0:r.errorCode)||-1),displayMessage:w,uploadStack:x});n(s)}));const k=j.addFile({file:r,stsToken:b,type:u[f]});j.start(k),null==h||h({total:100,loaded:20})}))},76937:(e,t,n)=>{function r(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e?`${e}-${t}`:t}n.d(t,{V:()=>r})},33311:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(18571);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{fill:"#6C6C6C",fillRule:"evenodd",d:"M6.875 6.154a.22.22 0 0 0 0-.308L4.447 3.418A.783.783 0 1 1 5.554 2.31l3.415 3.415a.387.387 0 0 1 0 .548L5.554 9.689a.783.783 0 1 1-1.107-1.107z",clipRule:"evenodd"})))},6109:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(18571);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m3 6 2.143 2L9 4"})))},69687:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(18571);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{fill:"#D4D4D4",d:"M6.708 6 11 10.292l-.708.708L6 6.708 1.708 11 1 10.292 5.292 6 1 1.708 1.708 1 6 5.292 10.292 1l.708.708z"})))},61673:(e,t,n)=>{n.d(t,{r:()=>o});var r,s=n(18571);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const o=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),r||(r=s.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m4 4 4 4M8 4 4 8"})))},95108:(e,t,n)=>{n.d(t,{Z:()=>r});const r={macos:"macos",windows:"windows",heycanRatioGroupEllipsis:"heycan-ratio-group-ellipsis",heycanCheckboxEllipsis:"heycan-checkbox-ellipsis",heycanFormFieldEllipsis:"heycan-form-field-ellipsis",heycanPopoverWrapperClearStyle:"heycan-popover-wrapper-clear-style",heycanTextareaThemeGrey:"heycan-textarea-theme-grey",heycanInputThemeGrey:"heycan-input-theme-grey",protocol:"protocol-VspS8l",content:"content-OyCrKs",withBorder:"withBorder-jbe4Zm",flexHeight:"flexHeight-OlM20e",gradientWrap:"gradientWrap-xsIHas",tips:"tips-_7MTVF",footer:"footer-PL68kt",btn:"btn-az9uHG",unreadTips:"unreadTips-rcFBJM",unreadTipsText:"unreadTipsText-HZIAAh",triangleIcon:"triangleIcon-aHMlc1",confirmArea:"confirmArea-HME5C1",confirmCheckbox:"confirmCheckbox-lf6E1b",confirmCheckboxText:"confirmCheckboxText-Tkueuw",confirmCheckboxProtocolTitle:"confirmCheckboxProtocolTitle-WvrrOC",protocolContent:"protocolContent-jt8xnN",authorAgreementSection:"authorAgreementSection-jQSe0F",title:"title-LtvpOX",desc:"desc-fU1I4k"}},605:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-vUjaY_",icon:"icon-Rvn8cb",yellowIcon:"yellowIcon-ZUE7YW",yellowPoint:"yellowPoint-D92cGf",text:"text-FIGDkp",error:"error-CX16ns",checked:"checked-ot4aGx",tooltip:"tooltip-CeFJfC",errorTooltip:"errorTooltip-VmBB_H"}},45092:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-LbkeWz",container:"container-jnsvSx",card:"card-yURKE_"}},67037:(e,t,n)=>{n.d(t,{Z:()=>r});const r={page:"page-HRk3ka",content:"content-LGuZmP",requirement:"requirement-sURfql",instruction:"instruction-eUXPJ0",mainForm:"mainForm-PzQVLp",footer:"footer-t1kXBF"}},24307:(e,t,n)=>{n.d(t,{Z:()=>r});const r={root:"root-QktMQ3",title:"title-QI6laf",right:"right-vx9IoL",closeIcon:"closeIcon-Z6vdI8"}}}]);