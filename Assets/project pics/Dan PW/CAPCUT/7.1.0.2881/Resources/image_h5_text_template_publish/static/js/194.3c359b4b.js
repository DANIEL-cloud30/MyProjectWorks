"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[194],{4281:(e,t,n)=>{n.d(t,{i:()=>o});const o={macos:"macos",windows:"windows",heycanRatioGroupEllipsis:"heycan-ratio-group-ellipsis",heycanCheckboxEllipsis:"heycan-checkbox-ellipsis",heycanFormFieldEllipsis:"heycan-form-field-ellipsis",heycanPopoverWrapperClearStyle:"heycan-popover-wrapper-clear-style",heycanTextareaThemeGrey:"heycan-textarea-theme-grey",heycanInputThemeGrey:"heycan-input-theme-grey"}},47585:(e,t,n)=>{n.d(t,{vc:()=>a.v,ZP:()=>c,S1:()=>i.Wq});var o=n(18571),s=n(79134),i=n(3703),r=n(72322),a=n(26193);const c=()=>((0,o.useEffect)((()=>{(0,i.ZP)()}),[]),(0,r.jsx)(s.j3,{}))},26193:(e,t,n)=>{n.d(t,{v:()=>i,w:()=>s});let o={};function s(e){o=e}const i=()=>({intl:{clientOptions:{getOverrideOptions:()=>o}}})},1536:(e,t,n)=>{n.d(t,{appModel:()=>p});var o=n(88154),s=n(60963),i=n(30227),r=n(59359),a=n(71995),c=n(26193);const p=new class{constructor(){(0,o.Z)(this,"appInfo",{language:"",appID:"",region:"",appVersion:"",appVersionName:void 0,currentScene:"",did:""}),(0,o.Z)(this,"debugInfo",{useBOE:!1,boeChannel:"",usePPE:!1,ppeChannel:""}),(0,o.Z)(this,"isInitFailed",!1),(0,o.Z)(this,"isInited",!1),(0,o.Z)(this,"initAppInfoPromise",null),(0,s.ky)(this)}async initAppInfo(){return this.isInitFailed=!1,this.initAppInfoPromise||(this.initAppInfoPromise=this.initAppInfoImpl().catch((e=>{throw this.initAppInfoPromise=null,e}))),this.initAppInfoPromise}async initAppInfoImpl(){console.log("start");try{const e=await(0,r.BN)();if((0,s.z)((()=>{this.appInfo={...e,appVersionName:this.getAppVersionName(e.appVersion)}})),console.log("done appInfo",e.language,e.appID,e.region),(0,a.$G)({deviceId:this.appInfo.did,ctx:{appVersion:this.appInfo.appVersionName,os:e.os,osVersion:e.osVersion,language:this.appInfo.language,region:this.appInfo.region}}),"undefined"!=typeof window){const e="lvoverus_web";"function"==typeof window.Slardar&&window.Slardar("context.set","appxpcode",e),"function"==typeof window.slardar&&window.slardar("context.set","appxpcode",e)}(0,c.w)({fallbackHash:"9b4fb20929b38fe887c14c98c2200a82",lazyUpdate:!0})}finally{await i.ZP.changeLanguage({locale:this.appInfo.language})}return this.appInfo}getAppVersionName(e){const t=Number.parseInt(e,10);if(!t)return;const n=Math.floor(t/Math.pow(256,2)),o=t-n*Math.pow(256,2),s=Math.floor(o/256);return`${n}.${s}.${o-256*s}`}setInitFailed(){this.isInitFailed=!0}setInited(){this.isInited=!0}async initDebugInfo(){}}},22816:(e,t,n)=>{n.d(t,{w:()=>s});var o=n(88154);class s extends Error{constructor(e,t){super(e),this.context=t,(0,o.Z)(this,"name","HeycanError")}}},21135:(e,t,n)=>{n.d(t,{oh:()=>r});var o=n(67744),s=n(61053);class i extends Error{constructor(e,t,n){super(t),this.code=e,this.msg=t,this.error=n}}const r=async(e,t,n)=>{const{timeout_ms:r=3e3,options:a={},...c}=n||{},p=new s.B;return Promise.race([e(c,a).finally((()=>p.cancel())),new Promise(((e,n)=>{if(!r)return;const s=new i(o.tu.JsbOperationTimeout,`timed out by fe, bridgeName=${t}, timeout=${r}`);p.timeout(r).then((()=>n(s)))}))])}},15994:(e,t,n)=>{n.d(t,{c:()=>i});var o=n(13818);const{userAgent:s}=navigator,i=(0,o.Z)((()=>/macintosh/i.test(s)&&!/(ipod|iphone|ipad)/i.test(s)));(0,o.Z)((()=>/windows/i.test(s)))},88269:(e,t,n)=>{n.d(t,{ZP:()=>o,xB:()=>s});function o(e,t,n){if(void 0===t)return JSON.parse(e);try{return JSON.parse(e)||t}catch(o){return n&&n(o),t}}function s(e){const{len:t,i18n:n}=e,[o]=(n.language||"").split("-");return"zh"===o?Math.floor(t/2):t}},3703:(e,t,n)=>{n.d(t,{Wq:()=>p,ZP:()=>l,cb:()=>c});n(60191);var o=n(4281),s=n(1536),i=n(42012),r=n(15994),a=n(71995);async function c(e){try{await s.appModel.initAppInfo(),await i.$.initUserInfo(),s.appModel.setInited()}catch(t){if((0,a.RF)("initAppAndUserInfo failed",t),s.appModel.setInitFailed(),null!=e&&e.throwOnError)throw t}}async function p(){try{await s.appModel.initAppInfo()}catch(e){(0,a.RF)("tryInitCoreAppInfo failed",e),s.appModel.setInitFailed()}}function l(){document.oncontextmenu=()=>!1,document.ondragover=e=>e.preventDefault(),document.ondrop=e=>e.preventDefault(),document.addEventListener("keydown",(e=>{("w"===e.key&&e.metaKey||"w"===e.key&&e.ctrlKey)&&e.preventDefault()}));const e=(0,r.c)()?o.i.macos:o.i.windows;document.body.classList.add(e),s.appModel.initDebugInfo(),c()}},9908:(e,t,n)=>{n.d(t,{v_:()=>g});var o=n(13818),s=n(2237),i=n(79292);const r=["/lv/v1/user/","/lv/v1/ad_maker/","/lv/v1/commerce/","/lv/v1/creator/"],a=["/artist/v1/homepage/get_effect_list"];var c=n(21443),p=n(1536),l=n(22816),d=n(71995),u=n(59359);let h=!1;const f=(0,o.Z)((async()=>{return"true"===(await async function(e,t){try{return(await(0,u.Gw)({nodeKey:e,keys:t})).nodeKey}catch(n){(0,d.RF)("[getSettings] error",n,{nodeKey:e,keys:t})}return{}}("abtest_use_new_host",["enabled"])).enabled}));async function m(e,t){const n=await f(),o=n&&h,u=n&&!h,g=e.startsWith("/")?`${function(e,t){console.log("lzj: us");const n=(null==t?void 0:t.useNewHost)||!1;if(e){if(r.some((t=>e.startsWith(t))))return n?"https://feed-api.capcutapi.com":"https://feed-api.capcut.com";if(a.includes(e))return n?"https://heycan-api.capcutapi.com":"https://api-heycan-pc-sg.capcut.com"}return n?"https://editor-api.capcutapi.com":"https://editor-api-sg.capcut.com"}(e,{useNewHost:u})}${e}`:e,y=s.parseUrl(g),{region:w,language:v,appVersionName:I}=p.appModel.appInfo,b={url:s.stringifyUrl({url:y.url,query:{...!t.disableRegion&&{region:w},language:v,version_name:I,...y.query}}),method:t.method,needCommonParams:!0,header:{"Content-Type":"application/json",...t.headers},header_signing:!0,...t.data&&{data:JSON.stringify(t.data)},...t.timeout&&{timeout_ms:t.timeout}},$=(n,s,i)=>{const r={rawUrl:e,useNewHost:u,disableNewHostByLoginError:o,...b,...i};"error"===n?(0,d.RF)(s,null,r):t.onlyLogOnError||(0,d.c6)(s,r)},_=e=>i.I18n.t("pc_stickers_prompt_failed_{X}",{X:e});$("info",`[request] start - ${e}`);let x=null;const Z=performance.now();try{x=await(0,c.Z)(b)}catch(k){var S,M;const n=performance.now()-Z>=(t.timeout||2e4),o=`[request] ${n?"timeout":"failed"} - jsb - ${e}`;throw $("error",o,{code:String(null!==(S=k.code)&&void 0!==S?S:-1),errorText:JSON.stringify(k),timeout:n}),new l.w(o,{code:String(null!==(M=k.code)&&void 0!==M?M:-1),displayMessage:_("jsb")})}const P={httpCode:String(x.httpCode),code:x.response.ret,errmsg:x.response.errmsg,logid:x.response.logid||x.response.log_id};if(200!==x.httpCode){const t=`[request] failed - httpCode ${x.httpCode} - ${e}`;throw $("error",t,P),new l.w(t,{...P,displayMessage:_(`http ${x.httpCode}`)})}if("success"!==x.response.errmsg){const n=`[request] failed - ${P.code} ${P.errmsg} - ${e}`;if($("error",n,P),u&&"1015"===String(P.code)&&location.pathname.endsWith("/publish-text-template.html"))return h=!0,m(e,t);throw new l.w(n,{...P,displayMessage:_(`${P.code} ${P.errmsg}`)})}return $("info",`[request] success ${e}`,P),x.response.data}function g(e,t,n){return m(e,{method:"POST",data:t,...n})}},71995:(e,t,n)=>{n.d(t,{$G:()=>f,RF:()=>p,c6:()=>c,hC:()=>m});var o=n(20322),s=n(41723),i=n.n(s);const r=()=>i()().format("MM-DD HH:mm:ss.SSSZ");function a(e,t){try{var n,o;const s=String(e).trim(),i=null!==(n=null===(o=s.match(/^\[\w+\]/))||void 0===o?void 0:o[0])&&void 0!==n?n:"",r=i.slice(1,-1),a=s.slice(i.length).replace(/\{\S*?\}/g,"").trim().replace(/[\s:-]+/g,"-");return{module:r,scene:t.scene?`${a}-${t.scene}`:a}}catch(s){return{module:"",scene:t.scene||""}}}async function c(e,t){const n=`${r()} ${e}`,{module:s,scene:i}=a(e,{...t}),c={...t,module:s,scene:i};(0,o.Z)("sendLog",{level:"info",content:n,extra:c})}async function p(e,t,n){const s="HeycanError"===(null==t?void 0:t.name)?t.context:t;t&&(0,o.Z)("captureException",t,{...s,...n});const i=`${r()} ${e}`,{module:c,scene:p}=a(e,{...s,...n}),l={stack:null==t?void 0:t.stack,message:null==t?void 0:t.message,...s,...n,module:c,scene:p};(0,o.Z)("sendLog",{level:"error",content:i,extra:l}),console.error(`[slardar] ${i}`,{...l}),t&&console.error(t)}const l=[],d=1e3;function u(e){const t=e.post;e.post=n=>{const{success:o,fail:s}=n;t({...n,success:t=>{(()=>{if(0===l.length)return;const t=l.shift();t&&e.post(t)})(),null==o||o(t)},fail:e=>{l.push(n),l.length>d&&l.shift(),null==s||s(e)}})}}let h=!1;function f(e){h||(h=!0,o.Z.on("init",(()=>{var e;const t=null===(e=o.Z.config())||void 0===e?void 0:e.transport;t&&u(t)})));const{ctx:t,...n}=e;(0,o.Z)("config",n),t&&o.Z.context&&(0,o.Z)("context.merge",t)}function m(e){const{module:t,scene:n,metrics:s,categories:i}=e;(0,o.Z)("sendEvent",{name:"heycan_performance_timing",metrics:s,categories:{...i,module:t,scene:n}})}},571:(e,t,n)=>{n(95242),n(13980),n(72045),n(32706),n(16373),n(65667),n(41194),n(73430),n(13836),n(14872),n(77784),n(75070),n(18052),n(67272),n(29864),n(45757),n(31500),n(77345),n(35390),n(60568),n(86050),n(25739),n(14680),n(70166),n(47684),n(28601),n(75802),n(22374),n(64077),n(74702),n(49102),n(24011),n(24709),n(23746),n(12424),n(92803),n(83690),n(35066),n(86393),n(6127),n(39920),n(61527),n(79618),n(70547),n(14028),n(85232),n(5679),n(44030),n(61806),n(27044),n(96917),n(37879),n(8206),n(99094),n(54325),n(86871),n(38260),n(99448),n(21211),n(86428),n(98636),n(64879),n(83416),n(32074),n(31584),n(48998),n(25547),n(20993),n(30656),n(60078),n(61093),n(53913),n(35783),n(27748),n(70766),n(96759),n(52731),n(52762),n(50157),n(7871),n(45459),n(39768),n(53756),n(8686),n(8516),n(63749),n(65442),n(4826),n(14338),n(65885),n(86877),n(85008),n(49006),n(45316),n(64048),n(19899),n(15854),n(40229),n(95017),n(78328),n(7518),n(98940),n(31607),n(21029),n(30506),n(63034),n(39336),n(81533),n(76),n(99852),n(3753),n(93743),n(58631),n(92271),n(77923),n(41245),n(77363),n(68497),n(3587),n(83550),n(63204),n(9591),n(73420),n(76778),n(85589),n(21528),n(18865),n(4461),n(75147),n(238),n(20582),n(20274),n(78318),n(81951),n(18397),n(9228),n(50888),n(95508),n(60330),n(7304),n(95902),n(68155),n(94405),n(59569),n(93485),n(24271),n(24161),n(40459),n(43618),n(82669),n(27027),n(10346),n(6198),n(95409),n(18929),n(64559),n(14485),n(80314),n(33752),n(43667),n(48974),n(9606),n(46134),n(79560),n(85569),n(88977),n(84340),n(65882),n(5974),n(57281),n(70565),n(82735),n(24741),n(76348),n(47883),n(78702),n(98491),n(18762),n(69227),n(77394),n(61283),n(53425),n(1325),n(70501),n(91551),n(89738),n(80442),n(51144),n(76434),n(12931),n(60246),n(26758),n(11518),n(77666),n(32244),n(77036),n(58846),n(98849),n(96147),n(7935),n(48473),n(10257),n(39883),n(37232),n(37117),n(78250),n(4888),n(48014),n(67558),n(45587),n(22295),n(41381),n(12558),n(80124),n(17332),n(57359),n(28512),n(12201),n(68374),n(30526),n(71425),n(85627),n(49058),n(45195),n(474),n(69684),n(64656),n(63198),n(84740),n(75512),n(38693),n(92785),n(28808),n(57689),n(14086),n(2),n(87149),n(4843),n(13940),n(91109),n(78816)},73025:()=>{window.__assetPrefix__="."}}]);