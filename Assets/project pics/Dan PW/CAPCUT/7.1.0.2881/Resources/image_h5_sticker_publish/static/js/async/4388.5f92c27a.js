/*! For license information please see 4388.5f92c27a.js.LICENSE.txt */
(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[4388],{50140:function(e,t,r){e.exports=function(){"use strict";var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var i=n;function s(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,o,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(c(r=this._events[e]))return!1;if(s(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(a(r))for(i=Array.prototype.slice.call(arguments,1),n=(l=r.slice()).length,o=0;o<n;o++)l[o].apply(this,i);return!0},n.prototype.addListener=function(e,t){var r;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=c(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var r,n,i,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||s(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(o=i;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)};const l={debug:!1,region:"i18n",external:{},getSliceFunc:null,uploadSliceCount:5,retryUploadTime:2,retryProcess:!0,retryProcessTime:3,retryTaskTime:2,progressMonitorTime:10,progressMonitorSpeed:50,schema:"https",enableDiskBreakpoint:!0,replace:{},fixedSliceSize:!1,selectRouteFileSize:1048576,enableDmSchemaHeader:!1,multiTabUploadOptimize:!0,forTikTok:!0},u={initUploadFileUrl:"{tosDomain}/upload/v1/{oid}?uploadmode={uploadmode}&phase=init",uploadChunkedUrl:"{tosDomain}/upload/v1/{oid}?uploadid={uploadId}&part_number={part_number}&phase=transfer",uploadMergeUrl:"{tosDomain}/upload/v1/{oid}?uploadmode={uploadmode}&phase=finish&uploadid={uploadId}",getUploadListUrl:"{tosDomain}/upload/v1/{oid}?uploadid={uploadId}&action=part_list",directUploadFileUrl:"{tosDomain}/upload/v1/{oid}",getUploadStatusUrl:"{tosDomain}/upload/v1/{oid}?uploadmode=stream&uploadid={uploadid}&size={size}&action=fetch_state&part_number={part_number}"};var d=function(){return(d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,t,r,n){return new(r||(r=Promise))((function(t,i){function s(e){try{a(n.next(e))}catch(t){i(t)}}function o(e){try{a(n.throw(e))}catch(t){i(t)}}function a(e){e.done?t(e.value):new r((function(t){t(e.value)})).then(s,o)}a((n=n.apply(e,[])).next())}))}function p(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var g,y=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var r=this;e&&t&&"function"==typeof t&&this.on(e,(function n(i){t(i),r.off(e,n)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var r=this._hooks[e].indexOf(t);-1!==r&&this._hooks[e].splice(r,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,r){if(r){if(!e)return;-1!==this._cache.indexOf(r)?this._emit(e,t):(this._hooksCache.hasOwnProperty(r)||(this._hooksCache[r]={}),this._hooksCache[r].hasOwnProperty(e)||(this._hooksCache[r][e]=[]),this._hooksCache[r][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&m(this._hooks[e]).forEach((function(e){try{e(t)}catch{}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),b=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},v=(g=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return g+=1}),_=function(e){return function(e,t,r){if("string"==typeof e&&"number"==typeof t&&"number"==typeof r){var n,i=[];r=r<=25?r:r%25;var s=String.fromCharCode(r+97);n=e.split(s);for(var o=0;o<n.length;o++){var a=parseInt(n[o],r);a=1*a^t;var c=String.fromCharCode(a);i.push(c)}return i.join("")}}(e,64,25)},w=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},S=function(e){var t=document.createElement("a");return t.href=e,t},E=function(e){var t={};try{var r=S(e).search;(r=r.slice(1)).split("&").forEach((function(e){var r,n,i=e.split("=");i.length&&(r=i[0],n=i[1]);try{t[r]=decodeURIComponent(void 0===n?"":n)}catch{t[r]=n}}))}catch{}return t},x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{};function T(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function k(e,t){return e(t={exports:{}},t.exports),t.exports}var C,O,z,I=k((function(e,t){var r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function i(){}function s(t,r,s){if(typeof document<"u"){"number"==typeof(s=e({path:"/"},i.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch{}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in s)s[c]&&(a+="; "+c,!0!==s[c]&&(a+="="+s[c].split(";")[0]));return document.cookie=t+"="+r+a}}function o(e,r){if(typeof document<"u"){for(var i={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var a=s[o].split("="),c=a.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(n.read||n)(c,l)||t(c),r)try{c=JSON.parse(c)}catch{}if(i[l]=c,e===l)break}catch{}}return e?i[e]:i}}return i.set=s,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,r){s(t,"",e(r,{expires:-1}))},i.defaults={},i.withConverter=r,i}((function(){}))},e.exports=r()})),M=function(e,t){try{return I.get(e)}catch{return""}},R=function(e,t,r,n){try{var i=n||document.domain,s=+new Date+(r||6048e5);I.set(e,t,{expires:new Date(s),path:"/",domain:i})}catch{}},D=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return M(e)},e.prototype.setCookie=function(e,t,r,n){R(e,t,r,n)},e}(),N={getItem:function(e){try{var t=localStorage.getItem(e),r=t;try{t&&"string"==typeof t&&(r=JSON.parse(t))}catch{}return r||{}}catch{}return{}},setItem:function(e,t){try{var r="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,r)}catch{}},removeItem:function(e){try{localStorage.removeItem(e)}catch{}},getCookie:function(e,t){return M(e)},setCookie:function(e,t,r,n){R(e,t,r,n)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch{return!1}}()},j={getItem:function(e){try{var t=sessionStorage.getItem(e),r=t;try{t&&"string"==typeof t&&(r=JSON.parse(t))}catch{}return r||{}}catch{}return{}},setItem:function(e,t){try{var r="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,r)}catch{}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch{}},getCookie:function(e,t){return M(e)},setCookie:function(e,t,r,n){R(e,t,r,n)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch{return!1}}()},A=function(){function e(e,t){this._storage=t&&"session"===t?j:!e&&N.isSupportLS?N:new D}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,r,n){this._storage.setCookie(e,t,r,n)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),L=function(){function e(e,t,r){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=r}return e.prototype.init=function(){var e,t=window.navigator.userAgent,r=window.navigator.language,n=document.referrer,i=n?S(n).hostname:"",s=E(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web",a=(null===(e=window.navigator.connection)||void 0===e?void 0:e.effectiveType)||"";this.utm=function(e,t,r,n){var i=new A(!1),s=new A(!1,"session"),o=e?"_tea_utm_cache_"+e:"_tea_utm_cache",a=e?"_$utm_from_url_"+e:"_$utm_from_url",c={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var h in u)u[h]&&(-1!==l.indexOf(h)?(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data[h]=u[h]):c[h]=u[h],d=!0);if(d)s.setItem(a,"1"),i.setCookie(o,JSON.stringify(c),n,r);else{var p=i.getCookie(o,r);p&&(c=JSON.parse(p))}1==s.getItem(a)&&(c.hasOwnProperty("tracer_data")||(c.tracer_data={}),c.tracer_data.$utm_from_url=1)}catch{return u}return c}(this.appid,s,this.domain,this.cookie_expire);var c=this.browser(),l=this.os();return{browser:c.browser,browser_version:c.browser_version,platform:o,os_name:l.os_name,os_version:l.os_version,userAgent:t,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(l.os_name),language:r,referrer:n,referrer_host:i,network_type:a,utm:this.utm,latest_data:this.last(n,i)}},e.prototype.last=function(e,t){var r="",n="",i="",s=location.hostname,o=!1;if(e&&t&&s!==t){r=e,n=t,o=!0;var a=E(e);a.keyword&&(i=a.keyword)}return{$latest_referrer:r,$latest_referrer_host:n,$latest_search_keyword:i,isLast:o}},e.prototype.browser=function(){var e,t,r="",n=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(r="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),n=i.substring(e+5)):(e=i.indexOf("Edg"),n=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(r="Microsoft Internet Explorer",n=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(r="Lark",n=i.substring(e+5,e+11)):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("TTWebView"))?(r="TTWebView",n=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(r="Chrome",n=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("Safari"))&&(r="Safari",n=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(n=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))&&(r="Firefox",n=i.substring(e+8)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(")"))&&(n=n.substring(0,t)),{browser:r,browser_version:n}},e.prototype.os=function(){for(var e="",t="",r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],n=0;n<r.length;n++){var i=r[n];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var s,o,a=function(e,t){var r=e.exec(t);return r&&r[1]?r[1]:""},c=function(e,t){var r=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return r?r.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=a(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(o=a(/Android ([\.\_\d]+)/,s=this.userAgent))||(o=a(/Android\/([\.\_\d]+)/,s)),t=o,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var l=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(l+7,l+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var r=navigator.userAgent.replace("Mozilla/5.0 (",""),n=r.indexOf(";");t=r.slice(0,n)}}catch{return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),U={sg_central:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",us_east:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",sg_central_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_east_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_ttp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",us_ttp_w:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",us_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z22z22z1nz4ez4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k",eu_ttp_gcp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",eu_central:"1fz22z22z1nz21z4mz4bz4bz18z25z21z1dz20z49z1kz1az21z4az19z27z22z1cz1gz1lz22z1jz18z1nz1gz4az1az1mz1k",eu_ttp_ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp_ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4dz4iz49z1lz1mz20z1kz18z1jz49z1lz1mz4dz18z4az22z1gz1iz22z1mz1iz25z4az1cz23"},P=function(){return new Set(Object.keys(U))},G=function(){return Object.keys(U)},Z={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",my:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z19z1bz49z1kz27z4az1jz18z20z1iz1mz1dz1dz1gz1az1cz4az1az1mz1k"},F={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},X={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},K={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};(z=C||(C={})).Init="init",z.Config="config",z.Start="start",z.Ready="ready",z.TokenComplete="token-complete",z.TokenStorage="token-storage",z.TokenFetch="token-fetch",z.TokenError="token-error",z.ConfigUuid="config-uuid",z.ConfigWebId="config-webid",z.ConfigDiD="config-deviceid",z.ConfigDomain="config-domain",z.CustomWebId="custom-webid",z.TokenChange="token-change",z.TokenReset="token-reset",z.ConfigTransform="config-transform",z.EnvTransform="env-transform",z.SessionReset="session-reset",z.SessionResetTime="session-reset-time",z.Event="event",z.Events="events",z.EventNow="event-now",z.CleanEvents="clean-events",z.BeconEvent="becon-event",z.SubmitBefore="submit-before",z.SubmitScuess="submit-scuess",z.SubmitAfter="submit-after",z.SubmitError="submit-error",z.SubmitVerify="submit-verify",z.DestoryInstance="destory-instance",z.LogSettingReady="log-setting-ready",z.Stay="stay",z.ResetStay="reset-stay",z.StayReady="stay-ready",z.SetStay="set-stay",z.RouteChange="route-change",z.RouteReady="route-ready",z.Ab="ab",z.AbVar="ab-var",z.AbAllVars="ab-all-vars",z.AbConfig="ab-config",z.AbExternalVersion="ab-external-version",z.AbVersionChangeOn="ab-version-change-on",z.AbVersionChangeOff="ab-version-change-off",z.AbOpenLayer="ab-open-layer",z.AbCloseLayer="ab-close-layer",z.AbReady="ab-ready",z.AbComplete="ab-complete",z.AbTimeout="ab-timeout",z.Profile="profile",z.ProfileSet="profile-set",z.ProfileSetOnce="profile-set-once",z.ProfileUnset="profile-unset",z.ProfileIncrement="profile-increment",z.ProfileAppend="profile-append",z.ProfileClear="profile-clear",z.Autotrack="autotrack",z.AutotrackReady="autotrack-ready",z.CepReady="cep-ready",z.TracerReady="tracer-ready",z.sessionRecord="session-record",z.SessionRecordStart="session-record-start",z.SessionRecordPause="session-record-pause",z.SessionRecordEnd="session-record-end",z.SessionRecordReport="session-record-report",z.TrackEventDuration="track-event-duration",z.TrackEventDurationStart="track-event-duration-start",z.TrackEventDurationEnd="track-event-duration-end",z.TrackEventDurationPause="track-event-duration-pause",z.TrackEventDurationResume="tracl-event-duration-resume",z.VisualCollectReady="visual-collect-ready",z.VisualApiReady="visual-api-ready",z.VisualApiUpdate="visual-api-update",function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(O||(O={}));var B=C,V=void 0,W=(new Date).getTimezoneOffset(),H=parseInt(""+-W/60,10),Y=60*W,$=function(){function e(e,t){var r=this;this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new L(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new A(!1,"session"),this.localStorage=new A(!1,"local"),this.channelUrl=this.getChannelForUrl(),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var s=this.localStorage.getItem(i);s&&1==s?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:V,user_type:V,user_id:V,user_is_auth:V,user_is_login:V,device_id:V,web_id:V,ip_addr_id:V,user_unique_id_type:V},header:{app_id:V,app_name:V,app_install_id:V,install_id:V,app_package:V,app_channel:V,app_version:V,ab_version:V,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:V,traffic_type:V,network_type:n.network_type,client_ip:V,device_brand:V,os_api:V,access:V,language:n.language,region:V,app_language:V,app_region:V,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:V,rnd:V,platform:n.platform,sdk_version:"5.3.5_oversea",sdk_lib:"js",province:V,city:V,timezone:H,tz_offset:Y,tz_name:V,sim_region:V,carrier:V,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:n.network_type?{network_type:n.network_type}:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData(),this.collect.on("route-change",(function(e){r.changeReferInfo(e.config)}))}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var r=e||this.initConfig.report_channel||this.initConfig.channel,n=this.getChannelDomain(r);n||(console.warn("current channel: "+r+" is not exist, use va instead, please check!!!!"),n=Z.sg),this.domain=_(n)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.getChannelDomain=function(e){var t,r,n=e||this.initConfig.report_channel||this.initConfig.channel;return P().has(n)?U[n]:"tcpy"===(null===(t=this.initConfig)||void 0===t?void 0:t.channel_type)?X[n]:"ttp"===(null===(r=this.initConfig)||void 0===r?void 0:r.channel_type)?K[n]:Z[n]},e.prototype.getChannelForUrl=function(){return this.initConfig.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:this.initConfig.report_channel?-1!==["sg_central","us_east"].indexOf(this.initConfig.report_channel)?{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}:{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var r=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+r]||(this.ab_uuid_cache[""+r]=[]),-1===this.ab_uuid_cache[""+r].indexOf(e)&&this.ab_uuid_cache[""+r].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var r="";return this.initConfig.caller&&(r="?sdk_version=5.3.5_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+r},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.changeReferInfo=function(e){var t=e;this.set({referrer:t.referrer});var r="";try{r=new URL(t.referrer).host}catch{}this.set({referrer_host:r||this.envInfo.header.referrer_host})},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(r){if(void 0!==e[r]&&null!==e[r]||t.delete(r),"traffic_type"===r&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[r]),"evtParams"===r)t.evtParams=d(d({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===r)t.evtParams=d(d({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===r&&"function"==typeof e[r])t.reportErrorCallback=e[r];else{var n="",i="";if(r.indexOf(".")>-1){var s=r.split(".");n=s[0],i=s[1]}n?"user"===n||"header"===n?t.envInfo[n][i]=e[r]:(t.envInfo.header.custom[i]=e[r],t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"})):Object.hasOwnProperty.call(t.envInfo.user,r)?(["user_type","ip_addr_id"].indexOf(r)>-1?t.envInfo.user[r]=e[r]?Number(e[r]):e[r]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(r)>-1?t.envInfo.user[r]=e[r]?String(e[r]):e[r]:["user_is_auth","user_is_login"].indexOf(r)>-1?t.envInfo.user[r]=!!e[r]:"device_id"===r&&(t.envInfo.user[r]=e[r]),t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"USER",common:r})):Object.hasOwnProperty.call(t.envInfo.header,r)?(t.envInfo.header[r]=e[r],t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:r})):(t.envInfo.header.custom[r]=e[r],t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"}))}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(t){console.log("get config stringify error "),this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var r=Object.assign(e,t);this.storage.setItem(this.configKey,r)}}catch(n){console.log("setStore error"),this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(t){return this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(r){this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:r.message,infoType:"sdk"}),console.log("delete error")}},e}(),J=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),Q=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var r=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(r=!0)})),r},e}(),q=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch{return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,r){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):r(!1)})):r(!1)}catch(n){console.log("AppLogBridge, error:"+JSON.stringify(n.stack)),r(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch{console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(r){"user_unique_id"===r?t.setUserUniqueId(e[r]):e[r]?t.addHeaderInfo(r,e[r]):t.removeHeaderInfo(r)}))}catch{console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch{console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch{console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch{console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch{console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge report success",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch{console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch{console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch{console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch{console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch{console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch{console.error("profileAppend error")}},e}(),ee=k((function(e,t){e.exports=function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){if(!a&&T)return T();if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,r,n)}return r[o].exports}for(var s=T,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){(function(e){var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,r=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;n=!0;for(var r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}n=!1}t.exports=function(e){1!==l.push(e)||n||r()}}).call(this,void 0!==x?x:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,r){var n=e(1);function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n((function(){var n;try{n=t(r)}catch(i){return s.reject(e,i)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}var o=f((function(){t(i,n)}));"error"===o.status&&n(o.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(i);return this.state!==c?d(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,c=-1,l=new this(i);++c<r;)u(e[c],c);return l;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==r||n||(n=!0,s.resolve(l,o))}),(function(e){n||(n=!0,s.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o,a=-1,c=new this(i);++a<r;)o=e[a],t.resolve(o).then((function(e){n||(n=!0,s.resolve(c,e))}),(function(e){n||(n=!0,s.reject(c,e))}));return c}},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==x?x:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}typeof Promise>"u"&&e(3);var o=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function l(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d=void 0,h={},p=Object.prototype.toString;function f(e){return"boolean"==typeof d?o.resolve(d):(t=e,new o((function(e){var r=t.transaction("local-forage-detect-blob-support","readwrite"),n=s([""]);r.objectStore("local-forage-detect-blob-support").put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))).then((function(e){return d=e}));var t}function m(e){var t=h[e.name],r={};r.promise=new o((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function g(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function y(e,t){var r=h[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function b(e,t){return new o((function(r,n){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);m(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var o=i.open.apply(i,s);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),n(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},r(t),g(e)}}))}function v(e){return b(e,!1)}function _(e){return b(e,!0)}function w(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function S(e){return s([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}(atob(e.data))],{type:e.type})}function E(e){return e&&e.__local_forage_encoded_blob}function x(e){var t=this,r=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(r,e,e),r}function T(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(s){if(n>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return o.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)})).then((function(){return function(e){m(e);for(var t=h[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,v(e).then((function(t){return e.db=t,w(e)?_(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw y(e,t),t}))}(e).then((function(){T(e,t,r,n-1)}))})).catch(r);r(s)}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=h[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=x);var s=[];function a(){return o.resolve()}for(var c=0;c<i.forages.length;c++){var l=i.forages[c];l!==t&&s.push(l._initReady().catch(a))}var u=i.forages.slice(0);return o.all(s).then((function(){return r.db=i.db,v(r)})).then((function(e){return r.db=e,w(r,t._defaultConfig.version)?_(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<u.length;n++){var s=u[n];s!==t&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(e,t){var r=this,n=new o((function(t,n){r.ready().then((function(){T(r._dbInfo,"readonly",(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var r=o.result;if(r){var n=r.value;E(n)&&(n=S(n));var i=e(n,r.key,a++);void 0!==i?t(i):r.continue()}else t()},o.onerror=function(){n(o.error)}}catch(c){n(c)}}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=new o((function(t,n){r.ready().then((function(){T(r._dbInfo,"readonly",(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),E(e)&&(e=S(e)),t(e)},o.onerror=function(){n(o.error)}}catch(a){n(a)}}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,r){var n=this;e=l(e);var i=new o((function(r,i){var s;n.ready().then((function(){return s=n._dbInfo,"[object Blob]"===p.call(t)?f(s.db).then((function(e){return e?t:(r=t,new o((function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)})));var r})):t})).then((function(t){T(n._dbInfo,"readwrite",(function(s,o){if(s)return i(s);try{var a=o.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),r(t)},o.onabort=o.onerror=function(){try{var e=c.error?c.error:c.transaction.error;i(e)}catch(t){i(t)}}}catch(l){i(l)}}))})).catch(i)}));return a(i,r),i},removeItem:function(e,t){var r=this;e=l(e);var n=new o((function(t,n){r.ready().then((function(){T(r._dbInfo,"readwrite",(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){n(o.error)},s.onabort=function(){try{var e=o.error?o.error:o.transaction.error;n(e)}catch(t){n(t)}}}catch(a){n(a)}}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){T(t._dbInfo,"readwrite",(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){try{var e=s.error?s.error:s.transaction.error;r(e)}catch(t){r(t)}}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){T(t._dbInfo,"readonly",(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){r(s.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new o((function(t,n){e<0?t(null):r.ready().then((function(){T(r._dbInfo,"readonly",(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName),a=!1,c=(o.openKeyCursor||o.openCursor).call(o);c.onsuccess=function(){var r=c.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(l){n(l)}}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){T(t._dbInfo,"readonly",(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName),o=(s.openKeyCursor||s.openCursor).call(s),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){r(o.error)}}catch(c){r(c)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,s=this;if(e.name){var c=e.name===r.name&&s._dbInfo.db?o.resolve(s._dbInfo.db):v(e).then((function(t){var r=h[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?c.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;m(e);var n=h[e.name],s=n.forages;t.close();for(var a=0;a<s.length;a++){var c=s[a];c._dbInfo.db=null,c._dbInfo.version=r}return new o((function(t,n){var s=i.open(e.name,r);s.onerror=function(e){s.result.close(),n(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<s.length;t++){var r=s[t];r._dbInfo.db=e,g(r._dbInfo)}})).catch((function(t){throw(y(e,t)||o.resolve()).catch((function(){})),t}))}})):c.then((function(t){m(e);var r=h[e.name],n=r.forages;t.close();for(var s=0;s<n.length;s++)n[s]._dbInfo.db=null;return new o((function(t,r){var n=i.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)g(n[t]._dbInfo)})).catch((function(t){throw(y(e,t)||o.resolve()).catch((function(){})),t}))}))}else n=o.reject("Invalid arguments");return a(n,t),n}},C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=/^~~local_forage_type~([^~]+)~/,z=9,I=z+4,M=Object.prototype.toString;function R(e){var t,r,n,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<a;t+=4)r=C.indexOf(e[t]),n=C.indexOf(e[t+1]),i=C.indexOf(e[t+2]),s=C.indexOf(e[t+3]),u[c++]=r<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&s;return l}function D(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=C[r[t]>>2],n+=C[(3&r[t])<<4|r[t+1]>>4],n+=C[(15&r[t+1])<<2|r[t+2]>>6],n+=C[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var N={serialize:function(e,t){var r="";if(e&&(r=M.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===M.call(e.buffer))){var n,i="__lfsc__:";e instanceof ArrayBuffer?(n=e,i+="arbf"):(n=e.buffer,"[object Int8Array]"===r?i+="si08":"[object Uint8Array]"===r?i+="ui08":"[object Uint8ClampedArray]"===r?i+="uic8":"[object Int16Array]"===r?i+="si16":"[object Uint16Array]"===r?i+="ur16":"[object Int32Array]"===r?i+="si32":"[object Uint32Array]"===r?i+="ui32":"[object Float32Array]"===r?i+="fl32":"[object Float64Array]"===r?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+D(n))}else if("[object Blob]"===r){var s=new FileReader;s.onload=function(){var r="~~local_forage_type~"+e.type+"~"+D(this.result);t("__lfsc__:blob"+r)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,z))return JSON.parse(e);var t,r=e.substring(I),n=e.substring(z,I);if("blob"===n&&O.test(r)){var i=r.match(O);t=i[1],r=r.substring(i[0].length)}var o=R(r);switch(n){case"arbf":return o;case"blob":return s([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+n)}},stringToBuffer:R,bufferToString:D};function j(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function A(e,t,r,n,i,s){e.executeSql(r,n,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,o):j(e,t,(function(){e.executeSql(r,n,i,s)}),s)}),s):s(e,o)}),s)}function L(e,t,r,n){var i=this;e=l(e);var s=new o((function(s,o){i.ready().then((function(){void 0===t&&(t=null);var a=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,l){l?o(l):c.db.transaction((function(r){A(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void s(L.apply(i,[e,a,r,n-1]));o(t)}}))}))})).catch(o)}));return a(s,r),s}function U(e){return new o((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],s=0;s<n.rows.length;s++)i.push(n.rows.item(s).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}var P={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new o((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(i){return n(i)}r.db.transaction((function(i){j(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=N,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,n=new o((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){A(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var s=n.rows,o=s.length,a=0;a<o;a++){var c=s.item(a),l=c.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=new o((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){A(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},setItem:function(e,t,r){return L.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;e=l(e);var n=new o((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){A(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},clear:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){A(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){A(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,n=new o((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){A(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,t),n},keys:function(e){var t=this,r=new o((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){A(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=u.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return a(n=e.name?new o((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(U(n))})).then((function(e){return new o((function(t,r){e.db.transaction((function(n){function i(e){return new o((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var s=[],a=0,c=e.storeNames.length;a<c;a++)s.push(i(e.storeNames[a]));o.all(s).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):o.reject("Invalid arguments"),t),n}};function G(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function Z(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch{return!0}}()||localStorage.length>0}var F={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=G(e,this._defaultConfig),Z()?(this._dbInfo=t,t.serializer=N,o.resolve()):o.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,s=localStorage.length,o=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(i),o++)))return l}}}));return a(n,t),n},getItem:function(e,t){var r=this;e=l(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return a(n,t),n},setItem:function(e,t,r){var n=this;e=l(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new o((function(i,s){var o=n._dbInfo;o.serializer.serialize(t,(function(t,n){if(n)s(n);else try{localStorage.setItem(o.keyPrefix+e,t),i(r)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||s(a),s(a)}}))}))}));return a(i,r),i},removeItem:function(e,t){var r=this;e=l(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return a(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var s=localStorage.key(i);0===s.indexOf(e.keyPrefix)&&n.push(s.substring(e.keyPrefix.length))}return n}));return a(r,e),r},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return a(n=e.name?new o((function(t){e.storeName?t(G(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):o.reject("Invalid arguments"),t),n}},X=function(e,t){for(var r,n,i=e.length,s=0;s<i;){if((r=e[s])===(n=t)||"number"==typeof r&&"number"==typeof n&&isNaN(r)&&isNaN(n))return!0;s++}return!1},K=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},B={},V={},W={INDEXEDDB:k,WEBSQL:P,LOCALSTORAGE:F},H=[W.INDEXEDDB._driver,W.WEBSQL._driver,W.LOCALSTORAGE._driver],Y=["dropInstance"],$=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Y),J={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Q(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function q(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(K(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ee=new(function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W)if(W.hasOwnProperty(r)){var n=W[r],i=n._driver;this[r]=i,B[i]||this.defineDriver(n)}this._defaultConfig=q({},J),this._config=q({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new o((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var s=$.concat("_initStorage"),c=0,l=s.length;c<l;c++){var u=s[c];if((!X(Y,u)||e[u])&&"function"!=typeof e[u])return void r(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=o.reject(t);return a(r,arguments[arguments.length-1]),r}},r=0,n=Y.length;r<n;r++){var i=Y[r];e[i]||(e[i]=t(i))}}();var d=function(r){B[n]&&console.info("Redefining LocalForage driver: "+n),B[n]=e,V[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,r):d(!!e._support):d(!0)}catch(h){r(h)}}));return c(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=B[e]?o.resolve(B[e]):o.reject(new Error("Driver not found."));return c(n,t,r),n},e.prototype.getSerializer=function(e){var t=o.resolve(N);return c(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;K(e)||(e=[e]);var i=this._getSupportedDrivers(e);function s(){n._config.driver=n.driver()}function a(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}var l=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=l.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){var t;n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=(t=i,function(){var e=0;return function r(){for(;e<t.length;){var i=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(a).catch(r)}s();var c=new Error("No available storage method found.");return n._driverSet=o.reject(c),n._driverSet}()})}))})).catch((function(){s();var e=new Error("No available storage method found.");return n._driverSet=o.reject(e),n._driverSet})),c(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!V[e]},e.prototype._extend=function(e){q(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=$.length;e<t;e++)Q(this,$[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)})),te=function(){function e(e,t){return this.dbStorage=ee.createInstance({driver:[ee.INDEXEDDB,ee.LOCALSTORAGE],name:e,storeName:t}),this.dbStorage}return e.prototype.getItem=function(e){return h(this,void 0,void 0,(function(){var t,r;return p(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.dbStorage.getItem(e)];case 1:t=n.sent(),r=t;try{t&&"string"==typeof t&&(r=JSON.parse(t))}catch{}return[2,r||void 0];case 2:return n.sent(),console.warn("db get storage error"),[3,3];case 3:return[2,void 0]}}))}))},e.prototype.setItem=function(e,t){try{this.dbStorage.setItem(e,t)}catch{console.warn("db set storage error")}},e.prototype.removeItem=function(e){try{this.dbStorage.removeItem(e)}catch{console.warn("db remove storage error")}},e}(),re=function(){function e(){this.setUrl="/service/2/web_sdk_settings/",this.expireTime=216e5}return e.prototype.apply=function(e,t){if(t.enable_logsetting){this.collect=e,this.config=t;var r=e.adapters.storage;this.setKey="applog_web_logsetting_"+t.app_id,this.uniqueKey="web_logsetting_data",this.cacheStorgae=new r(!1),this.dbStorage=new te(this.setKey,"LOGSETTING_DATA_STORE"),this.domain=t.logsetting_domain||this.collect.configManager.getDomain(),this.check()}else e.emit(B.LogSettingReady)},e.prototype.check=function(){return h(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getLocalData()];case 1:return(e=t.sent())&&Object.keys(e).length?(null==e?void 0:e.timestamp)<Date.now()-this.expireTime?this.fetchSetting():(this.setSettingData(e.settingConfig),this.collect.emit(B.LogSettingReady)):this.fetchSetting(),[3,3];case 2:return t.sent(),this.collect.emit(B.LogSettingReady),this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Check LogSetting Data Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),[3,3];case 3:return[2]}}))}))},e.prototype.fetchSetting=function(e){var t=this;if(e)this.collect.emit(B.LogSettingReady);else{var r=this.collect.configManager.get("header");r.custom=JSON.stringify(r.custom);var n=this.collect.configManager.get("user"),i={event_filter:0,header:d(d({aid:this.config.app_id},r),n),options:{params_block_enable:this.config.enable_logsetting_params?1:0,header_custom_allow_enable:this.config.enable_logsetting_header_custom?1:0}};this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch LogSetting Request",logType:"fetch",level:"info",time:Date.now(),data:i,infoType:"sdk"}),this.collect.requestManager.useRequest({url:""+this.domain+this.setUrl+"?device_platform=web",data:i,timeout:5e3,success:function(e){null!=e&&e.config?(t.setLocalData(e.config),t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Success",logType:"fetch",level:"info",time:Date.now(),data:e,infoType:"sdk"})):t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Response No Data",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),t.collect.emit(B.LogSettingReady)},fail:function(){t.collect.emit(B.LogSettingReady),t.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Fail",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})}})}},e.prototype.getLocalData=function(){return h(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.dbStorage.getItem(this.uniqueKey)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.setLocalData=function(e){try{var t={timestamp:Date.now(),settingConfig:e};this.setSettingData(e),this.dbStorage.setItem(this.uniqueKey,t),this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Update LogSetting Cache",logType:"info",level:"info",time:Date.now(),infoType:"sdk",data:e})}catch{this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Set LogSetting Data Error",logType:"info",level:"error",time:Date.now(),infoType:"sdk"})}},e.prototype.getSettingData=function(e){return e?this.logSettingConfig[e]:this.logSettingConfig},e.prototype.setSettingData=function(e){this.logSettingConfig=e},e.prototype.getPredefineEventList=function(){return new Set(["predefine_pageview","onload","bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_exposure","predefine_page_alive","predefine_page_close","_be_active","__bav_click","__bav_page","__bav_beat","__bav_page_statistics","__bav_page_exposure"])},e.prototype.getPredefineParamsList=function(){return new Set(["event_index"])},e}(),ne=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var r=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new A(!0),this.localStorage=new A(!1),this.logSetting=new re,this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.logSetting.apply(e,t),this.collect.on(B.Ready,(function(){r.reportAll(!1)})),this.collect.on(B.ConfigDomain,(function(){r.reportUrl=r.configManager.getUrl("event")})),this.collect.on(B.Event,(function(e){r.event(e)})),this.collect.on(B.BeconEvent,(function(e){r.beconEvent(e)})),this.collect.on(B.CleanEvents,(function(){r.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e,t=this;window.addEventListener("unload",(function(){t.reportAll(!0)}),!1),e=function(){t.reportAll(!0)},w()?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{if(this.config.enable_ios_sendbeacon&&w())return void this.beconEvent(e);var r=m(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,r),this.reportTimeout&&clearTimeout(this.reportTimeout),r.length>=this.maxReport)this.report(!1);else{var n=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),n)}}catch(i){this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:i.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=m(e,this.cacheStorgae.getItem(this.beconKey)||[]);if(this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady){this.cacheStorgae.removeItem(this.beconKey);try{var r=JSON.parse(JSON.stringify(t));if(this.send(this.split(this.merge(t)),!0),this.config.event_verify_url){var n=this.split(this.merge(r,!0));this.collect.emit(B.SubmitVerify,n)}}catch{this.send(this.split(this.merge(t)),!0)}}}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];if(e&&e.length){this.cacheStorgae.removeItem(this.beconKey);try{var t=JSON.parse(JSON.stringify(e));if(this.send(this.split(this.merge(e)),!0),this.config.event_verify_url){var r=this.split(this.merge(t,!0));this.collect.emit(B.SubmitVerify,r)}}catch{this.send(this.split(this.merge(e)),!0)}}}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var r=0;r<e.length;r+=this.eventLimit){var n;n=e.slice(r,r+this.eventLimit);try{var i=JSON.parse(JSON.stringify(n));if(this.send(this.split(this.merge(n)),t),this.config.event_verify_url){var s=this.split(this.merge(i,!0));this.collect.emit(B.SubmitVerify,s)}}catch{this.send(this.split(this.merge(n)),t)}}else try{i=JSON.parse(JSON.stringify(e)),this.send(this.split(this.merge(e)),t),this.config.event_verify_url&&(s=this.split(this.merge(i,!0)),this.collect.emit(B.SubmitVerify,s))}catch{this.send(this.split(this.merge(e)),t)}},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch{e=document.referrer}return e},e.prototype.merge=function(e,t){var r=this;void 0===t&&(t=!1);var n=this.configManager.get(),i=n.header,s=n.user;i.custom=this.customAllow(i.custom,t);var o=this.configManager.get("evtParams"),a=this.configManager.get("user_unique_id_type"),c=[];try{var l=e.filter((function(e){try{Object.keys(o).length&&(e.params=d(d({},o),e.params)),a&&(e.params.$user_unique_id_type=a);var n=r.configManager.getAbCache(),i=s[r.config.ab_user_mode]||s.user_unique_id,c=r.configManager.getAbUuidCache(i);if(n&&n.uuid&&n.uuid===i){var l=r.configManager.getAbVersion();if(r.config.enable_ab_uuid){if(c&&c.length){var u=c.join(",");l&&l.includes(u)&&(e.ab_sdk_version=l)}}else l&&(e.ab_sdk_version=l)}return e.session_id=r.collect.sessionManager.getSessionId(),e.params=r.paramsAllow(e,t),e}catch(h){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",h&&h.message),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:h.message,infoType:"sdk"}),!1}})),u=JSON.parse(JSON.stringify({events:l,user:s,header:i}));u.local_time=Math.floor(Date.now()/1e3),u.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,u.verbose=1,c.push(u)}catch(h){console.warn("event merge error, pls check",h&&h.message)}return c},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.blockEvent=function(e){try{var t=this.blockList;if(this.config.enable_logsetting){var r=this.blockList,n=this.logSetting.getSettingData("blocklist_events").block_event;t=r.concat(n.filter((function(e){return-1===r.indexOf(e)})))}return!(t&&t.length&&t.includes(e))}catch{return!0}},e.prototype.whiteEvent=function(e){var t;try{return!(null!==(t=this.whiteList)&&void 0!==t&&t.length&&!this.whiteList.includes(e))}catch{return!0}},e.prototype.customAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_header_custom)return JSON.stringify(e);var r=this.logSetting.getSettingData().header_custom_allow;if(r){var n={};if(r.length&&Object.keys(e).length){var i=new Set(r);for(var s in e)i.has(s)&&(n[s]=e[s])}return JSON.stringify(n)}return JSON.stringify(e)}catch(o){return this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute customAllow Something Error",level:"error",time:Date.now(),data:o.message,infoType:"sdk"}),JSON.stringify(e)}},e.prototype.paramsAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_params)return JSON.stringify(e.params);var r=this.logSetting.getSettingData().params_block,n=e.event,i=e.params;if(!r)return JSON.stringify(e.params);if(r[n]&&r[n].length){var s={},o=new Set(r[n]);for(var a in i)!this.logSetting.getPredefineParamsList().has(a)&&o.has(a)||(s[a]=i[a]);return JSON.stringify(s)}return JSON.stringify(e.params)}catch(c){return this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute paramsAllow Something Error",level:"error",time:Date.now(),data:c.message,infoType:"sdk"}),JSON.stringify(e.params)}},e.prototype.send=function(e,t){var r=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var n=JSON.parse(JSON.stringify(e));r.config.filter&&((n=r.config.filter(n))||console.warn("filter must return data !!")),r.collect.eventFilter&&n&&((n=r.collect.eventFilter(n))||console.warn("filterEvent api must return data !!"));var i=n||e,s=JSON.parse(JSON.stringify(i));if(!i.length)return;var o=!0;if(i.forEach((function(e){e.events.length||(o=!1)})),!o)return;r.collect.emit(B.SubmitBefore,i),r.collect.requestManager.useRequest({url:r.reportUrl,data:i,success:function(e,t){e&&0!==e.e?(r.collect.emit(B.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_EVENT,info:"Event Report Fail",time:Date.now(),data:s,code:e.e,failType:"event data error",status:"fail"})):(r.collect.emit(B.SubmitScuess,{eventData:t,res:e}),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:s,code:200,status:"success"}))},fail:function(e,t){r.configManager.get("reportErrorCallback")(e,t),r.collect.emit(B.SubmitError,{type:"f_net",eventData:e,errorCode:t}),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network Fail",time:Date.now(),data:s,code:t,failType:"network error",status:"fail"})},timeout:r.timeout,useBeacon:!r.config.disable_sendbeacon&&t,withCredentials:r.enable_ttwebid,zip:!0}),r.collect.emit(B.SubmitAfter,i)}catch(a){console.warn("something error, "+JSON.stringify(a.stack)),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:a.message})}})))},e}(),ie=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},se=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var r=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new A(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(B.ConfigUuid,(function(e){r.setUuid(e)})),this.collect.on(B.ConfigWebId,(function(e){r.setWebId(e)})),this.collect.on(B.ConfigDiD,(function(e){r.setDeviceId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(B.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(B.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:ie(),user_unique_id:this.configManager.get("user_unique_id")||ie()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=E(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),r={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:r});var n=ie();this.collect.requestManager.useRequest({url:t,data:r,success:function(t){var r;t&&0===t.e?(r=t.web_id,e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(r=n,e.collect.configManager.set({localWebId:n}),e.collect.emit(B.TokenError),e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||r,user_unique_id:e.configManager.get("user_unique_id")||r})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n}),e.collect.configManager.set({localWebId:n}),e.collect.emit(B.TokenError),e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,r=e.user_unique_id,n=e.device_id;if(e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:r}),this.config.enable_device_id){var i=this.configManager.get("device_id")||n||t;this.collect.configManager.set({device_id:i}),e=d(d({},e),{device_id:i})}else delete e.device_id;this.setStorage(e),this.tokenReady=!0,this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:r},infoType:"sdk"}),this.collect.emit(B.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",r=this.configManager.get("user_unique_id");(r||t)&&this.configManager.set({user_unique_id:r||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(B.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),r=this.configManager.get("user_unique_id"),n=this.cacheToken&&this.cacheToken.user_unique_id;if(t===r&&t===n)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(B.TokenChange,"uuid"),this.collect.emit(B.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(B.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),r=this.configManager.get("user_unique_id");r&&r!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(B.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(B.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setDeviceId=function(e){this.configManager.set({device_id:e}),this.config.enable_device_id&&this.cacheToken&&(this.cacheToken.device_id=e,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken))},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var r={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:r,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:r,success:function(r){r&&0===r.e?(t(r.tobid),e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:r,infoType:"sdk"})):(t(""),e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:r,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")}))},e}(),oe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},ae=function(){function e(){}return e.prototype.apply=function(e,t){var r=this;this.collect=e,this.storage=new A(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(B.SessionReset,(function(e){r.resetSessionId(e)})),this.collect.on(B.SessionResetTime,(function(){r.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:oe(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:oe(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||oe(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:oe(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}();function ce(e){let t=e.length;for(;--t>=0;)e[t]=0}const le=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ue=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),de=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),he=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pe=new Array(576);ce(pe);const fe=new Array(60);ce(fe);const me=new Array(512);ce(me);const ge=new Array(256);ce(ge);const ye=new Array(29);ce(ye);const be=new Array(30);function ve(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let _e,we,Se;function Ee(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ce(be);const xe=e=>e<256?me[e]:me[256+(e>>>7)],Te=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ke=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Te(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Ce=(e,t,r)=>{ke(e,r[2*t],r[2*t+1])},Oe=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},ze=(e,t,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+r[i-1]<<1,n[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=Oe(n[t]++,t))}},Ie=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Me=e=>{e.bi_valid>8?Te(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Re=(e,t,r,n)=>{const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},De=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Re(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Re(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},Ne=(e,t,r)=>{let n,i,s,o,a=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+a++],n+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===n?Ce(e,i,t):(s=ge[i],Ce(e,s+256+1,t),o=le[s],0!==o&&(i-=ye[s],ke(e,i,o)),n--,s=xe(n),Ce(e,s,r),o=ue[s],0!==o&&(n-=be[s],ke(e,n,o)))}while(a<e.sym_next);Ce(e,256,t)},je=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)De(e,r,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],De(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[2*c]=r[2*o]+r[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[2*o+1]=r[2*a+1]=c,e.heap[1]=c++,De(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,h,p,f,m=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],h=r[2*r[2*u+1]+1]+1,h>c&&(h=c,m++),r[2*u+1]=h,u>n||(e.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),f=r[2*u],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(i[2*u+1]+p)));if(0!==m){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,m-=2}while(m>0);for(h=c;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--l],d>n||(r[2*d+1]!==h&&(e.opt_len+=(h-r[2*d+1])*r[2*d],r[2*d+1]=h),u--)}})(e,t),ze(r,l,e.bl_count)},Ae=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},Le=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<l)do{Ce(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(Ce(e,i,e.bl_tree),a--),Ce(e,16,e.bl_tree),ke(e,a-3,2)):a<=10?(Ce(e,17,e.bl_tree),ke(e,a-3,3)):(Ce(e,18,e.bl_tree),ke(e,a-11,7));a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let Ue=!1;const Pe=(e,t,r,n)=>{ke(e,0+(n?1:0),3),Me(e),Te(e,r),Te(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var Ge={_tr_init:e=>{Ue||((()=>{let e,t,r,n,i;const s=new Array(16);for(r=0,n=0;n<28;n++)for(ye[n]=r,e=0;e<1<<le[n];e++)ge[r++]=n;for(ge[r-1]=n,i=0,n=0;n<16;n++)for(be[n]=i,e=0;e<1<<ue[n];e++)me[i++]=n;for(i>>=7;n<30;n++)for(be[n]=i<<7,e=0;e<1<<ue[n]-7;e++)me[256+i++]=n;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)pe[2*e+1]=8,e++,s[8]++;for(;e<=255;)pe[2*e+1]=9,e++,s[9]++;for(;e<=279;)pe[2*e+1]=7,e++,s[7]++;for(;e<=287;)pe[2*e+1]=8,e++,s[8]++;for(ze(pe,287,s),e=0;e<30;e++)fe[2*e+1]=5,fe[2*e]=Oe(e,5);_e=new ve(pe,le,257,286,15),we=new ve(fe,ue,0,30,15),Se=new ve(new Array(0),de,0,19,7)})(),Ue=!0),e.l_desc=new Ee(e.dyn_ltree,_e),e.d_desc=new Ee(e.dyn_dtree,we),e.bl_desc=new Ee(e.bl_tree,Se),e.bi_buf=0,e.bi_valid=0,Ie(e)},_tr_stored_block:Pe,_tr_flush_block:(e,t,r,n)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),je(e,e.l_desc),je(e,e.d_desc),o=(e=>{let t;for(Ae(e,e.dyn_ltree,e.l_desc.max_code),Ae(e,e.dyn_dtree,e.d_desc.max_code),je(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*he[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?Pe(e,t,r,n):4===e.strategy||s===i?(ke(e,2+(n?1:0),3),Ne(e,pe,fe)):(ke(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(ke(e,t-257,5),ke(e,r-1,5),ke(e,n-4,4),i=0;i<n;i++)ke(e,e.bl_tree[2*he[i]+1],3);Le(e,e.dyn_ltree,t-1),Le(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Ne(e,e.dyn_ltree,e.dyn_dtree)),Ie(e),n&&Me(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(ge[r]+256+1)]++,e.dyn_dtree[2*xe(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{var t;ke(e,2,3),Ce(e,256,pe),16===(t=e).bi_valid?(Te(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},Ze=(e,t,r,n)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const Fe=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var Xe=(e,t,r,n)=>{const i=Fe,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^i[255&(e^t[o])];return~e},Ke={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Be={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ve,_tr_stored_block:We,_tr_flush_block:He,_tr_tally:Ye,_tr_align:$e}=Ge,{Z_NO_FLUSH:Je,Z_PARTIAL_FLUSH:Qe,Z_FULL_FLUSH:qe,Z_FINISH:et,Z_BLOCK:tt,Z_OK:rt,Z_STREAM_END:nt,Z_STREAM_ERROR:it,Z_DATA_ERROR:st,Z_BUF_ERROR:ot,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:ct,Z_HUFFMAN_ONLY:lt,Z_RLE:ut,Z_FIXED:dt,Z_DEFAULT_STRATEGY:ht,Z_UNKNOWN:pt,Z_DEFLATED:ft}=Be,mt=(e,t)=>(e.msg=Ke[t],t),gt=e=>2*e-(e>4?9:0),yt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},bt=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let vt=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const _t=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},wt=(e,t)=>{He(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_t(e.strm)},St=(e,t)=>{e.pending_buf[e.pending++]=t},Et=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},xt=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=Ze(e.adler,t,i,r):2===e.state.wrap&&(e.adler=Xe(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Tt=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258;let p=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,l[r+o]===f&&l[r+o-1]===p&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<h);if(n=258-(h-s),s=h-258,n>o){if(e.match_start=t,o=n,n>=a)break;p=l[s+o-1],f=l[s+o]}}}while((t=d[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead},kt=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),bt(e),n+=t),0===e.strm.avail_in)break;if(r=xt(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=vt(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=vt(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},Ct=(e,t)=>{let r,n,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<s&&(0===r&&t!==et||t===Je||r!==n+e.strm.avail_in)))break;o=t===et&&r===n+e.strm.avail_in?1:0,We(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,_t(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(xt(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Je&&t!==et&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(xt(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=s||(n||t===et)&&t!==Je&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,o=t===et&&0===e.strm.avail_in&&r===n?1:0,We(e,e.block_start,r,o),e.block_start+=r,_t(e.strm)),o?3:1)},Ot=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(kt(e),e.lookahead<262&&t===Je)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=Tt(e,r)),e.match_length>=3)if(n=Ye(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=vt(e,e.ins_h,e.window[e.strstart+1]);else n=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2},zt=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<262){if(kt(e),e.lookahead<262&&t===Je)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=Tt(e,r),e.match_length<=5&&(e.strategy===ct||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=Ye(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(wt(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=Ye(e,0,e.window[e.strstart-1]),n&&wt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Ye(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2};function It(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Mt=[new It(0,0,0,0,Ct),new It(4,4,8,4,Ot),new It(4,5,16,8,Ot),new It(4,6,32,32,Ot),new It(4,4,16,16,zt),new It(8,16,32,32,zt),new It(8,16,128,128,zt),new It(8,32,128,256,zt),new It(32,128,258,1024,zt),new It(32,258,258,4096,zt)];function Rt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ft,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yt(this.dyn_ltree),yt(this.dyn_dtree),yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),yt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Dt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Nt=e=>{if(Dt(e))return mt(e,it);e.total_in=e.total_out=0,e.data_type=pt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ve(t),rt},jt=e=>{const t=Nt(e);var r;return t===rt&&((r=e.state).window_size=2*r.w_size,yt(r.head),r.max_lazy_match=Mt[r.level].max_lazy,r.good_match=Mt[r.level].good_length,r.nice_match=Mt[r.level].nice_length,r.max_chain_length=Mt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},At=(e,t,r,n,i,s)=>{if(!e)return it;let o=1;if(t===at&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==ft||n<8||n>15||t<0||t>9||s<0||s>dt||8===n&&1!==o)return mt(e,it);8===n&&(n=9);const a=new Rt;return e.state=a,a.strm=e,a.status=42,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=r,jt(e)};var Lt={deflateInit:(e,t)=>At(e,t,ft,15,8,ht),deflateInit2:At,deflateReset:jt,deflateResetKeep:Nt,deflateSetHeader:(e,t)=>Dt(e)||2!==e.state.wrap?it:(e.state.gzhead=t,rt),deflate:(e,t)=>{if(Dt(e)||t>tt||t<0)return e?mt(e,it):it;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==et)return mt(e,0===e.avail_out?ot:it);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(_t(e),0===e.avail_out)return r.last_flush=-1,rt}else if(0===e.avail_in&&gt(t)<=gt(n)&&t!==et)return mt(e,ot);if(666===r.status&&0!==e.avail_in)return mt(e,ot);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=ft+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=lt||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,Et(r,t),0!==r.strstart&&(Et(r,e.adler>>>16),Et(r,65535&e.adler)),e.adler=1,r.status=113,_t(e),0!==r.pending)return r.last_flush=-1,rt}if(57===r.status)if(e.adler=0,St(r,31),St(r,139),St(r,8),r.gzhead)St(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),St(r,255&r.gzhead.time),St(r,r.gzhead.time>>8&255),St(r,r.gzhead.time>>16&255),St(r,r.gzhead.time>>24&255),St(r,9===r.level?2:r.strategy>=lt||r.level<2?4:0),St(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(St(r,255&r.gzhead.extra.length),St(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Xe(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(St(r,0),St(r,0),St(r,0),St(r,0),St(r,0),St(r,9===r.level?2:r.strategy>=lt||r.level<2?4:0),St(r,3),r.status=113,_t(e),0!==r.pending)return r.last_flush=-1,rt;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,_t(e),0!==r.pending)return r.last_flush=-1,rt;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-n,n)),_t(e),0!==r.pending)return r.last_flush=-1,rt;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,St(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-n,n)),_t(e),0!==r.pending)return r.last_flush=-1,rt;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,St(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=Xe(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(_t(e),0!==r.pending))return r.last_flush=-1,rt;St(r,255&e.adler),St(r,e.adler>>8&255),e.adler=0}if(r.status=113,_t(e),0!==r.pending)return r.last_flush=-1,rt}if(0!==e.avail_in||0!==r.lookahead||t!==Je&&666!==r.status){let n=0===r.level?Ct(r,t):r.strategy===lt?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(kt(e),0===e.lookahead)){if(t===Je)return 1;break}if(e.match_length=0,r=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===ut?((e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=258){if(kt(e),e.lookahead<=258&&t===Je)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+258;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=Ye(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Ye(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2})(r,t):Mt[r.level].func(r,t);if(3!==n&&4!==n||(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),rt;if(2===n&&(t===Qe?$e(r):t!==tt&&(We(r,0,0,!1),t===qe&&(yt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),_t(e),0===e.avail_out))return r.last_flush=-1,rt}return t!==et?rt:r.wrap<=0?nt:(2===r.wrap?(St(r,255&e.adler),St(r,e.adler>>8&255),St(r,e.adler>>16&255),St(r,e.adler>>24&255),St(r,255&e.total_in),St(r,e.total_in>>8&255),St(r,e.total_in>>16&255),St(r,e.total_in>>24&255)):(Et(r,e.adler>>>16),Et(r,65535&e.adler)),_t(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?rt:nt)},deflateEnd:e=>{if(Dt(e))return it;const t=e.state.status;return e.state=null,113===t?mt(e,st):rt},deflateSetDictionary:(e,t)=>{let r=t.length;if(Dt(e))return it;const n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return it;if(1===i&&(e.adler=Ze(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(yt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,kt(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=vt(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,kt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,n.wrap=i,rt},deflateInfo:"pako deflate (from Nodeca project)"};const Ut=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Pt=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)Ut(r,t)&&(e[t]=r[t])}}return e},Gt=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let t=e[n];r.set(t,i),i+=t.length}return r};let Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Zt=!1}const Ft=new Uint8Array(256);for(let r=0;r<256;r++)Ft[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Ft[254]=Ft[254]=1;var Xt=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,o=e.length,a=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},Kt=(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let o=Ft[t];if(o>4)s[i++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Zt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(s,i)},Bt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Ft[e[r]]>t?r:t},Vt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Wt=Object.prototype.toString,{Z_NO_FLUSH:Ht,Z_SYNC_FLUSH:Yt,Z_FULL_FLUSH:$t,Z_FINISH:Jt,Z_OK:Qt,Z_STREAM_END:qt,Z_DEFAULT_COMPRESSION:er,Z_DEFAULT_STRATEGY:tr,Z_DEFLATED:rr}=Be;function nr(e){this.options=Pt({level:er,method:rr,chunkSize:16384,windowBits:15,memLevel:8,strategy:tr},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vt,this.strm.avail_out=0;let r=Lt.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Qt)throw new Error(Ke[r]);if(t.header&&Lt.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Xt(t.dictionary):"[object ArrayBuffer]"===Wt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Lt.deflateSetDictionary(this.strm,e),r!==Qt)throw new Error(Ke[r]);this._dict_set=!0}}function ir(e,t){const r=new nr(t);if(r.push(e,!0),r.err)throw r.msg||Ke[r.err];return r.result}nr.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Jt:Ht,"string"==typeof e?r.input=Xt(e):"[object ArrayBuffer]"===Wt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===Yt||s===$t)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Lt.deflate(r,s),i===qt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Lt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Qt;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},nr.prototype.onData=function(e){this.chunks.push(e)},nr.prototype.onEnd=function(e){e===Qt&&(this.result=Gt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var sr={Deflate:nr,deflate:ir,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ir(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ir(e,t)},constants:Be},or=function(e,t){let r,n,i,s,o,a,c,l,u,d,h,p,f,m,g,y,b,v,_,w,S,E,x,T;const k=e.state;r=e.next_in,x=e.input,n=r+(e.avail_in-5),i=e.next_out,T=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=k.dmax,c=k.wsize,l=k.whave,u=k.wnext,d=k.window,h=k.hold,p=k.bits,f=k.lencode,m=k.distcode,g=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),b=f[h&g];t:for(;;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,0===v)T[i++]=65535&b;else{if(!(16&v)){if(!(64&v)){b=f[(65535&b)+(h&(1<<v)-1)];continue t}if(32&v){k.mode=16191;break e}e.msg="invalid literal/length code",k.mode=16209;break e}_=65535&b,v&=15,v&&(p<v&&(h+=x[r++]<<p,p+=8),_+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),b=m[h&y];r:for(;;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,!(16&v)){if(!(64&v)){b=m[(65535&b)+(h&(1<<v)-1)];continue r}e.msg="invalid distance code",k.mode=16209;break e}if(w=65535&b,v&=15,p<v&&(h+=x[r++]<<p,p+=8,p<v&&(h+=x[r++]<<p,p+=8)),w+=h&(1<<v)-1,w>a){e.msg="invalid distance too far back",k.mode=16209;break e}if(h>>>=v,p-=v,v=i-s,w>v){if(v=w-v,v>l&&k.sane){e.msg="invalid distance too far back",k.mode=16209;break e}if(S=0,E=d,0===u){if(S+=c-v,v<_){_-=v;do{T[i++]=d[S++]}while(--v);S=i-w,E=T}}else if(u<v){if(S+=c+u-v,v-=u,v<_){_-=v;do{T[i++]=d[S++]}while(--v);if(S=0,u<_){v=u,_-=v;do{T[i++]=d[S++]}while(--v);S=i-w,E=T}}}else if(S+=u-v,v<_){_-=v;do{T[i++]=d[S++]}while(--v);S=i-w,E=T}for(;_>2;)T[i++]=E[S++],T[i++]=E[S++],T[i++]=E[S++],_-=3;_&&(T[i++]=E[S++],_>1&&(T[i++]=E[S++]))}else{S=i-w;do{T[i++]=T[S++],T[i++]=T[S++],T[i++]=T[S++],_-=3}while(_>2);_&&(T[i++]=T[S++],_>1&&(T[i++]=T[S++]))}break}}break}}while(r<n&&i<o);_=p>>3,r-=_,p-=_<<3,h&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),k.hold=h,k.bits=p};const ar=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lr=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ur=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var dr=(e,t,r,n,i,s,o,a)=>{const c=a.bits;let l,u,d,h,p,f,m=0,g=0,y=0,b=0,v=0,_=0,w=0,S=0,E=0,x=0,T=null;const k=new Uint16Array(16),C=new Uint16Array(16);let O,z,I,M=null;for(m=0;m<=15;m++)k[m]=0;for(g=0;g<n;g++)k[t[r+g]]++;for(v=c,b=15;b>=1&&0===k[b];b--);if(v>b&&(v=b),0===b)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(y=1;y<b&&0===k[y];y++);for(v<y&&(v=y),S=1,m=1;m<=15;m++)if(S<<=1,S-=k[m],S<0)return-1;if(S>0&&(0===e||1!==b))return-1;for(C[1]=0,m=1;m<15;m++)C[m+1]=C[m]+k[m];for(g=0;g<n;g++)0!==t[r+g]&&(o[C[t[r+g]]++]=g);if(0===e?(T=M=o,f=20):1===e?(T=ar,M=cr,f=257):(T=lr,M=ur,f=0),x=0,g=0,m=y,p=s,_=v,w=0,d=-1,E=1<<v,h=E-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){O=m-w,o[g]+1<f?(z=0,I=o[g]):o[g]>=f?(z=M[o[g]-f],I=T[o[g]-f]):(z=96,I=0),l=1<<m-w,u=1<<_,y=u;do{u-=l,i[p+(x>>w)+u]=O<<24|z<<16|I}while(0!==u);for(l=1<<m-1;x&l;)l>>=1;if(0!==l?(x&=l-1,x+=l):x=0,g++,0==--k[m]){if(m===b)break;m=t[r+o[g]]}if(m>v&&(x&h)!==d){for(0===w&&(w=v),p+=y,_=m-w,S=1<<_;_+w<b&&(S-=k[_+w],!(S<=0));)_++,S<<=1;if(E+=1<<_,1===e&&E>852||2===e&&E>592)return 1;d=x&h,i[d]=v<<24|_<<16|p-s}}return 0!==x&&(i[p+x]=m-w<<24|64<<16),a.bits=v,0};const{Z_FINISH:hr,Z_BLOCK:pr,Z_TREES:fr,Z_OK:mr,Z_STREAM_END:gr,Z_NEED_DICT:yr,Z_STREAM_ERROR:br,Z_DATA_ERROR:vr,Z_MEM_ERROR:_r,Z_BUF_ERROR:wr,Z_DEFLATED:Sr}=Be,Er=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function xr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Tr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},kr=e=>{if(Tr(e))return br;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mr},Cr=e=>{if(Tr(e))return br;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,kr(e)},Or=(e,t)=>{let r;if(Tr(e))return br;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?br:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Cr(e))},zr=(e,t)=>{if(!e)return br;const r=new xr;e.state=r,r.strm=e,r.window=null,r.mode=16180;const n=Or(e,t);return n!==mr&&(e.state=null),n};let Ir,Mr,Rr=!0;const Dr=e=>{if(Rr){Ir=new Int32Array(512),Mr=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(dr(1,e.lens,0,288,Ir,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;dr(2,e.lens,0,32,Mr,0,e.work,{bits:5}),Rr=!1}e.lencode=Ir,e.lenbits=9,e.distcode=Mr,e.distbits=5},Nr=(e,t,r,n)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var jr={inflateReset:Cr,inflateReset2:Or,inflateResetKeep:kr,inflateInit:e=>zr(e,15),inflateInit2:zr,inflate:(e,t)=>{let r,n,i,s,o,a,c,l,u,d,h,p,f,m,g,y,b,v,_,w,S,E,x=0;const T=new Uint8Array(4);let k,C;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Tr(e)||!e.output||!e.input&&0!==e.avail_in)return br;r=e.state,16191===r.mode&&(r.mode=16192),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,d=a,h=c,E=mr;e:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(2&r.wrap&&35615===l){0===r.wbits&&(r.wbits=15),r.check=0,T[0]=255&l,T[1]=l>>>8&255,r.check=Xe(r.check,T,2,0),l=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&l)!==Sr){e.msg="unknown compression method",r.mode=16209;break}if(l>>>=4,u-=4,S=8+(15&l),0===r.wbits&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&l?16189:16191,l=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Sr){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&4&r.wrap&&(T[0]=255&l,T[1]=l>>>8&255,r.check=Xe(r.check,T,2,0)),l=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&4&r.wrap&&(T[0]=255&l,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,r.check=Xe(r.check,T,4,0)),l=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&4&r.wrap&&(T[0]=255&l,T[1]=l>>>8&255,r.check=Xe(r.check,T,2,0)),l=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&4&r.wrap&&(T[0]=255&l,T[1]=l>>>8&255,r.check=Xe(r.check,T,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(p=r.length,p>a&&(p=a),p&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+p),S)),512&r.flags&&4&r.wrap&&(r.check=Xe(r.check,n,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===a)break e;p=0;do{S=n[s+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&p<a);if(512&r.flags&&4&r.wrap&&(r.check=Xe(r.check,n,p,s)),a-=p,s+=p,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===a)break e;p=0;do{S=n[s+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&p<a);if(512&r.flags&&4&r.wrap&&(r.check=Xe(r.check,n,p,s)),a-=p,s+=p,S)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(4&r.wrap&&l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}e.adler=r.check=Er(l),l=0,u=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,yr;e.adler=r.check=1,r.mode=16191;case 16191:if(t===pr||t===fr)break e;case 16192:if(r.last){l>>>=7&u,u-=7&u,r.mode=16206;break}for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=16193;break;case 1:if(Dr(r),r.mode=16199,t===fr){l>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&l,l=0,u=0,r.mode=16194,t===fr)break e;case 16194:r.mode=16195;case 16195:if(p=r.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(n.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,r.length-=p;break}r.mode=16191;break;case 16196:for(;u<14;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.lens[O[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,k={bits:r.lenbits},E=dr(0,r.lens,0,19,r.lencode,0,r.work,k),r.lenbits=k.bits,E){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[l&(1<<r.lenbits)-1],g=x>>>24,y=x>>>16&255,b=65535&x,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(b<16)l>>>=g,u-=g,r.lens[r.have++]=b;else{if(16===b){for(C=g+2;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(l>>>=g,u-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}S=r.lens[r.have-1],p=3+(3&l),l>>>=2,u-=2}else if(17===b){for(C=g+3;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=g,u-=g,S=0,p=3+(7&l),l>>>=3,u-=3}else{for(C=g+7;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=g,u-=g,S=0,p=11+(127&l),l>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;p--;)r.lens[r.have++]=S}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,k={bits:r.lenbits},E=dr(1,r.lens,0,r.nlen,r.lencode,0,r.work,k),r.lenbits=k.bits,E){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,k={bits:r.distbits},E=dr(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,k),r.distbits=k.bits,E){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===fr)break e;case 16199:r.mode=16200;case 16200:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,or(e,h),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;x=r.lencode[l&(1<<r.lenbits)-1],g=x>>>24,y=x>>>16&255,b=65535&x,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(y&&!(240&y)){for(v=g,_=y,w=b;x=r.lencode[w+((l&(1<<v+_)-1)>>v)],g=x>>>24,y=x>>>16&255,b=65535&x,!(v+g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,r.back+=v}if(l>>>=g,u-=g,r.back+=g,r.length=b,0===y){r.mode=16205;break}if(32&y){r.back=-1,r.mode=16191;break}if(64&y){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&y,r.mode=16201;case 16201:if(r.extra){for(C=r.extra;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;x=r.distcode[l&(1<<r.distbits)-1],g=x>>>24,y=x>>>16&255,b=65535&x,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(!(240&y)){for(v=g,_=y,w=b;x=r.distcode[w+((l&(1<<v+_)-1)>>v)],g=x>>>24,y=x>>>16&255,b=65535&x,!(v+g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,r.back+=v}if(l>>>=g,u-=g,r.back+=g,64&y){e.msg="invalid distance code",r.mode=16209;break}r.offset=b,r.extra=15&y,r.mode=16203;case 16203:if(r.extra){for(C=r.extra;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===c)break e;if(p=h-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}p>r.wnext?(p-=r.wnext,f=r.wsize-p):f=r.wnext-p,p>r.length&&(p=r.length),m=r.window}else m=i,f=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do{i[o++]=m[f++]}while(--p);0===r.length&&(r.mode=16200);break;case 16205:if(0===c)break e;i[o++]=r.length,c--,r.mode=16200;break;case 16206:if(r.wrap){for(;u<32;){if(0===a)break e;a--,l|=n[s++]<<u,u+=8}if(h-=c,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?Xe(r.check,i,h,o-h):Ze(r.check,i,h,o-h)),h=c,4&r.wrap&&(r.flags?l:Er(l))!==r.check){e.msg="incorrect data check",r.mode=16209;break}l=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(4&r.wrap&&l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=16209;break}l=0,u=0}r.mode=16208;case 16208:E=gr;break e;case 16209:E=vr;break e;case 16210:return _r;default:return br}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==hr))&&Nr(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?Xe(r.check,i,h,e.next_out-h):Ze(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(16191===r.mode?128:0)+(16199===r.mode||16194===r.mode?256:0),(0===d&&0===h||t===hr)&&E===mr&&(E=wr),E},inflateEnd:e=>{if(Tr(e))return br;let t=e.state;return t.window&&(t.window=null),e.state=null,mr},inflateGetHeader:(e,t)=>{if(Tr(e))return br;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,mr):br},inflateSetDictionary:(e,t)=>{const r=t.length;let n,i,s;return Tr(e)?br:(n=e.state,0!==n.wrap&&16190!==n.mode?br:16190===n.mode&&(i=1,i=Ze(i,t,r,0),i!==n.check)?vr:(s=Nr(e,t,r,r),s?(n.mode=16210,_r):(n.havedict=1,mr)))},inflateInfo:"pako inflate (from Nodeca project)"},Ar=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Lr=Object.prototype.toString,{Z_NO_FLUSH:Ur,Z_FINISH:Pr,Z_OK:Gr,Z_STREAM_END:Zr,Z_NEED_DICT:Fr,Z_STREAM_ERROR:Xr,Z_DATA_ERROR:Kr,Z_MEM_ERROR:Br}=Be;function Vr(e){this.options=Pt({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vt,this.strm.avail_out=0;let r=jr.inflateInit2(this.strm,t.windowBits);if(r!==Gr)throw new Error(Ke[r]);if(this.header=new Ar,jr.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Xt(t.dictionary):"[object ArrayBuffer]"===Lr.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=jr.inflateSetDictionary(this.strm,t.dictionary),r!==Gr)))throw new Error(Ke[r])}function Wr(e,t){const r=new Vr(t);if(r.push(e),r.err)throw r.msg||Ke[r.err];return r.result}Vr.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Pr:Ur,"[object ArrayBuffer]"===Lr.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=jr.inflate(r,o),s===Fr&&i&&(s=jr.inflateSetDictionary(r,i),s===Gr?s=jr.inflate(r,o):s===Kr&&(s=Fr));r.avail_in>0&&s===Zr&&r.state.wrap>0&&0!==e[r.next_in];)jr.inflateReset(r),s=jr.inflate(r,o);switch(s){case Xr:case Kr:case Fr:case Br:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===Zr))if("string"===this.options.to){let e=Bt(r.output,r.next_out),t=r.next_out-e,i=Kt(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==Gr||0!==a){if(s===Zr)return s=jr.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Vr.prototype.onData=function(e){this.chunks.push(e)},Vr.prototype.onEnd=function(e){e===Gr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Gt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Hr={Inflate:Vr,inflate:Wr,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Wr(e,t)},ungzip:Wr,constants:Be};const{Deflate:Yr,deflate:$r,deflateRaw:Jr,gzip:Qr}=sr,{Inflate:qr,inflate:en,inflateRaw:tn,ungzip:rn}=Hr;var nn={Deflate:Yr,deflate:$r,deflateRaw:Jr,gzip:Qr,Inflate:qr,inflate:en,inflateRaw:tn,ungzip:rn,constants:Be},sn=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,r=e.data,n=e.method,i=e.success,s=e.fail,o={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var a in this.customHeader)o[a]=this.customHeader[a];window.fetch?fetch(t,{method:n||"POST",headers:o,body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){i&&i(e)})).catch((function(e){s&&s(r,e)})):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:r,method:n,success:i,fail:s}))},e.prototype.useBeacon=function(e){var t=e.url,r=e.data,n=e.success,i=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(r))?n&&n():i&&i(r,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,r=e.url,n=e.data,i=e.method,s=e.success,o=e.fail,a=e.timeout,c=e.withCredentials,l=e.app_key,u=e.zip;try{var d=new XMLHttpRequest,h=i||"POST";if(d.open(h,""+r,!0),d.setRequestHeader("Content-Type","application/json; charset=utf-8"),l&&d.setRequestHeader("X-MCS-AppKey",""+l),Object.keys(this.customHeader).length)for(var p in this.customHeader)d.setRequestHeader(p,this.customHeader[p]);c&&(d.withCredentials=!0),a&&(d.timeout=a,d.ontimeout=function(){o&&o(n,t.errorCode.TIMEOUT)}),d.onload=function(){if(s){var e=null;if(d.responseText){try{e=JSON.parse(d.responseText)}catch{e={}}s(e,n)}}},d.onerror=function(){d.abort(),o&&o(n,t.errorCode.XHR_ON)};try{var f=JSON.stringify(n);if(this.config.need_zip&&u){var m=(new TextEncoder).encode(f),g=nn.gzip(m);d.setRequestHeader("Content-Encoding","gzip"),d.send(g)}else d.send(f)}catch(y){this.collector.emit("sdk-inner-error",{type:"sdk_error_send",eventData:n,errorCode:1e3,msg:y.message||y.stack||"sdk_error_send"})}}catch(y){this.collector.emit("sdk-inner-error",{type:"sdk_error_request",eventData:n,errorCode:1001,msg:y.message||y.stack||"sdk_error_request"})}},e.prototype.useRequest=function(e){var t=e.useBeacon,r=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!r)return void this.useFetch(e);this.useXhr(e)}},e}(),on=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var r=e.adapters.storage;this.cacheStorgae=new r(!1),this.loadUrl=t.devtool_url||"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(r){console.log("devTool load fail, "+r.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var r=t.split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}))}catch{}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(t){console.log("debug fail, "+t.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.5_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab"),t=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||_(F[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}];e.content=t,this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach((function(r){r.key===e&&(t=r)})),t},e.prototype.setInfo=function(e,t){var r=!1;this.info.forEach((function(n){n.key===e&&(r=!0,n=t)})),r||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var r=this.getInfo(e),n=null;return r.content.forEach((function(e){e.name===t&&(n=e)})),n},e.prototype.setSecondInfo=function(e,t,r){var n=this.getInfo(e),i=!1;if(n.content.forEach((function(e){e.name===t&&(e.value=r,i=!0)})),!i){var s={name:t,value:r,desc:t.toLocaleUpperCase()};n.content.push(s)}this.setInfo(e,n)},e.prototype.loadHook=function(){var e=this;this.collect.on(O.DEBUGGER_MESSAGE,(function(t){switch(t.type){case O.DEBUGGER_MESSAGE_SDK:var r={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};if(t.data&&(r.desc={content:JSON.stringify(t.data)}),e.updateLog(r),t.secType&&"AB"===t.secType)e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache());else if("USER"===t.secType)e.setSecondInfo("user","user_unique_id"===t.common?"uuid":t.common,e.collect.configManager.get(t.common));else if("HEADER"===t.secType){var n=e.collect.configManager.get(t.common);e.setSecondInfo("common",t.common,"custom"===t.common?JSON.stringify(n):n)}return void e.updateInfo();case O.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],s=i.events;if(!s.length)return;s.forEach((function(r){r.checkShow=!0,r.searchShow=!0,r.focusShow=!0,r.status=t.status,r.type=e.filterEvent.has(r.event)?"sdk":"cus",r.verifyType=t.verifyType?"verify":"no",r.info="","fail"===t.status&&(r.info={message:"code: "+t.code+"\uff0c msg: "+(t.msg||t.failType)})})),e.updateEvent(i)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.5_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var r={type:e,payload:t};window&&window.postMessage(r,this.devToolOrigin)}catch{}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+_("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.appendChild(document.createTextNode(e)),t.appendChild(r);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var i=document.createElement("div");i.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(i);var s=document.getElementById("debugger-applog-web");s&&s.addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),an={autotrack:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/autotrack.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/ab.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/stay.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/route.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/tracer.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/retry.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/visual.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/visual.js"},object:"LogVisual"}},cn=["et","profile","heartbeat","monitor"],ln=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new y,this.remotePlugin=new Map,this.Types=B,this.adapters.storage=A}return e.usePlugin=function(t,r,n){if(r){for(var i=!1,s=0,o=e.plugins.length;s<o;s++)if(e.plugins[s].name===r){e.plugins[s].plugin=t,e.plugins[s].options=n||{},i=!0;break}i||e.plugins.push({name:r,plugin:t,options:n})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,r){e&&("full"===this.loadType&&cn.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:r}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var r,n,i=this;try{r=JSON.parse(JSON.stringify(t))}catch{r=t}if(this.logger=new J(this.name,r.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(r&&b(r))if(r.app_id&&"number"==typeof(n=r.app_id)&&!isNaN(n))if(r.app_key&&"string"!=typeof r.app_key)this.logger.warn("app_key param is error, must be string, please check!");else{if(r.channel_domain||(r.report_channel&&!P().has(r.report_channel)?(this.logger.warn("your report_channel: "+r.channel+" is not exist. report_channel must be one of "+G().join(",")+", use default report_channel: us_east instead, please check!!!"),r.report_channel="us_east"):r.report_channel||-1!==["sg","va","in","my","ie","ie2"].indexOf(r.channel)||(this.logger.warn("your channel: "+r.channel+" is not exist. use report_channel instead and report_channel must be one of "+G().join(",")+", use default report_channel: us_east instead, please check!!!"),r.report_channel="us_east"),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK set channel warning",level:"error",time:Date.now(),data:"your report_channel: "+r.channel+" is not exist. report_channel must be one of "+G().join(",")+", use us_east instead, please check!!!",infoType:"sdk"})),this.spider=new Q,this.spider.checkSpider(r))return this.logger.warn("The current environment may be a spider, can not report!"),void this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK hit spider",level:"error",time:Date.now(),data:"The current environment may be a spider, can not report!",infoType:"sdk"});this.appBridge=new q(this,r.enable_native),this.requestManager=new sn(this,r),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new $(this,r),this.debugger=new on(this,r),this.initConfig=r,this.emit(B.Init),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:r,level:"info",time:Date.now(),infoType:"cus"}),r.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(r.app_id),this.eventManager=new ne,this.tokenManager=new se,this.sessionManager=new ae,Promise.all([new Promise((function(e){i.once(B.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){i.once(B.Start,(function(){e(!0)}))})),new Promise((function(e){i.once(B.LogSettingReady,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var r=t.plugin,n=t.options,s=Object.assign(i.initConfig,n);i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var o=new r;return o.apply(i,s),e.push(o),e}),i.pluginInstances)}catch(t){console.warn("load plugin error, "+t.message),i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}i.sdkReady=!0,i.emit(B.Ready),i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Init Completed",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.logger.info("appid: "+r.app_id+", userInfo:"+JSON.stringify(i.configManager.get("user"))),i.logger.info("appid: "+r.app_id+", sdk is ready, version is 5.3.5_oversea, you can report now !!!"),r.disable_auto_pv&&(i.disableAutoPageView=!0);try{("full"===i.loadType&&r.enable_ab_test||r.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(t){i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}i.pageView(),i.on(B.TokenChange,(function(e){"webid"===e&&i.pageView(),i.logger.info("appid: "+r.app_id+" token change, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})})),i.on(B.TokenReset,(function(){i.logger.info("appid: "+r.app_id+" token reset, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})})),i.on(B.RouteChange,(function(e){e.init||r.disable_route_report||i.pageView()}))})),this.tokenManager.apply(this,r),this.eventManager.apply(this,r),this.sessionManager.apply(this,r)),this.inited=!0}else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(!this.inited)return console.warn("config must be use after function init"),void this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config must be use after function init",infoType:"sdk"});if(!e||!b(e))return console.warn("config params is error, please check"),void this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config params is error, please check",infoType:"sdk"});var t;try{t=JSON.parse(JSON.stringify(t))}catch{t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var r=d({},t);if(this.initConfig&&this.initConfig.configPersist){var n=this.configManager.getStore();n&&(r=Object.assign(n,t)),this.configManager.setStore(t)}r.web_id,r.user_unique_id,r.device_id;var i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r}(r,["web_id","user_unique_id","device_id"]);r.hasOwnProperty("web_id")&&this.emit(B.ConfigWebId,r.web_id),r.hasOwnProperty("user_unique_id")&&this.emit(B.ConfigUuid,r.user_unique_id),r.hasOwnProperty("device_id")&&this.emit(B.ConfigDiD,r.device_id),this.configManager.set(i),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:r,infoType:"cus"})}},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(B.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(B.Start),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(B.Ready)))},e.prototype.event=function(e,t){var r=this;try{var n=[];if(Array.isArray(e))e.forEach((function(e){var t=r.processEvent(e[0],e[1]||{});t&&n.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;n.push(i)}this.bridgeReport?n.forEach((function(e){var t=e.event,n=e.params;r.appBridge.onEventV3(t,JSON.stringify(n))})):n.length&&(this.emit(B.Event,n),this.emit(B.SessionResetTime)),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(s){this.logger.warn("something error, please check"),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:s.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))return this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK BeconEvent Error",level:"error",time:Date.now(),data:"beconEvent not support batch report, please check",infoType:"sdk"}),void this.logger.warn("beconEvent not support batch report, please check");var r=[],n=this.processEvent(e,t||{});n&&(r.push(n),r.length&&(this.emit(B.BeconEvent,r),this.emit(B.SessionResetTime)),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is null\uff0c please check"),null;var r=e;/^event\./.test(e)&&(r=e.slice(6));var n=t;"object"!=typeof n&&(n={}),n.profile?delete n.profile:n.event_index=v();var i=void 0;return n.local_ms?(i=n.local_ms,delete n.local_ms):i=+new Date,{event:r,params:n,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(s){return this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:s.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,r){this.hook.emit(e,t,r)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},r=d(d({},t),e);this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",r)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(B.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return oe()},e.prototype.setSessionId=function(e){this.emit(B.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,r){this.emit(B.ResetStay,{url_path:e,title:t,url:r},B.Stay)},e.prototype.resetStayParams=function(e,t,r){void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),this.emit(B.SetStay,{url_path:e,title:t,url:r},B.Stay)},e.prototype.getToken=function(e,t){var r=this;if(this.inited){var n=!1,i=function(t){if(!n){n=!0;var i=r.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(d({},i))}},s=function(){r.tokenManager.getTobId().then((function(e){i(e)}))};this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?s():(t&&setTimeout((function(){i()}),t),this.on(B.Ready,(function(){s()})))}else console.warn("predefinePageView should call after init")},e.prototype.startTrackEvent=function(e){e&&this.emit(B.TrackEventDurationStart,e,B.TrackEventDuration)},e.prototype.endTrackEvent=function(e,t){void 0===t&&(t={}),e&&this.emit(B.TrackEventDurationEnd,{eventName:e,params:t},B.TrackEventDuration)},e.prototype.pauseTrackEvent=function(e){e&&this.emit(B.TrackEventDurationPause,e,B.TrackEventDuration)},e.prototype.resumeTrackEvent=function(e){e&&this.emit(B.TrackEventDurationResume,e,B.TrackEventDuration)},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(B.ProfileSet,e,B.Profile),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(B.ProfileSetOnce,e,B.Profile),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(B.ProfileIncrement,e,B.Profile),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(B.ProfileUnset,e,B.Profile),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(B.ProfileAppend,e,B.Profile),this.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(B.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,B.Ab)},e.prototype.getVar=function(e,t,r,n){this.emit(B.AbVar,{name:e,defaultValue:t,callback:r,uuid:n},B.Ab)},e.prototype.getABconfig=function(e,t){this.emit(B.AbConfig,{params:e,callback:t},B.Ab)},e.prototype.getABConfig=function(e,t){this.emit(B.AbConfig,{params:e,callback:t},B.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(B.AbVersionChangeOn,e,B.Ab),function(){t.emit(B.AbVersionChangeOff,e,B.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(B.AbVersionChangeOff,e,B.Ab)},e.prototype.openOverlayer=function(){this.emit(B.AbOpenLayer,"",B.Ab)},e.prototype.closeOverlayer=function(){this.emit(B.AbCloseLayer,"",B.Ab)},e.prototype.getAllVars=function(e){this.emit(B.AbAllVars,e,B.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(B.TokenComplete),this.emit(B.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(B.TokenComplete),this.emit(B.DestoryInstance))},e.plugins=[],e}(),un=function(){function e(){}return e.prototype.apply=function(e,t){var r=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var n=e.Types;e.on(n.SubmitVerify,(function(n){n.forEach((function(n){try{var i=JSON.parse(JSON.stringify(n));t.filter&&((i=t.filter(i))||console.warn("filter must return data !!")),e.eventFilter&&i&&((i=e.eventFilter(i))||console.warn("filterEvent api must return data !!"));var s=i||n,o=JSON.parse(JSON.stringify(s));if(!s.length)return;var a=!0;if(s.forEach((function(e){e.events.length||(a=!1)})),!a)return;e.requestManager.useBeacon({url:r.url,data:s}),e.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:o,code:200,status:"success",verifyType:!0})}catch(c){console.warn("something error, "+JSON.stringify(c.stack)),r.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"SDK Report ByteIo Verify Request Error",level:"error",time:Date.now(),data:c.message})}}))}))}}else console.log("please use correct et_test url")},e}(),dn=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var r,n=Date.now()+t;return r=window.setTimeout((function i(){var s=Date.now()-n;e(),n+=t,r=window.setTimeout(i,Math.max(0,t-s))}),t),function(){window.clearTimeout(r)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var r=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var n=this.collect.Types;this.collect.on(n.SessionReset,(function(){r.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),hn=function(){function e(){}return e.prototype.apply=function(e,t){var r=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var n=this.collect.Types;this.collect.on(n.Ready,(function(){r.sdkOnload()})),this.collect.on(n.SubmitError,(function(e){var t=e.type,n=e.eventData,i=e.errorCode,s=e.response;"f_data"===t&&r.sdkError(n,i,s)})),this.collect.on(e.Types.SDKInnerError,(function(e){var t=e.type,n=e.eventData,i=e.errorCode,s=e.msg;r.sdkInnerError(t,n,i,s)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),r=t.header,n=t.user,i=r.app_id,s=r.app_name,o=r.sdk_version,a=(n.web_id,{events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:s||"",sdk_version:o,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA",url:location.href,is_setting:this.config.enable_logsetting||!1,enable_logsetting_params:this.config.enable_logsetting_params||!1,enable_logsetting_header_custom:this.config.enable_logsetting_header_custom||!1}),local_time_ms:Date.now()}],user:{user_unique_id:n.user_unique_id},header:{app_id:6656}});setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[a],timeout:3e4,forceXhr:!0})}),16)}catch{}},e.prototype.sdkError=function(e,t,r){var n=this;try{var i=e[0],s=i.user,o=i.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var c={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({type:"sdk_event_error",error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:o,user:s,err_msg:r.m||""}),local_time_ms:Date.now()}})),user:{user_unique_id:s.user_unique_id},header:{app_id:6656}};setTimeout((function(){n.collect.requestManager.useRequest({url:n.url,data:[c],timeout:3e4,forceXhr:!0})}),16)}catch{}},e.prototype.sdkInnerError=function(e,t,r,n){var i=this;try{var s=t[0],o=s.user,a=s.header,c=[];t.forEach((function(e){e.events.forEach((function(e){c.push(e)}))}));var l={events:c.map((function(t){return{event:"on_error",params:JSON.stringify({type:e,error_code:r,app_id:a.app_id,app_name:a.app_name||"",error_event:t.event,sdk_version:a.sdk_version,local_time_ms:t.local_time_ms,tea_event_index:Date.now(),params:t.params,header:a,user:o,ua:window.navigator.userAgent,err_msg:n}),local_time_ms:Date.now()}})),user:o,header:{}};setTimeout((function(){i.collect.requestManager.useRequest({url:i.url,data:[l],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch{}},e}(),pn=typeof window<"u"?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,fn=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,r){if("sdk"===t)if(an.hasOwnProperty(r)){var n=an[r].object,i=""+an[r].src[e.channel];e.exist(r,n,i)}else console.warn("your "+r+" is not exist\uff0cplease check plugin name");else"object"==typeof t&&(t.src?e.exist(r,t.call,t.src):e.process(r,t.instance,"INSTANCE"))}))}catch(t){this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"LoadExtend Fail",level:"error",time:Date.now(),data:t.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,r){var n=this;pn[t]?(this.process(e,pn[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,r,(function(){n.process(e,pn[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,r){try{if(r){var n=new t;n.apply&&n.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(i){this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Extend Process Fail",level:"error",time:Date.now(),data:i.message}),console.log("excude "+e+" error, message:"+i.message)}},e.prototype.loadPlugin=function(e,t,r,n){var i=this;try{var s=document.createElement("script");s.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(r),s.onerror=function(){n(t)},s.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(s)}catch(o){this.collect.emit(O.DEBUGGER_MESSAGE,{type:O.DEBUGGER_MESSAGE_SDK,info:"Extend LoadPlugin Fail",level:"error",time:Date.now(),data:o.message})}},e}();ln.usePlugin(fn,"extend"),ln.usePlugin(un,"et"),ln.usePlugin(dn,"heartbeat"),ln.usePlugin(hn,"monitor");var mn=new ln("default");const gn={selectRoute:900,browserError:1e3,crc32:1e3,preUpload:1001,initUploadID:1002,process:1003,fetchStatus:10031,fileMerge:1004,complete:1005},yn=999,bn=1e3,vn=36e5,_n=1024;var wn=(e=>(e.VIDEO="video",e.IMAGE="image",e.OBJECT="object",e))(wn||{});const Sn={video:"video_upload",image:"image_upload",object:"object_upload"},En={UPLOADING:1,CANCEL:2,PAUSE:3},xn={VOD:"vod",IMAGEX:"imagex"},Tn=611736,kn=3145728,Cn=3145728,On="uploading_";class zn{constructor(e,t){this.options=e,this.context=t,this.teaLog=mn,this.noLog=!1;let r=this.getConfigByRegion(this.options.region);const n=this.options.teaConfig;if(n)try{r=Object.assign(r,n),this.noLog=!1}catch{console.warn("[BytedUpload]: tea user config invalid!")}this.noLog||(this.teaLog.init(Object.assign(r,n)),this.teaLog.config({evtParams:{sdk_version:"0.1.12"}}),this.setLineAppId(this.options.appId),this.setUserUniqueId(this.options.userId),this.teaLog.start())}getConfigByRegion(e=""){const t=e.toLowerCase().indexOf("ttp")>=0,r=e.toLowerCase().indexOf("eu")>=0;return this.tea_app_id=Tn,this.tea_report_channel="EU-TTP"===e||"EU-TTP2"===e||"us-east-red"===e||"gcp"===e||r&&t?"eu_ttp2":t?"us_ttp_w":"sg_central_tt",this.options.logDomain&&(this.tea_channel_domain=this.options.logDomain,this.noLog=!1),{app_id:this.tea_app_id,channel_domain:this.tea_channel_domain,report_channel:this.tea_report_channel,log:!1,disable_sdk_monitor:!0,disable_auto_pv:!0}}send(e,t={}){var r,n,i,s;const o=this.context,{key:a}=e,c=o.tasks[a],l=gn[e.stage]||yn,u=e.fileType||c&&c.fileType,d=e.fileSize||0,h={log_type:Sn[u],stage:l,fk:a,fs:d,req:e.req,res:e.res,ts:Math.round(Date.now()/bn),sst:e.stageStartTime,set:e.stageEndTime,dur:e.duration,tdur:e.totalDuration||0,durs:e.duration/bn||0,tdurs:e.totalDuration/bn||0,eslr:e.enableSelectRoute,ucsrr:e.useClientSelectRouteResult,skipCommit:!!e.skipCommit,errc:null==(r=e.extra)?void 0:r.errorCode,err:null==(n=e.extra)?void 0:n.error,msg:null==(i=e.extra)?void 0:i.message,experimental:+!!e.logicalPart,ss:e.sliceSize,sc:e.sliceCount,isBreak:+!!e.isBreak,store_region:e.storeRegion,idu:e.isDirect,serviceType:e.serviceType,gwu:!!e.gatewayUpload,merge_request:!!e.mergeRequest,cache_apply:!!e.cacheApply,ixe:!(null==c||!c.imagexEnableEncrypt),isRestart:+!(null==c||!c.isRestart)},p="image"===u?"image":"video",f=e.type,m=`${p}_`+(["error","retry","finish"].includes(f||"")?f:l);switch(l){case gn.crc32:this.teaLog.event(m,Object.assign({},h,{type:e.type,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,crc32Array:e.crc32Array,isDirect:e.isDirect})}));break;case gn.preUpload:this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,sig:e.signature,stk:e.proxyStsToken})}));break;case gn.initUploadID:this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,upid:e.uploadID})}));break;case gn.process:case gn.fetchStatus:e.isAllFinish||e.isDirect||(delete h.sst,delete h.set,delete h.dur),this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,errc:e.extra&&e.extra.errorCode,upload_host:e.tosDomain,af:!!e.isAllFinish,cst:e.crc32StartTime,cet:e.crc32EndTime,cdur:e.crc32Duration,slst:e.sliceStartTime,slet:e.sliceEndTime,sldurs:e.sliceDuration&&e.sliceDuration/1e3,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,af:e.isAllFinish}),...t}));break;case gn.fileMerge:this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message})}));break;case gn.complete:this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,speed:Math.round(d/(e.totalDuration/bn)/_n),vid:(null==(s=e.uploadResult)?void 0:s.Vid)||"",ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,vid:e.uploadResult&&e.uploadResult.Vid})}));break;case gn.selectRoute:this.teaLog.event(m,Object.assign({},h,{type:e.type,errc:e.extra&&e.extra.errorCode,race_info:e.raceInfo,client_ip:e.lastClientIp,uc:e.useCache,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message})}));break;default:this.teaLog.event(m,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message})}))}}setLineAppId(e){this.teaLog.config({evtParams:{line_app_id:e}})}setUserUniqueId(e){this.teaLog.config({user_unique_id:e})}baseSend(e,t){this.teaLog.event(e,t)}console(e){this.options.debug&&console.log(e)}}var In,Mn={exports:{}},Rn={exports:{}};function Dn(){return In||(In=1,function(e){var t;t=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},s=i.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=function(t){var r=987654321,n=4294967295;return function(){var i=((r=36969*(65535&r)+(r>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var a=i(4294967296*(r||e.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new o.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,i);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(n,u);var d=n.splice(0,c);r.sigBytes-=l}return new o.init(d,l)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=n.algo={};return n}(Math);return e},e.exports=t()}(Rn)),Rn.exports}var Nn,jn={exports:{}};function An(){return Nn||(Nn=1,function(e){var t;t=function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,a=[],c=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)e(n)&&(i<8&&(a[i]=r(t.pow(n,.5))),c[i]=r(t.pow(n,1/3)),i++),n++}();var l=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],d=r[6],h=r[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var f=l[p-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=l[p-2],y=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[p]=m+l[p-7]+y+l[p-16]}var b=n&i^n&s^i&s,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),_=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[p]+l[p];h=d,d=u,u=a,a=o+_|0,o=s,s=i,i=n,n=_+(v+b)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=s._createHelper(u),r.HmacSHA256=s._createHmacHelper(u)}(Math),e.SHA256},e.exports=t(Dn())}(jn)),jn.exports}var Ln,Un={exports:{}};function Pn(){return Ln||(Ln=1,function(e){var t;t=function(e){var t,r,n;r=(t=e).lib.Base,n=t.enc.Utf8,t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var r=e.blockSize,i=4*r;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,c=o.words,l=0;l<r;l++)a[l]^=1549556828,c[l]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})},e.exports=t(Dn())}(Un)),Un.exports}!function(e){var t;t=function(e){return e.HmacSHA256},e.exports=t(Dn(),An(),Pn())}(Mn);const Gn=t(Mn.exports),Zn=t(An());function Fn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xn={exports:{}};!function(t){var r;r=function(){return function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var c="function"==typeof Fn&&Fn;if(!a&&c)return c(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof Fn&&Fn,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,r,n){(function(e){var t,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var i=0,s=new n(u),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),t=function(){o.data=i=++i%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var a=new e.MessageChannel;a.port1.onmessage=u,t=function(){a.port2.postMessage(0)}}else t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};var c,l=[];function u(){c=!0;for(var e,t,r=l.length;r;){for(t=l,l=[],e=-1;++e<r;)t[e]();r=l.length}c=!1}function d(e){1===l.push(e)&&!c&&t()}r.exports=d}).call(this,typeof e<"u"?e:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,r){var n=e(1);function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function d(e,t,r){n((function(){var n;try{n=t(r)}catch(i){return s.reject(e,i)}n===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,s.reject(e,t))}function i(t){r||(r=!0,s.resolve(e,t))}function o(){t(i,n)}var a=f(o);"error"===a.status&&n(a.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function m(e){return e instanceof this?e:s.resolve(new this(i),e)}function g(e){var t=new this(i);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,c=-1,l=new this(i);++c<r;)u(e[c],c);return l;function u(e,i){function c(e){o[i]=e,++a===r&&!n&&(n=!0,s.resolve(l,o))}t.resolve(e).then(c,(function(e){n||(n=!0,s.reject(l,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var o=-1,a=new this(i);++o<r;)c(e[o]);return a;function c(e){t.resolve(e).then((function(e){n||(n=!0,s.resolve(a,e))}),(function(e){n||(n=!0,s.reject(a,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var r=new this.constructor(i);return this.state!==c?d(r,this.state===a?e:t,this.outcome):this.queue.push(new u(r,e,t)),r},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return s.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},l.resolve=m,l.reject=g,l.all=y,l.race=b},{1:1}],3:[function(t,r,n){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,typeof e<"u"?e:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var o=s();function a(){try{if(!o||!o.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}typeof Promise>"u"&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",m=void 0,g={},y=Object.prototype.toString,b="readonly",v="readwrite";function _(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function w(e){return new l((function(t){var r=e.transaction(f,v),n=c([""]);r.objectStore(f).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof m?l.resolve(m):w(e).then((function(e){return m=e}))}function E(e){var t=g[e.name],r={};r.promise=new l((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function x(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function T(e,t){var r=g[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function k(e,t){return new l((function(r,n){if(g[e.name]=g[e.name]||A(),e.db){if(!t)return r(e.db);E(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var s=o.open.apply(o,i);t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),n(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},r(t),x(e)}}))}function C(e){return k(e,!1)}function O(e){return k(e,!0)}function z(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function I(e){return new l((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function M(e){return c([_(atob(e.data))],{type:e.type})}function R(e){return e&&e.__local_forage_encoded_blob}function D(e){var t=this,r=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(r,e,e),r}function N(e){E(e);for(var t=g[e.name],r=t.forages,n=0;n<r.length;n++){var i=r[n];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,C(e).then((function(t){return e.db=t,z(e)?O(e):t})).then((function(n){e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n})).catch((function(t){throw T(e,t),t}))}function j(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(s){if(n>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),O(e)})).then((function(){return N(e).then((function(){j(e,t,r,n-1)}))})).catch(r);r(s)}}function A(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=g[r.name];i||(i=A(),g[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var s=[];function o(){return l.resolve()}for(var a=0;a<i.forages.length;a++){var c=i.forages[a];c!==t&&s.push(c._initReady().catch(o))}var u=i.forages.slice(0);return l.all(s).then((function(){return r.db=i.db,C(r)})).then((function(e){return r.db=e,z(r,t._defaultConfig.version)?O(r):e})).then((function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<u.length;n++){var s=u[n];s!==t&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}}))}function U(e,t){var r=this;e=h(e);var n=new l((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),R(e)&&(e=M(e)),t(e)},o.onerror=function(){n(o.error)}}catch(a){n(a)}}))})).catch(n)}));return u(n,t),n}function P(e,t){var r=this,n=new l((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var r=o.result;if(r){var n=r.value;R(n)&&(n=M(n));var i=e(n,r.key,a++);void 0!==i?t(i):r.continue()}else t()},o.onerror=function(){n(o.error)}}catch(c){n(c)}}))})).catch(n)}));return u(n,t),n}function G(e,t,r){var n=this;e=h(e);var i=new l((function(r,i){var s;n.ready().then((function(){return s=n._dbInfo,"[object Blob]"===y.call(t)?S(s.db).then((function(e){return e?t:I(t)})):t})).then((function(t){j(n._dbInfo,v,(function(s,o){if(s)return i(s);try{var a=o.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),r(t)},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(l){i(l)}}))})).catch(i)}));return u(i,r),i}function Z(e,t){var r=this;e=h(e);var n=new l((function(t,n){r.ready().then((function(){j(r._dbInfo,v,(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){n(o.error)},s.onabort=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(a){n(a)}}))})).catch(n)}));return u(n,t),n}function F(e){var t=this,r=new l((function(e,r){t.ready().then((function(){j(t._dbInfo,v,(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(o){r(o)}}))})).catch(r)}));return u(r,e),r}function X(e){var t=this,r=new l((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){r(s.error)}}catch(o){r(o)}}))})).catch(r)}));return u(r,e),r}function K(e,t){var r=this,n=new l((function(t,n){e<0?t(null):r.ready().then((function(){j(r._dbInfo,b,(function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName),a=!1,c=o.openKeyCursor();c.onsuccess=function(){var r=c.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},c.onerror=function(){n(c.error)}}catch(l){n(l)}}))})).catch(n)}));return u(n,t),n}function B(e){var t=this,r=new l((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];s.onsuccess=function(){var t=s.result;t?(o.push(t.key),t.continue()):e(o)},s.onerror=function(){r(s.error)}}catch(a){r(a)}}))})).catch(r)}));return u(r,e),r}function V(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;if(e.name){var s=e.name===r.name&&i._dbInfo.db?l.resolve(i._dbInfo.db):C(e).then((function(t){var r=g[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t}));n=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;E(e);var n=g[e.name],i=n.forages;t.close();for(var s=0;s<i.length;s++){var a=i[s];a._dbInfo.db=null,a._dbInfo.version=r}return new l((function(t,n){var i=o.open(e.name,r);i.onerror=function(e){i.result.close(),n(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,x(r._dbInfo)}})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}})):s.then((function(t){E(e);var r=g[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++)n[i]._dbInfo.db=null;return new l((function(t,r){var n=o.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)x(n[t]._dbInfo)})).catch((function(t){throw(T(e,t)||l.resolve()).catch((function(){})),t}))}))}else n=l.reject("Invalid arguments");return u(n,t),n}var W={_driver:"asyncStorage",_initStorage:L,_support:a(),iterate:P,getItem:U,setItem:G,removeItem:Z,clear:F,length:X,key:K,keys:B,dropInstance:V};function H(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",q=Q.length,ee="arbf",te="blob",re="si08",ne="ui08",ie="uic8",se="si16",oe="si32",ae="ur16",ce="ui32",le="fl32",ue="fl64",de=q+ee.length,he=Object.prototype.toString;function pe(e){var t,r,n,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<a;t+=4)r=Y.indexOf(e[t]),n=Y.indexOf(e[t+1]),i=Y.indexOf(e[t+2]),s=Y.indexOf(e[t+3]),u[c++]=r<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&s;return l}function fe(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Y[r[t]>>2],n+=Y[(3&r[t])<<4|r[t+1]>>4],n+=Y[(15&r[t+1])<<2|r[t+2]>>6],n+=Y[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function me(e,t){var r="";if(e&&(r=he.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var n,i=Q;e instanceof ArrayBuffer?(n=e,i+=ee):(n=e.buffer,"[object Int8Array]"===r?i+=re:"[object Uint8Array]"===r?i+=ne:"[object Uint8ClampedArray]"===r?i+=ie:"[object Int16Array]"===r?i+=se:"[object Uint16Array]"===r?i+=ae:"[object Int32Array]"===r?i+=oe:"[object Uint32Array]"===r?i+=ce:"[object Float32Array]"===r?i+=le:"[object Float64Array]"===r?i+=ue:t(new Error("Failed to get type for BinaryArray"))),t(i+fe(n))}else if("[object Blob]"===r){var s=new FileReader;s.onload=function(){var r=$+e.type+"~"+fe(this.result);t(Q+te+r)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}}function ge(e){if(e.substring(0,q)!==Q)return JSON.parse(e);var t,r=e.substring(de),n=e.substring(q,de);if(n===te&&J.test(r)){var i=r.match(J);t=i[1],r=r.substring(i[0].length)}var s=pe(r);switch(n){case ee:return s;case te:return c([s],{type:t});case re:return new Int8Array(s);case ne:return new Uint8Array(s);case ie:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ae:return new Uint16Array(s);case oe:return new Int32Array(s);case ce:return new Uint32Array(s);case le:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+n)}}var ye={serialize:me,deserialize:ge,stringToBuffer:pe,bufferToString:fe};function be(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function ve(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new l((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(i){return n(i)}r.db.transaction((function(i){be(i,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=ye,i}function _e(e,t,r,n,i,s){e.executeSql(r,n,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,o):be(e,t,(function(){e.executeSql(r,n,i,s)}),s)}),s):s(e,o)}),s)}function we(e,t){var r=this;e=h(e);var n=new l((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,t),n}function Se(e,t){var r=this,n=new l((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT * FROM "+i.storeName,[],(function(r,n){for(var s=n.rows,o=s.length,a=0;a<o;a++){var c=s.item(a),l=c.value;if(l&&(l=i.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,t),n}function Ee(e,t,r,n){var i=this;e=h(e);var s=new l((function(s,o){i.ready().then((function(){void 0===t&&(t=null);var a=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,l){l?o(l):c.db.transaction((function(r){_e(r,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void s(Ee.apply(i,[e,a,r,n-1]));o(t)}}))}))})).catch(o)}));return u(s,r),s}function xe(e,t,r){return Ee.apply(this,[e,t,r,1])}function Te(e,t){var r=this;e=h(e);var n=new l((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,t),n}function ke(e){var t=this,r=new l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,e),r}function Ce(e){var t=this,r=new l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,e),r}function Oe(e,t){var r=this,n=new l((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){_e(r,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,t),n}function ze(e){var t=this,r=new l((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){_e(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,e),r}function Ie(e){return new l((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var i=[],s=0;s<n.rows.length;s++)i.push(n.rows.item(s).name);t({db:e,storeNames:i})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Me(e,t){t=p.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,i=this;return u(n=e.name?new l((function(t){var n;n=e.name===r.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Ie(n))})).then((function(e){return new l((function(t,r){e.db.transaction((function(n){function i(e){return new l((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var s=[],o=0,a=e.storeNames.length;o<a;o++)s.push(i(e.storeNames[o]));l.all(s).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):l.reject("Invalid arguments"),t),n}var Re={_driver:"webSQLStorage",_initStorage:ve,_support:H(),iterate:Se,getItem:we,setItem:xe,removeItem:Te,clear:ke,length:Ce,key:Oe,keys:ze,dropInstance:Me};function De(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ne(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Ae(){return!je()||localStorage.length>0}function Le(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ne(e,t._defaultConfig),Ae()?(t._dbInfo=r,r.serializer=ye,l.resolve()):l.reject()}function Ue(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return u(r,e),r}function Pe(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return u(n,t),n}function Ge(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,s=localStorage.length,o=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(n)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(i),o++)))return l}}}));return u(n,t),n}function Ze(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return u(n,t),n}function Fe(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++){var s=localStorage.key(i);0===s.indexOf(e.keyPrefix)&&n.push(s.substring(e.keyPrefix.length))}return n}));return u(r,e),r}function Xe(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Ke(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(n,t),n}function Be(e,t,r){var n=this;e=h(e);var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new l((function(i,s){var o=n._dbInfo;o.serializer.serialize(t,(function(t,n){if(n)s(n);else try{localStorage.setItem(o.keyPrefix+e,t),i(r)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&s(a),s(a)}}))}))}));return u(i,r),i}function Ve(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,i=this;return u(n=e.name?new l((function(t){e.storeName?t(Ne(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):l.reject("Invalid arguments"),t),n}var We={_driver:"localStorageWrapper",_initStorage:Le,_support:De(),iterate:Ge,getItem:Pe,setItem:Be,removeItem:Ke,clear:Ue,length:Xe,key:Ze,keys:Fe,dropInstance:Ve},He=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var r=e.length,n=0;n<r;){if(He(e[n],t))return!0;n++}return!1},$e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Qe={},qe={INDEXEDDB:W,WEBSQL:Re,LOCALSTORAGE:We},et=[qe.INDEXEDDB._driver,qe.WEBSQL._driver,qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&($e(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var ot=function(){function e(t){for(var r in i(this,e),qe)if(qe.hasOwnProperty(r)){var n=qe[r],s=n._driver;this[r]=s,Je[s]||this.defineDriver(n)}this._defaultConfig=st({},nt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new l((function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);for(var s=rt.concat("_initStorage"),o=0,a=s.length;o<a;o++){var c=s[o];if((!Ye(tt,c)||e[c])&&"function"!=typeof e[c])return void r(i)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=l.reject(t);return u(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var i=tt[r];e[i]||(e[i]=t(i))}};d();var h=function(r){Je[n]&&console.info("Redefining LocalForage driver: "+n),Je[n]=e,Qe[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,r):h(!!e._support):h(!0)}catch(p){r(p)}}));return d(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return d(n,t,r),n},e.prototype.getSerializer=function(e){var t=l.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;$e(e)||(e=[e]);var i=this._getSupportedDrivers(e);function s(){n._config.driver=n.driver()}function o(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}function a(e){return function(){var t=0;function r(){for(;t<e.length;){var i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(o).catch(r)}s();var a=new Error("No available storage method found.");return n._driverSet=l.reject(a),n._driverSet}return r()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=a(i)}))})).catch((function(){s();var e=new Error("No available storage method found.");return n._driverSet=l.reject(e),n._driverSet})),d(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new ot;t.exports=at},{3:3}]},{},[4])(4)},t.exports=r()}(Xn);const Kn=t(Xn.exports),Bn={FILE_ERROR:1000001,STSTOKEN_FORMAT_ERROR:1000002,CRC32_ERROR:1000003,APPLY_NETWORK_ERROR:1001e3,INIT_UPLOAD_ID_NETWORK_ERROR:1002e3,PROGRESS_NETWORK_ERROR:1003e3,FILE_ERROR_UPLOADING:1003003,GET_PART_FAIL:1003004,MERGE_NETWORK_ERROR:1004e3,COMMIT_NETWORK_ERROR:1005e3},Vn={STS_TOKEN_ERROR:100026,TOKEN_EXPIRED:100006,READ_IO_ERROR:4099,ENCRYPTION_ERROR:5003,PART_NUMBER_NOT_FOUND:4021,UPLOAD_PART_OUT_OF_RANGE:4010,BAD_REQUEST:4e3,ACQUIRE_LOCK_TIMEOUT:4026,PART_MERGED:4024},Wn={FILE_ERROR:"The file is not an instance of Blob ",STSTOKEN_FORMAT_ERROR:"The format of stsToken is incorrect.",FILE_ERROR_UPLOADING:"An error occurred reading the file",GET_PART_FAIL:"An error occurred getting part information from server",PROGRESS_NETWORK_ERROR:"slice upload failed: NETERROR"};let Hn=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function Yn(e,t){e=new Uint8Array(e);let r=~t;const{length:n}=e;for(let i=0;i<n;i++)r=Hn[255&(r^e[i])]^r>>>8;return~r>>>0}function $n(e){return e.length<8?$n(e=`0${e}`):e}function Jn(e){if(typeof e<"u")return $n(Number(e).toString(16))}typeof Int32Array<"u"&&(Hn=new Int32Array(Hn));const Qn={crc32:Yn,dec2hex:Jn},qn="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBLPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVChDKXtyZXR1cm4gQyYmQy5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQywiZGVmYXVsdCIpP0MuZGVmYXVsdDpDfXZhciBYPXtleHBvcnRzOnt9fSxWPXtleHBvcnRzOnt9fSxycjtmdW5jdGlvbiBVKCl7cmV0dXJuIHJyfHwocnI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMpe0MuZXhwb3J0cz1jKCl9KShLLGZ1bmN0aW9uKCl7dmFyIGI9Ynx8ZnVuY3Rpb24oYyxrKXt2YXIgRD1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXt9cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBoO3JldHVybiByLnByb3RvdHlwZT1mLGg9bmV3IHIsci5wcm90b3R5cGU9bnVsbCxofX0oKSxGPXt9LFM9Ri5saWI9e30seT1TLkJhc2U9ZnVuY3Rpb24oKXtyZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHIpe3ZhciBmPUQodGhpcyk7cmV0dXJuIHImJmYubWl4SW4ociksKCFmLmhhc093blByb3BlcnR5KCJpbml0Iil8fHRoaXMuaW5pdD09PWYuaW5pdCkmJihmLmluaXQ9ZnVuY3Rpb24oKXtmLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGYuaW5pdC5wcm90b3R5cGU9ZixmLiRzdXBlcj10aGlzLGZ9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciByPXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHIuaW5pdC5hcHBseShyLGFyZ3VtZW50cykscn0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24ocil7Zm9yKHZhciBmIGluIHIpci5oYXNPd25Qcm9wZXJ0eShmKSYmKHRoaXNbZl09cltmXSk7ci5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9ci50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX19KCksdD1TLldvcmRBcnJheT15LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihyLGYpe3I9dGhpcy53b3Jkcz1yfHxbXSxmIT1rP3RoaXMuc2lnQnl0ZXM9Zjp0aGlzLnNpZ0J5dGVzPXIubGVuZ3RoKjR9LHRvU3RyaW5nOmZ1bmN0aW9uKHIpe3JldHVybihyfHxtKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihyKXt2YXIgZj10aGlzLndvcmRzLGg9ci53b3JkcyxhPXRoaXMuc2lnQnl0ZXMsbj1yLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxhJTQpZm9yKHZhciB1PTA7dTxuO3UrKyl7dmFyIHo9aFt1Pj4+Ml0+Pj4yNC11JTQqOCYyNTU7ZlthK3U+Pj4yXXw9ejw8MjQtKGErdSklNCo4fWVsc2UgZm9yKHZhciB1PTA7dTxuO3UrPTQpZlthK3U+Pj4yXT1oW3U+Pj4yXTtyZXR1cm4gdGhpcy5zaWdCeXRlcys9bix0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciByPXRoaXMud29yZHMsZj10aGlzLnNpZ0J5dGVzO3JbZj4+PjJdJj00Mjk0OTY3Mjk1PDwzMi1mJTQqOCxyLmxlbmd0aD1jLmNlaWwoZi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgcj15LmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHIud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxyfSxyYW5kb206ZnVuY3Rpb24ocil7Zm9yKHZhciBmPVtdLGg9ZnVuY3Rpb24odyl7dmFyIHc9dyxQPTk4NzY1NDMyMSxIPTQyOTQ5NjcyOTU7cmV0dXJuIGZ1bmN0aW9uKCl7UD0zNjk2OSooUCY2NTUzNSkrKFA+PjE2KSZILHc9MThlMyoodyY2NTUzNSkrKHc+PjE2KSZIO3ZhciBlPShQPDwxNikrdyZIO3JldHVybiBlLz00Mjk0OTY3Mjk2LGUrPS41LGUqKGMucmFuZG9tKCk+LjU/MTotMSl9fSxhPTAsbjthPHI7YSs9NCl7dmFyIHU9aCgobnx8Yy5yYW5kb20oKSkqNDI5NDk2NzI5Nik7bj11KCkqOTg3NjU0MDcxLGYucHVzaCh1KCkqNDI5NDk2NzI5NnwwKX1yZXR1cm4gbmV3IHQuaW5pdChmLHIpfX0pLEI9Ri5lbmM9e30sbT1CLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLndvcmRzLGg9ci5zaWdCeXRlcyxhPVtdLG49MDtuPGg7bisrKXt2YXIgdT1mW24+Pj4yXT4+PjI0LW4lNCo4JjI1NTthLnB1c2goKHU+Pj40KS50b1N0cmluZygxNikpLGEucHVzaCgodSYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gYS5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24ocil7Zm9yKHZhciBmPXIubGVuZ3RoLGg9W10sYT0wO2E8ZjthKz0yKWhbYT4+PjNdfD1wYXJzZUludChyLnN1YnN0cihhLDIpLDE2KTw8MjQtYSU4KjQ7cmV0dXJuIG5ldyB0LmluaXQoaCxmLzIpfX0scD1CLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLndvcmRzLGg9ci5zaWdCeXRlcyxhPVtdLG49MDtuPGg7bisrKXt2YXIgdT1mW24+Pj4yXT4+PjI0LW4lNCo4JjI1NTthLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1KSl9cmV0dXJuIGEuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLmxlbmd0aCxoPVtdLGE9MDthPGY7YSsrKWhbYT4+PjJdfD0oci5jaGFyQ29kZUF0KGEpJjI1NSk8PDI0LWElNCo4O3JldHVybiBuZXcgdC5pbml0KGgsZil9fSxsPUIuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShwLnN0cmluZ2lmeShyKSkpfWNhdGNoe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKHIpe3JldHVybiBwLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChyKSkpfX0sRT1TLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09eS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgdC5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihyKXt0eXBlb2Ygcj09InN0cmluZyImJihyPWwucGFyc2UocikpLHRoaXMuX2RhdGEuY29uY2F0KHIpLHRoaXMuX25EYXRhQnl0ZXMrPXIuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKHIpe3ZhciBmPXRoaXMuX2RhdGEsaD1mLndvcmRzLGE9Zi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLHU9bio0LHo9YS91O3I/ej1jLmNlaWwoeik6ej1jLm1heCgoenwwKS10aGlzLl9taW5CdWZmZXJTaXplLDApO3ZhciB3PXoqbixQPWMubWluKHcqNCxhKTtpZih3KXtmb3IodmFyIEg9MDtIPHc7SCs9bil0aGlzLl9kb1Byb2Nlc3NCbG9jayhoLEgpO3ZhciBlPWguc3BsaWNlKDAsdyk7Zi5zaWdCeXRlcy09UH1yZXR1cm4gbmV3IHQuaW5pdChlLFApfSxjbG9uZTpmdW5jdGlvbigpe3ZhciByPXkuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gci5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCkscn0sX21pbkJ1ZmZlclNpemU6MH0pO1MuSGFzaGVyPUUuZXh0ZW5kKHtjZmc6eS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7RS5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLl9hcHBlbmQociksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHIpe3ImJnRoaXMuX2FwcGVuZChyKTt2YXIgZj10aGlzLl9kb0ZpbmFsaXplKCk7cmV0dXJuIGZ9LGJsb2NrU2l6ZToxNixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbihmLGgpe3JldHVybiBuZXcgci5pbml0KGgpLmZpbmFsaXplKGYpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKGYsaCl7cmV0dXJuIG5ldyBnLkhNQUMuaW5pdChyLGgpLmZpbmFsaXplKGYpfX19KTt2YXIgZz1GLmFsZ289e307cmV0dXJuIEZ9KE1hdGgpO3JldHVybiBifSl9KFYpKSxWLmV4cG9ydHN9dmFyIEc9e2V4cG9ydHM6e319LGVyO2Z1bmN0aW9uIHlyKCl7cmV0dXJuIGVyfHwoZXI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMpe0MuZXhwb3J0cz1jKFUoKSl9KShLLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPWIsaz1jLmxpYixEPWsuV29yZEFycmF5LEY9Yy5lbmM7Ri5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih5KXt2YXIgdD15LndvcmRzLEI9eS5zaWdCeXRlcyxtPXRoaXMuX21hcDt5LmNsYW1wKCk7Zm9yKHZhciBwPVtdLGw9MDtsPEI7bCs9Mylmb3IodmFyIEU9dFtsPj4+Ml0+Pj4yNC1sJTQqOCYyNTUsZz10W2wrMT4+PjJdPj4+MjQtKGwrMSklNCo4JjI1NSxyPXRbbCsyPj4+Ml0+Pj4yNC0obCsyKSU0KjgmMjU1LGY9RTw8MTZ8Zzw8OHxyLGg9MDtoPDQmJmwraCouNzU8QjtoKyspcC5wdXNoKG0uY2hhckF0KGY+Pj42KigzLWgpJjYzKSk7dmFyIGE9bS5jaGFyQXQoNjQpO2lmKGEpZm9yKDtwLmxlbmd0aCU0OylwLnB1c2goYSk7cmV0dXJuIHAuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHkpe3ZhciB0PXkubGVuZ3RoLEI9dGhpcy5fbWFwLG09dGhpcy5fcmV2ZXJzZU1hcDtpZighbSl7bT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgcD0wO3A8Qi5sZW5ndGg7cCsrKW1bQi5jaGFyQ29kZUF0KHApXT1wfXZhciBsPUIuY2hhckF0KDY0KTtpZihsKXt2YXIgRT15LmluZGV4T2YobCk7RSE9PS0xJiYodD1FKX1yZXR1cm4gUyh5LHQsbSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In07ZnVuY3Rpb24gUyh5LHQsQil7Zm9yKHZhciBtPVtdLHA9MCxsPTA7bDx0O2wrKylpZihsJTQpe3ZhciBFPUJbeS5jaGFyQ29kZUF0KGwtMSldPDxsJTQqMixnPUJbeS5jaGFyQ29kZUF0KGwpXT4+PjYtbCU0KjI7bVtwPj4+Ml18PShFfGcpPDwyNC1wJTQqOCxwKyt9cmV0dXJuIEQuY3JlYXRlKG0scCl9fSgpLGIuZW5jLkJhc2U2NH0pfShHKSksRy5leHBvcnRzfXZhciBqPXtleHBvcnRzOnt9fSx0cjtmdW5jdGlvbiBCcigpe3JldHVybiB0cnx8KHRyPTEsZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGs9YixEPWsubGliLEY9RC5Xb3JkQXJyYXksUz1ELkhhc2hlcix5PWsuYWxnbyx0PVtdOyhmdW5jdGlvbigpe2Zvcih2YXIgZz0wO2c8NjQ7ZysrKXRbZ109Yy5hYnMoYy5zaW4oZysxKSkqNDI5NDk2NzI5NnwwfSkoKTt2YXIgQj15Lk1ENT1TLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZyxyKXtmb3IodmFyIGY9MDtmPDE2O2YrKyl7dmFyIGg9citmLGE9Z1toXTtnW2hdPShhPDw4fGE+Pj4yNCkmMTY3MTE5MzV8KGE8PDI0fGE+Pj44KSY0Mjc4MjU1MzYwfXZhciBuPXRoaXMuX2hhc2gud29yZHMsdT1nW3IrMF0sej1nW3IrMV0sdz1nW3IrMl0sUD1nW3IrM10sSD1nW3IrNF0sZT1nW3IrNV0saT1nW3IrNl0sXz1nW3IrN10sdj1nW3IrOF0sQT1nW3IrOV0sUj1nW3IrMTBdLEw9Z1tyKzExXSxJPWdbcisxMl0sTT1nW3IrMTNdLHE9Z1tyKzE0XSxOPWdbcisxNV0sbz1uWzBdLHM9blsxXSx4PW5bMl0sZD1uWzNdO289bShvLHMseCxkLHUsNyx0WzBdKSxkPW0oZCxvLHMseCx6LDEyLHRbMV0pLHg9bSh4LGQsbyxzLHcsMTcsdFsyXSkscz1tKHMseCxkLG8sUCwyMix0WzNdKSxvPW0obyxzLHgsZCxILDcsdFs0XSksZD1tKGQsbyxzLHgsZSwxMix0WzVdKSx4PW0oeCxkLG8scyxpLDE3LHRbNl0pLHM9bShzLHgsZCxvLF8sMjIsdFs3XSksbz1tKG8scyx4LGQsdiw3LHRbOF0pLGQ9bShkLG8scyx4LEEsMTIsdFs5XSkseD1tKHgsZCxvLHMsUiwxNyx0WzEwXSkscz1tKHMseCxkLG8sTCwyMix0WzExXSksbz1tKG8scyx4LGQsSSw3LHRbMTJdKSxkPW0oZCxvLHMseCxNLDEyLHRbMTNdKSx4PW0oeCxkLG8scyxxLDE3LHRbMTRdKSxzPW0ocyx4LGQsbyxOLDIyLHRbMTVdKSxvPXAobyxzLHgsZCx6LDUsdFsxNl0pLGQ9cChkLG8scyx4LGksOSx0WzE3XSkseD1wKHgsZCxvLHMsTCwxNCx0WzE4XSkscz1wKHMseCxkLG8sdSwyMCx0WzE5XSksbz1wKG8scyx4LGQsZSw1LHRbMjBdKSxkPXAoZCxvLHMseCxSLDksdFsyMV0pLHg9cCh4LGQsbyxzLE4sMTQsdFsyMl0pLHM9cChzLHgsZCxvLEgsMjAsdFsyM10pLG89cChvLHMseCxkLEEsNSx0WzI0XSksZD1wKGQsbyxzLHgscSw5LHRbMjVdKSx4PXAoeCxkLG8scyxQLDE0LHRbMjZdKSxzPXAocyx4LGQsbyx2LDIwLHRbMjddKSxvPXAobyxzLHgsZCxNLDUsdFsyOF0pLGQ9cChkLG8scyx4LHcsOSx0WzI5XSkseD1wKHgsZCxvLHMsXywxNCx0WzMwXSkscz1wKHMseCxkLG8sSSwyMCx0WzMxXSksbz1sKG8scyx4LGQsZSw0LHRbMzJdKSxkPWwoZCxvLHMseCx2LDExLHRbMzNdKSx4PWwoeCxkLG8scyxMLDE2LHRbMzRdKSxzPWwocyx4LGQsbyxxLDIzLHRbMzVdKSxvPWwobyxzLHgsZCx6LDQsdFszNl0pLGQ9bChkLG8scyx4LEgsMTEsdFszN10pLHg9bCh4LGQsbyxzLF8sMTYsdFszOF0pLHM9bChzLHgsZCxvLFIsMjMsdFszOV0pLG89bChvLHMseCxkLE0sNCx0WzQwXSksZD1sKGQsbyxzLHgsdSwxMSx0WzQxXSkseD1sKHgsZCxvLHMsUCwxNix0WzQyXSkscz1sKHMseCxkLG8saSwyMyx0WzQzXSksbz1sKG8scyx4LGQsQSw0LHRbNDRdKSxkPWwoZCxvLHMseCxJLDExLHRbNDVdKSx4PWwoeCxkLG8scyxOLDE2LHRbNDZdKSxzPWwocyx4LGQsbyx3LDIzLHRbNDddKSxvPUUobyxzLHgsZCx1LDYsdFs0OF0pLGQ9RShkLG8scyx4LF8sMTAsdFs0OV0pLHg9RSh4LGQsbyxzLHEsMTUsdFs1MF0pLHM9RShzLHgsZCxvLGUsMjEsdFs1MV0pLG89RShvLHMseCxkLEksNix0WzUyXSksZD1FKGQsbyxzLHgsUCwxMCx0WzUzXSkseD1FKHgsZCxvLHMsUiwxNSx0WzU0XSkscz1FKHMseCxkLG8seiwyMSx0WzU1XSksbz1FKG8scyx4LGQsdiw2LHRbNTZdKSxkPUUoZCxvLHMseCxOLDEwLHRbNTddKSx4PUUoeCxkLG8scyxpLDE1LHRbNThdKSxzPUUocyx4LGQsbyxNLDIxLHRbNTldKSxvPUUobyxzLHgsZCxILDYsdFs2MF0pLGQ9RShkLG8scyx4LEwsMTAsdFs2MV0pLHg9RSh4LGQsbyxzLHcsMTUsdFs2Ml0pLHM9RShzLHgsZCxvLEEsMjEsdFs2M10pLG5bMF09blswXStvfDAsblsxXT1uWzFdK3N8MCxuWzJdPW5bMl0reHwwLG5bM109blszXStkfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcy5fZGF0YSxyPWcud29yZHMsZj10aGlzLl9uRGF0YUJ5dGVzKjgsaD1nLnNpZ0J5dGVzKjg7cltoPj4+NV18PTEyODw8MjQtaCUzMjt2YXIgYT1jLmZsb29yKGYvNDI5NDk2NzI5Niksbj1mO3JbKGgrNjQ+Pj45PDw0KSsxNV09KGE8PDh8YT4+PjI0KSYxNjcxMTkzNXwoYTw8MjR8YT4+PjgpJjQyNzgyNTUzNjAsclsoaCs2ND4+Pjk8PDQpKzE0XT0objw8OHxuPj4+MjQpJjE2NzExOTM1fChuPDwyNHxuPj4+OCkmNDI3ODI1NTM2MCxnLnNpZ0J5dGVzPShyLmxlbmd0aCsxKSo0LHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHU9dGhpcy5faGFzaCx6PXUud29yZHMsdz0wO3c8NDt3Kyspe3ZhciBQPXpbd107elt3XT0oUDw8OHxQPj4+MjQpJjE2NzExOTM1fChQPDwyNHxQPj4+OCkmNDI3ODI1NTM2MH1yZXR1cm4gdX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZz1TLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGcuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLGd9fSk7ZnVuY3Rpb24gbShnLHIsZixoLGEsbix1KXt2YXIgej1nKyhyJmZ8fnImaCkrYSt1O3JldHVybih6PDxufHo+Pj4zMi1uKStyfWZ1bmN0aW9uIHAoZyxyLGYsaCxhLG4sdSl7dmFyIHo9ZysociZofGYmfmgpK2ErdTtyZXR1cm4oejw8bnx6Pj4+MzItbikrcn1mdW5jdGlvbiBsKGcscixmLGgsYSxuLHUpe3ZhciB6PWcrKHJeZl5oKSthK3U7cmV0dXJuKHo8PG58ej4+PjMyLW4pK3J9ZnVuY3Rpb24gRShnLHIsZixoLGEsbix1KXt2YXIgej1nKyhmXihyfH5oKSkrYSt1O3JldHVybih6PDxufHo+Pj4zMi1uKStyfWsuTUQ1PVMuX2NyZWF0ZUhlbHBlcihCKSxrLkhtYWNNRDU9Uy5fY3JlYXRlSG1hY0hlbHBlcihCKX0oTWF0aCksYi5NRDV9KX0oaikpLGouZXhwb3J0c312YXIgJD17ZXhwb3J0czp7fX0sUT17ZXhwb3J0czp7fX0sYXI7ZnVuY3Rpb24gbXIoKXtyZXR1cm4gYXJ8fChhcj0xLGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyl7Qy5leHBvcnRzPWMoVSgpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9YixrPWMubGliLEQ9ay5Xb3JkQXJyYXksRj1rLkhhc2hlcixTPWMuYWxnbyx5PVtdLHQ9Uy5TSEExPUYuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IEQuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKEIsbSl7Zm9yKHZhciBwPXRoaXMuX2hhc2gud29yZHMsbD1wWzBdLEU9cFsxXSxnPXBbMl0scj1wWzNdLGY9cFs0XSxoPTA7aDw4MDtoKyspe2lmKGg8MTYpeVtoXT1CW20raF18MDtlbHNle3ZhciBhPXlbaC0zXV55W2gtOF1eeVtoLTE0XV55W2gtMTZdO3lbaF09YTw8MXxhPj4+MzF9dmFyIG49KGw8PDV8bD4+PjI3KStmK3lbaF07aDwyMD9uKz0oRSZnfH5FJnIpKzE1MTg1MDAyNDk6aDw0MD9uKz0oRV5nXnIpKzE4NTk3NzUzOTM6aDw2MD9uKz0oRSZnfEUmcnxnJnIpLTE4OTQwMDc1ODg6bis9KEVeZ15yKS04OTk0OTc1MTQsZj1yLHI9ZyxnPUU8PDMwfEU+Pj4yLEU9bCxsPW59cFswXT1wWzBdK2x8MCxwWzFdPXBbMV0rRXwwLHBbMl09cFsyXStnfDAscFszXT1wWzNdK3J8MCxwWzRdPXBbNF0rZnwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBCPXRoaXMuX2RhdGEsbT1CLndvcmRzLHA9dGhpcy5fbkRhdGFCeXRlcyo4LGw9Qi5zaWdCeXRlcyo4O3JldHVybiBtW2w+Pj41XXw9MTI4PDwyNC1sJTMyLG1bKGwrNjQ+Pj45PDw0KSsxNF09TWF0aC5mbG9vcihwLzQyOTQ5NjcyOTYpLG1bKGwrNjQ+Pj45PDw0KSsxNV09cCxCLnNpZ0J5dGVzPW0ubGVuZ3RoKjQsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIEI9Ri5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiBCLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSxCfX0pO2MuU0hBMT1GLl9jcmVhdGVIZWxwZXIodCksYy5IbWFjU0hBMT1GLl9jcmVhdGVIbWFjSGVscGVyKHQpfSgpLGIuU0hBMX0pfShRKSksUS5leHBvcnRzfXZhciBZPXtleHBvcnRzOnt9fSxucjtmdW5jdGlvbiBDcigpe3JldHVybiBucnx8KG5yPTEsZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXsoZnVuY3Rpb24oKXt2YXIgYz1iLGs9Yy5saWIsRD1rLkJhc2UsRj1jLmVuYyxTPUYuVXRmOCx5PWMuYWxnbzt5LkhNQUM9RC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxCKXt0PXRoaXMuX2hhc2hlcj1uZXcgdC5pbml0LHR5cGVvZiBCPT0ic3RyaW5nIiYmKEI9Uy5wYXJzZShCKSk7dmFyIG09dC5ibG9ja1NpemUscD1tKjQ7Qi5zaWdCeXRlcz5wJiYoQj10LmZpbmFsaXplKEIpKSxCLmNsYW1wKCk7Zm9yKHZhciBsPXRoaXMuX29LZXk9Qi5jbG9uZSgpLEU9dGhpcy5faUtleT1CLmNsb25lKCksZz1sLndvcmRzLHI9RS53b3JkcyxmPTA7ZjxtO2YrKylnW2ZdXj0xNTQ5NTU2ODI4LHJbZl1ePTkwOTUyMjQ4NjtsLnNpZ0J5dGVzPUUuc2lnQnl0ZXM9cCx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faGFzaGVyO3QucmVzZXQoKSx0LnVwZGF0ZSh0aGlzLl9pS2V5KX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKHQpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3ZhciBCPXRoaXMuX2hhc2hlcixtPUIuZmluYWxpemUodCk7Qi5yZXNldCgpO3ZhciBwPUIuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChtKSk7cmV0dXJuIHB9fSl9KSgpfSl9KFkpKSxZLmV4cG9ydHN9dmFyIGlyO2Z1bmN0aW9uIG9yKCl7cmV0dXJuIGlyfHwoaXI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMsayl7Qy5leHBvcnRzPWMoVSgpLG1yKCksQ3IoKSl9KShLLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPWIsaz1jLmxpYixEPWsuQmFzZSxGPWsuV29yZEFycmF5LFM9Yy5hbGdvLHk9Uy5NRDUsdD1TLkV2cEtERj1ELmV4dGVuZCh7Y2ZnOkQuZXh0ZW5kKHtrZXlTaXplOjEyOC8zMixoYXNoZXI6eSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKEIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChCKX0sY29tcHV0ZTpmdW5jdGlvbihCLG0pe2Zvcih2YXIgcD10aGlzLmNmZyxsPXAuaGFzaGVyLmNyZWF0ZSgpLEU9Ri5jcmVhdGUoKSxnPUUud29yZHMscj1wLmtleVNpemUsZj1wLml0ZXJhdGlvbnM7Zy5sZW5ndGg8cjspe2gmJmwudXBkYXRlKGgpO3ZhciBoPWwudXBkYXRlKEIpLmZpbmFsaXplKG0pO2wucmVzZXQoKTtmb3IodmFyIGE9MTthPGY7YSsrKWg9bC5maW5hbGl6ZShoKSxsLnJlc2V0KCk7RS5jb25jYXQoaCl9cmV0dXJuIEUuc2lnQnl0ZXM9cio0LEV9fSk7Yy5FdnBLREY9ZnVuY3Rpb24oQixtLHApe3JldHVybiB0LmNyZWF0ZShwKS5jb21wdXRlKEIsbSl9fSgpLGIuRXZwS0RGfSl9KCQpKSwkLmV4cG9ydHN9dmFyIFo9e2V4cG9ydHM6e319LGNyO2Z1bmN0aW9uIE8oKXtyZXR1cm4gY3J8fChjcj0xLGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCksb3IoKSl9KShLLGZ1bmN0aW9uKGIpe2IubGliLkNpcGhlcnx8ZnVuY3Rpb24oYyl7dmFyIGs9YixEPWsubGliLEY9RC5CYXNlLFM9RC5Xb3JkQXJyYXkseT1ELkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0sdD1rLmVuYzt0LlV0Zjg7dmFyIEI9dC5CYXNlNjQsbT1rLmFsZ28scD1tLkV2cEtERixsPUQuQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6Ri5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsZSxpKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGUsaSl9LGluaXQ6ZnVuY3Rpb24oZSxpLF8pe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChfKSx0aGlzLl94Zm9ybU1vZGU9ZSx0aGlzLl9rZXk9aSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7eS5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXBwZW5kKGUpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24oZSl7ZSYmdGhpcy5fYXBwZW5kKGUpO3ZhciBpPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gaX0sa2V5U2l6ZToxMjgvMzIsaXZTaXplOjEyOC8zMixfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShpKXtyZXR1cm4gdHlwZW9mIGk9PSJzdHJpbmciP0g6en1yZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24oXyx2LEEpe3JldHVybiBlKHYpLmVuY3J5cHQoaSxfLHYsQSl9LGRlY3J5cHQ6ZnVuY3Rpb24oXyx2LEEpe3JldHVybiBlKHYpLmRlY3J5cHQoaSxfLHYsQSl9fX19KCl9KTtELlN0cmVhbUNpcGhlcj1sLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wcm9jZXNzKCEwKTtyZXR1cm4gZX0sYmxvY2tTaXplOjF9KTt2YXIgRT1rLm1vZGU9e30sZz1ELkJsb2NrQ2lwaGVyTW9kZT1GLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShlLGkpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGUsaSl9LGluaXQ6ZnVuY3Rpb24oZSxpKXt0aGlzLl9jaXBoZXI9ZSx0aGlzLl9pdj1pfX0pLHI9RS5DQkM9ZnVuY3Rpb24oKXt2YXIgZT1nLmV4dGVuZCgpO2UuRW5jcnlwdG9yPWUuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oXyx2KXt2YXIgQT10aGlzLl9jaXBoZXIsUj1BLmJsb2NrU2l6ZTtpLmNhbGwodGhpcyxfLHYsUiksQS5lbmNyeXB0QmxvY2soXyx2KSx0aGlzLl9wcmV2QmxvY2s9Xy5zbGljZSh2LHYrUil9fSksZS5EZWNyeXB0b3I9ZS5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihfLHYpe3ZhciBBPXRoaXMuX2NpcGhlcixSPUEuYmxvY2tTaXplLEw9Xy5zbGljZSh2LHYrUik7QS5kZWNyeXB0QmxvY2soXyx2KSxpLmNhbGwodGhpcyxfLHYsUiksdGhpcy5fcHJldkJsb2NrPUx9fSk7ZnVuY3Rpb24gaShfLHYsQSl7dmFyIFI9dGhpcy5faXY7aWYoUil7dmFyIEw9Ujt0aGlzLl9pdj1jfWVsc2UgdmFyIEw9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgST0wO0k8QTtJKyspX1t2K0ldXj1MW0ldfXJldHVybiBlfSgpLGY9ay5wYWQ9e30saD1mLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oZSxpKXtmb3IodmFyIF89aSo0LHY9Xy1lLnNpZ0J5dGVzJV8sQT12PDwyNHx2PDwxNnx2PDw4fHYsUj1bXSxMPTA7TDx2O0wrPTQpUi5wdXNoKEEpO3ZhciBJPVMuY3JlYXRlKFIsdik7ZS5jb25jYXQoSSl9LHVucGFkOmZ1bmN0aW9uKGUpe3ZhciBpPWUud29yZHNbZS5zaWdCeXRlcy0xPj4+Ml0mMjU1O2Uuc2lnQnl0ZXMtPWl9fTtELkJsb2NrQ2lwaGVyPWwuZXh0ZW5kKHtjZmc6bC5jZmcuZXh0ZW5kKHttb2RlOnIscGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtsLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcsaT1lLml2LF89ZS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIHY9Xy5jcmVhdGVFbmNyeXB0b3I7ZWxzZXt2YXIgdj1fLmNyZWF0ZURlY3J5cHRvcjt0aGlzLl9taW5CdWZmZXJTaXplPTF9dGhpcy5fbW9kZSYmdGhpcy5fbW9kZS5fX2NyZWF0b3I9PXY/dGhpcy5fbW9kZS5pbml0KHRoaXMsaSYmaS53b3Jkcyk6KHRoaXMuX21vZGU9di5jYWxsKF8sdGhpcyxpJiZpLndvcmRzKSx0aGlzLl9tb2RlLl9fY3JlYXRvcj12KX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGUsaSl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSxpKX0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNmZy5wYWRkaW5nO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpe2UucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpO3ZhciBpPXRoaXMuX3Byb2Nlc3MoITApfWVsc2V7dmFyIGk9dGhpcy5fcHJvY2VzcyghMCk7ZS51bnBhZChpKX1yZXR1cm4gaX0sYmxvY2tTaXplOjEyOC8zMn0pO3ZhciBhPUQuQ2lwaGVyUGFyYW1zPUYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMubWl4SW4oZSl9LHRvU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybihlfHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLG49ay5mb3JtYXQ9e30sdT1uLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihlKXt2YXIgaT1lLmNpcGhlcnRleHQsXz1lLnNhbHQ7aWYoXyl2YXIgdj1TLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KF8pLmNvbmNhdChpKTtlbHNlIHZhciB2PWk7cmV0dXJuIHYudG9TdHJpbmcoQil9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciBpPUIucGFyc2UoZSksXz1pLndvcmRzO2lmKF9bMF09PTEzOTg4OTM2ODQmJl9bMV09PTE3MDEwNzY4MzEpe3ZhciB2PVMuY3JlYXRlKF8uc2xpY2UoMiw0KSk7Xy5zcGxpY2UoMCw0KSxpLnNpZ0J5dGVzLT0xNn1yZXR1cm4gYS5jcmVhdGUoe2NpcGhlcnRleHQ6aSxzYWx0OnZ9KX19LHo9RC5TZXJpYWxpemFibGVDaXBoZXI9Ri5leHRlbmQoe2NmZzpGLmV4dGVuZCh7Zm9ybWF0OnV9KSxlbmNyeXB0OmZ1bmN0aW9uKGUsaSxfLHYpe3Y9dGhpcy5jZmcuZXh0ZW5kKHYpO3ZhciBBPWUuY3JlYXRlRW5jcnlwdG9yKF8sdiksUj1BLmZpbmFsaXplKGkpLEw9QS5jZmc7cmV0dXJuIGEuY3JlYXRlKHtjaXBoZXJ0ZXh0OlIsa2V5Ol8saXY6TC5pdixhbGdvcml0aG06ZSxtb2RlOkwubW9kZSxwYWRkaW5nOkwucGFkZGluZyxibG9ja1NpemU6ZS5ibG9ja1NpemUsZm9ybWF0dGVyOnYuZm9ybWF0fSl9LGRlY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodiksaT10aGlzLl9wYXJzZShpLHYuZm9ybWF0KTt2YXIgQT1lLmNyZWF0ZURlY3J5cHRvcihfLHYpLmZpbmFsaXplKGkuY2lwaGVydGV4dCk7cmV0dXJuIEF9LF9wYXJzZTpmdW5jdGlvbihlLGkpe3JldHVybiB0eXBlb2YgZT09InN0cmluZyI/aS5wYXJzZShlLHRoaXMpOmV9fSksdz1rLmtkZj17fSxQPXcuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihlLGksXyx2KXt2fHwodj1TLnJhbmRvbSg2NC84KSk7dmFyIEE9cC5jcmVhdGUoe2tleVNpemU6aStffSkuY29tcHV0ZShlLHYpLFI9Uy5jcmVhdGUoQS53b3Jkcy5zbGljZShpKSxfKjQpO3JldHVybiBBLnNpZ0J5dGVzPWkqNCxhLmNyZWF0ZSh7a2V5OkEsaXY6UixzYWx0OnZ9KX19LEg9RC5QYXNzd29yZEJhc2VkQ2lwaGVyPXouZXh0ZW5kKHtjZmc6ei5jZmcuZXh0ZW5kKHtrZGY6UH0pLGVuY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodik7dmFyIEE9di5rZGYuZXhlY3V0ZShfLGUua2V5U2l6ZSxlLml2U2l6ZSk7di5pdj1BLml2O3ZhciBSPXouZW5jcnlwdC5jYWxsKHRoaXMsZSxpLEEua2V5LHYpO3JldHVybiBSLm1peEluKEEpLFJ9LGRlY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodiksaT10aGlzLl9wYXJzZShpLHYuZm9ybWF0KTt2YXIgQT12LmtkZi5leGVjdXRlKF8sZS5rZXlTaXplLGUuaXZTaXplLGkuc2FsdCk7di5pdj1BLml2O3ZhciBSPXouZGVjcnlwdC5jYWxsKHRoaXMsZSxpLEEua2V5LHYpO3JldHVybiBSfX0pfSgpfSl9KFopKSxaLmV4cG9ydHN9KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCkseXIoKSxCcigpLG9yKCksTygpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9YixrPWMubGliLEQ9ay5CbG9ja0NpcGhlcixGPWMuYWxnbyxTPVtdLHk9W10sdD1bXSxCPVtdLG09W10scD1bXSxsPVtdLEU9W10sZz1bXSxyPVtdOyhmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxuPTA7bjwyNTY7bisrKW48MTI4P2Fbbl09bjw8MTphW25dPW48PDFeMjgzO2Zvcih2YXIgdT0wLHo9MCxuPTA7bjwyNTY7bisrKXt2YXIgdz16Xno8PDFeejw8Ml56PDwzXno8PDQ7dz13Pj4+OF53JjI1NV45OSxTW3VdPXcseVt3XT11O3ZhciBQPWFbdV0sSD1hW1BdLGU9YVtIXSxpPWFbd10qMjU3XncqMTY4NDMwMDg7dFt1XT1pPDwyNHxpPj4+OCxCW3VdPWk8PDE2fGk+Pj4xNixtW3VdPWk8PDh8aT4+PjI0LHBbdV09aTt2YXIgaT1lKjE2ODQzMDA5XkgqNjU1MzdeUCoyNTdedSoxNjg0MzAwODtsW3ddPWk8PDI0fGk+Pj44LEVbd109aTw8MTZ8aT4+PjE2LGdbd109aTw8OHxpPj4+MjQsclt3XT1pLHU/KHU9UF5hW2FbYVtlXlBdXV0sel49YVthW3pdXSk6dT16PTF9fSkoKTt2YXIgZj1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0saD1GLkFFUz1ELmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighKHRoaXMuX25Sb3VuZHMmJnRoaXMuX2tleVByaW9yUmVzZXQ9PT10aGlzLl9rZXkpKXtmb3IodmFyIGE9dGhpcy5fa2V5UHJpb3JSZXNldD10aGlzLl9rZXksbj1hLndvcmRzLHU9YS5zaWdCeXRlcy80LHo9dGhpcy5fblJvdW5kcz11KzYsdz0oeisxKSo0LFA9dGhpcy5fa2V5U2NoZWR1bGU9W10sSD0wO0g8dztIKyspaWYoSDx1KVBbSF09bltIXTtlbHNle3ZhciBlPVBbSC0xXTtIJXU/dT42JiZIJXU9PTQmJihlPVNbZT4+PjI0XTw8MjR8U1tlPj4+MTYmMjU1XTw8MTZ8U1tlPj4+OCYyNTVdPDw4fFNbZSYyNTVdKTooZT1lPDw4fGU+Pj4yNCxlPVNbZT4+PjI0XTw8MjR8U1tlPj4+MTYmMjU1XTw8MTZ8U1tlPj4+OCYyNTVdPDw4fFNbZSYyNTVdLGVePWZbSC91fDBdPDwyNCksUFtIXT1QW0gtdV1eZX1mb3IodmFyIGk9dGhpcy5faW52S2V5U2NoZWR1bGU9W10sXz0wO188dztfKyspe3ZhciBIPXctXztpZihfJTQpdmFyIGU9UFtIXTtlbHNlIHZhciBlPVBbSC00XTtfPDR8fEg8PTQ/aVtfXT1lOmlbX109bFtTW2U+Pj4yNF1dXkVbU1tlPj4+MTYmMjU1XV1eZ1tTW2U+Pj44JjI1NV1dXnJbU1tlJjI1NV1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbihhLG4pe3RoaXMuX2RvQ3J5cHRCbG9jayhhLG4sdGhpcy5fa2V5U2NoZWR1bGUsdCxCLG0scCxTKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGEsbil7dmFyIHU9YVtuKzFdO2FbbisxXT1hW24rM10sYVtuKzNdPXUsdGhpcy5fZG9DcnlwdEJsb2NrKGEsbix0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLEUsZyxyLHkpO3ZhciB1PWFbbisxXTthW24rMV09YVtuKzNdLGFbbiszXT11fSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKGEsbix1LHosdyxQLEgsZSl7Zm9yKHZhciBpPXRoaXMuX25Sb3VuZHMsXz1hW25dXnVbMF0sdj1hW24rMV1edVsxXSxBPWFbbisyXV51WzJdLFI9YVtuKzNdXnVbM10sTD00LEk9MTtJPGk7SSsrKXt2YXIgTT16W18+Pj4yNF1ed1t2Pj4+MTYmMjU1XV5QW0E+Pj44JjI1NV1eSFtSJjI1NV1edVtMKytdLHE9elt2Pj4+MjRdXndbQT4+PjE2JjI1NV1eUFtSPj4+OCYyNTVdXkhbXyYyNTVdXnVbTCsrXSxOPXpbQT4+PjI0XV53W1I+Pj4xNiYyNTVdXlBbXz4+PjgmMjU1XV5IW3YmMjU1XV51W0wrK10sbz16W1I+Pj4yNF1ed1tfPj4+MTYmMjU1XV5QW3Y+Pj44JjI1NV1eSFtBJjI1NV1edVtMKytdO189TSx2PXEsQT1OLFI9b312YXIgTT0oZVtfPj4+MjRdPDwyNHxlW3Y+Pj4xNiYyNTVdPDwxNnxlW0E+Pj44JjI1NV08PDh8ZVtSJjI1NV0pXnVbTCsrXSxxPShlW3Y+Pj4yNF08PDI0fGVbQT4+PjE2JjI1NV08PDE2fGVbUj4+PjgmMjU1XTw8OHxlW18mMjU1XSledVtMKytdLE49KGVbQT4+PjI0XTw8MjR8ZVtSPj4+MTYmMjU1XTw8MTZ8ZVtfPj4+OCYyNTVdPDw4fGVbdiYyNTVdKV51W0wrK10sbz0oZVtSPj4+MjRdPDwyNHxlW18+Pj4xNiYyNTVdPDwxNnxlW3Y+Pj44JjI1NV08PDh8ZVtBJjI1NV0pXnVbTCsrXTthW25dPU0sYVtuKzFdPXEsYVtuKzJdPU4sYVtuKzNdPW99LGtleVNpemU6MjU2LzMyfSk7Yy5BRVM9RC5fY3JlYXRlSGVscGVyKGgpfSgpLGIuQUVTfSl9KShYKTt2YXIga3I9WC5leHBvcnRzLGZyPVQoa3IpLHNyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjLGspe0MuZXhwb3J0cz1jKFUoKSxPKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gYi5tb2RlLkVDQj1mdW5jdGlvbigpe3ZhciBjPWIubGliLkJsb2NrQ2lwaGVyTW9kZS5leHRlbmQoKTtyZXR1cm4gYy5FbmNyeXB0b3I9Yy5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihrLEQpe3RoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2soayxEKX19KSxjLkRlY3J5cHRvcj1jLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGssRCl7dGhpcy5fY2lwaGVyLmRlY3J5cHRCbG9jayhrLEQpfX0pLGN9KCksYi5tb2RlLkVDQn0pfSkoc3IpO3ZhciBFcj1zci5leHBvcnRzLHhyPVQoRXIpLGRyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjLGspe0MuZXhwb3J0cz1jKFUoKSxPKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gYi5wYWQuUGtjczd9KX0pKGRyKTt2YXIgenI9ZHIuZXhwb3J0cyx3cj1UKHpyKSx2cj17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCksTygpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGIucGFkLk5vUGFkZGluZz17cGFkOmZ1bmN0aW9uKCl7fSx1bnBhZDpmdW5jdGlvbigpe319LGIucGFkLk5vUGFkZGluZ30pfSkodnIpO3ZhciBBcj12ci5leHBvcnRzLFNyPVQoQXIpLHVyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXtpZih0eXBlb2YgQXJyYXlCdWZmZXI9PSJmdW5jdGlvbiIpe3ZhciBjPWIsaz1jLmxpYixEPWsuV29yZEFycmF5LEY9RC5pbml0LFM9RC5pbml0PWZ1bmN0aW9uKHkpe2lmKHkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHk9bmV3IFVpbnQ4QXJyYXkoeSkpLCh5IGluc3RhbmNlb2YgSW50OEFycmF5fHx0eXBlb2YgVWludDhDbGFtcGVkQXJyYXk8InUiJiZ5IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXl8fHkgaW5zdGFuY2VvZiBJbnQxNkFycmF5fHx5IGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHkgaW5zdGFuY2VvZiBJbnQzMkFycmF5fHx5IGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHkgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpJiYoeT1uZXcgVWludDhBcnJheSh5LmJ1ZmZlcix5LmJ5dGVPZmZzZXQseS5ieXRlTGVuZ3RoKSkseSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2Zvcih2YXIgdD15LmJ5dGVMZW5ndGgsQj1bXSxtPTA7bTx0O20rKylCW20+Pj4yXXw9eVttXTw8MjQtbSU0Kjg7Ri5jYWxsKHRoaXMsQix0KX1lbHNlIEYuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtTLnByb3RvdHlwZT1EfX0oKSxiLmxpYi5Xb3JkQXJyYXl9KX0pKHVyKTt2YXIgRHI9dXIuZXhwb3J0cyxGcj1UKERyKSxocj17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyl7Qy5leHBvcnRzPWMoVSgpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGIuZW5jLlV0Zjh9KX0pKGhyKTt2YXIgSHI9aHIuZXhwb3J0cyxwcj1UKEhyKTtsZXQgSj1bMCwxOTk2OTU5ODk0LDM5OTM5MTk3ODgsMjU2NzUyNDc5NCwxMjQ2MzQxMzcsMTg4NjA1NzYxNSwzOTE1NjIxNjg1LDI2NTczOTIwMzUsMjQ5MjY4Mjc0LDIwNDQ1MDgzMjQsMzc3MjExNTIzMCwyNTQ3MTc3ODY0LDE2Mjk0MTk5NSwyMTI1NTYxMDIxLDM4ODc2MDcwNDcsMjQyODQ0NDA0OSw0OTg1MzY1NDgsMTc4OTkyNzY2Niw0MDg5MDE2NjQ4LDIyMjcwNjEyMTQsNDUwNTQ4ODYxLDE4NDMyNTg2MDMsNDEwNzU4MDc1MywyMjExNjc3NjM5LDMyNTg4Mzk5MCwxNjg0Nzc3MTUyLDQyNTExMjIwNDIsMjMyMTkyNjYzNiwzMzU2MzM0ODcsMTY2MTM2NTQ2NSw0MTk1MzAyNzU1LDIzNjYxMTUzMTcsOTk3MDczMDk2LDEyODE5NTM4ODYsMzU3OTg1NTMzMiwyNzI0Njg4MjQyLDEwMDY4ODgxNDUsMTI1ODYwNzY4NywzNTI0MTAxNjI5LDI3Njg5NDI0NDMsOTAxMDk3NzIyLDExMTkwMDA2ODQsMzY4NjUxNzIwNiwyODk4MDY1NzI4LDg1MzA0NDQ1MSwxMTcyMjY2MTAxLDM3MDUwMTU3NTksMjg4MjYxNjY2NSw2NTE3Njc5ODAsMTM3MzUwMzU0NiwzMzY5NTU0MzA0LDMyMTgxMDQ1OTgsNTY1NTA3MjUzLDE0NTQ2MjE3MzEsMzQ4NTExMTcwNSwzMDk5NDM2MzAzLDY3MTI2Njk3NCwxNTk0MTk4MDI0LDMzMjI3MzA5MzAsMjk3MDM0NzgxMiw3OTU4MzU1MjcsMTQ4MzIzMDIyNSwzMjQ0MzY3Mjc1LDMwNjAxNDk1NjUsMTk5NDE0NjE5MiwzMTE1ODUzNCwyNTYzOTA3NzcyLDQwMjM3MTc5MzAsMTkwNzQ1OTQ2NSwxMTI2MzcyMTUsMjY4MDE1MzI1MywzOTA0NDI3MDU5LDIwMTM3NzYyOTAsMjUxNzIyMDM2LDI1MTcyMTUzNzQsMzc3NTgzMDA0MCwyMTM3NjU2NzYzLDE0MTM3NjgxMywyNDM5Mjc3NzE5LDM4NjUyNzEyOTcsMTgwMjE5NTQ0NCw0NzY4NjQ4NjYsMjIzODAwMTM2OCw0MDY2NTA4ODc4LDE4MTIzNzA5MjUsNDUzMDkyNzMxLDIxODE2MjUwMjUsNDExMTQ1MTIyMywxNzA2MDg4OTAyLDMxNDA0MjcwNCwyMzQ0NTMyMjAyLDQyNDAwMTc1MzIsMTY1ODY1ODI3MSwzNjY2MTk5NzcsMjM2MjY3MDMyMyw0MjI0OTk0NDA1LDEzMDM1MzU5NjAsOTg0OTYxNDg2LDI3NDcwMDcwOTIsMzU2OTAzNzUzOCwxMjU2MTcwODE3LDEwMzc2MDQzMTEsMjc2NTIxMDczMywzNTU0MDc5OTk1LDExMzEwMTQ1MDYsODc5Njc5OTk2LDI5MDkyNDM0NjIsMzY2Mzc3MTg1NiwxMTQxMTI0NDY3LDg1NTg0MjI3NywyODUyODAxNjMxLDM3MDg2NDg2NDksMTM0MjUzMzk0OCw2NTQ0NTkzMDYsMzE4ODM5NjA0OCwzMzczMDE1MTc0LDE0NjY0Nzk5MDksNTQ0MTc5NjM1LDMxMTA1MjM5MTMsMzQ2MjUyMjAxNSwxNTkxNjcxMDU0LDcwMjEzODc3NiwyOTY2NDYwNDUwLDMzNTI3OTk0MTIsMTUwNDkxODgwNyw3ODM1NTE4NzMsMzA4MjY0MDQ0MywzMjMzNDQyOTg5LDM5ODgyOTIzODQsMjU5NjI1NDY0Niw2MjMxNzA2OCwxOTU3ODEwODQyLDM5Mzk4NDU5NDUsMjY0NzgxNjExMSw4MTQ3MDk5NywxOTQzODAzNTIzLDM4MTQ5MTg5MzAsMjQ4OTU5NjgwNCwyMjUyNzQ0MzAsMjA1Mzc5MDM3NiwzODI2MTc1NzU1LDI0NjY5MDYwMTMsMTY3ODE2NzQzLDIwOTc2NTEzNzcsNDAyNzU1MjU4MCwyMjY1NDkwMzg2LDUwMzQ0NDA3MiwxNzYyMDUwODE0LDQxNTA0MTcyNDUsMjE1NDEyOTM1NSw0MjY1MjIyMjUsMTg1MjUwNzg3OSw0Mjc1MzEzNTI2LDIzMTIzMTc5MjAsMjgyNzUzNjI2LDE3NDI1NTU4NTIsNDE4OTcwODE0MywyMzk0ODc3OTQ1LDM5NzkxNzc2MywxNjIyMTgzNjM3LDM2MDQzOTA4ODgsMjcxNDg2NjU1OCw5NTM3Mjk3MzIsMTM0MDA3NjYyNiwzNTE4NzE5OTg1LDI3OTczNjA5OTksMTA2ODgyODM4MSwxMjE5NjM4ODU5LDM2MjQ3NDE4NTAsMjkzNjY3NTE0OCw5MDYxODU0NjIsMTA5MDgxMjUxMiwzNzQ3NjcyMDAzLDI4MjUzNzk2NjksODI5MzI5MTM1LDExODEzMzUxNjEsMzQxMjE3NzgwNCwzMTYwODM0ODQyLDYyODA4NTQwOCwxMzgyNjA1MzY2LDM0MjMzNjkxMDksMzEzODA3ODQ2Nyw1NzA1NjIyMzMsMTQyNjQwMDgxNSwzMzE3MzE2NTQyLDI5OTg3MzM2MDgsNzMzMjM5OTU0LDE1NTUyNjE5NTYsMzI2ODkzNTU5MSwzMDUwMzYwNjI1LDc1MjQ1OTQwMywxNTQxMzIwMjIxLDI2MDcwNzE5MjAsMzk2NTk3MzAzMCwxOTY5OTIyOTcyLDQwNzM1NDk4LDI2MTc4MzcyMjUsMzk0MzU3NzE1MSwxOTEzMDg3ODc3LDgzOTA4MzcxLDI1MTIzNDE2MzQsMzgwMzc0MDY5MiwyMDc1MjA4NjIyLDIxMzI2MTExMiwyNDYzMjcyNjAzLDM4NTU5OTAyODUsMjA5NDg1NDA3MSwxOTg5NTg4ODEsMjI2MjAyOTAxMiw0MDU3MjYwNjEwLDE3NTkzNTk5OTIsNTM0NDE0MTkwLDIxNzY3MTg1NDEsNDEzOTMyOTExNSwxODczODM2MDAxLDQxNDY2NDU2NywyMjgyMjQ4OTM0LDQyNzkyMDAzNjgsMTcxMTY4NDU1NCwyODUyODExMTYsMjQwNTgwMTcyNyw0MTY3MjE2NzQ1LDE2MzQ0Njc3OTUsMzc2MjI5NzAxLDI2ODUwNjc4OTYsMzYwODAwNzQwNiwxMzA4OTE4NjEyLDk1NjU0MzkzOCwyODA4NTU1MTA1LDM0OTU5NTgyNjMsMTIzMTYzNjMwMSwxMDQ3NDI3MDM1LDI5MzI5NTk4MTgsMzY1NDcwMzgzNiwxMDg4MzU5MjcwLDkzNjkxOGUzLDI4NDc3MTQ4OTksMzczNjgzNzgyOSwxMjAyOTAwODYzLDgxNzIzMzg5NywzMTgzMzQyMTA4LDM0MDEyMzcxMzAsMTQwNDI3NzU1Miw2MTU4MTgxNTAsMzEzNDIwNzQ5MywzNDUzNDIxMjAzLDE0MjM4NTc0NDksNjAxNDUwNDMxLDMwMDk4Mzc2MTQsMzI5NDcxMDQ1NiwxNTY3MTAzNzQ2LDcxMTkyODcyNCwzMDIwNjY4NDcxLDMyNzIzODAwNjUsMTUxMDMzNDIzNSw3NTUxNjcxMTddO3R5cGVvZiBJbnQzMkFycmF5PCJ1IiYmKEo9bmV3IEludDMyQXJyYXkoSikpO2Z1bmN0aW9uIGxyKEMsVyl7bGV0IGI9fn5XXi0xO3JldHVybiBiPWJyKEMsYiksKGJeLTEpPj4+MH1mdW5jdGlvbiBicihDLFcpe0M9bmV3IFVpbnQ4QXJyYXkoQyk7Y29uc3R7bGVuZ3RoOmJ9PUM7Zm9yKGxldCBjPTA7YzxiO2MrKylXPUpbKFdeQ1tjXSkmMjU1XV5XPj4+ODtyZXR1cm4gV31mdW5jdGlvbiBfcihDKXtyZXR1cm4gQy5sZW5ndGg8OD8oQz1gMCR7Q31gLF9yKEMpKTpDfWZ1bmN0aW9uIGdyKEMpe2lmKHR5cGVvZiBDPCJ1IilyZXR1cm4gX3IoTnVtYmVyKEMpLnRvU3RyaW5nKDE2KSl9ZnVuY3Rpb24gV3IoQyl7Y29uc3QgVz1DLnNpZ0J5dGVzLHt3b3JkczpifT1DLGM9bmV3IFVpbnQ4QXJyYXkoVyk7bGV0IGs9MCxEPTA7Zm9yKDtrIT09Vzspe2NvbnN0IEY9YltEKytdO2lmKGNbaysrXT0oRiY0Mjc4MTkwMDgwKT4+PjI0LGs9PT1XfHwoY1trKytdPShGJjE2NzExNjgwKT4+PjE2LGs9PT1XKXx8KGNbaysrXT0oRiY2NTI4MCk+Pj44LGs9PT1XKSlicmVhaztjW2srK109RiYyNTV9cmV0dXJuIGN9ZnVuY3Rpb24gUHIoQyl7Y29uc3R7dHlwZTpXLGRhdGE6Yn09Qztzd2l0Y2goVyl7Y2FzZSJjcmMzMk1hcHBpbmciOmNvbnN0e2lkOmMsYnVmOmssY3JjOkR9PWIsRj1icihrLEQpO3Bvc3RNZXNzYWdlKHt0eXBlOiJjcmMzMk1hcHBpbmdSZXNwb25zZSIsZGF0YTp7aWQ6YyxjcmMzMjpGfX0pO2JyZWFrfX1zZWxmLm9ubWVzc2FnZT1DPT57Y29uc3R7ZGF0YTpXfT1DO2lmKFc9PT0icGluZyIpe3Bvc3RNZXNzYWdlKCJwb25nIik7cmV0dXJufWlmKFcudHlwZSl7UHIoVyk7cmV0dXJufWNvbnN0IGI9V1swXSxjPVdbMV0saz1XWzJdLEQ9V1szXSxGPVdbNF0sUz1XWzVdO2lmKEQpe2NvbnN0IHk9RnIuY3JlYXRlKGIpLHQ9UyYmYi5ieXRlTGVuZ3RoJTE2IT09MD9mci5lbmNyeXB0KHkscHIucGFyc2UoRikse21vZGU6eHIscGFkZGluZzp3cn0pOmZyLmVuY3J5cHQoeSxwci5wYXJzZShGKSx7bW9kZTp4cixwYWRkaW5nOlNyfSksQj1Xcih0LmNpcGhlcnRleHQpLG09bHIoQiwwKTtwb3N0TWVzc2FnZShbQi5idWZmZXIsZ3IobSksYyxrXSxbQi5idWZmZXJdKX1lbHNle2NvbnN0IHk9bHIoYiwwKTtwb3N0TWVzc2FnZShbYixncih5KSxjLGtdLFtiXSl9fX0pKCk7Cg==",ei=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),ti=typeof self<"u"&&self.Blob&&new Blob([ei(qn)],{type:"text/javascript;charset=utf-8"});function ri(e){let t;try{if(t=ti&&(self.URL||self.webkitURL).createObjectURL(ti),!t)throw"";const r=new Worker(t,{name:null==e?void 0:e.name});return r.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(t)})),r}catch{return new Worker("data:text/javascript;base64,"+qn,{name:null==e?void 0:e.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const ni=()=>new ri,ii="presigned-expires",si={hmac:(e,t)=>Gn(t,e),sha256:function(e){return Zn(e)}},oi={iso8601:e=>(void 0===e&&(e=yi()),e.toISOString().replace(/\.\d{3}Z$/,"Z"))},ai=["authorization","content-type","content-length","user-agent",ii,"expect","x-amzn-trace-id"],ci="AWS4-HMAC-SHA256",li="aws4_request",ui=e=>{try{return encodeURIComponent(e).replace(/[^A-Za-z0-9_.~\-%]+/g,escape).replace(/[*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}catch{return""}},di=e=>Object.keys(e).sort().map((t=>{const r=e[t];if(typeof r>"u"||null===r)return;const n=ui(t);return n?Array.isArray(r)?`${n}=${r.map(ui).sort().join(`&${n}=`)}`:`${n}=${ui(r)}`:void 0})).filter((e=>e)).join("&");class hi{constructor(e,t,r){this.request=e,this.request.headers=e.headers||{},this.serviceName=t,r=r||{},this.signatureCache="boolean"!=typeof r.signatureCache||r.signatureCache,this.operation=r.operation,this.signatureVersion=r.signatureVersion}addAuthorization(e,t){const r=this.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.addHeaders(e,r),this.request.headers.Authorization=this.authorization(e,r)}addHeaders(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.body&&(this.request.headers["X-Amz-Content-Sha256"]=si.sha256(JSON.stringify(this.request.body)).toString())}authorization(e,t){const r=[],n=this.credentialString(t);return r.push(`${ci} Credential=${e.accessKeyId}/${n}`),r.push(`SignedHeaders=${this.signedHeaders()}`),r.push(`Signature=${this.signature(e,t)}`),r.join(", ")}signature(e,t){const r=this.getSigningKey(e,t.substr(0,8),this.request.region,this.serviceName);return si.hmac(r,this.stringToSign(t))}stringToSign(e){const t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")}canonicalString(){const e=[],t=this.request.pathname||"/";return e.push(this.request.method.toUpperCase()),e.push(t),e.push(di(this.request.params)||""),e.push(`${this.canonicalHeaders()}\n`),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")}canonicalHeaders(){const e=[];Object.keys(this.request.headers).forEach((t=>{e.push([t,this.request.headers[t]])})),e.sort(((e,t)=>e[0].toLowerCase()<t[0].toLowerCase()?-1:1));const t=[];return e.forEach((e=>{const r=e[0].toLowerCase();if(this.isSignableHeader(r)){const n=e[1];if(typeof n>"u"||null===n||"function"!=typeof n.toString)throw new Error(`Header ${r} contains invalid value`);t.push(`${r}:${this.canonicalHeaderValues(n.toString())}`)}})),t.join("\n")}canonicalHeaderValues(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}signedHeaders(){const e=[];return Object.keys(this.request.headers).forEach((t=>{t=t.toLowerCase(),this.isSignableHeader(t)&&e.push(t)})),e.sort().join(";")}credentialString(e){return this.createScope(e.substr(0,8),this.request.region,this.serviceName)}hexEncodedHash(e){return si.sha256(e)}hexEncodedBodyHash(){return this.request.headers["X-Amz-Content-Sha256"]?this.request.headers["X-Amz-Content-Sha256"]:this.request.body?this.hexEncodedHash(di(this.request.body)):this.hexEncodedHash("")}isSignableHeader(e){return 0===e.toLowerCase().indexOf("x-amz-")||ai.indexOf(e)<0}iso8601(e){return void 0===e&&(e=new Date),e.toISOString().replace(/\.\d{3}Z$/,"Z")}getSigningKey(e,t,r,n){const i=si.hmac(`AWS4${e.secretAccessKey}`,t),s=si.hmac(i,r),o=si.hmac(s,n);return si.hmac(o,li)}createScope(e,t,r){return[e.substr(0,8),t,r,li].join("/")}}const pi=()=>{const e=[];let t=0;return{require:()=>new Promise((r=>{t++,t<=1?r():e.push(r)})),release(){t--;const r=e.shift();r&&r()},isEmpty:()=>t<=0}},fi=()=>{const e={};return{require(t){const r=e[t]||pi();return e[t]||(e[t]=r),r.require()},release(t){const r=e[t]||pi();e[t]||(e[t]=r),r.release(),r.isEmpty()&&delete e[t]}}},mi=(()=>{const e="byted_uploader_",t=t=>e+t,r=fi();return{async removeItem(e){e=t(e),await r.require(e),Kn.removeItem(e,(()=>r.release(e)))},async setItem(e,n){e=t(e),await r.require(e),Kn.setItem(e,n,(()=>r.release(e)))},getItem:e=>new Promise((async n=>{e=t(e),await r.require(e);const i=setTimeout((()=>{r.release(e),n(null)}),5e3);Kn.getItem(e).then((t=>{r.release(e),clearTimeout(i),n(t)})).catch((()=>{r.release(e),clearTimeout(i),n(null)}))})),clear(){Kn.keys().then((t=>{t.forEach((async t=>{t.startsWith(e)&&(await r.require(t),Kn.removeItem(t,(()=>r.release(t))))}))})).catch((e=>{console.error(e)}))}}})();function gi(e){const t=Number(e.substring(0,4)),r=Number(e.substring(4,6)),n=Number(e.substring(6,8)),i=Number(e.substring(8,10)),s=Number(e.substring(10,12)),o=Number(e.substring(12,14));return Date.UTC(t,r-1,n,i,s,o)-Date.now()}function yi(){return new Date}function bi(e={}){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}function vi(){const e=window.Blob||window.WebKitBlob;try{const t=e.prototype;return!(!FormData||!(t.slice||t.webkitSlice||t.mozSlice))}catch{return!1}}function _i(){return!!window.FormData||window.ProgressEvent&&window.FileReader}function wi(){const e=window.FileReader&&window.FileReader.prototype.readAsBinaryString;return typeof Int32Array<"u"&&e&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)}function Si(e,t=!0){const r=e,n={removeItem(e){delete r.cache[e]},setItem(e,t){r.cache[e]=t},getItem:async e=>r.cache[e],clear(){delete r.cache,r.cache={}}};if(!t)return n;try{if(window.localStorage&&Kn.supports(Kn.LOCALSTORAGE))return window.localStorage.setItem("",""),mi}catch{return n}return n}function Ei(e){return`${e}_${(new Date).getTime()}_${parseInt(1e6*Math.random())}`}function xi(e,t){const{size:r}=e,n=1048576;if(t&&!Number.isNaN(Number(t))&&Number(t)>0)return t;if(t&&"function"==typeof t){let e=Cn;try{e=t(r)}catch(i){console.warn(i)}return e<Cn?Cn:e}return r>=1e3*n?10*n:r>=400*n?5*n:Cn}function Ti(e){if(!e||"[object String]"!==Object.prototype.toString.call(e))return;const t=e.lastIndexOf(".");if(t>0){const r="."+e.substring(t+1);if(r.length<=8)return r}}function ki(e,t,r){return(e.slice||e.webkitSlice||e.mozSlice).call(e,t,r)}function Ci(e){return/^(?:(https?\:)\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/.exec(e)[5]||"/"}function Oi(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<e;i++)t+=r.charAt(Math.floor(Math.random()*n));return t}function zi(e,t){return!e&&t?5242880:0}function Ii({errorCode:e,requestId:t}){return e===Vn.TOKEN_EXPIRED||!!t&&Math.abs(gi(t))>12e5}function Mi(e,t){const r=gi(t);Object.assign(e,{topExpires:604800,systemTimeGap:r})}function Ri({useServerCurrentTime:e,stsToken:t,uploaderCtx:r}){e&&Math.abs(new Date(t.CurrentTime)-new Date)>6e4&&!r.priorInfo.systemTimeGap&&(r.priorInfo.systemTimeGap=new Date(t.CurrentTime)-new Date);let n=new Date;return r.priorInfo.systemTimeGap&&(n=new Date((new Date).getTime()+r.priorInfo.systemTimeGap)),n}function Di(...e){let t=0;for(const s of e)t+=s.byteLength;const r=new ArrayBuffer(t),n=new Uint8Array(r);let i=0;for(const s of e)n.set(new Uint8Array(s),i),i+=s.byteLength;return r}function Ni(e){const t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function ji(e,t){return Qn.dec2hex(Qn.crc32(e,t))}function Ai(e){let t=0,r=0,n=0,i=[],s=36;if(!e&&e.length<=0)return[t,r,n,i,s];const o=e[0].end-e[0].start;i.push(o);for(let a=1;a<e.length;a++){const r=e[a],n=r.end-r.start;o!==n&&(t=1),i.push(n)}return t?(n=0,r=e.length,s+=8*r,[t,0,r,i,s]):(n=o,i=[],[t,n,r,i,s])}function Li(e,t,r,n){if(e&&!n)return;let i=t,s=0,o=[],a=36;n&&n.length>0&&([e,i,s,o,a]=Ai(n));const c=new ArrayBuffer(a),l=new DataView(c);for(let f=0;f<a;f++)l.setUint8(f,0);const u=Ni("aes-256-cfb-part"),d=new Uint8Array(u);let h=0;for(let f=0;f<16;f++)h=f,l.setUint8(h,d[f]);h++,l.setUint16(h,0,!0),h+=2,l.setUint16(h,e?1:0,!0),h+=2,l.setUint32(h,i,!0),h+=8,l.setUint32(h,s,!0),h+=8,o.forEach((e=>{l.setUint32(h,e,!0),h+=8}));const p=Di(c,Ni(r));return{crc32:ji(p,0),buffer:p,encryptMeta:!0,start:-p.byteLength,end:0,iv:r}}function Ui(e){return new Promise((t=>{const r=()=>t(ni());if(e.crc32WorkerUrl&&"string"==typeof e.crc32WorkerUrl){const n=e.crc32WorkerUrl;try{const e=new Worker(n);e.onmessage=r=>{"pong"===r.data&&t(e)},e.onerror=()=>{r()},e.postMessage("ping")}catch{r()}}else r()}))}function Pi(e,t){try{localStorage.setItem(e,t)}catch{}}function Gi(e){return localStorage.getItem(e)}function Zi(e){try{localStorage.removeItem(e)}catch{}}const Fi={resolveLocalTimeDiff:gi,toQueryString:bi,supportChunked:vi,supportXhr:_i,supportCrc32:wi,storage:Si,createCrc32Worker:Ui,noop(){},getUnique:Ei,getFileSliceLength:xi,getFileSuffix:Ti,fileSlice:ki,getPathByURL:Ci,crypto:si,date:oi,signRequest(e,{serviceName:t,stsToken:r,uploaderCtx:n,config:i}){const{AccessKeyID:s,AccessKeyId:o,SecretAccessKey:a,SessionToken:c}=r,l=new hi(e,t),u=this.requestTime({useServerCurrentTime:i.useServerCurrentTime,stsToken:r,uploaderCtx:n});l.addAuthorization({accessKeyId:o||s,secretAccessKey:a,sessionToken:c},u),i.enableDmSchemaHeader&&(e.headers={...e.headers,"X-Dm-Schema-Name":e.params.Action})},Buffer:Uint8Array,generateKey:Oi,minSliceSize:zi,mayLocalTimeError:Ii,calibrationTimeConfig:Mi,requestTime:Ri,concatAb:Di,str2ab:Ni,generateEncryptMeta:Li,computeCrc32:ji,setStoreSync:Pi,getStoreSync:Gi,removeStoreSync:Zi},Xi=e=>{if(null==e||!e.SessionToken)return"";const t=e.SessionToken.substring(4);let r="";try{r=JSON.parse(JSON.parse(JSON.parse(atob(t)).PolicyString).Statement[0].Condition).StoreRegion||""}catch{return r}return r};class Ki{constructor(){this.stopCallbacks=[]}call(e){let t=null,r=!1;t=e((()=>{r=!0,t&&this.stopCallbacks.splice(this.stopCallbacks.indexOf(t),1)})),r?t&&t():t&&this.stopCallbacks.push(t)}cancel(){this.stopCallbacks.forEach((e=>e())),this.stopCallbacks=[]}}class Bi{abort(){}}class Vi extends i.EventEmitter{constructor(){super(),this.xhr=new XMLHttpRequest,this._data=null}_ajax(e){const{xhr:t}=this;t.upload.onprogress=e=>{this.emit("progress",e)},t.onreadystatechange=()=>{4===t.readyState&&(t.upload.onprogress=Fi.noop,t.onreadystatechange=Fi.noop,t.params=e,this._data&&this._data.url&&(t.currentUrl=this._data.url),t.status>=200&&t.status<300?this.emit("complete",t):t.status>=400&&this.emit("error",t))},t.onerror=()=>{t.errText="unknow net error",this.emit("error",t)},t.ontimeout=()=>{t.errText="timeout",this.emit("error",t)},t.onabort=()=>{t.errText="abort",this.emit("error",t)},t.send(e)}send(e){return this._data=e,this.xhr.open(e.method||"POST",e.url||"",!0),e.headers&&Object.keys(e.headers).forEach((t=>{this.xhr.setRequestHeader(t,e.headers[t])})),this.xhr.timeout=e.timeout||0,e.ontimeout&&(this.xhr.ontimeout=e.ontimeout),e.binary?this.sendAsBinary(e):e.custom?"object"==typeof e.custom?this.sendAsCustom(JSON.stringify(e.custom)):"none"===e.custom?(delete e.custom,this.sendAsCustom()):this.sendAsCustom(e.custom):this.sendAsFormData(e)}sendAsBinary(e){return this.xhr.setRequestHeader("Content-Type","application/octet-stream"),this.xhr.setRequestHeader("Content-Disposition",`attachment; filename="${encodeURI(e.filename)}"`),this._ajax(e.file)}sendAsFormData(e){let t;e.formData&&(t="function"==typeof e.formData?e.formData():e.formData),t||(t=[]);const r=new FormData;for(let n=0,i=t.length;n<i;n++){const e=t[n];r.append(e.name,e.value)}return e.file&&r.append(e.field,e.file,e.name),this._ajax(r)}sendAsCustom(e){return this._ajax(e)}abort(){this.xhr.onreadystatechange=Fi.noop,this.xhr.abort()}getResponse(){return this.xhr.response}getText(){return this.xhr.responseText}getJson(){return JSON.parse(this.xhr.responseText)}}function Wi(e){return((null==e?void 0:e.gatewayUpload)||!e.omitInitUpload)&&!e.isDirect}function Hi(e,t){let r;return t=t||{},Object.keys(t).forEach((n=>{r=new RegExp(`{${n}}`,"g"),e=e.replace(r,t[n])})),e}const Yi=e=>{const t=[];return e.forEach((e=>{var r,n;if("Snapshot"===e.name||"Snapshot"===e.Name||"snapshot"===e.name){const i={name:"snapshot",input:{snapshot_time:null==(r=e.input)?void 0:r.SnapshotTime,skip_black_detect:!(null==(n=e.input)||!n.SkipBlackDetect)}};t.push(i)}else if("Encryption"===e.name||"Encryption"===e.Name||"encryption"===e.name){const r={name:"encryption",input:{config:e.input.Config||{},policy_params:e.input.PolicyParams||{}}};t.push(r)}})),t};function $i(e,t){const r=[];let n=!0;t.sort(((e,t)=>e.num<t.num?-1:e.num>t.num?1:0));let i=0,s=0;for(let a=0;a<t.length;a++){const o=t[a],c=o.num-(i+1),l=o.offset-s,u=Math.floor(l/c);let d=!1;for(let t=0;t<c;t++){const i=s,a=t===c-1?o.offset:i+u;if(1!==o.num&&(0===o.offset||o.offset>e)){d=!0,n=!1;break}s=a,n=!1,r.push({start:i,end:a,crc32:0})}if(d)break;const h={start:s,end:s+o.size,crc32:o.crc32,finished:!0,loaded:o.size};s=h.end,r.push(h),i=o.num}const o=Ji(e,r);return o.length>0&&(n=!1),[o,r,n]}function Ji(e,t){const r=[];let n=!1,i=0;if(t.length>0){const r=t[t.length-1];r.end===e?n=!0:i=r.end||0}if(!n){const t={start:i,end:e,crc32:0};r.push(t)}return r}function Qi(e,t,r){return r&&e<5242880&&(e=5242880),e||3145728}function qi(e,t){let r,n,i=-1;if(t&&t.enableSelectRoute){r=!0;const{selectRouteResult:s}=t;if(s&&e){n=(s[0]&&s[0].domainName)===e;const t=s.find((t=>t.domainName===e));i=(null==t?void 0:t.speed)||-1}}return{serverSpeed:i,useClientSelectRouteResult:n,enableSelectRoute:r}}class es extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.file=this._createBlob(e),this.cacheKey="__bd_uploader_cache",this._abortCallbacks=[],this._aborted=!1,this.retryCount=0,this.MAX_RETRY_TIME=3}_createBlob(e){const t=new File([new ArrayBuffer(_n*_n)],"speed_test_file");return e.file||t}_speed(e,t,r){return e/_n/((r-t)/bn)}async _runAsyncFn(e){let t=!1;const r=()=>{t=!0};this._abortCallbacks.push(r);const n=await e();return this._removeAbortCallback(r),[t,n]}async start(e,t){this._aborted=!1,this._st=Date.now(),this.uploaderCtx._broadcast("startSelectRoute",null,!0),this.clientIp=e.clientIp,this.selectRouteTimeout=e.selectRouteTimeout||20*bn,this.selectRouteCacheTime=e.selectRouteCacheTime||vn,this.selectRouteFileSize=e.selectRouteFileSize||this.config.selectRouteFileSize||_n*_n,this.completeCallback=t;const[r,n]=await this._runAsyncFn((()=>this.checkSelect({clientIp:this.clientIp})));r||(n?this._retestSpeed(n):this.startSelectRoute())}_retestSpeed(e){if(!e||!e.raceInfo||e.raceInfo.length<=0)return;const t=e.raceInfo.map((e=>e.domainInfo));this.race(t,null,e)}_retry(){return this.retryCount++,this.retryCount<=this.MAX_RETRY_TIME&&(this.startSelectRoute(),!0)}async checkSelect({clientIp:e}){let t=null;try{t=JSON.parse(await this.uploaderCtx.storage.getItem(this.cacheKey))}catch{return null}if(t){const{lastClientIp:r}=t,{lastSelectRouteTime:n}=t;if(e&&e!==r)return null;if((new Date).getTime()-n<this.selectRouteCacheTime)return t}return null}_removeAbortCallback(e){this._abortCallbacks.splice(this._abortCallbacks.indexOf(e),1)}startSelectRoute(){const{region:e}=this.config,t=new Vi,r=()=>{t.abort()};this._abortCallbacks.push(r);const n=()=>this._removeAbortCallback(r);t.on("complete",(e=>{if(n(),e.response)try{const t=JSON.parse(e.response);if(t.ResponseMetadata.Error)this.fail({xhr:e,errorCode:t.ResponseMetadata.Error.CodeN,error:t.ResponseMetadata.Error.Code,message:t.ResponseMetadata.Error.Message});else{const{Result:r}=t,{Domains:n}=r;this.race(n,e)}}catch(t){this.fail({error:`catch error: ${t.toString()}`,xhr:e})}else this.fail({error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e})})),t.on("error",(e=>{n();const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const r=JSON.parse(e.response);r.ResponseMetadata&&r.ResponseMetadata.Error&&(t.errorCode=r.ResponseMetadata.Error.CodeN,t.error=r.ResponseMetadata.Error.Code,t.message=r.ResponseMetadata.Error.Message),r.ResponseMetadata&&r.ResponseMetadata.RequestId&&(t.requestId=r.ResponseMetadata.RequestId)}this.fail(t)}));const i=this.config.videoHost,s=xn.VOD;let o=this.config.videoConfig&&this.config.videoConfig.spaceName;this.options.type===wn.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(o=this.config.objectConfig.spaceName);const a={Action:"GetUploadCandidates",Version:"2020-11-19",SpaceName:o};this.uploaderCtx.priorInfo.topExpires>0&&(a["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const{stsToken:c}=this.options;this.config.extraQuery&&Object.assign(a,{...this.config.extraQuery});const l={method:"GET",url:`${i}?${Fi.toQueryString(a)}`,timeout:30*bn,region:e,params:a,pathname:Fi.getPathByURL(i)};Fi.signRequest(l,{serviceName:s,stsToken:c,uploaderCtx:this.uploaderCtx,config:this.config}),t.send(l)}race(e,t,r){const{file:n}=this,i=(n.slice||n.webkitSlice||n.mozSlice).call(n,0,Math.min(this.selectRouteFileSize,n.size)),s=(new Date).getTime(),o=e.map((e=>({domainName:e.Name,domainInfo:e,percent:0,startTime:s,endTime:s,speed:0,complete:!1}))),a=()=>{o.forEach((e=>{e.complete||(e.transport&&e.transport.abort(),e.speed=this._speed(this.file.size*e.percent,e.startTime,(new Date).getTime()))})),this.formatRaceInfo(o,t,r)};this._abortCallbacks.push(a);const c=()=>this._removeAbortCallback(a);o.forEach(((e,n)=>{const i=new Vi;i.on("complete",(()=>{o[n].endTime=(new Date).getTime(),o[n].complete=!0,o[n].speed=this._speed(this.file.size,o[n].startTime,o[n].endTime),o.every((e=>e.complete))&&!this._aborted&&(c(),this.formatRaceInfo(o,t,r))})),i.on("error",(e=>{o[n].endTime=(new Date).getTime(),o[n].complete=!0,o[n].error=e.errText;const{percent:i}=o[n];o[n].speed=this._speed(this.file.size*i,o[n].startTime,o[n].endTime),o.every((e=>e.complete))&&!this._aborted&&(c(),this.formatRaceInfo(o,t,r))})),i.on("progress",(e=>{const t=e.loaded/e.total;o[n].percent=t})),o[n].transport=i})),o.forEach((e=>{const t=e.domainInfo,r={oid:t.StoreID,tosDomain:`${this.config.schema}://${t.Name}`},n=Hi(u.directUploadFileUrl,r)+"?speedtest",s=t.Sign;e.transport.send({method:"post",url:n,headers:{Authorization:s,"Content-CRC32":"ignore"},file:i,binary:1,timeout:this.selectRouteTimeout})}))}formatRaceInfo(e,t,r){if(e.sort(((e,t)=>e.speed<t.speed?1:e.speed>t.speed?-1:e.percent<t.percent?1:e.percent>t.percent?-1:e.error?1:t.error?-1:0)),e.forEach((e=>{delete e.transport})),r){const n={...r,raceInfo:e,type:"success"};this.uploaderCtx.storage.setItem(this.cacheKey,JSON.stringify(n)),this.success(n,t,!0)}else{const r={lastClientIp:this.clientIp,lastSelectRouteTime:(new Date).getTime(),raceInfo:e,type:"success"};this.uploaderCtx.storage.setItem(this.cacheKey,JSON.stringify(r)),this.success(r,t,!1)}}success(e,t,r=!1){const n=t&&this.formatXhr(t);this.uploaderCtx.logger.send(Object.assign({stage:"selectRoute",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,fileSize:this.file&&this.file.size,...n,useCache:r},e)),this.uploaderCtx._broadcast("completeSelectRoute",{...e,useCache:r},!0),this.completeCallback({selectRouteResult:e.raceInfo,expiredTime:e.lastSelectRouteTime+this.selectRouteCacheTime},{aborted:this._aborted})}abort(){this._aborted=!0,this._abortCallbacks.forEach((e=>{e()})),this._abortCallbacks=[]}fail(e){const{errorCode:t,requestId:r}=e;if(Fi.mayLocalTimeError({errorCode:t,requestId:r})&&(Fi.calibrationTimeConfig(this.uploaderCtx.priorInfo,r),this._retry()))return;const n="warn",i={error:e.error,errorCode:e.errorCode,message:e.message};this.uploaderCtx.logger.send(Object.assign({stage:"selectRoute",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,fileSize:this.file&&this.file.size,extra:i,type:n,...this.formatXhr(e.xhr)})),this.uploaderCtx._broadcast("completeSelectRoute",{type:n,...i},!0),this.completeCallback(void 0,{aborted:this._aborted})}formatXhr(e){return{req:{url:e.currentUrl,param:e.params},res:{status:e.status,header:e.getAllResponseHeaders(),body:e.responseText}}}}class ts{constructor(e,t,r,n){this.file=e,this.sliceLength=t,this.successProcess=r,this.failProcess=n,this.retryTime=0,this.crc32Array=[],this.MAX_RETRY_TIME=3}start(){this.readFileCrc32(this.file)}readFileCrc32(e){const t=e.slice||e.webkitSlice||e.mozSlice,r=new FileReader;let n=0;r.readAsArrayBuffer(t.call(e,0,this.sliceLength)),r.onload=e=>{const t=e.target.result;n=Qn.crc32(t,0),this.crc32Array.push({start:0,end:this.sliceLength,crc32:Qn.dec2hex(n),buffer:t}),this.success(this.crc32Array)},r.onerror=e=>{var t,r,n,i;const s=null==(r=null==(t=e.target)?void 0:t.error)?void 0:r.name,o=null==(i=null==(n=e.target)?void 0:n.error)?void 0:i.message;this.fail({crc32Array:this.crc32Array,errorCode:1000003,message:`${s}: ${o}`})}}success(e){this.successProcess(e)}fail(e){this.retryTime>=this.MAX_RETRY_TIME?this.failProcess(e):setTimeout((()=>{this.readFileCrc32(this.file),this.retryTime++}),1e3)}}var rs={exports:{}};!function(e){var t;t=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init,n=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray<"u"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],i=0;i<t;i++)n[i>>>2]|=e[i]<<24-i%4*8;r.call(this,n,t)}else r.apply(this,arguments)};n.prototype=t}}(),e.lib.WordArray},e.exports=t(Dn())}(rs);const ns=t(rs.exports);var is,ss={exports:{}},os={exports:{}};function as(){return is||(is=1,function(e){var t;t=function(e){return function(){var t=e,r=t.lib.WordArray;function n(e,t,n){for(var i=[],s=0,o=0;o<t;o++)if(o%4){var a=n[e.charCodeAt(o-1)]<<o%4*2,c=n[e.charCodeAt(o)]>>>6-o%4*2;i[s>>>2]|=(a|c)<<24-s%4*8,s++}return r.create(i,s)}t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],s=0;s<r;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<r;a++)i.push(n.charAt(o>>>6*(3-a)&63));var c=n.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<r.length;s++)i[r.charCodeAt(s)]=s}var o=r.charAt(64);if(o){var a=e.indexOf(o);-1!==a&&(t=a)}return n(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},e.exports=t(Dn())}(os)),os.exports}var cs,ls={exports:{}};function us(){return cs||(cs=1,function(e){var t;t=function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,s=n.Hasher,o=r.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],y=e[t+6],b=e[t+7],v=e[t+8],_=e[t+9],w=e[t+10],S=e[t+11],E=e[t+12],x=e[t+13],T=e[t+14],k=e[t+15],C=s[0],O=s[1],z=s[2],I=s[3];C=l(C,O,z,I,o,7,a[0]),I=l(I,C,O,z,c,12,a[1]),z=l(z,I,C,O,p,17,a[2]),O=l(O,z,I,C,f,22,a[3]),C=l(C,O,z,I,m,7,a[4]),I=l(I,C,O,z,g,12,a[5]),z=l(z,I,C,O,y,17,a[6]),O=l(O,z,I,C,b,22,a[7]),C=l(C,O,z,I,v,7,a[8]),I=l(I,C,O,z,_,12,a[9]),z=l(z,I,C,O,w,17,a[10]),O=l(O,z,I,C,S,22,a[11]),C=l(C,O,z,I,E,7,a[12]),I=l(I,C,O,z,x,12,a[13]),z=l(z,I,C,O,T,17,a[14]),C=u(C,O=l(O,z,I,C,k,22,a[15]),z,I,c,5,a[16]),I=u(I,C,O,z,y,9,a[17]),z=u(z,I,C,O,S,14,a[18]),O=u(O,z,I,C,o,20,a[19]),C=u(C,O,z,I,g,5,a[20]),I=u(I,C,O,z,w,9,a[21]),z=u(z,I,C,O,k,14,a[22]),O=u(O,z,I,C,m,20,a[23]),C=u(C,O,z,I,_,5,a[24]),I=u(I,C,O,z,T,9,a[25]),z=u(z,I,C,O,f,14,a[26]),O=u(O,z,I,C,v,20,a[27]),C=u(C,O,z,I,x,5,a[28]),I=u(I,C,O,z,p,9,a[29]),z=u(z,I,C,O,b,14,a[30]),C=d(C,O=u(O,z,I,C,E,20,a[31]),z,I,g,4,a[32]),I=d(I,C,O,z,v,11,a[33]),z=d(z,I,C,O,S,16,a[34]),O=d(O,z,I,C,T,23,a[35]),C=d(C,O,z,I,c,4,a[36]),I=d(I,C,O,z,m,11,a[37]),z=d(z,I,C,O,b,16,a[38]),O=d(O,z,I,C,w,23,a[39]),C=d(C,O,z,I,x,4,a[40]),I=d(I,C,O,z,o,11,a[41]),z=d(z,I,C,O,f,16,a[42]),O=d(O,z,I,C,y,23,a[43]),C=d(C,O,z,I,_,4,a[44]),I=d(I,C,O,z,E,11,a[45]),z=d(z,I,C,O,k,16,a[46]),C=h(C,O=d(O,z,I,C,p,23,a[47]),z,I,o,6,a[48]),I=h(I,C,O,z,b,10,a[49]),z=h(z,I,C,O,T,15,a[50]),O=h(O,z,I,C,g,21,a[51]),C=h(C,O,z,I,E,6,a[52]),I=h(I,C,O,z,f,10,a[53]),z=h(z,I,C,O,w,15,a[54]),O=h(O,z,I,C,c,21,a[55]),C=h(C,O,z,I,v,6,a[56]),I=h(I,C,O,z,k,10,a[57]),z=h(z,I,C,O,y,15,a[58]),O=h(O,z,I,C,x,21,a[59]),C=h(C,O,z,I,m,6,a[60]),I=h(I,C,O,z,S,10,a[61]),z=h(z,I,C,O,p,15,a[62]),O=h(O,z,I,C,_,21,a[63]),s[0]=s[0]+C|0,s[1]=s[1]+O|0,s[2]=s[2]+z|0,s[3]=s[3]+I|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var s=t.floor(n/4294967296),o=n;r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,n,i,s,o){var a=e+(t&r|~t&n)+i+o;return(a<<s|a>>>32-s)+t}function u(e,t,r,n,i,s,o){var a=e+(t&n|r&~n)+i+o;return(a<<s|a>>>32-s)+t}function d(e,t,r,n,i,s,o){var a=e+(t^r^n)+i+o;return(a<<s|a>>>32-s)+t}function h(e,t,r,n,i,s,o){var a=e+(r^(t|~n))+i+o;return(a<<s|a>>>32-s)+t}r.MD5=s._createHelper(c),r.HmacMD5=s._createHmacHelper(c)}(Math),e.MD5},e.exports=t(Dn())}(ls)),ls.exports}var ds,hs,ps={exports:{}},fs={exports:{}};function ms(){return ds||(ds=1,function(e){var t;t=function(e){return r=(t=e).lib,n=r.WordArray,i=r.Hasher,s=t.algo,o=[],a=s.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],a=r[3],c=r[4],l=0;l<80;l++){if(l<16)o[l]=0|e[t+l];else{var u=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=u<<1|u>>>31}var d=(n<<5|n>>>27)+c+o[l];d+=l<20?1518500249+(i&s|~i&a):l<40?1859775393+(i^s^a):l<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,c=a,a=s,s=i<<30|i>>>2,i=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a),e.SHA1;var t,r,n,i,s,o,a},e.exports=t(Dn())}(fs)),fs.exports}function gs(){return hs||(hs=1,function(e){var t;t=function(e){return r=(t=e).lib,n=r.Base,i=r.WordArray,s=t.algo,o=s.MD5,a=s.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),s=i.create(),o=s.words,a=r.keySize,c=r.iterations;o.length<a;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<c;u++)l=n.finalize(l),n.reset();s.concat(l)}return s.sigBytes=4*a,s}}),t.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF;var t,r,n,i,s,o,a},e.exports=t(Dn(),ms(),Pn())}(ps)),ps.exports}var ys,bs={exports:{}};function vs(){return ys||(ys=1,function(e){var t;t=function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,a=r.enc;a.Utf8;var c=a.Base64,l=r.algo.EvpKDF,u=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()});n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=r.mode={},h=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var e=h.extend();function r(e,r,n){var i=this._iv;if(i){var s=i;this._iv=t}else s=this._prevBlock;for(var o=0;o<n;o++)e[r+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,s=e.slice(t,t+i);n.decryptBlock(e,t),r.call(this,e,t,i),this._prevBlock=s}}),e}(),f=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,o=[],a=0;a<n;a+=4)o.push(i);var c=s.create(o,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:f}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else n=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(r,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var m=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=s.create([1398893684,1701076831]).concat(r).concat(t);else n=t;return n.toString(c)},parse:function(e){var t=c.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=s.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:n})}},y=n.SerializableCipher=i.extend({cfg:i.extend({format:g}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),s=i.finalize(t),o=i.cfg;return m.create({ciphertext:s,key:r,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(r.kdf={}).OpenSSL={execute:function(e,t,r,n){n||(n=s.random(8));var i=l.create({keySize:t+r}).compute(e,n),o=s.create(i.words.slice(t),4*r);return i.sigBytes=4*t,m.create({key:i,iv:o,salt:n})}},v=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:b}),encrypt:function(e,t,r,n){var i=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var s=y.encrypt.call(this,e,t,i.key,n);return s.mixIn(i),s},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,y.decrypt.call(this,e,t,i.key,n)}})}()},e.exports=t(Dn(),gs())}(bs)),bs.exports}!function(e){var t;t=function(e){return function(){var t=e,r=t.lib.BlockCipher,n=t.algo,i=[],s=[],o=[],a=[],c=[],l=[],u=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var f=n^n<<1^n<<2^n<<3^n<<4;f=f>>>8^255&f^99,i[r]=f,s[f]=r;var m=e[r],g=e[m],y=e[g],b=257*e[f]^16843008*f;o[r]=b<<24|b>>>8,a[r]=b<<16|b>>>16,c[r]=b<<8|b>>>24,l[r]=b,b=16843009*y^65537*g^257*m^16843008*r,u[f]=b<<24|b>>>8,d[f]=b<<16|b>>>16,h[f]=b<<8|b>>>24,p[f]=b,r?(r=m^e[e[e[y^m]]],n^=e[e[n]]):r=n=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=4*((this._nRounds=r+6)+1),s=this._keySchedule=[],o=0;o<n;o++)if(o<r)s[o]=t[o];else{var a=s[o-1];o%r?r>6&&o%r==4&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a],a^=f[o/r|0]<<24),s[o]=s[o-r]^a}for(var c=this._invKeySchedule=[],l=0;l<n;l++)o=n-l,a=l%4?s[o]:s[o-4],c[l]=l<4||o<=4?a:u[i[a>>>24]]^d[i[a>>>16&255]]^h[i[a>>>8&255]]^p[i[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,c,l,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,s),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,s,o,a){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<c;f++){var m=n[l>>>24]^i[u>>>16&255]^s[d>>>8&255]^o[255&h]^r[p++],g=n[u>>>24]^i[d>>>16&255]^s[h>>>8&255]^o[255&l]^r[p++],y=n[d>>>24]^i[h>>>16&255]^s[l>>>8&255]^o[255&u]^r[p++],b=n[h>>>24]^i[l>>>16&255]^s[u>>>8&255]^o[255&d]^r[p++];l=m,u=g,d=y,h=b}m=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],g=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],y=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^r[p++],b=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^r[p++],e[t]=m,e[t+1]=g,e[t+2]=y,e[t+3]=b},keySize:8});t.AES=r._createHelper(m)}(),e.AES},e.exports=t(Dn(),as(),us(),gs(),vs())}(ss);const _s=t(ss.exports);var ws={exports:{}};!function(e){var t;t=function(e){return e.enc.Utf8},e.exports=t(Dn())}(ws);const Ss=t(ws.exports);var Es={exports:{}};!function(e){var t;t=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function r(e,t,r,n){var i=this._iv;if(i){var s=i.slice(0);this._iv=void 0}else s=this._prevBlock;n.encryptBlock(s,0);for(var o=0;o<r;o++)e[t+o]^=s[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;r.call(this,e,t,i,n),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,s=e.slice(t,t+i);r.call(this,e,t,i,n),this._prevBlock=s}}),t}(),e.mode.CFB},e.exports=t(Dn(),vs())}(Es);const xs=t(Es.exports);var Ts={exports:{}};!function(e){var t;t=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},e.exports=t(Dn(),vs())}(Ts);const ks=t(Ts.exports);function Cs(e){const{words:t,sigBytes:r}=e,n=new Uint8Array(r);for(let i=0;i<r;i+=1)n[i]=t[i>>>2]>>>24-i%4*8&255;return n}function Os(e){const{key:t,iv:r,data:n}=e;return Cs(_s.encrypt(ns.create(n),Ss.parse(t),{mode:xs,padding:ks,iv:Ss.parse(r)}).ciphertext).buffer}class zs{constructor(e,t={}){var r,n,i,s,o,a;this.context=e.context,this.key=e.key,this.currFileCtx=this.context.tasks[this.key],this.isDirect=e.isDirect,this.isImageBatchUpload=e.isImageBatchUpload,this.file=e.file,this.type=(this.isImageBatchUpload?null==(r=this.file[0])?void 0:r.type:null==(n=this.file)?void 0:n.type)||"",this.sliceLength=Fi.getFileSliceLength(this.file,t.getSliceFunc),this.config=t,this.crc32Key=null,this.bucket=(null==(i=this.currFileCtx)?void 0:i.serviceType)===xn.IMAGEX?null==(s=t.imageConfig)?void 0:s.serviceId:(null==(o=t.videoConfig)?void 0:o.spaceName)||(null==(a=t.objectConfig)?void 0:a.spaceName)}start(e,t,r){this.successProcess=t,this.failProcess=r,this._st=Date.now(),this.currFileCtx.imagexEnableEncrypt?this.imagex_encrypt(this.file):this.crc32(this.file,this.sliceLength)}imagex_encrypt(e){const{imagexEncryptKey:t}=this.currFileCtx;if(this.isDirect){const r=this.isImageBatchUpload?e:[e],n=[];r.forEach(((e,i)=>{const s=new FileReader;s.readAsArrayBuffer(e),s.onload=e=>{const s=e.target.result,o=Fi.generateKey(16),a=Os({key:t,iv:o,data:s}),c=Fi.concatAb(Fi.str2ab("aes256cfb-direct"),Fi.str2ab(o),a);if(n[i]={data:c,iv:o},n.filter((e=>!!e)).length===r.length){const e=n.map((e=>({start:0,end:e.data.byteLength,crc32:Fi.computeCrc32(e.data),buffer:e.data})));this.success(e)}},s.onerror=()=>{this.fail({message:"Read file error."})}}))}else{const t=Fi.generateKey(16),r=[Fi.generateEncryptMeta(!1,this.sliceLength,t)],n=this.sliceLength,i=e.size;let s=0,o=0;for(;o<i;)o=Math.min(s+n,i),r.push({start:s,end:o,crc32:0}),s=o;this.success(r)}}crc32(e,t){if(this.isImageBatchUpload){const t=e.length,r=[];for(let n=0;n<t;n++)new ts(e[n],e[n].size,(e=>{r[n]=e[0],r.filter((e=>!!e)).length===t&&this.success(r)}),(e=>{this.fail(e)})).start()}else{if(!e||!e.size||e.size<=0)return void this.fail({errorCode:Bn.CRC32_ERROR,message:"There is a problem with the input file or fileSize."});this.isDirect?new ts(e,e.size,(e=>{this.success(e)}),(e=>{this.fail({errorCode:Bn.CRC32_ERROR,message:`get crc32 error: ${e&&e.message}`})})).start():this.sliceFile(e,t,(e=>{this.success(e)}),(e=>{this.fail(e)}))}}sliceFile(e,t,r,n){const i=[],s=e.size,o=e.slice||e.webkitSlice||e.mozSlice;function a(c){const l=new FileReader,u=Math.min(s,c+t);l.readAsArrayBuffer(o.call(e,c,u)),l.onload=e=>{const n=e.target.result;i.push({start:c,end:u,crc32:Fi.computeCrc32(n,0)}),u===s?r(i):a(s-(s%t||t))},l.onerror=e=>{const t=e.target.error.name,r=e.target.error.message;n({crc32Array:i,errorCode:Bn.CRC32_ERROR,message:`${t}: ${r}`})}}try{a(0)}catch(c){n({message:c&&c.toString()})}}getCrc32Key(e,t){let r;return r="[object Array]"===Object.prototype.toString.call(t)?[...t]:[t],r.push(e[0].crc32,e[e.length-1].crc32),this.config.instanceId&&r.push(this.config.instanceId),this.bucket&&r.unshift(this.bucket),r.join("_")}success(e){const t=this.context,{key:r}=this;let n=[],i=[];if(this.isImageBatchUpload)for(let a=0;a<this.file.length;a++)n.push(this.file[a].size),i.push(this.file[a].name);else n=this.file.size,i=this.file.name;this.crc32Key=this.getCrc32Key(e,n);const s=t.tasks[r],o=Object.assign(s,{key:r,crc32Array:e,crc32Key:this.crc32Key,sdkVersion:"0.1.12",extra:{message:"get crc32 success"},stage:"crc32",type:"success",fileSize:n,fileName:i,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st,isDirect:this.isDirect,isImageBatchUpload:this.isImageBatchUpload});return this.successProcess(o)}fail(e){const t=this.context,{key:r}=this,n=t.tasks[r],i=e&&e.message?e.message:"get crc32 error",s=e&&e.errorCode,o=Object.assign(n,{extra:{message:i,errorCode:s},type:"error",stage:"crc32",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st});this.failProcess(o)}}class Is{constructor(e){this.options=e}async fetch(){const{info:e}=this.options,t=new Vi;return new Promise(((r,n)=>{t.on("complete",(e=>{r(e)})),t.on("error",(e=>{n(e)}));const{userId:i}=this.options.config;let s=Hi(u.getUploadListUrl,{tosDomain:e.tosDomain,oid:e.oid,uploadId:e.UploadID});this.options.stream&&(s+="&uploadmode=stream"),t.send({method:"GET",url:s,headers:{Authorization:e.signature,"X-Storage-U":encodeURIComponent(i),...e.UploadHeader},timeout:3e4})}))}}let Ms=!1;try{Ms="1"===localStorage.getItem("ttupload_debug")}catch{}class Rs{static log(...e){Ms&&console.log("[UPLOAD]",...e)}}const Ds={checkFile:()=>{},checkStsToken:e=>!e||e.SessionToken&&e.SecretAccessKey&&(e.AccessKeyId||e.AccessKeyID),checkServiceName:(e,t,r)=>{if(r===xn.VOD||r===xn.IMAGEX)return r;if(e===wn.VIDEO)return xn.VOD;if(e===wn.IMAGE)return xn.IMAGEX;if(e===wn.OBJECT){if(t.objectConfig&&t.objectConfig.spaceName)return xn.VOD;if(t.objectConfig&&t.objectConfig.serviceId)return xn.IMAGEX;if(t.videoConfig&&t.videoConfig.spaceName)return xn.VOD;if(t.imageConfig&&t.imageConfig.serviceId)return xn.IMAGEX}return xn.VOD},checkIfGateway:e=>!!e&&"gateway"===e["X-Storage-Mode"],checkIfLogicalpart:e=>!!e&&"logical_part"===e["X-Logical-Part-Mode"]};class Ns{constructor({options:e,config:t,uploaderCtx:r,currFileCtx:n,startOptions:i,success:s,fail:o}){this.config=t,this.options=e,this.uploaderCtx=r,this.currFileCtx=n||{},this.startOptions=i,this.fail=o,this.success=s,this.retryInfo={default:{retryCount:0,MAX_TIME:2},defaultDomainFail:{retryCount:0,MAX_TIME:2}}}start(){const{region:e}=this.config,t=new Vi;t.on("complete",(e=>{var t;if(!e.response)return this.fail({error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e});{let n=null;try{n=JSON.parse(e.response)}catch(r){return this.fail({error:`catch error: ${r.message||r.toString()}`,xhr:e})}if(!n)return this.fail({message:"Parse response error.Invalid response.",xhr:e});if(null!=(t=null==n?void 0:n.ResponseMetadata)&&t.Error)return this.fail({xhr:e,errorCode:n.ResponseMetadata.Error.CodeN,error:n.ResponseMetadata.Error.Code,message:n.ResponseMetadata.Error.Message});this.success(n,e)}})),t.on("error",(e=>{if((this.options.type===wn.IMAGE&&this.config.imageFallbackHost||this.options.type===wn.VIDEO&&this.config.videoFallbackHost)&&!this.uploaderCtx.useBackupDomain)return void(this._innerRetry("defaultDomainFail")||(this.uploaderCtx.useBackupDomain=!0,this.start()));const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const r=JSON.parse(e.response);r.ResponseMetadata&&r.ResponseMetadata.Error&&(t.errorCode=r.ResponseMetadata.Error.CodeN,t.error=r.ResponseMetadata.Error.Code,t.message=r.ResponseMetadata.Error.Message),r.ResponseMetadata&&r.ResponseMetadata.RequestId&&(t.requestId=r.ResponseMetadata.RequestId);const{requestId:n,errorCode:i}=t;if(n&&Fi.mayLocalTimeError({errorCode:i,requestId:n})&&(Fi.calibrationTimeConfig(this.uploaderCtx.priorInfo,n),this._innerRetry()))return}this.fail(t)}));let r="",n={};const{useBackupDomain:i}=this.uploaderCtx;this.uploaderCtx.priorInfo.topExpires>0&&(n["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const s=Ds.checkServiceName(this.options.type,this.config,this.options.serviceType);if(s===xn.IMAGEX&&(r=i?this.config.imageFallbackHost:this.config.imageHost,n={Action:"ApplyImageUpload",Version:"2018-08-01"},this.options.type===wn.IMAGE&&(this.config.imageConfig&&(this.currFileCtx.serviceId||this.config.imageConfig.serviceId)?n.ServiceId=this.currFileCtx.serviceId||this.config.imageConfig.serviceId:n.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName),this.options.type===wn.OBJECT&&(n.ServiceId=this.currFileCtx.serviceId||this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),this.currFileCtx.fileSize&&this.currFileCtx.fileSize.length>1&&(n.UploadNum=this.currFileCtx.fileSize.length),this.options.storeKey)){const{storeKey:e}=this.options;"[object Array]"===Object.prototype.toString.call(e)?n.StoreKeys=e:"[object String]"===Object.prototype.toString.call(e)&&(n.StoreKeys=[e])}if(s===xn.VOD){let e=this.config.videoConfig&&this.config.videoConfig.spaceName;if(this.options.type===wn.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(e=this.config.objectConfig.spaceName),r=i?this.config.videoFallbackHost:this.config.videoHost,n={Action:"ApplyUploadInner",Version:"2020-11-19",SpaceName:e,FileType:this.options.type,IsInner:1},this.config.enOID&&(n.EnOID=1),(this.options.testHost||this.config.testHost)&&(n.TestHost=this.options.testHost||this.config.testHost),this.startOptions&&this.startOptions.selectRouteResult){const{selectRouteResult:e}=this.startOptions;n.ClientBestHosts=e.map((e=>e.domainName)).join(",")}}if(this.currFileCtx.fileSize&&!this.currFileCtx.isImageBatchUpload&&(n.FileSize=this.currFileCtx.fileSize),this.config.useFileExtension&&this.currFileCtx.fileName&&(this.options.type===wn.OBJECT||this.options.type===wn.IMAGE)){const{fileName:e}=this.currFileCtx,t=Fi.getFileSuffix(e);t&&(n.FileExtension=t)}this.config.accountId&&(n["X-Account-Id"]=this.config.accountId),(this.options.type===wn.IMAGE||this.options.type===wn.OBJECT)&&this.config.bizType&&(n.BizType=this.config.bizType,n.AppID=this.config.appId,n.UserID=this.config.userId),this.config.openExperiment&&(n.app_id=this.config.appId,n.user_id=this.config.userId),this.config.extraQuery&&Object.assign(n,{...this.config.extraQuery}),this.options.extraParams&&Object.assign(n,this.options.extraParams),n.s=Math.random().toString(36).substr(2),this.options.fileSize&&(n.FileSize=this.options.fileSize),this.config.extraQuery&&Object.assign(n,{...this.config.extraQuery}),this.options.scene&&(n.Scene=this.options.scene),n.device_platform="web";const o=this.currFileCtx.proxyStsToken||this.config.stsToken,a={method:"GET",url:`${r}?${Fi.toQueryString(n)}`,timeout:this.currFileCtx.gatewayTimeout||this.config.gatewayTimeout||3e4,region:e,params:n,pathname:Fi.getPathByURL(r)};Fi.signRequest(a,{serviceName:s,stsToken:o,uploaderCtx:this.uploaderCtx,config:this.config}),t.send(a)}_innerRetry(e="default"){const{MAX_TIME:t}=this.retryInfo[e];return this.retryInfo[e].retryCount++,this.retryInfo[e].retryCount<=t&&(this.start(),!0)}}class js{constructor({options:e,config:t,uploaderCtx:r,currFileCtx:n,startOptions:i}){this.config=t,this.options=e,this.uploaderCtx=r,this.currFileCtx=n||{},this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.startOptions=i}parseResult(e){var t;const r=e,n=Ds.checkServiceName(this.options.type,this.config,this.options.serviceType),{Result:i}=r,s=n===xn.IMAGEX?i.UploadAddress:i.InnerUploadAddress.UploadNodes[0],{StoreInfos:o,UploadHosts:a,SessionKey:c,UploadHeader:l={}}=s;let u=n===xn.IMAGEX?a[0]:s.UploadHost;const{SDKParam:d}=i,h=null==(t=o[0])?void 0:t.UploadID;let p,f=[],m=[],g=Ds.checkIfGateway(l);if(Rs.log("1001 Result: ",i),this.config.tosDomain&&this.config.tosDomain.length>0&&(u=this.config.tosDomain),this.isImageBatchUpload&&o.length>1?o.forEach((e=>{f.push(e.Auth),m.push(e.StoreUri)})):(f=o[0].Auth,m=o[0].StoreUri),n===xn.VOD){const{UploadNodes:e}=i.InnerUploadAddress;if(e.length&&e.length>1){const t=e[1];p={SessionKey:t.SessionKey,UploadHeader:t.UploadHeader,StoreInfo:t.StoreInfos[0],UploadHost:t.UploadHost}}}const{serverSpeed:y,enableSelectRoute:b,useClientSelectRouteResult:v}=qi(u,this.startOptions),_=Ds.checkIfLogicalpart(l);let w=null==d?void 0:d.dynamic_slice_web;const S=!!Number(null==d?void 0:d.enable_omit_initupload_web),E=1024*Number(null==d?void 0:d.slice_size_web)||w?Cn:this.currFileCtx.sliceSize,x=Number(null==d?void 0:d.slice_count_web)||this.config.uploadSliceCount,T=Number(null==d?void 0:d.large_file_threshold),k=!!Number(null==d?void 0:d.enable_merge_request_web),C=null==d?void 0:d.retry_03_err_time_web,O=null==d?void 0:d.retry_useful_err_time_web,z=1e3*(null==d?void 0:d.file_merge_timeout_web)||void 0,I=1e3*(null==d?void 0:d.gateway_timeout_web)||void 0,M=1e3*(null==d?void 0:d.init_upload_timeout_web)||void 0,R=1e3*(null==d?void 0:d.upload_timeout_web)||void 0,D=this.currFileCtx.fileSize;if(w){const{normal_slice_size_500M:e,high_slice_size_500M:t}=w;e&&t&&("number"==typeof D&&D>=524288e3&&(w=Object.assign({},w,{normal_slice_size:e,high_slice_size:t})),delete w.normal_slice_size_500M,delete w.high_slice_size_500M)}return"number"==typeof D&&"number"==typeof T&&l&&!g&&D>=T&&(l["X-Storage-Mode"]="gateway",delete l["X-Logical-Part-Mode"],g=!0),{useBackupDomain:this.uploaderCtx.useBackupDomain,signature:f,oid:m,tosDomain:`${this.config.schema}://${u}`,UploadHeader:l||{},SessionKey:c,fallbackStoreInfo:p,useClientSelectRouteResult:v,enableSelectRoute:b,gatewayUpload:g,sliceSize:E,sliceCount:x,logicalPart:_,omitInitUpload:S,mergeRequest:k,dynamicSliceRule:w,serverSpeed:y,UploadID:h,retryUseful03Time:C,retryUsefulReqTime:O,fileMergeTimeout:z,gatewayTimeout:I,initUploadTimeout:M,uploadTimeout:R,preferMode:null==d?void 0:d.upload_mode}}}let As;const Ls=new Uint8Array(16);function Us(){if(!As&&(As=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!As))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return As(Ls)}const Ps=[];for(let r=0;r<256;++r)Ps.push((r+256).toString(16).slice(1));function Gs(e,t=0){return(Ps[e[t+0]]+Ps[e[t+1]]+Ps[e[t+2]]+Ps[e[t+3]]+"-"+Ps[e[t+4]]+Ps[e[t+5]]+"-"+Ps[e[t+6]]+Ps[e[t+7]]+"-"+Ps[e[t+8]]+Ps[e[t+9]]+"-"+Ps[e[t+10]]+Ps[e[t+11]]+Ps[e[t+12]]+Ps[e[t+13]]+Ps[e[t+14]]+Ps[e[t+15]]).toLowerCase()}const Zs={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Fs(e,t,r){if(Zs.randomUUID&&!t&&!e)return Zs.randomUUID();const n=(e=e||{}).random||(e.rng||Us)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,Gs(n)}class Xs extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.isDirect=this.options.isDirect||!!this.currFileCtx.isDirect}async start(e,t,r){this.startOptions=e,this.failProcess=r,this.successProcess=t,this._st=Date.now();let n=null;(()=>{var e;return!this.config.multiTabUploadOptimize||!(null!=(e=this.uploaderCtx.uploadingStore)&&e.isUploading(this.currFileCtx.crc32Key))})()?n=await this.uploaderCtx._getCache(this.currFileCtx.crc32Key):this.currFileCtx.noCache=!0;let i={};try{i=n?JSON.parse(n):{}}catch{return this.startPreUpload()}!this.isDirect&&i.oid&&i.UploadID?this.resumeFromCache(i):this.startPreUpload()}startPreUpload(){var e;const t=Ds.checkServiceName(this.options.type,this.config,this.options.serviceType);if(!this.isImageBatchUpload&&t===xn.VOD&&this.uploaderCtx.priorInfo.preUploadRet&&null!=(e=this.uploaderCtx.priorInfo.preUploadRet.Result.SDKParam)&&e.large_file_threshold){const e=this.uploaderCtx.priorInfo.preUploadRet,t=this.uploaderCtx.priorInfo.preUploadXhr;return this.currFileCtx.cacheApply=!0,delete this.uploaderCtx.priorInfo.preUploadRet,delete this.uploaderCtx.priorInfo.preUploadXhr,this.success(e,t)}this.api=new Ns({options:this.options,config:this.config,uploaderCtx:this.uploaderCtx,currFileCtx:this.currFileCtx,startOptions:this.startOptions||{},success:this.success.bind(this),fail:this.fail.bind(this)}),this.api.start()}getHostFromUri(e){if(e)return e.substring(e.match("://").index+3)}resumeFromCache(e){const{key:t}=this.options;new Is({config:this.config,info:e,stream:e.streamMode}).fetch().then((r=>{let n=null;try{const i=JSON.parse(r.response);if(!(2e3===i.code&&i.data.partlist.length>0))return this.startPreUpload();{const{isAllFinished:s,needSliceArray:o,dynamicCrc32Array:a}=this.confirmCache(i.data.partlist),c=e.hasMerge?5:s?4:3,l=this.getHostFromUri(e.tosDomain),{serverSpeed:u}=qi(l,this.startOptions);n=Object.assign(this.currFileCtx,e,{key:t,xhr:r,extra:{message:"prepare upload from cache success"},stage:"preUpload",type:"success",percent:0,cacheTask:c,proxyStsToken:this.options.stsToken,currentTask:1,status:1,isBreak:1,crc32Array:[],dynamicCrc32Array:a,needSliceArray:o,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,serverSpeed:u})}}catch{return this.startPreUpload()}return this.successProcess(n)})).catch((e=>{e.status>=400?this.startPreUpload():this.fail({error:"request error",xhr:e})}))}confirmCache(e){const{fileSize:t}=this.currFileCtx,[r,n,i]=$i(t,e);return{isAllFinished:i,needSliceArray:r,dynamicCrc32Array:n}}success(e,t){const r=new js({options:this.options,config:this.config,uploaderCtx:this.uploaderCtx,currFileCtx:this.currFileCtx,startOptions:this.startOptions||{}}).parseResult(e);Rs.log("1001 Parsed Result: ",r);let n=[],i=[],s=this.currFileCtx.crc32Array;this.isDirect||(s=[],[i,n]=$i(this.currFileCtx.fileSize,[])),!this.currFileCtx.imagexEnableEncrypt&&!this.isImageBatchUpload&&!this.config.clientEncrypt&&!r.gatewayUpload&&("stream"===r.preferMode||this.config.streamMode)&&(this.currFileCtx.streamMode=!0,r.UploadHeader&&delete r.UploadHeader["X-Logical-Part-Mode"]);let o=0;!r.gatewayUpload&&!this.isDirect&&r.omitInitUpload&&(r.UploadID=Fs());let a=r.sliceSize||this.currFileCtx.sliceSize;this.isDirect||(o=Fi.minSliceSize(!1,r.gatewayUpload),a=Qi(a,!1,r.gatewayUpload));const c={key:this.options.key,type:"success",extra:{message:"prepare upload success"},stage:"preUpload",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,needSliceArray:i,dynamicCrc32Array:n,crc32Array:s,xhr:t,minSliceSize:o,sliceSize:a},l=Object.assign(this.currFileCtx,r,c);this.successProcess(l)}fail(e){var t;const{xhr:r}=e,n=e.errorCode||Bn.APPLY_NETWORK_ERROR;let i="prepare upload error: UNKNOWN";r&&(i=0===r.status?"prepare upload error: NETERROR":e.message||`prepare upload error: ${r.status}`);const s=Object.assign(this.currFileCtx,{extra:{message:i,error:e.error,errorCode:n},type:"error",stage:"preUpload",xhr:r,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.isImageBatchUpload&&(s.successImage=[],s.failImage=null==(t=this.currFileCtx)?void 0:t.crc32Array.map(((e,t)=>{var r,n;return{crc32:e.crc32,fileSize:null==(r=this.currFileCtx)?void 0:r.fileSize[t],fileName:null==(n=this.currFileCtx)?void 0:n.fileName[t],finishSize:0,success:!1}}))),this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(s)}}class Ks extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.transport=new Vi,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.eventInit()}get uploadmode(){return this.currFileCtx.streamMode?"stream":"part"}fallbackStorePlace(){const{fallbackStoreInfo:e}=this.currFileCtx;e&&(Object.assign(this.currFileCtx,{oid:e.StoreInfo.StoreUri,tosDomain:`${this.config.schema}://${e.UploadHost}`,signature:e.StoreInfo.Auth,UploadHeader:e.UploadHeader,SessionKey:e.SessionKey}),this.uploaderCtx._saveTask(this.options.key))}initUpload(e){e&&this.fallbackStorePlace();const t={oid:this.currFileCtx.oid,tosDomain:this.currFileCtx.tosDomain,uploadmode:this.uploadmode},r=Hi(u.initUploadFileUrl,t),{userId:n}=this.config,i={method:"post",url:r,headers:{Authorization:this.currFileCtx.signature,"X-Storage-U":encodeURIComponent(n),...this.currFileCtx.UploadHeader},timeout:this.currFileCtx.initUploadTimeout||this.config.initUploadTimeout||3e4};this.transport.send(i)}start(e,t,r){this.successProcess=t,this.failProcess=r,this._st=Date.now(),this.initUpload(e&&e.changeNodeRetry)}eventInit(){this.transport.on("complete",(e=>{var t;let r=null;try{const n=JSON.parse(e.response),i=null==(t=n.data)?void 0:t.uploadid;if(2e3!==n.code||!i)return this.fail({error:`fail! response.code: ${n.code}, fail message: ${n.message}`,errorCode:null==n?void 0:n.code,message:null==n?void 0:n.message,xhr:e});r=Object.assign(this.currFileCtx,{UploadID:i,percent:0,type:"success",extra:{message:"init upload id success"},stage:"initUploadID",xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}catch(n){return this.fail({error:`catch error: ${n.message||JSON.stringify(n)}`,xhr:e})}return this.successProcess(r)})),this.transport.on("error",(e=>{this.fail({error:`1002 Request Failed: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e})}))}fail(e){const t=Object.assign(this.currFileCtx,{extra:{message:`init upload id error, ${e.error}`,errorCode:e.errorCode||Bn.INIT_UPLOAD_ID_NETWORK_ERROR},type:"error",stage:"initUploadID",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(t)}}class Bs extends i.EventEmitter{constructor({sliceItem:e,crc32:t,url:r,signature:n,uploadHeader:i,userId:s,retryTime:o,timeout:a,method:c="POST",mergeRequest:l,extraParams:u,config:d}){super(),this.fileSlice=e,this.crc32=t,this.uploadUrl=r,this.uploadHeader=i,this.signature=n,this.userId=s,this.retryTime=o||0,this.method=c,this.retryCount=0,this.timeout=a||18e5,this.ready=!1,this.cancel=!1,this.mergeRequest=!!l,this.extraParams=u,this.config=d,this.transport=new Vi,this.eventInit()}upload(e,t){var r;if(!this.isParamsValid())return;this._st=Date.now();const n={method:this.method,url:this.uploadUrl,headers:{Authorization:this.signature,"Content-CRC32":this.crc32,"X-Storage-U":encodeURIComponent(this.userId),...this.uploadHeader},file:this.fileSlice,binary:1,timeout:this.timeout};if(this.mergeRequest&&this.extraParams){n.headers["X-Upload-With-PostUpload"]=1,n.binary=!1,n.file=null;const e=[{name:"file",value:new Blob([this.fileSlice],{type:"application/octet-stream"})}],t={sts2_token:this.extraParams.proxyStsToken.SessionToken,sts2_secret:this.extraParams.proxyStsToken.SecretAccessKey,session_key:this.extraParams.SessionKey};Array.isArray(null==(r=this.config.videoConfig)?void 0:r.processAction)&&(t.functions=Yi(this.config.videoConfig.processAction)),e.push({name:"post_upload_req",value:JSON.stringify(t)}),n.formData=e}this.transport&&this.transport.send(n),e&&this.emit("retry",t)}isParamsValid(){return this.fileSlice&&(this.fileSlice.size||this.fileSlice.byteLength)?this.crc32?!!this.uploadUrl||(this.emit("error",{message:"slice upload failed: NOURL",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCRC32",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCONTENT",crc32:this.crc32}),!1)}eventInit(){this.transport.on("complete",(e=>{try{const t=JSON.parse(e.response);2e3===t.code?this.success(e,t):this.fail(e,t)}catch(t){this.fail(e,t)}})),this.transport.on("error",(e=>{this.fail(e)})),this.transport.on("progress",(e=>{this.process(e)}))}success(e,t){this.ready=!0;const r=Date.now()-this._st,n=this.fileSlice.size||this.fileSlice.byteLength,i=n/r;this.emit("complete",{crc32:this.crc32,size:n,speed:i,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st,result:t})}fail(e,t=null){if(this.cancel)return;const r={crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st};if(e&&401===e.status)return void this.emit("error",{message:"slice upload failed: UNAUTHORIZED",...r});let n=`slice upload failed: ${(null==t?void 0:t.message)||"UNKNOWN"}`;if(e&&(n=e.status?`slice upload failed: ${(null==t?void 0:t.message)||e.status}`:"slice upload failed: NETERROR"),this.retryCount<this.retryTime)return setTimeout((()=>{this.upload(!0,{message:n,...r})}),1e3),void this.retryCount++;this.emit("error",{message:n,errorCode:null==t?void 0:t.code,...r})}process(e){this.cancel||this.emit("progress",{crc32:this.crc32,loaded:e.loaded||0,total:e.total||0})}abort(){this.transport&&(this.cancel=!0,this.transport.abort())}destroy(){this.transport=null}}class Vs{constructor(e){this.currentCtx=e.currentCtx,this.options=e,this.config=e.config,this.transport=new Vi}getUrl(){const{partNumber:e,partSize:t}=this.options,r={oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain,uploadid:this.currentCtx.UploadID,size:t,part_number:e};return Hi(u.getUploadStatusUrl,r)}getTransportReq(e){const{userId:t}=this.config;return{method:"get",url:e,headers:{Authorization:this.currentCtx.signature,"X-Storage-U":encodeURIComponent(t),...this.currentCtx.UploadHeader},timeout:this.config.getPartStatusTimeout||1e5}}onTransportComplete(e,t,r){try{t(JSON.parse(e.response))}catch(n){r(n)}}fetch(){const e=this.getUrl(),t=this.getTransportReq(e),{transport:r}=this,{controller:n}=this.options;return n.abort=()=>{r.abort()},new Promise(((e,n)=>{r.on("complete",(t=>this.onTransportComplete(t,e,n))),r.on("error",(e=>{n(e.errText)})),r.send(t)}))}}class Ws{constructor(e){this.api=new Vs(e),this.options=e}async fetch(){const{maxRetryCount:e=0}=this.options;let t=0;for(;t<e;)try{const e=await this.api.fetch();if(2e3===e.code)return{completed:!0,offset:this.options.partSize};if(4009===e.code)return{completed:!1,offset:e.data.offset};if(4021===e.code)return{completed:!1,offset:0};throw new Error(`GetPartStatus failed with code ${e.code}`)}catch(r){if("abort"===r||(t++,Rs.log(`GetPartStatus failed with error ${r}, retrying...`),t>=e))throw r}return{completed:!1,offset:0}}}class Hs extends i.EventEmitter{constructor(e,t={}){super(),this.cancelableCallbacks=new Ki,this.maxPausedDelay=6e5,this.dynamicCrc32Array=[],this.streamModeConfig={maxFetchStatusRetryTime:3},this.setMaxListeners(1/0),this.file=e.file,this.context=e.context,this.key=e.key,this.config=t,this.finishArr=[],this.errorLength=0,this.finishSize=0,this.retryUploadTime=Number(t.retryUploadTime)||2,this.progressMonitorTime=Number(t.progressMonitorTime)||10,this.progressMonitorSpeed=Number(t.progressMonitorSpeed)||50,this.uploadSliceCount=Number(t.uploadSliceCount)||3,this.realtimeSpeedInterval=Number(t.realtimeSpeedInterval)||5,this.lastFinishSize=-1,this.lastProcessPercent=-1,this.lastIntervalSize=-1,this.lastCalculateSpeedTime=-1,this.lastCalculateSpeedSize=0,this.retryCount={},this.uploadHandlers={},this.RETRY_UPLOAD_DELAY=1e3}generateUrl(e,t,r,n){if(!this.currentCtx)return"";const i={part_number:e,uploadId:this.currentCtx.UploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain};let s=Hi(u.uploadChunkedUrl,i);return s+="&part_offset="+t,this.currentCtx.streamMode&&(s+="&uploadmode=stream&enable_omit_initupload="+(Wi(this.currentCtx)?"0":"1")+"&size="+r+"&offset="+n),s}_isLastSlice(e){return 0===this.needSliceArray.length&&this.dynamicCrc32Array.length-1===e}_nextSliceInfor(e){const{lastIndex:t}=this;let r=this.dynamicCrc32Array[t];const n=this.needSliceArray[0];if(!r&&n){const{start:i}=n,s=e||this._dynamicSliceSize();let o=Math.min(n.start+s,n.end);Rs.log("1003 use slice size: "+(o-i)+" speed: "+this.getUploadSpeed()),this.currentCtx.minSliceSize&&n.end-(i+s)<this.currentCtx.minSliceSize&&(o=n.end),r={start:i,end:o,crc32:0},this.dynamicCrc32Array[t]=r,n.start=o,n.start>=n.end&&this.needSliceArray.shift()}return{lastIndex:t,sliceInfor:r}}_isAllSliceFinish(){return 0===this.needSliceArray.length&&this.finishArr.length>=this.dynamicCrc32Array.length}_isAllFileSliceFinish(){return!this.dynamicCrc32Array.slice(1).some((e=>!e.finished))}getUploadSpeed(){return this.currentCtx.serverSpeed}_hasSpeedResult(){return typeof this.currentCtx.serverSpeed<"u"&&this.currentCtx.serverSpeed>=0}_setSpeed(e){this.currentCtx.serverSpeed=e,Rs.log("1003 update speed: ",e)}_dynamicSliceSize(){let{sliceSize:e}=this.currentCtx;if(!this._hasSpeedResult()||this.config.fixedSliceSize)return e;if(this.currentCtx.dynamicSliceRule){const{low_normal_network_threshold:t,normal_high_network_threshold:r,low_slice_size:n,normal_slice_size:i,high_slice_size:s}=this.currentCtx.dynamicSliceRule;Rs.log("dynamic slice rule: ",JSON.stringify(this.currentCtx.dynamicSliceRule)),e=this.getUploadSpeed()<=t?n:this.getUploadSpeed()<=r?i:s}return e=Math.max(this.currentCtx.minSliceSize,e),e}_getSliceInfor(e){return this.dynamicCrc32Array[e]}_needUploadSize(){let e=0;return e+=this.dynamicCrc32Array.reduce(((e,t)=>e+(t.finished?0:t.end-t.start)),0),e+=this.needSliceArray.reduce(((e,t)=>e+t.end-t.start),0),e}_markSpliceFinish(e){const t=e.index;this.dynamicCrc32Array[t].finished=!0,this.dynamicCrc32Array[t].speed=e.speed,this._setSpeed(e.speed)}_isSliceInfoEqual(e,t){return e.start===t.start&&e.end===t.end&&e.crc32===t.crc32}_isLastDynamicSlice(e){const t=this.dynamicCrc32Array[this.dynamicCrc32Array.length-1];return!(!t||!this._isSliceInfoEqual(e,t))}_getFinishSize(){const{dynamicCrc32Array:e}=this;let t=0;return e.forEach((e=>{t+=e.loaded})),t}_getUploadSliceCount(){return this.currentCtx?this.currentCtx.sliceCount:1}_resetState(){if(this.lastCalculateSpeedTime=Date.now(),this.errorLength=0,this.dynamicCrc32Array=this.context.tasks[this.key].dynamicCrc32Array,this.needSliceArray=this.context.tasks[this.key].needSliceArray,this.uploadSliceCount=this._getUploadSliceCount(),this.lastIndex=0,this.uploading=[],this._uploadSize=this._needUploadSize(),this.imagexEncrypt=this.context.tasks[this.key].imagexEnableEncrypt,this.imagexEncryptMetaGenerated=!1,this.context.tasks[this.key].imagexEnableEncrypt){const e=Fi.generateKey(16);this.imagexEncryptIv=e,this.dynamicCrc32Array.unshift({encryptMeta:!0}),this.lastIndex++}}async _refetchPartList(){this.stop(),this.currentCtx=this.context.tasks[this.key];const e=new Is({config:this.config,info:this.currentCtx,stream:!!this.currentCtx.streamMode});try{const t=await e.fetch(),r=JSON.parse(t.response),{fileSize:n}=this.currentCtx;let i=this.currentCtx.needSliceArray||[],s=this.currentCtx.dynamicCrc32Array||[],o=!1;2e3===r.code&&r.data.partlist.length>0?([i,s,o]=$i(n,r.data.partlist),this.retryCount={}):5e3===r.code&&([i,s,o]=$i(n,[]),this.retryCount={}),this.currentCtx.dynamicCrc32Array=s,this.currentCtx.needSliceArray=i,Rs.log("1003 restart, got part list from server: ",r,"dynamicCrc32Array",s,"needSliceArray",i,"isAllFinish: ",o)}catch(t){Rs.log("1003 get part list error: ",t)}}async start(e,t,r){this.failProcess=r,this.successProcess=t,this.currentCtx=this.context.tasks[this.key];const n=Date.now();this._st=n,this._lastStartTime&&n-this._lastStartTime>=this.maxPausedDelay&&await this._refetchPartList(),this._lastStartTime=n,this._resetState(),await this.initWorker(),this.setProgressMonitor(),Rs.log("1003 start. use tosDomain: "+this.currentCtx.tosDomain+", use stream mode: "+!!this.currentCtx.streamMode),this.threadUpload()}async initWorker(){this.worker||(this.worker=await Fi.createCrc32Worker(this.config),this.worker.onmessage=e=>{if(e.data&&e.data.type)return;const[t,r,n,i]=e.data,s=Date.now(),o=this._getSliceInfor(n);o.index=n,o.crc32=r,o.crc32StartTime=i,o.crc32EndTime=s,o.crc32Duration=s-i,this.upload(o,t,n)})}read(e,t){if(e.encryptMeta)return;const{file:r}=this,n=r.slice||r.webkitSlice||r.mozSlice,i=n.call(r,e.start,e.end),s=new FileReader,o=Date.now();s.onload=e=>{var r;let n=e.target.result;this.imagexEncrypt&&(n=Os({iv:this.imagexEncryptIv,key:this.currentCtx.imagexEncryptKey,data:e.target.result})),null==(r=this.worker)||r.postMessage([n,t,o,!!this.config.clientEncrypt,this.currentCtx.clientEncryptKey,this._isLastSlice(t)],[n])},s.onerror=this.onReadFileError(s,i,e).bind(this),s.readAsArrayBuffer(n.call(r,e.start,e.end))}onReadFileError(e,t,r){let n=0;return i=>{var s,o;if(n<1)return void this.cancelableCallbacks.call((r=>{const i=setTimeout((()=>{n++,e.readAsArrayBuffer(t),r()}),1e3);return()=>clearTimeout(i)}));const a=null==(s=i.target.error)?void 0:s.name,c=null==(o=i.target.error)?void 0:o.message,l=Bn.FILE_ERROR_UPLOADING;this.stop();const u={errorCode:l,index:r.index,crc32:0,size:r.end-r.start,message:c||Wn.FILE_ERROR_UPLOADING,extra:{message:c?`${a}: ${c}`:Wn.FILE_ERROR_UPLOADING,errorCode:l}};this.fail(u)}}calculateCrc32AndUpload(e,t){t.loaded=0,this.uploading.push(e),this.read(t,e)}threadUpload(){var e;if(!this.uploading||this.uploading.length>=this.uploadSliceCount)return;const{lastIndex:t,sliceInfor:r}=this._nextSliceInfor();if(!r)return this.imagexEncrypt&&!this.imagexEncryptMetaGenerated?void this._uploadImagexEncryptMeta():void 0;if(!r.finished&&r.crc32&&null!=(e=this.currentCtx)&&e.streamMode&&"number"==typeof t)r.index=t,this.reuploadPartSlice(r,t);else if(r.finished){if(this.checkFinishAndStop(r))return}else r.index=t,this.calculateCrc32AndUpload(t,r);this.lastIndex++,this.threadUpload()}checkFinishAndStop(e){return!(-1!==this.finishArr.indexOf(e.start)||(this.finishArr.push(e.start),!this._isAllSliceFinish())||(this.stop(),this.success(),0))}reuploadPartSlice(e,t){this.getPartStatus({sliceInfor:e,index:t,onGetPartOffset:r=>{this.uploading.push(t),this._sliceAndUpload(e,t,r)},onGetPartFinished:()=>{e.finished=!0,this.checkFinishAndStop(e)},onGetPartFailed:()=>{this.calculateCrc32AndUpload(t,e)}})}_uploadImagexEncryptMeta(){const e=Fi.generateEncryptMeta(!0,0,this.imagexEncryptIv,this.dynamicCrc32Array.slice(1));this.imagexEncryptMetaGenerated=!0,this.dynamicCrc32Array[0]=e,this.upload(e,e.buffer,0)}stop(){Object.keys(this.uploadHandlers).forEach((e=>{this.uploadHandlers[e].abort(),this.uploadHandlers[e].destroy()})),this.uploadHandlers={},this.worker&&this.worker.terminate(),this.worker=null,this.clearMonitor(),this.cancelableCallbacks.cancel()}setProgressMonitor(){this.progressMonitorInterval=setInterval((()=>{const{finishSize:e}=this;if(e-this.lastIntervalSize<this.progressMonitorTime*this.progressMonitorSpeed*1024){const e=Object.assign(this.currentCtx,{stage:"process",type:"warn",extra:{message:`percent are not updated in ${this.progressMonitorTime} seconds`}});this.context.logger.send(e),this.context._broadcast("slowProgress",e),this.clearMonitor()}else this.lastIntervalSize=e}),1e3*this.progressMonitorTime)}clearMonitor(){this.progressMonitorInterval&&clearInterval(this.progressMonitorInterval)}_retryAsPartMode({uploader:e,sliceInfor:t,infor:r,index:n}){this.cancelableCallbacks.call((i=>{const s=setTimeout((()=>{e.upload(),1===this.currentCtx.status&&this.reportRetry(r,t,n),i()}),this.RETRY_UPLOAD_DELAY);return()=>clearTimeout(s)}))}_sliceAndUpload(e,t,r){if(this.file instanceof Array)return;const n=Fi.fileSlice(this.file,e.start+r,e.end);this._uploadSliceItem(e,n,t,r)}retryAsStreamMode({infor:e,sliceInfor:t,index:r}){this.getPartStatus({sliceInfor:t,index:r,onGetPartOffset:e=>{this._sliceAndUpload(t,r,e)},onGetPartFinished:()=>{const n={...e,index:r,start:t.start,end:t.end,speed:this.getUploadSpeed()||0,crc32StartTime:t.crc32StartTime,crc32EndTime:t.crc32EndTime,crc32Duration:t.crc32Duration};this.fileSliceSuccess(n)},onGetPartFailed:()=>{this._sliceAndUpload(t,r,0)}})}getPartStatus({sliceInfor:e,index:t,onGetPartOffset:r,onGetPartFinished:n,onGetPartFailed:i}){const s=async s=>{try{const i=e.end-e.start,o=await this.fetchUploadStatus(t,i,s);if(o.completed)o.completed&&n();else{const e=o.offset;r(e)}}catch(o){"abort"!==o&&i()}};this.cancelableCallbacks.call((e=>{const t=new Bi;return s(t).then((()=>e())),()=>{t.abort()}}))}retryUploadSlice({uploader:e,sliceInfor:t,infor:r,index:n}){var i;!this.retryCount[n]&&(this.retryCount[n]=0),this.retryCount[n]++,delete r.errorCode,null!=(i=this.currentCtx)&&i.streamMode?this.retryAsStreamMode({infor:r,sliceInfor:t,index:n}):this._retryAsPartMode({uploader:e,sliceInfor:t,infor:r,index:n})}_endUploadAndFailed(e,t,r){t.start=e.start,t.crc32StartTime=e.crc32StartTime,t.crc32EndTime=e.crc32EndTime,t.crc32Duration=e.crc32Duration,t.index=r,this.fail(t)}onUploaderComplete(e,t,r){1===this.currentCtx.status&&(e.start=t.start,e.crc32StartTime=t.crc32StartTime,e.crc32EndTime=t.crc32EndTime,e.crc32Duration=t.crc32Duration,e.index=r,this.fileSliceSuccess(e))}onUploaderError(e,t,r,n){1===this.currentCtx.status&&(this._setSpeed(0),(()=>{const t=e.errorCode||0;return!this.currentCtx.retryUseful03Time&&!this.config.retryUseful03Time||!e.xhr||e.xhr.status&&![Vn.READ_IO_ERROR,Vn.ENCRYPTION_ERROR,Vn.PART_NUMBER_NOT_FOUND,Vn.UPLOAD_PART_OUT_OF_RANGE,Vn.BAD_REQUEST].includes(t)?(!this.retryCount[r]||this.retryCount[r]<this.retryUploadTime)&&!(e.xhr&&401===e.xhr.status):!this.retryCount[r]||this.currentCtx.retryUseful03Time&&this.retryCount[r]<this.currentCtx.retryUseful03Time||this.config.retryUseful03Time&&this.retryCount[r]<this.config.retryUseful03Time})()?this.retryUploadSlice({uploader:n,sliceInfor:t,infor:e,index:r}):this._endUploadAndFailed(t,e,r))}async fetchUploadStatus(e,t,r){const n={config:this.config,currentCtx:this.currentCtx,partNumber:e+1,partSize:t,maxRetryCount:this.streamModeConfig.maxFetchStatusRetryTime,controller:r};return await new Ws(n).fetch()}onUploaderProgress(e,t,r){1===this.currentCtx.status&&(t.loaded=e.loaded+r,this.process())}onUploaderRetry(e,t,r){this.reportRetry(e,t,r)}_getUploadHeader(){return this.currentCtx.UploadHeader||{}}upload(e,t,r){!this.config.clientEncrypt&&!this.imagexEncrypt&&(t=Fi.fileSlice(this.file,e.start,e.end)),this._uploadSliceItem(e,t,r,0)}_uploadSliceItem(e,t,r,n){const{crc32:i}=e,{userId:s}=this.config,o="POST",a=this.currentCtx.uploadTimeout||this.config.uploadTimeout,c=e.end-e.start,l={sliceItem:t,crc32:i,url:`${this.generateUrl(r+1,e.start,c,n)}`,signature:this.currentCtx.signature,uploadHeader:this._getUploadHeader(),userId:s,method:o,timeout:a,config:this.config},u=new Bs(l);u.on("complete",(t=>this.onUploaderComplete(t,e,r))),u.on("error",(t=>this.onUploaderError(t,e,r,u))),u.on("progress",(t=>this.onUploaderProgress(t,e,n))),u.on("retry",(t=>this.onUploaderRetry(t,e,r))),u.upload(),this.uploadHandlers[r]=u}success(e){this.finishArr=[];const t=Date.now()-this._st,r=this._uploadSize/t,n=Object.assign(this.currentCtx,{type:"success",stage:"process",percent:99,extra:{message:"upload all slice success."},speed:r,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._lastStartTime+this.currentCtx.totalDuration,isAllFinish:!0});this.worker&&this.worker.terminate(),this.successProcess(n)}fail(e){var t;const r=this.errorFormat(e);r.type="error",void 0!==e.statusCode&&Object.assign(this.currentCtx,{statusCode:e.statusCode}),this.errorLength||(this.context.logger.send(Object.assign({},r,{stage:e.stage||"process"})),this.stop(),this.context._broadcast("error",r),this.context.logger.send(Object.assign({},r,{type:"finish"})),null!=(t=this.currentCtx)&&t.isBreak?this.context._cancel(this.key):this.context._pause(this.key),this.errorLength++)}reportRetry(e,t,r){e.start=t.start,e.crc32StartTime=t.crc32StartTime,e.crc32EndTime=t.crc32EndTime,e.crc32Duration=t.crc32Duration,e.index=r;const n=this.errorFormat(e);this.context.logger.send(Object.assign({},n,{type:"retry"}))}_removeUploadingSlice(e){this.uploading.splice(this.uploading.indexOf(e),1),this.uploadHandlers[e]&&delete this.uploadHandlers[e]}fileSliceSuccess(e){const t=e.index;delete this.retryCount[t];const r=Date.now();-1===this.finishArr.indexOf(e.start)&&this.finishArr.push(e.start),this._markSpliceFinish(e);const n={message:"slice upload success"};if(e.xhr){const t=e.xhr;n.currentUrl=t.currentUrl||"",Object.assign(this.currentCtx,{req:{url:t.currentUrl,param:t.params},res:{status:t.status,body:t.responseText,header:t.getAllResponseHeaders()}}),delete e.xhr}if(this.context.logger.send(Object.assign(this.currentCtx,{stage:"process",type:"success",sliceIndex:t,extra:n,totalDuration:r-this._lastStartTime+this.currentCtx.totalDuration,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration}),{af:!1,si:t+1,ss:e.size,sldur:e.sliceDuration+(e.crc32Duration||0),csldur:e.crc32Duration||0,tsldur:e.sliceDuration,ex:`Slice:${e.crc32},success.si:${t+1},t:${this.dynamicCrc32Array.length}.`}),this._lastStartTime=r,this._removeUploadingSlice(t),this._isAllSliceFinish())return this.stop(),void this.success(e.xhr);this.threadUpload()}process(){let e=this.currentCtx.realtimeSpeed||0;const t=this.currentCtx.fileSize;if(this.finishSize=this._getFinishSize(),this.finishSize>this.lastFinishSize){const t=new Date;if(t.getTime()-this.lastCalculateSpeedTime>1e3*this.realtimeSpeedInterval){const r=t.getTime()-this.lastCalculateSpeedTime,n=this.finishSize-this.lastCalculateSpeedSize;e=Math.floor(n/r),this.lastCalculateSpeedTime=t.getTime(),this.lastCalculateSpeedSize=this.finishSize}this.lastFinishSize=this.finishSize}let r=Math.floor(this.finishSize/t*100*100)/100||0;r=Math.min(r,99);const n=Object.assign(this.currentCtx,{stage:"process",percent:r,realtimeSpeed:e});r>this.lastProcessPercent&&100!==r&&(this.lastProcessPercent=r,this.context._broadcast("progress",n))}errorFormat(e){const t=this.currentCtx.totalDuration,r=Date.now()-this._st,n=e.index,i=e.crc32?{message:e.message,data:e.crc32,size:e.size}:e.extra;i.errorCode=(null==e?void 0:e.errorCode)||i.errorCode||Bn.PROGRESS_NETWORK_ERROR;const s=Object.assign(this.currentCtx,{extra:i,sliceIndex:n,stage:"process",req:{},res:{},totalDuration:r+t,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration});if(e.xhr){const t=e.xhr;s.req={url:e.xhr.currentUrl},s.res={status:t.status,body:t.responseText,header:t.getAllResponseHeaders()},delete e.xhr}return s}}class Ys extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.transport=new Vi,this.eventInit(),this.errorCount=0,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key]}start(e,t,r){this.successProcess=t,this.failProcess=r,this._st=Date.now(),this.mergeFile()}get uploadmode(){return this.currFileCtx.streamMode?"stream":"part"}get fileSizeQuery(){let e="";return"number"==typeof this.currFileCtx.fileSize&&(e=`&size=${this.currFileCtx.fileSize}`),e}mergeFile(){var e;const t={oid:this.currFileCtx.oid,uploadId:this.currFileCtx.UploadID,tosDomain:this.currFileCtx.tosDomain,uploadmode:this.uploadmode},{dynamicCrc32Array:r}=this.currFileCtx;let n="";for(let a=0;a<r.length;a++)n=n?`${n},${a+1}:${r[a].crc32}`:`${a+1}:${r[a].crc32}`;const i=Hi(u.uploadMergeUrl,t),{userId:s}=this.config,o={Authorization:this.currFileCtx.signature,"X-Storage-U":encodeURIComponent(s),...this.currFileCtx.UploadHeader};this.config.clientEncrypt&&(o["x-upload-encryption-mode"]=2,o["x-upload-encryption-key"]=btoa(this.currFileCtx.clientEncryptKey)),this.currFileCtx.mergeRequest&&(o["X-Upload-With-PostUpload"]=1,o["Content-Type"]="application/json",n={parts_crc:n,post_upload_param:{sts2_token:this.currFileCtx.proxyStsToken.SessionToken,sts2_secret:this.currFileCtx.proxyStsToken.SecretAccessKey,session_key:this.currFileCtx.SessionKey}},Array.isArray(null==(e=this.config.videoConfig)?void 0:e.processAction)&&(n.post_upload_param.functions=Yi(this.config.videoConfig.processAction))),this.currFileCtx.contentType&&(o["Specified-Content-Type"]=this.currFileCtx.contentType),this.transport.send({method:"post",url:i+this.fileSizeQuery,headers:o,timeout:this.currFileCtx.fileMergeTimeout||this.config.fileMergeTimeout,custom:n})}eventInit(){const{stage:e}=this.options;this.transport.on("complete",(t=>{var r,n,i,s,o,a;let c=null;try{const l=JSON.parse(t.response);if(this.currFileCtx.mergeRequest){if(2e3!==l.code||null==(n=null==(r=l.data)?void 0:r.post_upload_resp)||!n.results)return this.fail({error:`fail! response.code: ${l.code}, fail message: ${l.message}`,errorCode:null==l?void 0:l.code,message:null==l?void 0:l.message,xhr:t});{const{results:r}=l.data.post_upload_resp,n={Vid:null==(i=r[0])?void 0:i.vid,VideoMeta:null==(s=r[0])?void 0:s.video_meta,PosterUri:null==(o=r[0])?void 0:o.poster_uri};c=Object.assign(this.currFileCtx,{uploadResult:n,stage:e,type:"success",hasMerge:!0,extra:{message:"merge file success, With-PostUpload."},xhr:t,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}}else{if(2e3!==l.code||null==(a=l.data)||!a.key)return this.fail({error:`fail! response.code: ${l.code}, fail message: ${l.message}`,errorCode:null==l?void 0:l.code,message:null==l?void 0:l.message,xhr:t});c=Object.assign(this.currFileCtx,{stage:e,type:"success",hasMerge:!0,extra:{message:"merge file success"},xhr:t,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}}catch(l){return this.fail({error:`response parse error: ${l.message||JSON.stringify(l)}`,xhr:t})}return this.successProcess(c)})),this.transport.on("error",(e=>{this.fail({error:`request fail: ${e.statusText||e.errText}`,xhr:e})}))}getProcessIndex(e){let t=0;return e.forEach(((e,r)=>{"process"===e.stage&&(t=r)})),t}fail(e){const t=Object.assign(this.currFileCtx,{extra:{message:`merge file error, ${e.error}`,errorCode:(null==e?void 0:e.errorCode)||Bn.MERGE_NETWORK_ERROR},type:"error",stage:this.options.stage,xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.failProcess(t)}}class $s extends i.EventEmitter{constructor(e,t={}){super(),this.netErrRetryTime=8,this.errorTimes={},this.cancelableCallbacks=new Ki,this.options=e,this.file=e.file,this.context=e.context,this.key=e.key,this.isImageBatchUpload=e.isImageBatchUpload,this.config=t,this.finishSize=0,this.retryUploadTime=this.config.retryUploadTime||0,this.lastFinishSize=-1,this.lastProcessPercent=-1,this.uploader={},this._uploadProcessMap={}}start(e,t,r){this.failProcess=r,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.crc32Array=this.context.tasks[this.key].crc32Array,this._uploadSize=this.isImageBatchUpload?this.currentCtx.fileSize.reduce(((e,t)=>e+t)):this.file.size,this._st=Date.now(),this.upload(),this.netErrRetryTime=this.currentCtx.retryUseful03Time||this.config.retryUseful03Time||this.netErrRetryTime}stop(){this.uploader&&Object.keys(this.uploader).forEach((e=>{this.uploader[e]&&(this.uploader[e].abort(),this.uploader[e].destroy())})),this.cancelableCallbacks.cancel()}_shouldRetry(e,t){const r=!t.xhr||!t.xhr.status,n=this.errorTimes[e],i=t.errorCode||0;return r||[Vn.READ_IO_ERROR,Vn.ENCRYPTION_ERROR,Vn.PART_NUMBER_NOT_FOUND,Vn.UPLOAD_PART_OUT_OF_RANGE].includes(i)?n<=this.netErrRetryTime:n<=this.retryUploadTime}upload(){const e=this.crc32Array.length;let t=0,r=0;for(let n=0;n<e;n++){const i=this.crc32Array[n],s=i.buffer,{crc32:o}=i,a=this.currentCtx.signature,c="[object Array]"===Object.prototype.toString.call(a)?a[n]:a,l=this.currentCtx.oid,d="[object Array]"===Object.prototype.toString.call(l)?l[n]:l,h={oid:d,tosDomain:this.currentCtx.tosDomain},p=Hi(u.directUploadFileUrl,h),{userId:f}=this.config,m="POST",g=this.currentCtx.uploadTimeout||this.config.uploadTimeout;let y,b;if(this.isImageBatchUpload?(y=this.currentCtx.fileSize[n],b=this.currentCtx.fileName[n]):(y=this.file.size,b=this.file.name),this._uploadProcessMap[o]&&this._uploadProcessMap[o].success){t+=1;continue}this._uploadProcessMap[o]={crc32:o,fileSize:y,fileName:b,oid:d,finishSize:0,success:!1};const v={sliceItem:s,crc32:o,url:p,signature:c,uploadHeader:this.currentCtx.UploadHeader||{},userId:f,method:m,timeout:g,config:this.config};this.currentCtx.contentType&&(v.uploadHeader["Specified-Content-Type"]=this.currentCtx.contentType),this.currentCtx.mergeRequest&&(v.mergeRequest=!0,v.extraParams=this.currentCtx,v.config=this.config);const _=new Bs(v);_.on("complete",(i=>{t++,this._uploadProcessMap[i.crc32].finishSize=i.size,this._uploadProcessMap[i.crc32].success=!0,this.context.logger.send(this.currentCtx,{af:!1,si:n+1,ss:i.size,sldur:i.sliceDuration,csldur:0,tsldur:i.sliceDuration,ex:`Direct:${i.crc32}:success.si:${n+1},t:${e}.`}),r+t===e&&this.success(i.xhr,i.result)})),_.on("error",(i=>{this.errorTimes[n]=this.errorTimes[n]+1||1,this._shouldRetry(n,i)?this.cancelableCallbacks.call((e=>{const t=setTimeout((()=>{_.upload(),this.reportRetry(i),e()}),1e3);return()=>clearTimeout(t)})):(r++,r+t===e&&this.fail(i))})),_.on("progress",(e=>{this.process(e)})),_.upload(),this.uploader[o]=_}}reportRetry(e){const t=this.errorFormat(e);this.context.logger.send(Object.assign({},t,{type:"retry"}))}errorFormat(e){const t=this.currentCtx.totalDuration,r=Date.now()-this._st,n=e.crc32?{message:e.message,data:e.crc32,size:e.size}:e.extra;n.errorCode=(null==e?void 0:e.errorCode)||n.errorCode||Bn.PROGRESS_NETWORK_ERROR;const i=Object.assign(this.currentCtx,{extra:n,stage:"process",req:{},res:{},totalDuration:r+t,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration});if(e.xhr){const t=e.xhr;i.req={url:e.xhr.currentUrl},i.res={status:t.status,body:t.responseText,header:t.getAllResponseHeaders()},delete e.xhr}return i}success(e,t){var r,n,i,s,o,a,c,l,u;const d=Date.now()-this._st,h={type:"success",stage:"process",percent:99,extra:{message:"direct upload success"},speed:this._uploadSize/d,xhr:e,isAllFinish:!0,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration};if(this.currentCtx.mergeRequest){const e={Vid:null==(i=null==(n=null==(r=t.data)?void 0:r.post_upload_resp)?void 0:n.results[0])?void 0:i.vid,VideoMeta:null==(a=null==(o=null==(s=t.data)?void 0:s.post_upload_resp)?void 0:o.results[0])?void 0:a.video_meta,PosterUri:null==(u=null==(l=null==(c=t.data)?void 0:c.post_upload_resp)?void 0:l.results[0])?void 0:u.poster_uri};h.uploadResult=e}const p=Object.assign(this.currentCtx,h);this.isImageBatchUpload&&(p.successImage=[],p.failImage=[],Object.values(this._uploadProcessMap).forEach((e=>{e.success?p.successImage.push(e):p.failImage.push(e)}))),this.uploader=null,this._uploadProcessMap=null,this.successProcess(p)}fail(e){var t;const r=Object.assign(this.currentCtx,{extra:{message:`direct upload error: ${e.message||(null==(t=e.xhr)?void 0:t.errText)}`,errorCode:e.errorCode||Bn.PROGRESS_NETWORK_ERROR},type:"error",stage:"process",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration});this.isImageBatchUpload&&(r.failImage=Object.values(this._uploadProcessMap)),this.uploader=null,this._uploadProcessMap=null,this.failProcess(r)}process(e){const t=this._uploadSize;this._uploadProcessMap[e.crc32].finishSize=Math.max(this._uploadProcessMap[e.crc32].finishSize,e.loaded),this.finishSize=Object.values(this._uploadProcessMap).reduce(((e,t)=>e+t.finishSize),0),this.finishSize>this.lastFinishSize&&(this.lastFinishSize=this.finishSize);const r=Math.min(Math.floor(this.finishSize/t*100*100)/100||0,99),n=Object.assign(this.currentCtx,{stage:"process",percent:r});r>this.lastProcessPercent&&100!==r&&(this.lastProcessPercent=r,this.context._broadcast("progress",n))}}class Js extends i.EventEmitter{constructor(e,t={}){super(),this.options=e,this.file=e.file,this.context=e.context,this.key=e.key,this.config=t,this.errorLength=0,this.retryUploadTime=Number(t.retryUploadTime)||2,this.maxUploadSliceCount=Number(t.uploadSliceCount)||5,this.uploadQueue=[],this.sliceInfoArray=[],this.uploadSliceCount=0,this.isCalcCrc32=!1,this.isFileReading=!1,this.hasStarted=!1,this.hasCompleteAddingSlice=!1}async start(e,t,r){this.failProcess=r,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.hasStarted=!0,this._st=Date.now(),await this.initWorker()}async initWorker(){this.worker||(this.worker=await Fi.createCrc32Worker(this.config),this.worker.onmessage=e=>{this.isCalcCrc32=!1;const[t,r,n]=e.data;this.uploadQueue.forEach(((e,i)=>{e.index===n&&(this.uploadQueue[i].crc32=r,this.uploadQueue[i].fileSliceBuffer=t,this.sliceInfoArray[n].crc32=r)})),this.startUploadQueue()},this.startUploadQueue())}addStreamSlice({fileSlice:e,index:t}){this.isFileReading=!0;const r=new FileReader;r.readAsArrayBuffer(e),r.onload=e=>{this.isFileReading=!1;const r=e.target.result;this.uploadQueue.push({fileSliceBuffer:r,index:t}),this.sliceInfoArray[t]={finished:!1},this.hasStarted&&this.startUploadQueue()}}completeStreamUpload(){this.hasCompleteAddingSlice=!0,0===this.uploadQueue.length&&!this.isFileReading&&this.success()}startUploadQueue(){if(this.uploadSliceCount<=this.maxUploadSliceCount&&this.uploadQueue.length>0&&this.uploadQueue[0].crc32){const e=this.uploadQueue.shift();this.uploadSliceCount++,this.upload({sliceItem:e.fileSliceBuffer,index:e.index,crc32:e.crc32})}else this.uploadQueue.length>0&&!this.uploadQueue[0].crc32&&this.startCrc32Queue()}startCrc32Queue(){if(!this.isCalcCrc32)for(let e=0;e<this.uploadQueue.length;e++){const t=this.uploadQueue[e];if(!t.crc32){this.isCalcCrc32=!0,this.worker.postMessage([t.fileSliceBuffer,t.index],[t.fileSliceBuffer]);break}}}upload({sliceItem:e,index:t,crc32:r}){const{signature:n}=this.currentCtx,i={part_number:t+1,uploadId:this.currentCtx.UploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain},s=Hi(u.uploadChunkedUrl,i),{userId:o}=this.config,a={sliceItem:e,crc32:r,url:s,signature:n,uploadHeader:this.currentCtx.UploadHeader,userId:o,retryTime:this.retryUploadTime,method:"POST",timeout:this.currentCtx.uploadTimeout||this.config.uploadTimeout,config:this.config},c=new Bs(a);c.on("complete",(e=>{1===this.currentCtx.status&&(e.index=t,this.fileSliceSuccess(e))})),c.on("error",(e=>{1===this.currentCtx.status&&(e.index=t,this.fail(e))})),c.upload()}isAllSliceUploaded(){return this.hasCompleteAddingSlice&&0===this.uploadQueue.length&&!this.sliceInfoArray.some((e=>!e.finished))}fileSliceSuccess(e){const t=e.index,r=Date.now(),n={message:"stream slice upload success"};if(e.xhr){const t=e.xhr;n.currentUrl=t.currentUrl||"",Object.assign(this.currentCtx,{req:{url:t.currentUrl,param:t.params},res:{status:t.status,body:t.responseText,header:t.getAllResponseHeaders()}}),delete e.xhr}this.context.logger.send(Object.assign(this.currentCtx,{stage:"process",type:"success",sliceIndex:t,extra:n,totalDuration:r-this._lastSaveTime+this.currentCtx.totalDuration}));const i=Object.assign(this.currentCtx,{uploadQueueLength:this.uploadQueue.length,sliceIndex:t});this.sliceInfoArray[t].finished=!0,this.context._broadcast("stream-progress",i),this.uploadSliceCount--,this.isAllSliceUploaded()?this.success(e.xhr):this.startUploadQueue()}success(e){if(this.isAllSuccess)return;const t=()=>{const e=[];for(let t=0;t<this.sliceInfoArray.length;t++){const r=this.sliceInfoArray[t];r&&e.push({crc32:r.crc32,index:t})}return e},r=Object.assign(this.currentCtx,{type:"success",stage:"process",percent:100,extra:{message:"all slice upload success"},dynamicCrc32Array:t(),xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration});this.successProcess(r),this.isAllSuccess=!0}fail(e){const t=e.index,r=Object.assign(this.currentCtx,{extra:{message:"stream slice upload error"},type:"error",stage:"process",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration,sliceIndex:t});this.context.logger.send(Object.assign({},r)),this.context._broadcast("error",r),this.context.logger.send(Object.assign({},r,{type:"finish"}))}}class Qs extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.skipCommit=e.skipCommit,this.transport=new Vi,this.eventInit(),this.innerRetryCount=0,this.MAX_INNER_RETRY_TIME=3}_innerRetry(){return this.innerRetryCount++,this.innerRetryCount<=this.MAX_INNER_RETRY_TIME&&(this.commitUpload(),!0)}commitUpload(){const{key:e}=this.options,t=this.options.context.tasks[e],{region:r}=this.config;let n,i,s="",o={};const{useBackupDomain:a}=this.uploaderCtx;this.uploaderCtx.priorInfo.topExpires>0&&(o["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const c=Ds.checkServiceName(this.options.type,this.config,this.options.serviceType);if(c===xn.IMAGEX){if(s=a?this.config.imageFallbackHost:this.config.imageHost,o={Action:"CommitImageUpload",Version:"2018-08-01"},n={SessionKey:t.SessionKey},this.options.type===wn.IMAGE){this.config.imageConfig&&(this.currFileCtx.serviceId||this.config.imageConfig.serviceId)?o.ServiceId=this.currFileCtx.serviceId||this.config.imageConfig.serviceId:o.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName;const e=this.config.imageConfig&&this.config.imageConfig.processAction;Array.isArray(e)&&e.length>0&&(n.Functions=e),this.config.skipMeta&&(o.SkipMeta=!0)}const{imagexEnableEncrypt:e,imagexPublicKey:r}=this.currFileCtx;e&&r&&!this.options.skipMeta&&this.uploaderCtx.plugins.forEach((e=>{if("imagex-encrypt-plugin"===(null==e?void 0:e._identifier))try{n.DecryptKeys=e.apply(this.currFileCtx)}catch(t){console.warn(t)}})),this.options.type===wn.OBJECT&&(o.ServiceId=this.currFileCtx.serviceId||this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),i=JSON.stringify(n)}if(c===xn.VOD){let e=this.config.videoConfig&&this.config.videoConfig.spaceName;this.options.type===wn.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(e=this.config.objectConfig.spaceName),s=a?this.config.videoFallbackHost:this.config.videoHost,o={Action:"CommitUploadInner",Version:"2020-11-19",SpaceName:e},n={SessionKey:t.SessionKey,Functions:[]};let r=this.config.videoConfig&&this.config.videoConfig.processAction;this.options.type===wn.OBJECT&&this.config.objectConfig&&this.config.objectConfig.processAction&&(r=this.config.objectConfig.processAction),Array.isArray(r)&&r.length>0&&(n.Functions=r),(this.config.videoConfig&&this.config.videoConfig.callbackArgs||this.options.callbackArgs)&&(n.CallbackArgs=this.options.callbackArgs||this.config.videoConfig.callbackArgs),this.options.type===wn.VIDEO&&this.config.skipDownload&&(o.SkipDownload=!0),this.options.type===wn.OBJECT&&this.options.objectSync&&(n.ObjectSync=this.options.objectSync),this.options.type===wn.VIDEO&&this.options.needExactFormat&&(n.needExactFormat=this.options.needExactFormat),this.options.vstyle&&(n.VStyle=this.options.vstyle),i=JSON.stringify(n)}this.config.accountId&&(o["X-Account-Id"]=this.config.accountId),this.config.openExperiment&&(o.app_id=this.config.appId,o.user_id=this.config.userId),this.config.extraQuery&&Object.assign(o,{...this.config.extraQuery});const l=Fi.toQueryString(o),u=this.currFileCtx.proxyStsToken||this.config.stsToken,d={method:"POST",url:`${s}?${l}`,timeout:this.currFileCtx.gatewayTimeout||this.config.gatewayTimeout||3e4,region:r,params:o,headers:{},pathname:Fi.getPathByURL(s)};d.custom=i,d.body=n,c===xn.IMAGEX&&(d.headers["Content-Type"]="application/json"),Fi.signRequest(d,{serviceName:c,stsToken:u,uploaderCtx:this.uploaderCtx,config:this.config}),this.transport.send(d)}start(e,t,r){if(this.successProcess=t,this.failProcess=r,this._st=Date.now(),this.currFileCtx.mergeRequest)return this.successProcess(Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful,merge request."},stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit}));if(this.skipCommit)return this.successProcess(Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful, skip commit"},stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit}));try{this.commitUpload()}catch(n){this.fail({error:`catch error: ${n.toString()}`})}}eventInit(){this.transport.on("complete",(e=>{let t=null;try{const r=JSON.parse(e.response);if(r.ResponseMetadata.Error)return this.fail({xhr:e,errorCode:r.ResponseMetadata.Error.CodeN,error:r.ResponseMetadata.Error.Code,message:r.ResponseMetadata.Error.Message});{const n=Ds.checkServiceName(this.options.type,this.config,this.options.serviceType),{Result:i}=r;let s={};if(n===xn.IMAGEX)if(this.isImageBatchUpload){const{Results:e}=i,t=i.PluginResult||[];e.forEach(((r,n)=>{e[n]={...e[n],...t[n]}})),s=e}else s=i.Results[0],Object.assign(s,i.PluginResult&&i.PluginResult[0]);else s=i.Results[0];t=Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful"},uploadResult:s,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit})}}catch(r){return this.fail({error:`catch error: ${r.message||r.toString()}`,xhr:e})}return this.successProcess(t)})),this.transport.on("error",(e=>{const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const r=JSON.parse(e.response);r.ResponseMetadata&&r.ResponseMetadata.Error&&(t.errorCode=r.ResponseMetadata.Error.CodeN,t.error=r.ResponseMetadata.Error.Code,t.message=r.ResponseMetadata.Error.Message),r.ResponseMetadata&&r.ResponseMetadata.RequestId&&(t.requestId=r.ResponseMetadata.RequestId)}this.fail(t)}))}fail(e){const{context:t}=this.options,{key:r}=this.options,{xhr:n}=e,i=e.errorCode||Bn.COMMIT_NETWORK_ERROR;let s="commit upload error: UNKNOWN";const{requestId:o}=e;if(Fi.mayLocalTimeError({errorCode:i,requestId:o})&&(Fi.calibrationTimeConfig(this.uploaderCtx.priorInfo,o),this._innerRetry()))return;n&&(s=0===n.status?"commit upload error: NETERROR":e.message||`commit upload error: ${n.status}`);const a=Object.assign(t.tasks[r],{extra:{message:s,error:e.error,errorCode:i},type:"error",stage:"complete",xhr:n,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit});this.failProcess(a)}}class qs extends i.EventEmitter{constructor(e,t={},r,n){super(),this.tasks=e,this.config=t,this.key=n,this.uploaderCtx=r,this.current=0,this.length=this.tasks.length,this.taskError={},this.uploadList=[],this.retryTaskTime=t.retryTaskTime||2}getRetryMaxCount(e,t){return[Bn.APPLY_NETWORK_ERROR,Bn.INIT_UPLOAD_ID_NETWORK_ERROR,Bn.PROGRESS_NETWORK_ERROR,Bn.MERGE_NETWORK_ERROR,Bn.COMMIT_NETWORK_ERROR,Vn.BAD_REQUEST,Vn.PART_MERGED,Vn.ACQUIRE_LOCK_TIMEOUT].includes(e)&&(t.retryUsefulReqTime||this.config.retryUsefulReqTime)||this.retryTaskTime}start(e){const t=this.tasks.shift();t&&(this.current=t.index,this.execTask(t,e))}execTask(e,t){const{key:r}=e,{uploaderCtx:n}=this,i=n.tasks[r];if(!i)return;const{cacheTask:s}=i,{length:o}=n.taskList[r];s&&e.index>0&&e.index<s?this.start():(i.currentTask=e.index,1===i.status&&((1===e.index||"initUploadID"===e.stage)&&(e.arg=Object.assign(e.arg,t)),i.stage=e.stage,e&&e.func.call(e.context,e.arg,(s=>{if(!n.taskList[r])return;const a=()=>n.taskList[r].some((e=>2===e.index));1===e.index&&!a()&&Wi(i)&&n._insert1002Task(r);const c=n.taskList[r].findIndex((t=>t.index===e.index))+1,l=n.taskList[r][c];l&&0!==e.index?n._saveTask(r,{currentTask:l.index,stage:l.stage}):c===o&&n._removeTaskCache(r),this.success(s),this.tasks.length>0?this.start(t):n._queueSuccess(r)}),(n=>{var s;if(n.xhr&&n.xhr.status>=400)return void this.fail(n);if(3===e.index&&n.isDirect)return void this.fail(n);const o=null==(s=n.extra)?void 0:s.errorCode,a=this.getRetryMaxCount(o,i);if(!this.taskError[r]||this.taskError[r]<a){this.taskError[r]?this.taskError[r]++:this.taskError[r]=1;const i=this.errorFormat(n,!0);this.uploaderCtx.logger.send(i),setTimeout((()=>{"initUploadID"===e.stage?this.execTask(e,{...t,changeNodeRetry:!0}):this.execTask(e,t)}),(()=>{if(5===e.index){const e=this.taskError[r];return Math.min(e*e*1e3,1e4)}return 1e3})())}else n.key=r,this.fail(n)}))))}addTask(e,t=!1){t?this.tasks.unshift(e):this.tasks.push(e)}success(e){const t={type:"success"};if(e.xhr){const t=e.xhr;e.req={url:t.currentUrl,param:t.params},e.res={status:t.status,header:t.getAllResponseHeaders(),body:t.responseText},delete e.xhr}Object.assign(e,t);try{this.uploaderCtx._broadcast(e.stage,e)}catch(r){console.warn(r)}this.uploaderCtx.logger.send(e)}fail(e){var t;const{uploaderCtx:r}=this,{key:n}=e,i=this.errorFormat(e);try{r._broadcast("error",i),r.logger.send(Object.assign({},i,{type:"finish"}))}catch(s){console.warn(s)}null!=(t=r.tasks[n])&&t.isBreak?r._cancel(n):r._pause(n),r.logger.send(i)}cancel(e){var t;const{key:r}=this,n=this.uploaderCtx.tasks[r].currentTask;let i;if(this.uploaderCtx.taskList[r].forEach((e=>{n===e.index&&(i=e)})),!e)return this.tasks=[],i&&3===i.index&&i.context.stop(),void this.uploaderCtx._removeTaskCache(r);3===n&&(this.uploaderCtx.tasks[r].isDirect||this.uploaderCtx.tasks[r].streamMode)&&i&&(null==(t=null==i?void 0:i.context)||t.stop())}restart(){this.uploadList.forEach((e=>{e.cancel=!1})),this.start()}errorFormat(e,t){const r={type:t?"retry":"error"};if(e.xhr){const t=e.xhr;e.req={url:t.currentUrl,param:t.params},e.res={status:t.status,header:t.getAllResponseHeaders(),body:t.responseText},e.extra&&(e.extra.req=e.req,e.extra.res=e.res),delete e.xhr}return Object.assign(e,r)}}class eo extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.stsToken=e.stsToken,this.extraParams=e.extraParams,this.logger=this.uploaderCtx.logger,this.retryCount=0,this.MAX_RETRY_TIME=3}_retry(){return this.retryCount++,this.retryCount<=this.MAX_RETRY_TIME&&(this.start(),!0)}start(){var e;if(this.uploaderCtx.priorInfo.preUploadRet)return;const t=new Vi,{stsToken:r,extraParams:n}=this,i={Action:"ApplyUploadInner",Version:"2020-11-19",SpaceName:null==(e=this.config.videoConfig)?void 0:e.spaceName,FileType:"video",IsInner:1,device_platform:"web"};this.config.enOID&&(i.EnOID=1),this.config.openExperiment&&(i.app_id=this.config.appId,i.user_id=this.config.userId),this.uploaderCtx.priorInfo.topExpires>0&&(i["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires),this.config.extraQuery&&Object.assign(i,{...this.config.extraQuery}),n&&Object.assign(i,n);const s=Fi.toQueryString(i),o=this.config.videoHost,a="vod",c={method:"GET",url:`${o}?${s}`,timeout:this.config.gatewayTimeout||3e4,region:this.config.region||"i18n",params:i,pathname:Fi.getPathByURL(o)};Fi.signRequest(c,{serviceName:a,stsToken:r,uploaderCtx:this.uploaderCtx,config:this.config});const l="video_999";t.on("complete",(e=>{var t;let r=null;try{r=JSON.parse(e.response),r.Result?(this.uploaderCtx.priorInfo.preUploadRet=r,this.uploaderCtx.priorInfo.preUploadXhr=e,this.logger.baseSend(l,{type:"success",ts:Math.round(Date.now()/bn),ex:"Pre_apply upload success."})):null!=(t=r.ResponseMetadata)&&t.Error&&this.logger.baseSend(l,{type:"warn",ts:Math.round(Date.now()/bn),ex:`Pre_apply upload failed:${r.ResponseMetadata.Error.CodeN},${r.ResponseMetadata.Error.Code}`,req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})}catch(n){this.logger.baseSend(l,{type:"warn",ts:Math.round(Date.now()/bn),ex:`Pre_apply upload failed:${null==n?void 0:n.message}`,req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})}})),t.on("error",(e=>{const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const r=JSON.parse(e.response);r.ResponseMetadata&&r.ResponseMetadata.Error&&(t.errorCode=r.ResponseMetadata.Error.CodeN,t.error=r.ResponseMetadata.Error.Code,t.message=r.ResponseMetadata.Error.Message),r.ResponseMetadata&&r.ResponseMetadata.RequestId&&(t.requestId=r.ResponseMetadata.RequestId)}const{errorCode:r,requestId:n}=t;Fi.mayLocalTimeError({errorCode:r,requestId:n})&&(Fi.calibrationTimeConfig(this.uploaderCtx.priorInfo,n),this._retry())||this.logger.baseSend(l,{type:"warn",ts:Math.round(Date.now()/bn),ex:"Pre_apply upload failed: XHR error.",req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})})),t.send(c)}}class to{constructor(e,t){this.options=e,this.config=t,this.uploaderCtx=e.context,this.logger=this.uploaderCtx.logger}start(){this.api=new Ns({options:{type:wn.VIDEO,...this.options},config:this.config,uploaderCtx:this.uploaderCtx,startOptions:{enableSelectRoute:!0,selectRouteResult:this.options.selectRouteInfo.selectRouteResult},currFileCtx:{proxyStsToken:this.options.stsToken},success:this.success.bind(this),fail:this.fail.bind(this)}),this.api.start()}success(e,t){this.uploaderCtx.priorInfo.preUploadRet=e,this.uploaderCtx.priorInfo.preUploadXhr=t}fail(e){const t="video_999",{xhr:r}=e;this.logger.baseSend(t,{type:"warn",ts:Math.round(Date.now()/bn),ex:"Pre_apply upload failed: XHR error.",req:{url:null==r?void 0:r.currentUrl,param:null==r?void 0:r.params},res:{status:null==r?void 0:r.status,body:null==r?void 0:r.responseText}})}}class ro{constructor(){this.uploadingKeys=[]}bindEventClearUploadingSign(){window.addEventListener("unload",(()=>{this.uploadingKeys.forEach((e=>{Fi.removeStoreSync(On+e)}))}))}add(e){this.uploadingKeys.includes(e)||(Fi.setStoreSync(On+e,"1"),this.uploadingKeys.push(e))}remove(e){Fi.removeStoreSync(On+e),this.uploadingKeys.splice(this.uploadingKeys.findIndex((t=>t===e)),1)}isUploading(e){return!!Fi.getStoreSync(On+e)}}class no extends i.EventEmitter{constructor(e){super(),this.historyKeys={},this.cache={},this.config=Object.assign({},l),this._mergeOptions(this.config,e),this._checkConfig(),this.tasks={},this.taskList={},this.storage=Fi.storage(this,this.config.enableDiskBreakpoint),this.logger=this.config.noLog?{send:()=>{}}:new zn(this.config,this),this.priorInfo={systemTimeGap:0,topExpires:0},this.plugins=[],this.config.multiTabUploadOptimize&&(this.uploadingStore=new ro,this.uploadingStore.bindEventClearUploadingSign())}_checkConfig(){}_use(e){let t=!1;for(const r of this.plugins)if((null==r?void 0:r.stage)===(null==e?void 0:e.stage)&&(null==r?void 0:r._identifier)===e._identifier){t=!0;break}t||this.plugins.push(e)}_mergeOptions(e,t){!t||"object"!=typeof t||(Object.assign(e,t),Object.keys(t).forEach((r=>{"vodDomain"===r&&(e.replace[r]=t[r])})))}_setCache(e,t){this.storage.setItem(e,t)}async _getCache(e){return await this.storage.getItem(e)}_removeCache(e){e?this.storage.removeItem(e):this.storage.clear()}_addTask(e,t,r=!1){const{tasks:n}=this,{taskList:i}=this;if(r&&n[e])return i[e].splice(2,0,t),void n[e].task.addTask(t,!0);n[e]&&n[e].task?(i[e].push(t),n[e].task.addTask(t)):(i[e]=[],i[e].push(t),n[e]=n[e]||{},n[e].task=new qs([],this.config,this,e),n[e].task.addTask(t))}_broadcast(e,t,r){if(r)return void this.emit(e,t);let n=null;try{n=this.tasks[t.key].status}catch{return}(n===En.UPLOADING||0===n)&&this.emit(e,t)}_addCrc32ProcessTask(e,t,{isDirect:r,isImageBatchUpload:n=!1}={}){const i=new zs({file:e.file,context:this,key:t,isDirect:r,isImageBatchUpload:n},this.config),s={context:i,func:i.start,arg:{},key:t,index:0,stage:"crc32"};this._addTask(t,s)}_addPreUploadTask(e,t,{isDirect:r,isImageBatchUpload:n=!1}={}){const i={file:e.file,stsToken:e.stsToken,context:this,type:e.type||wn.VIDEO,preUploadUriParams:e.preUploadUriParams?e.preUploadUriParams:{},storeKey:e.storeKey,testHost:e.testHost,key:t,isDirect:r,isImageBatchUpload:n,fileSize:e.fileSize,serviceType:e.serviceType||null,scene:e.scene,prefix:e.prefix},s=new Xs(i,this.config),o={context:s,func:s.start,arg:{},key:t,index:1,stage:"preUpload"};this._addTask(t,o)}_addDirectUploadTask(e,t,{isImageBatchUpload:r=!1}={}){const n=new $s({file:e.file,context:this,key:t,isImageBatchUpload:r},this.config),i={context:n,func:n.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,i)}_addInitUploadIDTask(e,t){const r=new Ks({file:e.file,context:this,key:t},this.config),n={context:r,func:r.start,arg:{},key:t,index:2,stage:"initUploadID"};this._addTask(t,n)}_insert1002Task(e){const t=new Ks({context:this,key:e},this.config),r={context:t,func:t.start,arg:{},key:e,index:2,stage:"initUploadID"};this._addTask(e,r,!0)}_addUploadProcessTask(e,t){const r=new Hs({file:e.file,context:this,key:t},this.config),n={context:r,func:r.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,n)}_addStreamUploadTask(e,t){this.streamUploadTask=new Js({context:this,key:t},this.config);const r={context:this.streamUploadTask,func:this.streamUploadTask.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,r)}_mergeFileTask(e,t){const r=new Ys({file:e.file,context:this,stage:"fileMerge",key:t},this.config),n={context:r,func:r.start,arg:{},key:t,index:4,stage:"fileMerge"};this._addTask(t,n)}_getMetaInfoTask(e,t,{isImageBatchUpload:r=!1,skipCommit:n=!1}={}){var i;const s={file:e.file,context:this,data:e.data,type:e.type||wn.VIDEO,callbackArgs:e.callbackArgs,objectSync:e.objectSync,needExactFormat:e.needExactFormat,vstyle:null==(i=e.extra)?void 0:i.vstyle,key:t,isImageBatchUpload:r,skipCommit:n,serviceType:e.serviceType||null,skipMeta:e.skipMeta},o=new Qs(s,this.config),a={context:o,func:o.start,arg:{},key:t,index:5,stage:"complete"};this._addTask(t,a)}_addAllUploadProcess(e,t){var r,n,i,s,o,a;const c=e.type===wn.IMAGE&&"[object Array]"===Object.prototype.toString.call(e.file);this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wn.VIDEO,this.tasks[t].fileSize=e.file&&e.file.size,this.tasks[t].proxyStsToken=e.stsToken,this.tasks[t].streamMode="stream"===e.uploadMode,e.serviceId&&(this.tasks[t].serviceId=e.serviceId),e.contentType&&(this.tasks[t].contentType=e.contentType),this.tasks[t].gatewayUpload=void 0,this.tasks[t].serviceType=Ds.checkServiceName(e.type,this.config,e.serviceType),this.lastStsToken=e.stsToken,this.lastFile=e.file;const l=Fi.getFileSliceLength(e.file,this.config.getSliceFunc);this.tasks[t].sliceSize=l,this.tasks[t].storeRegion=Xi(e.stsToken),this.tasks[t].options=e;const u=Ds.checkServiceName(e.type,this.config),d=this.tasks[t];d.serviceType=u;const h=!!(e.useDirectUpload||c||e.file.size<=kn||e.file.size<=l);if(this.tasks[t].isDirect=h,u===xn.IMAGEX){const e=!(null==(n=null==(r=this.config)?void 0:r.imageConfig)||!n.imagexEnableEncrypt);d.imagexEnableEncrypt=e,e&&(d.imagexEncryptKey=(null==(s=null==(i=this.config)?void 0:i.imageConfig)?void 0:s.imagexEncryptKey)||Fi.generateKey(32),d.imagexPublicKey=null==(a=null==(o=this.config)?void 0:o.imageConfig)?void 0:a.imagexPublicKey)}this._addCrc32ProcessTask(e,t,{isDirect:h,isImageBatchUpload:c}),this._addPreUploadTask(e,t,{isDirect:h,isImageBatchUpload:c}),h?this._addDirectUploadTask(e,t,{isImageBatchUpload:c}):(this._addUploadProcessTask(e,t),this._mergeFileTask(e,t));const p=!(!this.config.skipCommit||Ds.checkServiceName(e.type,this.config)!==xn.IMAGEX);this._getMetaInfoTask(e,t,{isImageBatchUpload:c,skipCommit:p})}_addAllUploadProcessClientEncrypt(e){if(e.type===wn.IMAGE&&Array.isArray(e.file)){const t=[];return e.file.forEach((r=>{t.push(this._createClientEncryptTask({stsToken:e.stsToken,type:e.type,file:r}))})),t}return this._createClientEncryptTask(e)}_createClientEncryptTask(e){const t=Fi.getUnique("file");this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wn.VIDEO,this.tasks[t].fileSize=e.file&&e.file.size,this.tasks[t].proxyStsToken=e.stsToken,this.tasks[t].storeRegion=Xi(e.stsToken);const r=16;this.tasks[t].clientEncryptKey=Fi.generateKey(r);const n=Fi.getFileSliceLength(e.file,this.config.getSliceFunc);this.tasks[t].sliceSize=n,this._addCrc32ProcessTask(e,t,{isDirect:!1,isImageBatchUpload:!1}),this._addPreUploadTask(e,t,{isDirect:!1,isImageBatchUpload:!1}),this._addInitUploadIDTask(e,t),this._addUploadProcessTask(e,t),this._mergeFileTask(e,t);const i=!(!this.config.skipCommit||Ds.checkServiceName(e.type,this.config)!==xn.IMAGEX);return this._getMetaInfoTask(e,t,{isImageBatchUpload:!1,skipCommit:i}),t}_addAllStreamUploadProcess(e,t){this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wn.VIDEO,this.tasks[t].proxyStsToken=e.stsToken,this._addPreUploadTask(e,t),this._addInitUploadIDTask(e,t),this._addStreamUploadTask(e,t),this._mergeFileTask(e,t),this._getMetaInfoTask(e,t)}_addStreamSlice({fileSlice:e,index:t}){this.streamUploadTask.addStreamSlice({fileSlice:e,index:t})}_completeStreamUpload(){this.streamUploadTask.completeStreamUpload()}_run(e,t){const{tasks:r}=this,n=navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/);if(n&&n[1]&&Number(n[1])<=9)return this._broadcast("error",Object.assign(r[e],{key:e,status:0,stage:"browserError",extra:{message:"cannot support the browser below ie10"},type:"error"})),this.logger.send(r[e]),void this._cancel(e);r[e]?(this.historyKeys[e]&&(this.historyKeys[e].startOptions=t),r[e].status===En.PAUSE?this._restart(e):(r[e].startTime=(new Date).getTime(),r[e].task&&r[e].status!==En.UPLOADING&&r[e].task.tasks.length&&(r[e].status=En.UPLOADING,this.logger.send(Object.assign({},r[e],{extra:{message:"start upload"},type:"start",key:e})),r[e].task.start(t)))):console.warn(`${e} is not exit in object tasks, stop running...`)}_selectRoute(e){var t;null==(t=this.selectRouteTask)||t.abort();const r=new es({stsToken:e.stsToken,context:this,type:wn.VIDEO,file:this.lastFile},this.config);return new Promise((t=>{r.start(e,((e,r)=>{this._selectRouteInfo=e,t({selectRouteInfo:e,extra:r})})),this.selectRouteTask=r}))}_restart(e){const{tasks:t}=this;if(!this.tasks[e]&&this.historyKeys[e])return this._addAllUploadProcess(this.historyKeys[e].fileOptions,e),this.tasks[e]&&(this.tasks[e].isRestart=!0),void this._run(e,this.historyKeys[e].startOptions);if(!t[e])return void console.warn(`${e} is not exit in object tasks`);const r=t[e].task;t[e].isRestart=!0;const n=t[e].currentTask||0;this.taskList[e].forEach(((t,i)=>{t.index===n&&(r.tasks=this.taskList[e].slice(i))})),r&&t[e].status!==En.UPLOADING&&r.tasks.length&&(t[e].status=En.UPLOADING,r.restart())}_removeTaskCache(e){var t;const{tasks:r}=this;if(!r[e])return void console.warn(`${e} is not exit in object tasks`);const{crc32Key:n}=r[e];n&&(this._removeCache(n),null==(t=this.uploadingStore)||t.remove(n))}_saveTask(e,t){var r;const{tasks:n}=this,i=n[e];if(!n||!i||i.isDirect||i.imagexEnableEncrypt||i.noCache||i.clientEncryptKey)return;const s=Object.assign({},i,t||{}),{crc32Key:o}=s;if(o)try{this._setCache(o,this.serializeCacheInfo(s)),null==(r=this.uploadingStore)||r.add(o)}catch(a){console.warn(a)}}serializeCacheInfo(e){const t={SessionKey:e.SessionKey,UploadHeader:e.UploadHeader,UploadID:e.UploadID,crc32Key:e.crc32Key,currentTask:e.currentTask,logicalPart:e.logicalPart,gatewayUpload:e.gatewayUpload,mergeRequest:e.mergeRequest,oid:e.oid,signature:e.signature,tosDomain:e.tosDomain,sliceCount:e.sliceCount,sliceSize:e.sliceSize,dynamicSliceRule:e.dynamicSliceRule,minSliceSize:e.minSliceSize,serviceId:e.serviceId,contentType:e.contentType,retryUseful03Time:e.retryUseful03Time,retryUsefulReqTime:e.retryUsefulReqTime,fileMergeTimeout:e.fileMergeTimeout,gatewayTimeout:e.gatewayTimeout,initUploadTimeout:e.initUploadTimeout,uploadTimeout:e.uploadTimeout,streamMode:e.streamMode};let r="";try{r=JSON.stringify(t)}catch(n){console.warn(n)}return r}_queueSuccess(e){const{tasks:t}=this;if(!t[e])return void console.warn(`${e} is not exit in object tasks`);const r=new Date;t[e].endTime=r.getTime(),t[e].time=t[e].endTime-t[e].startTime,t[e].status=0,this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.taskList[e],delete t[e],delete this.historyKeys[e]}_removeFile(e){delete this.tasks[e]}_batchAction(e,t){const{tasks:r}=this;Object.keys(r).forEach((r=>{e&&e(r,t)}))}_refreshSTSToken(e){const{tasks:t}=this;Object.keys(t).forEach((r=>{const n=t[r],i=Object.assign({},n,{proxyStsToken:e});n.proxyStsToken=e;const{crc32Key:s}=i;s&&(n.proxyStsToken=e,this._setCache(s,this.serializeCacheInfo(i)))}))}_setOption(e){this._mergeOptions(this.config,e),e.userId&&!this.config.noLog&&this.logger.setUserUniqueId(e.userId),e.appId&&!this.config.noLog&&this.logger.setLineAppId(e.appId)}_getOption(e){const t=Object.assign({},this.config);return Object.keys(t).forEach((e=>{(e.indexOf("Url")>-1||"replace"===e||"log"===e)&&delete t[e]})),e?t[e]:t}_userCancel(e){const{tasks:t}=this;e?(this._cancel(e),this.logger.send(Object.assign({},t[e],{extra:{message:"cancel upload"},type:"cancel"})),this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.tasks[e]):Object.keys(t).forEach((e=>{this._cancel(e),this.logger.send(Object.assign({},t[e],{extra:{message:"cancel upload"},type:"cancel"})),this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.tasks[e]}))}_cancel(e){const{tasks:t}=this;t[e]?(t[e].status=En.CANCEL,t[e].task.cancel(),delete this.taskList[e],delete this.tasks[e]):console.warn(`${e} is not exit in object tasks`)}_userPause(e){const{tasks:t}=this;e?(this._pause(e),this.logger.send(Object.assign({},t[e],{extra:{message:"pause upload"},type:"pause"}))):Object.keys(t).forEach((e=>{this._pause(e),this.logger.send(Object.assign({},t[e],{extra:{message:"pause upload"},type:"pause"}))}))}_pause(e){const{tasks:t}=this;t[e]?(t[e].status=En.PAUSE,t[e].task.cancel(!0),this._saveTask(e)):console.warn(`${e} is not exit in object tasks`)}_preUploadVod(e){const{stsToken:t,extraParams:r}=e;new eo({stsToken:t,extraParams:r,context:this},this.config).start()}_preUploadVodV2(e,t){const{stsToken:r,preUpload:n}=e,i={stsToken:r,selectRouteInfo:t,context:this};"object"==typeof n&&(i.extraParams=n.extraParams),new to(i,this.config).start()}_startRun(e){let t;this._selectRouteInfo&&(new Date).getTime()<this._selectRouteInfo.expiredTime&&(t={...this._selectRouteInfo,enableSelectRoute:!0}),e?this._run(e,t):this._batchAction(this._run.bind(this),t)}async _start(e,t={}){var r;null==(r=this.selectRouteTask)||r.abort(),t.selectRoute&&await this._selectRoute({...t,stsToken:this.lastStsToken}),this._startRun(e)}}class io extends no{constructor(e){super(e)}use(e){this._use(e)}start(e,t={}){this._start(e,t)}addFile(e){if(!e||!Ds.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wn.STSTOKEN_FORMAT_ERROR,errorCode:Bn.STSTOKEN_FORMAT_ERROR}}),null;if(e.file&&this.config.clientEncrypt)return this._addAllUploadProcessClientEncrypt(e);if(e.file){const t=Fi.getUnique("file");return this.historyKeys[t]={fileOptions:e},this._addAllUploadProcess(e,t),t}return null}addImageFile(e){if(!e||!Ds.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wn.STSTOKEN_FORMAT_ERROR,errorCode:Bn.STSTOKEN_FORMAT_ERROR}}),null;if(e.file){e.type=e.type||wn.IMAGE;const t=Fi.getUnique("file");return this._addAllUploadProcess(e,t),t}return null}addStreamUploadTask(e){if(!e||!Ds.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wn.STSTOKEN_FORMAT_ERROR,errorCode:Bn.STSTOKEN_FORMAT_ERROR}}),null;const t=Fi.getUnique("file");return this._addAllStreamUploadProcess(e,t),t}addStreamSlice({fileSlice:e,index:t}){this._addStreamSlice({fileSlice:e,index:t})}completeStreamUpload(){this._completeStreamUpload()}removeFile(e){e&&this._removeFile(e)}cancel(e){e?this._userCancel(e):this._batchAction(this._userCancel.bind(this))}pause(e){this._userPause(e)}restart(e){e?this._restart(e):this._batchAction(this._restart.bind(this))}refreshSTSToken(e){this._refreshSTSToken(e)}setOption(e){this._setOption(e)}getOption(e){return this._getOption(e)}preUpload(e){return this._preUploadVod(e)}selectRoute(e){this._selectRoute(e).then((t=>{e.preUpload&&!t.extra.aborted&&t.selectRouteInfo&&this._preUploadVodV2(e,t.selectRouteInfo)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}removeListener(e,t){return super.removeListener(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}}return io}()},26319:(e,t,r)=>{"use strict";r.d(t,{UX:()=>n,j2:()=>i});const n={PREFIX:`${r(4130).T}-form`},i={LAYOUT:["horizontal","vertical"],LABEL_POS:["left","top","inset"],LABEL_ALIGN:["left","right"],EXTRA_POS:["middle","bottom"],DEFAULT_TRIGGER:"change"}},41386:(e,t,r)=>{"use strict";r.d(t,{G$:()=>D,Gf:()=>R,JY:()=>N,JH:()=>L,dG:()=>U,Fs:()=>A,TM:()=>j});var n=r(30657),i=r(48163);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t,r){return c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i},c.apply(null,arguments)}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},l(e)}var u=/%[sdj%]/g;function d(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var r=e.field;t[r]=t[r]||[],t[r].push(e)})),t}function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=1,i=t[0],s=t.length;return"function"==typeof i?i.apply(null,t.slice(1)):"string"==typeof i?String(i).replace(u,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch(r){return"[Circular]"}break;default:return e}})):i}function p(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function f(e,t,r){var n=0,i=e.length;!function s(o){if(o&&o.length)r(o);else{var a=n;n+=1,a<i?t(e[a],s):r([])}}([])}"undefined"!=typeof process&&process.env;var m=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,"Async Validation Error")||this).errors=t,n.fields=r,n}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,a(t,r),n}(l(Error));function g(e,t,r,n){if(t.first){var i=new Promise((function(t,i){var s=function(e){var t=[];return Object.keys(e).forEach((function(r){t.push.apply(t,e[r])})),t}(e);f(s,r,(function(e){return n(e),e.length?i(new m(e,d(e))):t()}))}));return i.catch((function(e){return e})),i}var s=t.firstFields||[];!0===s&&(s=Object.keys(e));var o=Object.keys(e),a=o.length,c=0,l=[],u=new Promise((function(t,i){var u=function(e){if(l.push.apply(l,e),++c===a)return n(l),l.length?i(new m(l,d(l))):t()};o.length||(n(l),t()),o.forEach((function(t){var n=e[t];-1!==s.indexOf(t)?f(n,r,u):function(e,t,r){var n=[],i=0,s=e.length;function o(e){n.push.apply(n,e),++i===s&&r(n)}e.forEach((function(e){t(e,o)}))}(n,r,u)}))}));return u.catch((function(e){return e})),u}function y(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function b(e,t){if(t)for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];"object"==typeof n&&"object"==typeof e[r]?e[r]=s({},e[r],n):e[r]=n}return e}function v(e,t,r,n,i,s){!e.required||r.hasOwnProperty(e.field)&&!p(t,s||e.type)||n.push(h(i.messages.required,e.fullField))}var _={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},w={integer:function(e){return w.number(e)&&parseInt(e,10)===e},float:function(e){return w.number(e)&&!w.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"==typeof e&&!w.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(_.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(_.url)},hex:function(e){return"string"==typeof e&&!!e.match(_.hex)}};var S="enum";var E={required:v,whitespace:function(e,t,r,n,i){(/^\s+$/.test(t)||""===t)&&n.push(h(i.messages.whitespace,e.fullField))},type:function(e,t,r,n,i){if(e.required&&void 0===t)v(e,t,r,n,i);else{var s=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(s)>-1?w[s](t)||n.push(h(i.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&n.push(h(i.messages.types[s],e.fullField,e.type))}},range:function(e,t,r,n,i){var s="number"==typeof e.len,o="number"==typeof e.min,a="number"==typeof e.max,c=t,l=null,u="number"==typeof t,d="string"==typeof t,p=Array.isArray(t);if(u?l="number":d?l="string":p&&(l="array"),!l)return!1;p&&(c=t.length),d&&(c=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),s?c!==e.len&&n.push(h(i.messages[l].len,e.fullField,e.len)):o&&!a&&c<e.min?n.push(h(i.messages[l].min,e.fullField,e.min)):a&&!o&&c>e.max?n.push(h(i.messages[l].max,e.fullField,e.max)):o&&a&&(c<e.min||c>e.max)&&n.push(h(i.messages[l].range,e.fullField,e.min,e.max))},enum:function(e,t,r,n,i){e[S]=Array.isArray(e[S])?e[S]:[],-1===e[S].indexOf(t)&&n.push(h(i.messages[S],e.fullField,e[S].join(", ")))},pattern:function(e,t,r,n,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||n.push(h(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||n.push(h(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function x(e,t,r,n,i){var s=e.type,o=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t,s)&&!e.required)return r();E.required(e,t,n,o,i,s),p(t,s)||E.type(e,t,n,o,i)}r(o)}var T={string:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t,"string")&&!e.required)return r();E.required(e,t,n,s,i,"string"),p(t,"string")||(E.type(e,t,n,s,i),E.range(e,t,n,s,i),E.pattern(e,t,n,s,i),!0===e.whitespace&&E.whitespace(e,t,n,s,i))}r(s)},method:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&E.type(e,t,n,s,i)}r(s)},number:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(""===t&&(t=void 0),p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&(E.type(e,t,n,s,i),E.range(e,t,n,s,i))}r(s)},boolean:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&E.type(e,t,n,s,i)}r(s)},regexp:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),p(t)||E.type(e,t,n,s,i)}r(s)},integer:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&(E.type(e,t,n,s,i),E.range(e,t,n,s,i))}r(s)},float:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&(E.type(e,t,n,s,i),E.range(e,t,n,s,i))}r(s)},array:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(null==t&&!e.required)return r();E.required(e,t,n,s,i,"array"),null!=t&&(E.type(e,t,n,s,i),E.range(e,t,n,s,i))}r(s)},object:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&E.type(e,t,n,s,i)}r(s)},enum:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i),void 0!==t&&E.enum(e,t,n,s,i)}r(s)},pattern:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t,"string")&&!e.required)return r();E.required(e,t,n,s,i),p(t,"string")||E.pattern(e,t,n,s,i)}r(s)},date:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t,"date")&&!e.required)return r();var o;if(E.required(e,t,n,s,i),!p(t,"date"))o=t instanceof Date?t:new Date(t),E.type(e,o,n,s,i),o&&E.range(e,o.getTime(),n,s,i)}r(s)},url:x,hex:x,email:x,required:function(e,t,r,n,i){var s=[],o=Array.isArray(t)?"array":typeof t;E.required(e,t,n,s,i,o),r(s)},any:function(e,t,r,n,i){var s=[];if(e.required||!e.required&&n.hasOwnProperty(e.field)){if(p(t)&&!e.required)return r();E.required(e,t,n,s,i)}r(s)}};function k(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var C=k();function O(e){this.rules=null,this._messages=C,this.define(e)}O.prototype={messages:function(e){return e&&(this._messages=b(k(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,r;for(t in this.rules={},e)e.hasOwnProperty(t)&&(r=e[t],this.rules[t]=Array.isArray(r)?r:[r])},validate:function(e,t,r){var n=this;void 0===t&&(t={}),void 0===r&&(r=function(){});var i,o,a=e,c=t,l=r;if("function"==typeof c&&(l=c,c={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();if(c.messages){var u=this.messages();u===C&&(u=k()),b(u,c.messages),c.messages=u}else c.messages=this.messages();var p={};(c.keys||Object.keys(this.rules)).forEach((function(t){i=n.rules[t],o=a[t],i.forEach((function(r){var i=r;"function"==typeof i.transform&&(a===e&&(a=s({},a)),o=a[t]=i.transform(o)),(i="function"==typeof i?{validator:i}:s({},i)).validator=n.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=n.getType(i),i.validator&&(p[t]=p[t]||[],p[t].push({rule:i,value:o,source:a,field:t}))}))}));var f={};return g(p,c,(function(e,t){var r,n=e.rule,i=!("object"!==n.type&&"array"!==n.type||"object"!=typeof n.fields&&"object"!=typeof n.defaultField);function o(e,t){return s({},t,{fullField:n.fullField+"."+e})}function a(r){void 0===r&&(r=[]);var a=r;if(Array.isArray(a)||(a=[a]),!c.suppressWarning&&a.length&&O.warning("async-validator:",a),a.length&&void 0!==n.message&&(a=[].concat(n.message)),a=a.map(y(n)),c.first&&a.length)return f[n.field]=1,t(a);if(i){if(n.required&&!e.value)return void 0!==n.message?a=[].concat(n.message).map(y(n)):c.error&&(a=[c.error(n,h(c.messages.required,n.field))]),t(a);var l={};if(n.defaultField)for(var u in e.value)e.value.hasOwnProperty(u)&&(l[u]=n.defaultField);for(var d in l=s({},l,e.rule.fields))if(l.hasOwnProperty(d)){var p=Array.isArray(l[d])?l[d]:[l[d]];l[d]=p.map(o.bind(null,d))}var m=new O(l);m.messages(c.messages),e.rule.options&&(e.rule.options.messages=c.messages,e.rule.options.error=c.error),m.validate(e.value,e.rule.options||c,(function(e){var r=[];a&&a.length&&r.push.apply(r,a),e&&e.length&&r.push.apply(r,e),t(r.length?r:null)}))}else t(a)}i=i&&(n.required||!n.required&&e.value),n.field=e.field,n.asyncValidator?r=n.asyncValidator(n,e.value,a,e.source,c):n.validator&&(!0===(r=n.validator(n,e.value,a,e.source,c))?a():!1===r?a(n.message||n.field+" fails"):r instanceof Array?a(r):r instanceof Error&&a(r.message)),r&&r.then&&r.then((function(){return a()}),(function(e){return a(e)}))}),(function(e){!function(e){var t,r,n,i=[],s={};for(t=0;t<e.length;t++)r=e[t],n=void 0,Array.isArray(r)?i=(n=i).concat.apply(n,r):i.push(r);i.length?s=d(i):(i=null,s=null),l(i,s)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!T.hasOwnProperty(e.type))throw new Error(h("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),r=t.indexOf("message");return-1!==r&&t.splice(r,1),1===t.length&&"required"===t[0]?T.required:T[this.getType(e)]||!1}},O.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");T[e]=t},O.warning=function(){},O.messages=C,O.validators=T;const z=O;var I=r(26319),M=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function R(e){const t=e.displayName||e.name;return t?`SemiField${t}`:"SemiField"}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r={};r[e]=t;return new z(r)}function N(e){let t=!0;return"string"==typeof e&&e.length?t=!1:Array.isArray(e)&&e.length?t=e.every((e=>N(e))):"boolean"==typeof e?t=e:e&&"symbol"==typeof e.$$typeof&&"Symbol(react.element)"===e.$$typeof.toString()&&(t=!1),t}function j(e,t){let r=[],i=[];return r=(0,n.Z)(e)?(0,n.Z)(t)?I.j2.DEFAULT_TRIGGER:t:e,Array.isArray(r)&&(i=r),"string"==typeof r&&(i[0]=r),i}function A(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,n.Z)(e)?(0,n.Z)(t)?r:t:e}function L(e,t){const r=Object.assign(Object.assign({},{valueKey:"value",onKeyChangeFnName:"onChange",valuePath:"",maintainCursor:!1,shouldInject:!0,shouldMemo:!0}),e);return{options:r,shouldInject:"field"in t||r.shouldInject}}function U(e){let t=Object.assign(Object.assign({},{allowEmptyString:!1,allowEmpty:!1,emptyValue:"",noLabel:!1,noErrorMessage:!1,isInInputGroup:!1}),e),{field:r,label:n,labelPosition:s,labelWidth:o,labelAlign:a,labelCol:c,wrapperCol:l,initValue:u,validate:d,validateStatus:h,trigger:p,allowEmptyString:f,allowEmpty:m,emptyValue:g,rules:y,onChange:b,keepState:v,transform:_,name:w,fieldClassName:S,fieldStyle:E,noLabel:x,noErrorMessage:T,isInInputGroup:k,stopValidateWithError:C,convert:O,showValidateIcon:z,helpText:I,extraText:R,extraTextPosition:D,pure:N,id:j}=t,A=M(t,["field","label","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","initValue","validate","validateStatus","trigger","allowEmptyString","allowEmpty","emptyValue","rules","onChange","keepState","transform","name","fieldClassName","fieldStyle","noLabel","noErrorMessage","isInInputGroup","stopValidateWithError","convert","showValidateIcon","helpText","extraText","extraTextPosition","pure","id"]);delete A.defaultChecked,delete A.defaultValue,delete A.checked,void 0!==u&&(u=(0,i.Z)(u));const L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;return"object"==typeof e&&"required"in e?t=e.required:Array.isArray(e)&&e.length&&e.forEach((e=>{e.required&&(t=!0)})),t}(y);return g=void 0!==g?g:"",{field:r,label:n,labelPosition:s,labelWidth:o,labelAlign:a,labelCol:c,wrapperCol:l,noLabel:x,noErrorMessage:T,isInInputGroup:k,initValue:u,validate:d,validateStatus:h,trigger:p,allowEmptyString:f,allowEmpty:m,emptyValue:g,rules:y,required:L,keepState:v,transform:_,name:w,fieldClassName:S,fieldStyle:E,convert:O,stopValidateWithError:C,showValidateIcon:z,helpText:I,extraText:R,extraTextPosition:D,pure:N,rest:A,id:j}}},11820:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});const n={PREFIX:`${r(4130).T}`}},73007:(e,t,r)=>{"use strict";r.d(t,{UX:()=>n,j2:()=>i});const n={PREFIX:`${r(4130).T}-input`},i={SIZE:["small","large","default"],DEFAULT_SIZE:"default",STATUS:["default","error","warning","success"],CLEARBTN_CLICKED_EVENT_FLAG:"__fromClearBtn",MODE:["password"]}},14635:(e,t,r)=>{"use strict";r.d(t,{KT:()=>a,UX:()=>s,j2:()=>o});var n=r(88300),i=r(4130);const s={PREFIX:`${i.T}-popover`,ARROW:`${i.T}-popover-icon-arrow`},o={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_ARROW_STYLE:{borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"}},a={ARROW_BOUNDING:Object.assign(Object.assign({},n.KT.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030}},64410:(e,t,r)=>{"use strict";r.d(t,{U:()=>n,j:()=>i});const n={PREFIX:`${r(4130).T}-tag`},i={TAG_SIZE:["default","small","large"],TAG_COLOR:["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],TAG_TYPE:["light","solid","ghost"],AVATAR_SHAPE:["square","circle"]}},50867:(e,t,r)=>{"use strict";r.d(t,{U:()=>n,j:()=>i});const n={PREFIX:`${r(4130).T}-typography`},i={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]}},70624:(e,t,r)=>{"use strict";function n(e){return null!==(t=e)&&"object"==typeof t&&"function"==typeof e.then;var t}r.d(t,{Z:()=>n})},51616:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>i,q7:()=>n});const n="Enter",i={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229}},81135:(e,t,r)=>{"use strict";r.d(t,{cS:()=>g,U2:()=>y,Od:()=>b,t8:()=>v});var n=r(7445),i=r(61045),s=r(34073);const o=function(e,t){return(0,s.Z)(t,(function(t){return e[t]}))};var a=r(21377);const c=function(e){return null==e?[]:o(e,(0,a.Z)(e))};var l=r(71693);const u=function(e,t){return null==e||(0,l.Z)(e,t)};var d=r(78789),h=r(4911),p=r(76997);const f=e=>{const t=(0,d.Z)(e);return!((0,i.Z)(e)&&1===t.length)&&Number.isInteger(+t[t.length-1])};function m(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length)return;const i=(0,p.Z)(e,t);(Array.isArray(i)&&i.every((e=>null==e))||function(e){if((0,n.Z)(e)){const t=c(e);return!t.length||t.every((e=>void 0===e))}return!1}(i))&&u(e,t),m(e,t.slice(0,t.length-1),r)}function g(e){return 0===c(e).length}function y(e,t){return(0,p.Z)(e,t)}function b(e,t){u(e,t);let r=(0,d.Z)(t);r=r.slice(0,r.length-1),m(e,r,!1)}function v(e,t,r,n){if(n)return(0,h.Z)(e,t,r);if(void 0!==r)return(0,h.Z)(e,t,r);if(f(t)&&void 0!==y(e,t)){(0,h.Z)(e,t,void 0);let r=(0,d.Z)(t);r=r.slice(0,r.length-1),m(e,r,!1)}else f(t)||void 0===y(e,t)||b(e,t)}},22582:(e,t,r)=>{"use strict";function n(e){return`${e}-${(new Date).getTime()}-${Math.random()}`}function i(){var e,t;try{return null!==(t=null===(e=null===crypto||void 0===crypto?void 0:crypto.randomUUID)||void 0===e?void 0:e.call(crypto))&&void 0!==t?t:String(-99990013e3).replace(/[018]/g,(e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)))}catch(r){return n("semi")}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefix:t="",length:r=7}=e,n="0123456789abcdefghijklmnopqrstuvwxyz";let i="";for(let s=0;s<r;s++){const e=Math.floor(36*Math.random());i+=n.charAt(e)}return t?`${t}-${i}`:i}r.d(t,{Cd:()=>i,Ms:()=>s,ZP:()=>n})},52070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}),"alert_circle")},641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}),"alert_triangle")},26478:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}),"clear")},72457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}),"close")},4202:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}),"info_circle")},52073:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}),"tick")},23264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(18506).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}),"tick_circle")},93556:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(18571);const i="semi";var s=r(18751),o=r.n(s),a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const c=n.forwardRef(((e,t)=>{const{svg:r,spin:s=!1,rotate:c,style:l,className:u,prefixCls:d=i,type:h,size:p="default"}=e,f=a(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),m=o()(`${d}-icon`,{[`${d}-icon-extra-small`]:"extra-small"===p,[`${d}-icon-small`]:"small"===p,[`${d}-icon-default`]:"default"===p,[`${d}-icon-large`]:"large"===p,[`${d}-icon-extra-large`]:"extra-large"===p,[`${d}-icon-spinning`]:!0===s,[`${d}-icon-${h}`]:Boolean(h)},u),g={};return Number.isSafeInteger(c)&&(g.transform=`rotate(${c}deg)`),Object.assign(g,l),n.createElement("span",Object.assign({role:"img",ref:t,"aria-label":h,className:m,style:g},f),r)}));c.elementType="Icon";const l=(e,t)=>{const r=n.forwardRef(((r,i)=>n.createElement(c,Object.assign({svg:n.createElement(e),type:t,ref:i},r))));return r.elementType="Icon",r}},91720:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(18571);const i=(0,r(93556).A)((function(e){return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),n.createElement("path",{d:"M9 17.07V6.93c0-.4.45-.63.78-.41l7.6 5.06c.3.2.3.64 0 .84l-7.6 5.06a.5.5 0 0 1-.78-.41Z",fill:"currentColor"}))}),"small_triangle_right")},84670:(e,t,r)=>{"use strict";r.d(t,{W8:()=>s,kK:()=>i});var n=r(18571);function i(e){return n.isValidElement(e)}function s(e){return 0===n.Children.count(e)}},42915:(e,t,r)=>{"use strict";r.d(t,{Z:()=>se});var n=r(74510),i=r(18571),s=r(18751),o=r.n(s),a=r(61235),c=r.n(a),l=r(78789),u=r(48712),d=r(30657),h=r(51810),p=r(81135),f=r(70624),m=r(41386);function g(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function y(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function b(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return y(r.overflowY,t)||y(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function v(e,t,r,n,i,s,o,a){return s<e&&o>t||s>e&&o<t?0:s<=e&&a<=r||o>=t&&a>=r?s-e-n:o>t&&a<r||s<e&&a>r?o-t+i:0}var _=function(e,t){var r=window,n=t.scrollMode,i=t.block,s=t.inline,o=t.boundary,a=t.skipOverflowHiddenElements,c="function"==typeof o?o:function(e){return e!==o};if(!g(e))throw new TypeError("Invalid target");for(var l,u,d=document.scrollingElement||document.documentElement,h=[],p=e;g(p)&&c(p);){if((p=null==(u=(l=p).parentElement)?l.getRootNode().host||null:u)===d){h.push(p);break}null!=p&&p===document.body&&b(p)&&!b(document.documentElement)||null!=p&&b(p,a)&&h.push(p)}for(var f=r.visualViewport?r.visualViewport.width:innerWidth,m=r.visualViewport?r.visualViewport.height:innerHeight,y=window.scrollX||pageXOffset,_=window.scrollY||pageYOffset,w=e.getBoundingClientRect(),S=w.height,E=w.width,x=w.top,T=w.right,k=w.bottom,C=w.left,O="start"===i||"nearest"===i?x:"end"===i?k:x+S/2,z="center"===s?C+E/2:"end"===s?T:C,I=[],M=0;M<h.length;M++){var R=h[M],D=R.getBoundingClientRect(),N=D.height,j=D.width,A=D.top,L=D.right,U=D.bottom,P=D.left;if("if-needed"===n&&x>=0&&C>=0&&k<=m&&T<=f&&x>=A&&k<=U&&C>=P&&T<=L)return I;var G=getComputedStyle(R),Z=parseInt(G.borderLeftWidth,10),F=parseInt(G.borderTopWidth,10),X=parseInt(G.borderRightWidth,10),K=parseInt(G.borderBottomWidth,10),B=0,V=0,W="offsetWidth"in R?R.offsetWidth-R.clientWidth-Z-X:0,H="offsetHeight"in R?R.offsetHeight-R.clientHeight-F-K:0,Y="offsetWidth"in R?0===R.offsetWidth?0:j/R.offsetWidth:0,$="offsetHeight"in R?0===R.offsetHeight?0:N/R.offsetHeight:0;if(d===R)B="start"===i?O:"end"===i?O-m:"nearest"===i?v(_,_+m,m,F,K,_+O,_+O+S,S):O-m/2,V="start"===s?z:"center"===s?z-f/2:"end"===s?z-f:v(y,y+f,f,Z,X,y+z,y+z+E,E),B=Math.max(0,B+_),V=Math.max(0,V+y);else{B="start"===i?O-A-F:"end"===i?O-U+K+H:"nearest"===i?v(A,U,N,F,K+H,O,O+S,S):O-(A+N/2)+H/2,V="start"===s?z-P-Z:"center"===s?z-(P+j/2)+W/2:"end"===s?z-L+X+W:v(P,L,j,Z,X+W,z,z+E,E);var J=R.scrollLeft,Q=R.scrollTop;O+=Q-(B=Math.max(0,Math.min(Q+B/$,R.scrollHeight-N/$+H))),z+=J-(V=Math.max(0,Math.min(J+V/Y,R.scrollWidth-j/Y+W)))}I.push({el:R,top:B,left:V})}return I};function w(e){return e===Object(e)&&0!==Object.keys(e).length}const S=function(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(w(t)&&"function"==typeof t.behavior)return t.behavior(r?_(e,t):[]);if(r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:w(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,i=e.top,s=e.left;n.scroll&&r?n.scroll({top:i,left:s,behavior:t}):(n.scrollTop=i,n.scrollLeft=s)}))}(_(e,n),n.behavior)}};class E extends h.Z{constructor(e){super(Object.assign({},e));let{initValues:t}=this._adapter.getProps();t=this._adapter.cloneDeep(t),this.data={values:t||{},errors:{},touched:{}},this.fields=new Map,this.registered={},this.registeredArrayField=new Map,this.register=this.register.bind(this),this.unRegister=this.unRegister.bind(this),this.registerArrayField=this.registerArrayField.bind(this),this.unRegisterArrayField=this.unRegisterArrayField.bind(this),this.getArrayField=this.getArrayField.bind(this),this.updateArrayField=this.updateArrayField.bind(this),this.getField=this.getField.bind(this),this.setValues=this.setValues.bind(this),this.updateStateValue=this.updateStateValue.bind(this),this.updateStateError=this.updateStateError.bind(this),this.updateStateTouched=this.updateStateTouched.bind(this),this.getFormState=this.getFormState.bind(this),this.getValue=this.getValue.bind(this),this.getError=this.getError.bind(this),this.getTouched=this.getTouched.bind(this),this.getInitValues=this.getInitValues.bind(this),this.getInitValue=this.getInitValue.bind(this),this.getFormProps=this.getFormProps.bind(this),this.getFieldExist=this.getFieldExist.bind(this),this.scrollToField=this.scrollToField.bind(this)}init(){this._adapter.initFormId()}getField(e){return this.fields.get(e)}register(e,t,r){this.registered[e];if(this.registered[e]=!0,this.fields.set(e,r),r.keepState);else{const n=r.allowEmpty||!1,i={notNotify:!0,notUpdate:!1,allowEmpty:n};let s=t.value;n||""!==s||(s=void 0),this.updateStateValue(e,s,i),t.error&&this.updateStateError(e,t.error,i)}}unRegister(e){const t=this.fields.get(e);try{t.keepState||(p.Od(this.data.values,e),p.Od(this.data.errors,e),p.Od(this.data.touched,e))}catch(r){console.error(`some thing wrong when unregister field:${e}`)}this.fields.delete(e),this._adapter.notifyChange(this.data),this._adapter.forceUpdate()}registerArrayField(e,t){this.updateArrayField(e,{updateKey:(new Date).valueOf(),initValue:t})}unRegisterArrayField(e){this.registeredArrayField.delete(e)}getArrayField(e){return this.registeredArrayField.get(e)}updateArrayField(e,t){const r=Object.assign(Object.assign({},this.registeredArrayField.get(e)),t);this.registeredArrayField.set(e,r)}validate(e){const{validateFields:t}=this.getProps();return t&&(0,u.Z)(t)?this._formValidate():this._fieldsValidate(e)}_formValidate(){const{values:e}=this.data,{validateFields:t}=this.getProps();return new Promise(((r,n)=>{let i;try{i=t(e)}catch(s){i=s}if(i)(0,f.Z)(i)?i.then((t=>{if(t)this.data.errors=t,this._adapter.notifyChange(this.data),this.injectErrorToField(t),this._adapter.forceUpdate(),this._autoScroll(100),n(t);else{const t=this._adapter.cloneDeep(e);r(t),this.injectErrorToField({})}}),(e=>{this._autoScroll(100),n(e)})):(this.data.errors=i,this.injectErrorToField(i),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._autoScroll(100),n(i));else{const t=this._adapter.cloneDeep(e);r(t),this.injectErrorToField({})}}))}_fieldsValidate(e){const{values:t}=this.data;return new Promise(((r,n)=>{let i=[];const s=this._getOperateFieldMap(e);s.forEach(((e,t)=>{const r=this.getValue(t),n={notNotify:!0,notUpdate:!0},s=e.fieldApi.validate(r,n);i.push(s),e.fieldApi.setTouched(!0,n)})),Promise.all(i).then((()=>{this._adapter.notifyChange(this.data),this._adapter.forceUpdate();const e=this.getError();if(this._isValid(s)){const e=this._adapter.cloneDeep(t);r(e)}else this._autoScroll(),n(e)}))}))}submit(e){const{values:t}=this.data;this.validate().then((t=>{const r=this._adapter.cloneDeep(t);this._adapter.notifySubmit(r,e)})).catch((r=>{const n=this._adapter.cloneDeep(r),i=this._adapter.cloneDeep(t);this._adapter.notifySubmitFail(n,i,e)}))}_getNestedField(e){const t=this.fields,r=[...t].map((e=>e[0]));let n=new Map;return r.forEach((r=>{let i=(0,l.Z)(r),s=(0,l.Z)(e);if(s.every(((e,t)=>s[t]===i[t]))){const e=t.get(r);n.set(r,e)}})),n}_getOperateFieldMap(e){let t=new Map;return(0,d.Z)(e)?t=this.fields:e.forEach((e=>{const r=this.fields.get(e);if((0,d.Z)(r)){const r=this._getNestedField(e);t=new Map([...t,...r])}else t.set(e,r)})),t}reset(e){this._getOperateFieldMap(e).forEach((e=>{e.fieldApi.reset()})),this.registeredArrayField.size&&this._resetArrayField(),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._adapter.notifyReset()}_resetArrayField(){[...this.registeredArrayField.keys()].forEach((e=>{const t=this.registeredArrayField.get(e).initValue;this.updateStateValue(e,t,{notNotify:!0,notUpdate:!0}),this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}injectErrorToField(e){this.fields.forEach((t=>{const r=p.U2(e,t.field);t.fieldApi.setError(r,{notNotify:!0,notUpdate:!0})}))}getValue(e,t){const r=void 0===e,n=t&&t.needClone;let i,s;switch(!0){case!r&&!n:i=p.U2(this.data.values,e);break;case!r&&n:s=p.U2(this.data.values,e),i=this._adapter.cloneDeep(s);break;case r&&!n:i=Object.assign({},this.data.values);break;case r&&n:i=this._adapter.cloneDeep(this.data.values)}return i}setValues(e,t){let{isOverride:r=!1}=t;const n=this._adapter.cloneDeep(e);if(this.fields.forEach((e=>{const t=p.U2(n,e.field);e.fieldApi.setValue(t,{notNotify:!0,notUpdate:!0})})),this.registeredArrayField.size){[...this.registeredArrayField.keys()].forEach((e=>{this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}r&&(this.data.values=n),this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,Object.assign({},e)),this._adapter.forceUpdate()}updateStateValue(e,t,r,n){const i=r&&r.notNotify,s=r&&r.notUpdate,o=r&&r.fieldAllowEmpty,a=this.getProp("allowEmpty"),c=o||a;p.t8(this.data.values,e,t,c),i||(this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,{[e]:t})),s||this._adapter.forceUpdate(n)}getTouched(e){return void 0===e?this.data.touched:p.U2(this.data.touched,e)}updateStateTouched(e,t,r,n){const i=r&&r.notNotify,s=r&&r.notUpdate;p.t8(this.data.touched,e,t),i||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(n)}getError(e){return void 0===e?this.data.errors:p.U2(this.data.errors,e)}updateStateError(e,t,r,n){const i=r&&r.notNotify,s=r&&r.notUpdate;p.t8(this.data.errors,e,t),i||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(n)}getFieldSetterApi(){return{setValue:(e,t,r)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,i=this._adapter.cloneDeep(t);n?n.setValue(i,r):(this.updateStateValue(e,i,r,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,r=p.U2(this.data.values,t);e.fieldApi.setValue(r,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setError:(e,t,r)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,i=this._adapter.cloneDeep(t);n?n.setError(i,r):(this.updateStateError(e,i,r,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,r=p.U2(this.data.errors,t);e.fieldApi.setError(r,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setTouched:(e,t,r)=>{const n=this.fields.get(e)?this.fields.get(e).fieldApi:void 0;n?n.setTouched(t,r):(this.updateStateTouched(e,t,r,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,r=p.U2(this.data.touched,t);e.fieldApi.setTouched(r,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))}}}getModifyFormStateApi(){return{register:this.register,unRegister:this.unRegister,updateStateValue:this.updateStateValue,updateStateError:this.updateStateError,updateStateTouched:this.updateStateTouched,getValue:this.getValue,getError:this.getError,getTouched:this.getTouched,getInitValues:this.getInitValues,getInitValue:this.getInitValue,getFormProps:this.getFormProps,getField:this.getField,registerArrayField:this.registerArrayField,unRegisterArrayField:this.unRegisterArrayField,getArrayField:this.getArrayField,updateArrayField:this.updateArrayField}}getFormApi(){const e=this.getFieldSetterApi();return Object.assign(Object.assign({},e),{reset:e=>this.reset(e),validate:e=>this.validate(e),getValue:e=>this.getValue(e,{needClone:!0}),getValues:()=>this.getValue(void 0,{needClone:!0}),getFormState:()=>this.getFormState(!0),getInitValue:e=>this.getInitValue(e),getInitValues:()=>this.getInitValues(),getTouched:e=>this.getTouched(e),getError:e=>this.getError(e),setValues:(e,t)=>this.setValues(e,t||{isOverride:!1}),submitForm:()=>this.submit(),getFieldExist:e=>this.getFieldExist(e),scrollToField:(e,t)=>this.scrollToField(e,t)})}getFormState(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._adapter.cloneDeep(this.data):Object.assign({},this.data)}_isValid(e){let t=!0;if(e){[...e.keys()].forEach((e=>{const r=p.U2(this.data.errors,e);(0,m.JY)(r)||(t=!1)}))}else t=Boolean(p.cS(this.data.errors));return t}getInitValues(){return this._adapter.getInitValues()}getInitValue(e){return void 0===e?this._adapter.getInitValues():p.U2(this._adapter.getInitValues(),e)}getFormProps(e){return this._adapter.getFormProps(e)}getFieldExist(e){return Boolean(this.fields.has(e))}_autoScroll(e){const{autoScrollToError:t}=this.getFormProps();if(!t)return;let r={behavior:"smooth",block:"start"};"object"==typeof t&&(r=t),e?setTimeout((()=>this._getErrorFieldAndScroll(r)),100):this._getErrorFieldAndScroll(r)}_getErrorFieldAndScroll(e){const t=this._adapter.getAllErrorDOM();if(t&&t.length)try{const r=t[0].parentNode.parentNode;S(r,e)}catch(r){}}scrollToField(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth",block:"start"};if(this.getFieldExist(e)){const r=this._adapter.getFieldDOM(e);S(r,t)}}}var x=r(26319),T=r(22582),k=r(72839),C=r(98880),O=r(43230),z=r(84670),I=r(84610),M=r(4157),R=r(7445),D=r(61045),N=r(74535),j=r(21256),A=r(64153),L=r(52553),U=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const P=x.UX.PREFIX,G=e=>{let t,r,n,s,a,c="top";try{const e=(0,i.useContext)(O.kn).getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol"]);t=e.labelCol,r=e.wrapperCol,n=e.labelWidth,s=e.labelAlign,c=e.labelPosition?e.labelPosition:c}catch(p){}e.labelPosition&&(c=e.labelPosition);let{children:l,label:u,className:d,style:h,error:p,noLabel:f}=e;U(e,["children","label","className","style","error","noLabel"]);const m=t&&r,g=o()({[`${P}-field`]:!0,[`${P}-slot`]:!0},d),y=o()({[`${P}-col-${s}`]:!0});switch(!0){case(0,R.Z)(u)&&!i.isValidElement(u):break;case(0,N.Z)(u)||(0,D.Z)(u):case i.isValidElement(u):u={text:u}}let b=null;if(void 0!==typeof p){let e={};switch(!0){case(0,R.Z)(p)&&!i.isValidElement(p):e=p;break;case(0,N.Z)(p)||(0,D.Z)(p):case i.isValidElement(p):e={error:p}}b=i.createElement(L.Z,Object.assign({},e))}let v=Object.assign({align:s,width:n},u),_=o()({[`${P}-field-main`]:!0,[`${P}-slot-main`]:!0});switch(!0){case!m&&!f:a=i.createElement(i.Fragment,null,i.createElement(j.Z,Object.assign({},v)),i.createElement("div",{className:_},l,b));break;case!m&&f:a=i.createElement(i.Fragment,null,i.createElement("div",{className:_},l,b));break;case m&&"top"===c:a=i.createElement(i.Fragment,null,i.createElement("div",{style:{overflow:"hidden"}},i.createElement(A.Z,Object.assign({},t,{className:y}),i.createElement(j.Z,Object.assign({},v)))),i.createElement(A.Z,null,l,b));break;case m&&"top"!==c:a=i.createElement(i.Fragment,null,i.createElement(A.Z,Object.assign({},t,{className:y}),i.createElement(j.Z,Object.assign({},v))),i.createElement(A.Z,null,l,b))}return i.createElement("div",{className:g,"x-label-pos":c,style:h},a)},Z=x.UX.PREFIX;class F extends i.PureComponent{render(){const{text:e,className:t,style:r,children:n}=this.props,s=o()({[Z+"-section"]:!0},t),a=Z+"-section-text";return i.createElement("section",{className:s,style:r},i.createElement("h5",{className:a},e),n)}}F.propTypes={text:c().node,className:c().string,style:c().object,children:c().node};var X=r(14437),K=r(76997),B=r(73007),V=r(64729),W=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const H=B.UX.PREFIX,Y=B.j2.SIZE;class $ extends C.Z{renderGroupWithLabel(e){const t=this.props,{size:r,className:n,label:s,labelPosition:a}=t,c=(W(t,["size","className","label","labelPosition"]),o()({[`${H}-group-wrapper`]:!0,[`${H}-group-wrapper-with-top-label`]:"top"===a,[`${H}-group-wrapper-with-left-label`]:"left"===a})),l=o()(`${H}-group`,n,{[`${H}-${r}`]:"default"!==r}),u="input-group";return i.createElement("div",{className:c},s&&s.text?i.createElement(j.Z,Object.assign({name:u},s)):null,i.createElement("span",{role:"group","aria-disabled":this.props.disabled,id:s&&s.name||u,className:l,style:this.props.style,onFocus:this.props.onFocus,onBlur:this.props.onBlur},e))}render(){const e=this.props,{size:t,style:r,className:n,children:s,label:a,onBlur:c,onFocus:l,disabled:d}=e,h=W(e,["size","style","className","children","label","onBlur","onFocus","disabled"]),p=o()(`${H}-group`,{[`${H}-${t}`]:"default"!==t},n);let f;return s&&(f=(Array.isArray(s)?s:[s]).map(((e,r)=>{if(e){const{onBlur:n,onFocus:s,disabled:o}=e.props,a=(0,u.Z)(n)&&"noop"!==(0,K.Z)(n,"name")?n:c,p=(0,u.Z)(s)&&"noop"!==(0,K.Z)(s,"name")?s:l,f="boolean"==typeof o?o:d;return i.cloneElement(e,Object.assign(Object.assign({key:r},h),{size:t,onBlur:a,onFocus:p,disabled:f}))}return null}))),a&&a.text?this.renderGroupWithLabel(f):i.createElement("span",{role:"group","aria-label":"Input group","aria-disabled":this.props.disabled,className:p,style:r,onFocus:this.props.onFocus,onBlur:this.props.onBlur},f)}}$.propTypes={className:c().string,children:c().node,size:c().oneOf(Y),style:c().object,onBlur:c().func,onFocus:c().func,label:c().object,labelPosition:c().string},$.defaultProps={size:"default",className:"",onBlur:V.Z,onFocus:V.Z};var J=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Q=x.UX.PREFIX,q=e=>{const{fieldSet:t}=e,r=(0,X.Z)(),n=t.map((e=>p.U2(r.errors,e)));return(0,m.JY)(n)?null:i.createElement(L.Z,{error:n,showValidateIcon:e.showValidateIcon,isInInputGroup:e.isInInputGroup})};class ee extends i.Component{renderLabel(e,t){return e?(0,N.Z)(e)?i.createElement(j.Z,{width:t.labelWidth,text:e}):i.createElement(j.Z,Object.assign({width:t.labelWidth},e)):null}render(){const e=this.props,{children:t,label:r,extraText:n,extraTextPosition:s}=e,a=J(e,["children","label","extraText","extraTextPosition"]),c=this.context.getFormProps(["labelPosition","labelWidth","labelAlign","showValidateIcon","wrapperCol","labelCol","disabled"]),l=this.props.labelPosition||c.labelPosition,u=[],d=i.Children.map(t,(e=>e&&e.props&&e.props.field?(u.push(e.props.field),i.cloneElement(e,{isInInputGroup:!0})):null)),h=o()({[`${Q}-field-group`]:!0}),p=c.labelCol,f=c.wrapperCol,m=c.labelAlign,g=p&&f,y=p?`${Q}-col-${m}`:"",b=this.renderLabel(r,c),v=i.createElement($,Object.assign({disabled:c.disabled},a),d),_=i.createElement(q,{fieldSet:u,showValidateIcon:c.showValidateIcon,isInInputGroup:!0}),w=o()(`${Q}-field-extra`,{[`${Q}-field-extra-string`]:"string"==typeof n,[`${Q}-field-extra-middle`]:"middle"===s,[`${Q}-field-extra-bottom`]:"bottom"===s}),S=n?i.createElement("div",{className:w,"x-semi-prop":"extraText"},n):null;let E;switch(!0){case!g:E=i.createElement(i.Fragment,null,b,i.createElement("div",null,"middle"===s?S:null,v,"bottom"===s?S:null,_));break;case g&&"top"===l:E=i.createElement(i.Fragment,null,i.createElement("div",{style:{overflow:"hidden"}},i.createElement(A.Z,Object.assign({},p,{className:y}),b)),i.createElement(A.Z,Object.assign({},f),"middle"===s?S:null,v,"bottom"===s?S:null,_));break;case g&&"top"!==l:E=i.createElement(i.Fragment,null,i.createElement(A.Z,Object.assign({},p,{className:y}),b),i.createElement(A.Z,Object.assign({},f),"middle"===s?S:null,v,"bottom"===s?S:null,_))}return i.createElement("div",{"x-label-pos":l,className:h},E)}}ee.contextType=O.kn;const te=ee;var re=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const ne=x.UX.PREFIX;class ie extends C.Z{constructor(e){super(e),this.state={formId:""},(0,k.Z)(Boolean(e.component&&e.render),"[Semi Form] You should not use <Form component> and <Form render> in ths same time; <Form render> will be ignored"),(0,k.Z)(e.component&&e.children&&!(0,z.W8)(e.children),"[Semi Form] You should not use <Form component> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),(0,k.Z)(e.render&&e.children&&!(0,z.W8)(e.children),"[Semi Form] You should not use <Form render> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),this.submit=this.submit.bind(this),this.reset=this.reset.bind(this),this.foundation=new E(this.adapter),this.formApi=this.foundation.getFormApi(),this.props.getFormApi&&this.props.getFormApi(this.formApi)}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{cloneDeep:M.Xh,notifySubmit:(e,t)=>{this.props.onSubmit(e,t)},notifySubmitFail:(e,t,r)=>{this.props.onSubmitFail(e,t,r)},forceUpdate:e=>{this.forceUpdate(e)},notifyChange:e=>{this.props.onChange(e)},notifyValueChange:(e,t)=>{this.props.onValueChange(e,t)},notifyReset:()=>{this.props.onReset()},initFormId:()=>{this.setState({formId:(0,T.Cd)()})},getInitValues:()=>this.props.initValues,getFormProps:e=>{if(void 0===e)return this.props;if("string"==typeof e)return this.props[e];{const t={};return e.forEach((e=>{t[e]=this.props[e]})),t}},getAllErrorDOM:()=>{const{formId:e}=this.state,{id:t}=this.props,r=t||e;return document.querySelectorAll(`form[x-form-id="${r}"] .${x.UX.PREFIX}-field-error-message`)},getFieldDOM:e=>document.querySelector(`.${x.UX.PREFIX}-field[x-field-id="${e}"]`)})}get content(){const{children:e,component:t,render:r}=this.props,n=this.foundation.getFormState(),s={formState:n,formApi:this.foundation.getFormApi(),values:n.values};return t?i.createElement(t,s):r?r(s):"function"==typeof e?e(s):e}submit(e){e.preventDefault(),this.foundation.submit(e)}reset(e){e.preventDefault(),this.foundation.reset()}render(){const e=this.foundation.getFormState(!1),t=this.foundation.getModifyFormStateApi(),{formId:r}=this.state,n=this.props,{children:s,getFormApi:a,onChange:c,onSubmit:l,onSubmitFail:u,onValueChange:d,component:h,render:p,validateFields:f,initValues:m,layout:g,style:y,className:b,labelPosition:v,labelWidth:_,labelAlign:w,labelCol:S,wrapperCol:E,allowEmpty:x,autoScrollToError:T,showValidateIcon:k,stopValidateWithError:C,extraTextPosition:z,id:M,trigger:R}=n,D=re(n,["children","getFormApi","onChange","onSubmit","onSubmitFail","onValueChange","component","render","validateFields","initValues","layout","style","className","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","allowEmpty","autoScrollToError","showValidateIcon","stopValidateWithError","extraTextPosition","id","trigger"]),N=o()(ne,b,{[ne+"-vertical"]:"vertical"===g,[ne+"-horizontal"]:"horizontal"===g}),j=E&&S,A=i.createElement("form",Object.assign({style:y},D,{onReset:this.reset,onSubmit:this.submit,className:N,"x-form-id":M||r}),this.content),L=i.createElement(I.Z,null,A);return i.createElement(O.kn.Provider,{value:t},i.createElement(O.mC.Provider,{value:this.formApi},i.createElement(O.Ar.Provider,{value:e},j?L:A)))}}ie.propTypes={"aria-label":c().string,onSubmit:c().func,onSubmitFail:c().func,onChange:c().func,onReset:c().func,onValueChange:c().func,autoScrollToError:c().oneOfType([c().bool,c().object]),allowEmpty:c().bool,className:c().string,component:c().oneOfType([c().node,c().func]),disabled:c().bool,extraTextPosition:c().oneOf(x.j2.EXTRA_POS),getFormApi:c().func,initValues:c().object,validateFields:c().func,layout:c().oneOf(x.j2.LAYOUT),labelPosition:c().oneOf(x.j2.LABEL_POS),labelWidth:c().oneOfType([c().number,c().string]),labelAlign:c().oneOf(x.j2.LABEL_ALIGN),labelCol:c().object,render:c().func,style:c().object,showValidateIcon:c().bool,stopValidateWithError:c().bool,id:c().string,wrapperCol:c().object,trigger:c().oneOfType([c().oneOf(["blur","change","custom","mount"]),c().arrayOf(c().oneOf(["blur","change","custom","mount"]))])},ie.defaultProps={onChange:n.Z,onSubmitFail:n.Z,onSubmit:n.Z,onReset:n.Z,onValueChange:n.Z,layout:"vertical",labelPosition:"top",allowEmpty:!1,autoScrollToError:!1,showValidateIcon:!0},ie.Slot=G,ie.ErrorMessage=L.Z,ie.InputGroup=te,ie.Label=j.Z,ie.Section=F;const se=ie},43230:(e,t,r)=>{"use strict";r.d(t,{Ar:()=>i,f5:()=>a,kn:()=>o,mC:()=>s});var n=r(18571);const i=n.createContext({});i.displayName="FormState";const s=n.createContext({});s.displayName="FormApi";const o=n.createContext({});o.displayName="FormUpdater";const a=n.createContext({shouldUseInitValue:!0})},52553:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(18571),i=r(18751),s=r.n(i),o=r(61235),a=r.n(o),c=r(26319),l=r(641),u=r(52070);const d=c.UX.PREFIX;class h extends n.PureComponent{generatorText(e){const{helpTextId:t,errorMessageId:r}=this.props;let i=r;if(this.props.error||(i=t),"string"==typeof e)return n.createElement("span",{id:i},e);if(Array.isArray(e)){const t=e.filter((e=>e));return t.length?n.createElement("span",{id:i},t.join(", ")):null}return n.isValidElement(e)?e:null}render(){const{error:e,className:t,style:r,validateStatus:i,helpText:o,showValidateIcon:a,isInInputGroup:c}=this.props,h=s()({[d+"-field-error-message"]:Boolean(e),[d+"-field-help-text"]:Boolean(o)},t);if(!e&&!o)return null;const p={warning:n.createElement(l.Z,null),error:n.createElement(u.Z,null)},f=e?this.generatorText(e):this.generatorText(o),m=`${d}-field-validate-status-icon`;let g=null;return c?g=n.createElement(u.Z,{className:m}):p[i]&&(g=n.cloneElement(p[i],{className:m})),n.createElement("div",{className:h,style:r},a&&f?g:null,f)}}h.propTypes={error:a().oneOfType([a().bool,a().string,a().array,a().node]),className:a().string,style:a().object,validateStatus:a().string,showValidateIcon:a().bool,helpText:a().node,isInInputGroup:a().bool,errorMessageId:a().string,helpTextId:a().string}},95113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(18571),i=r(18751),s=r.n(i),o=r(26319),a=r(41386),c=r(81135),l=r(70624),u=r(72839),d=r(14437),h=r(43230);const p=function(){return(0,n.useContext)(h.f5)};function f(e){const t=(0,n.useRef)(),[r,i]=(0,n.useState)(e);t.current=r;return[r,e=>{t.current=e,i(e)},()=>t.current]}var m=r(52553),g=r(84670),y=r(21256),b=r(64153);const v=o.UX.PREFIX,_="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const w=function(e,t){let r=(r,i)=>{let{field:o,label:w,labelPosition:S,labelWidth:E,labelAlign:x,labelCol:T,wrapperCol:k,noLabel:C,noErrorMessage:O,isInInputGroup:z,initValue:I,validate:M,validateStatus:R,trigger:D,allowEmptyString:N,allowEmpty:j,emptyValue:A,rules:L,required:U,keepState:P,transform:G,name:Z,fieldClassName:F,fieldStyle:X,convert:K,stopValidateWithError:B,helpText:V,extraText:W,extraTextPosition:H,pure:Y,id:$,rest:J}=(0,a.dG)(r),{options:Q,shouldInject:q}=(0,a.JH)(t,r);if((0,u.Z)(void 0===o&&Q.shouldInject,"[Semi Form]: 'field' is required, please check your props of Field Component"),!q)return n.createElement(e,Object.assign({},J,{ref:i}));(0,d.Z)();const ee=(0,n.useContext)(h.kn);if(!ee.getFormProps)return(0,u.Z)(!0,"[Semi Form]: Field Component must be use inside the Form, please check your dom declaration"),null;let te,re=ee.getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","disabled","showValidateIcon","extraTextPosition","stopValidateWithError","trigger"]),ne=S||re.labelPosition,ie=E||re.labelWidth,se=x||re.labelAlign,oe=T||re.labelCol,ae=k||re.wrapperCol,ce=H||re.extraTextPosition||"bottom",le=(0,a.Fs)(B,re.stopValidateWithError,!1),ue=(0,a.TM)(D,re.trigger),de=void 0!==o?ee.getValue(o):void 0,he=void 0!==I?I:de;try{te=p(),te&&(he=te.shouldUseInitValue&&void 0!==I?I:de)}catch(Be){}const[pe,fe,me]=f(void 0!==typeof he?he:null),ge=ue.includes("mount");j=j||ee.getFormProps().allowEmpty;const[ye,be,ve]=f(),[_e,we]=(0,n.useState)(),[Se,Ee,xe]=f(0),[Te,ke]=(0,n.useState)(R),Ce=(0,n.useRef)(L),Oe=(0,n.useRef)(M),ze=(0,n.useRef)(null),Ie=(e,t)=>{we(e),ee.updateStateTouched(o,e,t)},Me=(e,t)=>{e!==ve()&&(be(e),ee.updateStateError(o,e,t),(0,a.JY)(e)?ke("success"):ke("error"))},Re=(e,t)=>{fe(e);let r=Object.assign(Object.assign({},t),{allowEmpty:j});ee.updateStateValue(o,e,r)},De=(e,t)=>{let r=e,n=Ce.current;return G&&(r=G(e)),Oe.current?((e,t,r)=>{const n=new Promise((i=>{let s;try{s=Oe.current(e,t)}catch(Be){s=Be}void 0===s?(i({}),Me(void 0,r)):(0,l.Z)(s)?s.then((e=>{ze.current===n&&((0,a.JY)(e)?(Me(void 0,r),i(null)):(Me(e,r),i(e)))})):(0,a.JY)(s)?(Me(void 0,r),i(null)):(Me(s,r),i(s))}));return ze.current=n,n})(r,ee.getValue(),t):n?((e,t)=>{let r=Ce.current||[];const n=(0,a.G$)(o,r),i={[o]:e},s=new Promise(((e,r)=>{n.validate(i,{first:le},((e,t)=>{})).then((r=>{ze.current===s&&(ke("success"),Me(void 0,t),e({}))})).catch((r=>{if(ze.current!==s)return;let{errors:n,fields:i}=r;if(!n||!i)throw ke("error"),Me(r.message,t),e(r.message),r;{let r=n.map((e=>e.message));1===r.length&&(r=r[0]),Me(r,t),(0,a.JY)(r)||(ke("error"),e(n))}}))}));return ze.current=s,s})(r,t):null},Ne=function(e,t){let n;if(Q.onKeyChangeFnName in r&&"function"==typeof r[Q.onKeyChangeFnName]){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];r[Q.onKeyChangeFnName](e,t,...s)}n=Q.valuePath?c.U2(e,Q.valuePath):e,"function"==typeof K&&(n=K(n)),N||j||n===A&&(n=void 0);try{t&&t.target&&t.target.selectionStart&&Ee(t.target.selectionStart)}catch(Be){}Ie(!0,{notNotify:!0,notUpdate:!0}),Re(n),ue.includes("change")&&De(n)},je=function(){if(r.onBlur&&r.onBlur(...arguments),_e||Ie(!0),ue.includes("blur")){let e=me();De(e)}},Ae={setValue:Re,setTouched:Ie,setError:Me,reset:()=>{let e={notNotify:!0,notUpdate:!0};Re(null!==he?he:void 0,e),Me(void 0,e),Ie(void 0,e),ke("default")},validate:De},Le={value:pe,error:ye,touched:_e,status:Te};_((()=>{Ce.current=L,Oe.current=M}),[L,M]),_((()=>{ge&&De(pe)}),[]),_((()=>{if(void 0===o)return()=>{};const e=me();return ee.register(o,{value:e,error:ye,touched:_e,status:Te},{field:o,fieldApi:Ae,keepState:P,allowEmpty:j||N}),()=>{ee.unRegister(o)}}),[o]);const Ue=$||o,Pe=`${Ue}-label`,Ge=`${Ue}-helpText`,Ze=`${Ue}-extraText`,Fe=`${Ue}-errormessage`,Xe=()=>{let t=R||Te;const r=s()(`${v}-field-extra`,{[`${v}-field-extra-string`]:"string"==typeof W,[`${v}-field-extra-middle`]:"middle"===ce,[`${v}-field-extra-bottom`]:"bottom"===ce}),a=W?n.createElement("div",{className:r,id:Ze,"x-semi-prop":"extraText"},W):null;let c=Object.assign(Object.assign({id:Ue,disabled:re.disabled},J),{ref:i,onBlur:je,[Q.onKeyChangeFnName]:Ne,[Q.valueKey]:pe,validateStatus:t,"aria-required":U,"aria-labelledby":Pe});Z&&(c.name=Z),V&&(c["aria-describedby"]=W?`${Ge} ${Ze}`:Ge),W&&(c["aria-describedby"]=V?`${Ge} ${Ze}`:Ze),"error"===Te&&(c["aria-errormessage"]=Fe,c["aria-invalid"]=!0);const l=s()({[`${v}-field`]:!0,[`${v}-field-${Z}`]:Boolean(Z),[F]:Boolean(F)}),u=s()({[`${v}-field-main`]:!0});"inset"!==ne||C||(c.insetLabel=w||o,c.insetLabelId=Pe,"object"!=typeof w||(0,g.kK)(w)||(c.insetLabel=w.text,c.insetLabelId=Pe));const d=n.createElement(e,Object.assign({},c));if(z)return d;if(Y){let t=s()(J.className,{[`${v}-field-pure`]:!0,[`${v}-field-${Z}`]:Boolean(Z),[F]:Boolean(F)});return c.className=t,n.createElement(e,Object.assign({},c))}let h=oe&&ae;const p=se?`${v}-col-${se}`:"";let f=null;if(!C&&"inset"!==ne){let e="object"!=typeof w||(0,g.kK)(w)?{}:w;f=n.createElement(y.Z,Object.assign({text:w||o,id:Pe,required:U,name:Ue||Z||o,width:ie,align:se},e))}const _=n.createElement("div",{className:u},"middle"===ce?a:null,d,O?null:n.createElement(m.Z,{error:ye,validateStatus:t,helpText:V,helpTextId:Ge,errorMessageId:Fe,showValidateIcon:re.showValidateIcon}),"bottom"===ce?a:null),S=n.createElement(n.Fragment,null,"top"===ne?n.createElement("div",{style:{overflow:"hidden"}},n.createElement(b.Z,Object.assign({},oe,{className:p}),f)):n.createElement(b.Z,Object.assign({},oe,{className:p}),f),n.createElement(b.Z,Object.assign({},ae),_));return n.createElement("div",{className:l,style:X,"x-label-pos":ne,"x-field-id":o,"x-extra-pos":ce},h?S:n.createElement(n.Fragment,null,f,_))},Ke=[...Object.values(Le),...Object.values(r),o,ne,se,re.disabled];return Q.shouldMemo?(0,n.useMemo)(Xe,[...Ke]):Xe()};return r=(0,n.forwardRef)(r),r.displayName=(0,a.Gf)(e),r}},14437:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(18571),i=r(43230);const s=function(){return(0,n.useContext)(i.Ar)}},21256:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(18571),i=r(18751),s=r.n(i),o=r(61235),a=r.n(o),c=r(26319),l=r(28619);const u=c.UX.PREFIX;class d extends n.PureComponent{render(){const{children:e,required:t,text:r,disabled:i,name:o,width:a,align:c,style:d,className:h,extra:p,id:f,optional:m}=this.props,g=s()(h,{[`${u}-field-label`]:!0,[`${u}-field-label-left`]:"left"===c,[`${u}-field-label-right`]:"right"===c,[`${u}-field-label-required`]:t,[`${u}-field-label-disabled`]:i,[`${u}-field-label-with-extra`]:p}),y=d||{};a&&(y.width=a);const b=n.createElement(l.Z,{componentName:"Form"},(e=>n.createElement("span",{className:`${u}-field-label-optional-text`},e.optional))),v=n.createElement("div",{className:`${u}-field-label-text`,"x-semi-prop":"label"},void 0!==r?r:e,m?b:null),_=n.createElement(n.Fragment,null,v,n.createElement("div",{className:`${u}-field-label-extra`},p));return n.createElement("label",{className:g,htmlFor:o,style:y,id:f},p?_:v)}}d.defaultProps={required:!1,name:"",align:"left",className:"",optional:!1},d.propTypes={id:a().string,children:a().node,required:a().bool,text:a().node,disabled:a().bool,name:a().string,align:a().string,width:a().oneOfType([a().number,a().string]),style:a().object,className:a().string,extra:a().node,optional:a().bool}},64153:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(18571),i=r(61235),s=r.n(i),o=r(84610),a=r(18751),c=r.n(a),l=r(11820),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const d=s().oneOfType([s().object,s().number]);class h extends n.Component{render(){const{props:e}=this,{prefixCls:t,span:r,order:i,offset:s,push:o,pull:a,className:l,children:d}=e,h=u(e,["prefixCls","span","order","offset","push","pull","className","children"]);let p={};const f=`${t}-col`;["xs","sm","md","lg","xl","xxl"].forEach((t=>{let r={};"number"==typeof e[t]?r.span=e[t]:"object"==typeof e[t]&&(r=e[t]||{}),delete h[t],p=Object.assign(Object.assign({},p),{[`${f}-${t}-${r.span}`]:void 0!==r.span,[`${f}-${t}-order-${r.order}`]:r.order||0===r.order,[`${f}-${t}-offset-${r.offset}`]:r.offset||0===r.offset,[`${f}-${t}-push-${r.push}`]:r.push||0===r.push,[`${f}-${t}-pull-${r.pull}`]:r.pull||0===r.pull})}));const m=c()(f,{[`${f}-${r}`]:void 0!==r,[`${f}-order-${i}`]:i,[`${f}-offset-${s}`]:s,[`${f}-push-${o}`]:o,[`${f}-pull-${a}`]:a},l,p);let g,{style:y}=h;try{g=this.context.gutters}catch(b){throw new Error("please make sure <Col> inside <Row>")}return y=Object.assign(Object.assign(Object.assign({},g[0]>0?{paddingLeft:g[0]/2,paddingRight:g[0]/2}:{}),g[1]>0?{paddingTop:g[1]/2,paddingBottom:g[1]/2}:{}),y),n.createElement("div",Object.assign({},h,{style:y,className:m,"x-semi-prop":"children"}),d)}}h.contextType=o.g,h.propTypes={span:s().number,order:s().number,offset:s().number,push:s().number,pull:s().number,className:s().string,children:s().node,xs:d,sm:d,md:d,lg:d,xl:d,xxl:d,prefixCls:s().string},h.defaultProps={prefixCls:l.U.PREFIX};const p=h},84610:(e,t,r)=>{"use strict";r.d(t,{g:()=>h,Z:()=>m});var n=r(18571),i=r(18751),s=r.n(i),o=r(61235),a=r.n(o),c=r(11820),l=r(4157),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const d=["xxl","xl","lg","md","sm","xs"],h=n.createContext(null),p={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class f extends n.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(p).map((e=>(0,l.ql)(p[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,r)=>{if("object"==typeof e)for(let n=0;n<d.length;n++){const i=d[n];if(this.state.screens[i]&&void 0!==e[i]){t[r]=e[i];break}}else t[r]=e||0})),t}render(){const e=this.props,{prefixCls:t,type:r,justify:i,align:o,className:a,style:c,children:l}=e,d=u(e,["prefixCls","type","justify","align","className","style","children"]),p=this.getGutter(),f=`${t}-row`,m=s()({[f]:"flex"!==r,[`${f}-${r}`]:r,[`${f}-${r}-${i}`]:r&&i,[`${f}-${r}-${o}`]:r&&o},a),g=Object.assign(Object.assign(Object.assign({},p[0]>0?{marginLeft:p[0]/-2,marginRight:p[0]/-2}:{}),p[1]>0?{marginTop:p[1]/-2,marginBottom:p[1]/-2}:{}),c),y=Object.assign({},d);return delete y.gutter,n.createElement(h.Provider,{value:{gutters:p}},n.createElement("div",Object.assign({},y,{className:m,style:g,"x-semi-prop":"children"}),l))}}f.propTypes={type:a().oneOf(["flex"]),align:a().oneOf(["top","middle","bottom"]),justify:a().oneOf(["start","end","center","space-around","space-between"]),className:a().string,style:a().object,children:a().node,gutter:a().oneOfType([a().object,a().number,a().array]),prefixCls:a().string},f.defaultProps={prefixCls:c.U.PREFIX},f.RowContext={gutters:a().any};const m=f},99373:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(30657),i=r(48712),s=r(74510),o=r(74535),a=r(18571),c=r(18751),l=r.n(c),u=r(61235),d=r.n(u),h=r(61045),p=r(4911),f=r(51810),m=r(73007),g=r(51616);class y extends f.Z{static get inputDefaultAdapter(){return{notifyChange:s.Z,setValue:s.Z}}constructor(e){super(Object.assign(Object.assign({},y.inputDefaultAdapter),e))}init(){this._setInitValue()}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}_setInitValue(){const{defaultValue:e,value:t}=this.getProps();let r=e;this._isControlledComponent()&&(r=t),this._adapter.setValue(r)}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:r,minLength:n,getValueLength:s}=this._adapter.getProps();let o=e;r&&(0,i.Z)(s)&&(o=this.handleVisibleMaxLength(e)),n&&(0,i.Z)(s)&&this.handleVisibleMinLength(o),this._isControlledComponent()||this._adapter.setValue(o),this._adapter.notifyChange(o,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:r}=this._adapter.getProps(),{minLength:n}=this._adapter.getStates();if((0,h.Z)(t)&&t>=0&&(0,i.Z)(r)&&(0,o.Z)(e)){const i=r(e);if(i<t){const r=e.length+(t-i);r!==n&&this._adapter.setMinLength(r)}else n!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:r}=this._adapter.getProps();if((0,h.Z)(t)&&t>=0&&(0,i.Z)(r)&&(0,o.Z)(e)){if(r(e)>t){console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit");return this.handleTruncateValue(e,t)}return e}}handleTruncateValue(e,t){const{getValueLength:r}=this._adapter.getProps();if((0,i.Z)(r)){let n="";for(let i=1,s=e.length;i<=s;i++){const s=e.slice(0,i);if(r(s)>t)return n;n=s}return n}return e.slice(0,t)}handleClear(e){let t=e;this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&"object"==typeof t||(t={}),(0,p.Z)(t,m.j2.CLEARBTN_CLICKED_EVENT_FLAG,!0),this._adapter.notifyChange("",t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();t||r||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){"password"===e?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),r=this._adapter.getState("eyeClosed");return"password"===t?r?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===g.q7&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:r}=this._adapter.getStates(),{showClear:n,disabled:i,showClearIgnoreDisabled:s}=this._adapter.getProps();return e&&n&&(!i||s)&&(t||r)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:r}=this._adapter.getStates();t||r||(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&(0,i.Z)(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(null==e?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}const b=y;var v=r(4157),_=r(98880),w=r(26478),S=r(18506);const E=(0,S.A)((function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),a.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}),"eye_closed_solid");const x=(0,S.A)((function(e){return a.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}),"eye_opened");var T=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const k=m.UX.PREFIX,C=m.j2.SIZE,O=m.j2.STATUS,z=m.j2.MODE;class I extends _.Z{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleMouseOver=e=>{this.setState({isHovering:!0})},this.handleMouseLeave=e=>{this.setState({isHovering:!1})},this.handleModeChange=e=>{this.foundation.handleModeChange(e)},this.handleClickEye=e=>{this.foundation.handleClickEye(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e)},this.handleModeEnterPress=e=>{this.foundation.handleModeEnterPress(e)},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.state={value:"",cachedValue:null,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:"password"===e.mode,minLength:e.minLength},this.inputRef=a.createRef(),this.prefixRef=a.createRef(),this.suffixRef=a.createRef(),this.foundation=new b(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const r={};return e.value!==t.cachedValue&&(r.value=e.value,r.cachedValue=e.value),r}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){this.foundation.init();const{disabled:e,autoFocus:t,preventScroll:r}=this.props;e||!t&&!this.props.autofocus||this.inputRef.current.focus({preventScroll:r})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=l()({[`${k}-prepend`]:!0,[`${k}-prepend-text`]:e&&(0,o.Z)(e),[`${k}-prepend-icon`]:(0,v.ID)(e)});return a.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=l()({[`${k}-append`]:!0,[`${k}-append-text`]:e&&(0,o.Z)(e),[`${k}-append-icon`]:(0,v.ID)(e)});return a.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=l()(`${k}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?a.createElement("div",{className:e,onMouseDown:this.handleClear},t||a.createElement(w.Z,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:r}=this.props,n=l()(`${k}-modebtn`),i=e?a.createElement(E,null):a.createElement(x,null),s=e?"Show password":"Hidden password";return"password"===t&&!r?a.createElement("div",{role:"button",tabIndex:0,"aria-label":s,className:n,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},i):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:r}=this.props,n=e||t;if(!n)return null;const i=l()({[`${k}-prefix`]:!0,[`${k}-inset-label`]:t,[`${k}-prefix-text`]:n&&(0,o.Z)(n),[`${k}-prefix-icon`]:(0,v.ID)(n)});return a.createElement("div",{className:i,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:r,"x-semi-prop":"prefix,insetLabel"},n)}renderSuffix(e){const{suffix:t,hideSuffix:r}=this.props;if(!t)return null;const n=l()({[`${k}-suffix`]:!0,[`${k}-suffix-text`]:t&&(0,o.Z)(t),[`${k}-suffix-icon`]:(0,v.ID)(t),[`${k}-suffix-hidden`]:e&&Boolean(r)});return a.createElement("div",{className:n,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!(0,n.Z)(e)){if("function"==typeof e)return t=>{e(t),this.inputRef={current:t}};if("[object Object]"===Object.prototype.toString.call(e))return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:r,autoFocus:n,clearIcon:s,className:o,disabled:c,defaultValue:u,placeholder:d,prefix:h,mode:p,insetLabel:f,insetLabelId:m,validateStatus:g,type:y,readonly:b,size:_,suffix:w,style:S,showClear:E,onEnterPress:x,onClear:C,hideSuffix:O,inputStyle:z,forwardRef:I,maxLength:M,getValueLength:R,preventScroll:D,borderless:N,showClearIgnoreDisabled:j}=e,A=T(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled"]),{value:L,isFocus:U,minLength:P}=this.state,G=this.foundation.isAllowClear(),Z=(0,v.ID)(w),F=this.getInputRef(),X=`${k}-wrapper`,K=l()(X,o,{[`${k}-wrapper__with-prefix`]:h||f,[`${k}-wrapper__with-suffix`]:w,[`${k}-wrapper__with-suffix-hidden`]:G&&Boolean(O),[`${k}-wrapper__with-suffix-icon`]:Z,[`${k}-wrapper__with-append`]:r,[`${k}-wrapper__with-prepend`]:t,[`${k}-wrapper__with-append-only`]:r&&!t,[`${k}-wrapper__with-prepend-only`]:!r&&t,[`${X}-readonly`]:b,[`${X}-disabled`]:c,[`${X}-warning`]:"warning"===g,[`${X}-error`]:"error"===g,[`${X}-focus`]:U,[`${X}-clearable`]:E,[`${X}-modebtn`]:"password"===p,[`${X}-hidden`]:"hidden"===y,[`${X}-${_}`]:_,[`${k}-borderless`]:N}),B=l()(k,{[`${k}-${_}`]:_,[`${k}-disabled`]:c,[`${k}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${k}-sibling-modebtn`]:"password"===p}),V=null==L?"":L,W=Object.assign(Object.assign({},A),{style:z,className:B,disabled:c,readOnly:b,type:this.foundation.handleInputType(y),placeholder:d,onInput:e=>this.foundation.handleInput(e),onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e),onKeyUp:e=>this.foundation.handleKeyUp(e),onKeyDown:e=>this.foundation.handleKeyDown(e),onKeyPress:e=>this.foundation.handleKeyPress(e),value:V});return(0,i.Z)(R)||(W.maxLength=M),P&&(W.minLength=P),"error"===g&&(W["aria-invalid"]="true"),a.createElement("div",{className:K,style:S,onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e),onClick:e=>this.handleClick(e)},this.renderPrepend(),this.renderPrefix(),a.createElement("input",Object.assign({},W,{ref:F})),this.renderClearBtn(),this.renderSuffix(G),this.renderModeBtn(),this.renderAppend())}}I.propTypes={"aria-label":d().string,"aria-labelledby":d().string,"aria-invalid":d().bool,"aria-errormessage":d().string,"aria-describedby":d().string,"aria-required":d().bool,addonBefore:d().node,addonAfter:d().node,clearIcon:d().node,prefix:d().node,suffix:d().node,mode:d().oneOf(z),value:d().any,defaultValue:d().any,disabled:d().bool,readonly:d().bool,autoFocus:d().bool,type:d().string,showClear:d().bool,hideSuffix:d().bool,placeholder:d().any,size:d().oneOf(C),className:d().string,style:d().object,validateStatus:d().oneOf(O),onClear:d().func,onChange:d().func,onBlur:d().func,onFocus:d().func,onInput:d().func,onKeyDown:d().func,onKeyUp:d().func,onKeyPress:d().func,onEnterPress:d().func,insetLabel:d().node,insetLabelId:d().string,inputStyle:d().object,getValueLength:d().func,preventScroll:d().bool,borderless:d().bool},I.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:s.Z,onChange:s.Z,onBlur:s.Z,onFocus:s.Z,onInput:s.Z,onKeyDown:s.Z,onKeyUp:s.Z,onKeyPress:s.Z,onEnterPress:s.Z,validateStatus:"default",borderless:!1};const M=a.forwardRef(((e,t)=>a.createElement(I,Object.assign({},e,{forwardRef:t}))))},28619:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(76997),i=r(18571),s=r(61235),o=r.n(s);const a=i.createContext(null);var c=r(84616),l={lessThanXSeconds:{one:"\u4e0d\u5230 1 \u79d2",other:"\u4e0d\u5230 {{count}} \u79d2"},xSeconds:{one:"1 \u79d2",other:"{{count}} \u79d2"},halfAMinute:"\u534a\u5206\u949f",lessThanXMinutes:{one:"\u4e0d\u5230 1 \u5206\u949f",other:"\u4e0d\u5230 {{count}} \u5206\u949f"},xMinutes:{one:"1 \u5206\u949f",other:"{{count}} \u5206\u949f"},xHours:{one:"1 \u5c0f\u65f6",other:"{{count}} \u5c0f\u65f6"},aboutXHours:{one:"\u5927\u7ea6 1 \u5c0f\u65f6",other:"\u5927\u7ea6 {{count}} \u5c0f\u65f6"},xDays:{one:"1 \u5929",other:"{{count}} \u5929"},aboutXWeeks:{one:"\u5927\u7ea6 1 \u4e2a\u661f\u671f",other:"\u5927\u7ea6 {{count}} \u4e2a\u661f\u671f"},xWeeks:{one:"1 \u4e2a\u661f\u671f",other:"{{count}} \u4e2a\u661f\u671f"},aboutXMonths:{one:"\u5927\u7ea6 1 \u4e2a\u6708",other:"\u5927\u7ea6 {{count}} \u4e2a\u6708"},xMonths:{one:"1 \u4e2a\u6708",other:"{{count}} \u4e2a\u6708"},aboutXYears:{one:"\u5927\u7ea6 1 \u5e74",other:"\u5927\u7ea6 {{count}} \u5e74"},xYears:{one:"1 \u5e74",other:"{{count}} \u5e74"},overXYears:{one:"\u8d85\u8fc7 1 \u5e74",other:"\u8d85\u8fc7 {{count}} \u5e74"},almostXYears:{one:"\u5c06\u8fd1 1 \u5e74",other:"\u5c06\u8fd1 {{count}} \u5e74"}};const u=function(e,t,r){var n,i=l[e];return n="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=r&&r.addSuffix?r.comparison&&r.comparison>0?n+"\u5185":n+"\u524d":n};function d(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const h={date:d({formats:{full:"y'\u5e74'M'\u6708'd'\u65e5' EEEE",long:"y'\u5e74'M'\u6708'd'\u65e5'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:d({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:d({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};function p(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}var f=r(587);var m={};function g(){return m}function y(e,t){var r,n,i,s,o,a,c,l;p(1,arguments);var u=g(),d=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(r=null!==(n=null!==(i=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==n?n:null===(c=u.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=function(e){p(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,f.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(e),m=h.getUTCDay(),y=(m<d?7:0)+m-d;return h.setUTCDate(h.getUTCDate()-y),h.setUTCHours(0,0,0,0),h}function b(e,t,r){var n="eeee p";return function(e,t,r){p(2,arguments);var n=y(e,r),i=y(t,r);return n.getTime()===i.getTime()}(e,t,r)?n:e.getTime()>t.getTime()?"'\u4e0b\u4e2a'"+n:"'\u4e0a\u4e2a'"+n}var v={lastWeek:b,yesterday:"'\u6628\u5929' p",today:"'\u4eca\u5929' p",tomorrow:"'\u660e\u5929' p",nextWeek:b,other:"PP p"};function _(e){return function(t,r){var n;if("formatting"===(null!=r&&r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=null!=r&&r.width?String(r.width):i;n=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,a=null!=r&&r.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[o]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function w(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;var o,a=s[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return}(c,(function(e){return e.test(a)})):function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r;return}(c,(function(e){return e.test(a)}));return o=e.valueCallback?e.valueCallback(l):l,{value:o=r.valueCallback?r.valueCallback(o):o,rest:t.slice(a.length)}}}var S;const E={code:"zh-CN",dateFnsLocale:{code:"zh-CN",formatDistance:u,formatLong:h,formatRelative:function(e,t,r,n){var i=v[e];return"function"==typeof i?i(t,r,n):i},localize:{ordinalNumber:function(e,t){var r=Number(e);switch(null==t?void 0:t.unit){case"date":return r.toString()+"\u65e5";case"hour":return r.toString()+"\u65f6";case"minute":return r.toString()+"\u5206";case"second":return r.toString()+"\u79d2";default:return"\u7b2c "+r.toString()}},era:_({values:{narrow:["\u524d","\u516c\u5143"],abbreviated:["\u524d","\u516c\u5143"],wide:["\u516c\u5143\u524d","\u516c\u5143"]},defaultWidth:"wide"}),quarter:_({values:{narrow:["1","2","3","4"],abbreviated:["\u7b2c\u4e00\u5b63","\u7b2c\u4e8c\u5b63","\u7b2c\u4e09\u5b63","\u7b2c\u56db\u5b63"],wide:["\u7b2c\u4e00\u5b63\u5ea6","\u7b2c\u4e8c\u5b63\u5ea6","\u7b2c\u4e09\u5b63\u5ea6","\u7b2c\u56db\u5b63\u5ea6"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:_({values:{narrow:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"],abbreviated:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],wide:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},defaultWidth:"wide"}),day:_({values:{narrow:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],abbreviated:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],wide:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"]},defaultWidth:"wide"}),dayPeriod:_({values:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultWidth:"wide",formattingValues:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(S={matchPattern:/^(\u7b2c\s*)?\d+(\u65e5|\u65f6|\u5206|\u79d2)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.match(S.matchPattern);if(!r)return null;var n=r[0],i=e.match(S.parsePattern);if(!i)return null;var s=S.valueCallback?S.valueCallback(i[0]):i[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(n.length)}}),era:w({matchPatterns:{narrow:/^(\u524d)/i,abbreviated:/^(\u524d)/i,wide:/^(\u516c\u5143\u524d|\u516c\u5143)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(\u524d)/i,/^(\u516c\u5143)/i]},defaultParseWidth:"any"}),quarter:w({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b/i,wide:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b\u949f/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|\u4e00)/i,/(2|\u4e8c)/i,/(3|\u4e09)/i,/(4|\u56db)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:w({matchPatterns:{narrow:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])/i,abbreviated:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00]|\d|1[12])\u6708/i,wide:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])\u6708/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^\u4e00/i,/^\u4e8c/i,/^\u4e09/i,/^\u56db/i,/^\u4e94/i,/^\u516d/i,/^\u4e03/i,/^\u516b/i,/^\u4e5d/i,/^\u5341(?!(\u4e00|\u4e8c))/i,/^\u5341\u4e00/i,/^\u5341\u4e8c/i],any:[/^\u4e00|1/i,/^\u4e8c|2/i,/^\u4e09|3/i,/^\u56db|4/i,/^\u4e94|5/i,/^\u516d|6/i,/^\u4e03|7/i,/^\u516b|8/i,/^\u4e5d|9/i,/^\u5341(?!(\u4e00|\u4e8c))|10/i,/^\u5341\u4e00|11/i,/^\u5341\u4e8c|12/i]},defaultParseWidth:"any"}),day:w({matchPatterns:{narrow:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,short:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,abbreviated:/^\u5468[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,wide:/^\u661f\u671f[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/\u65e5/i,/\u4e00/i,/\u4e8c/i,/\u4e09/i,/\u56db/i,/\u4e94/i,/\u516d/i]},defaultParseWidth:"any"}),dayPeriod:w({matchPatterns:{any:/^(\u4e0a\u5348?|\u4e0b\u5348?|\u5348\u591c|[\u4e2d\u6b63]\u5348|\u65e9\u4e0a?|\u4e0b\u5348|\u665a\u4e0a?|\u51cc\u6668|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^\u4e0a\u5348?/i,pm:/^\u4e0b\u5348?/i,midnight:/^\u5348\u591c/i,noon:/^[\u4e2d\u6b63]\u5348/i,morning:/^\u65e9\u4e0a/i,afternoon:/^\u4e0b\u5348/i,evening:/^\u665a\u4e0a?/i,night:/^\u51cc\u6668/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}},Pagination:{pageSize:"\u6bcf\u9875\u6761\u6570\uff1a${pageSize}",total:"\u603b\u9875\u6570\uff1a${total}",jumpTo:"\u8df3\u81f3",page:"\u9875"},Modal:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},TimePicker:{placeholder:{time:"\u8bf7\u9009\u62e9\u65f6\u95f4",timeRange:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4"},begin:"\u5f00\u59cb\u65f6\u95f4",end:"\u7ed3\u675f\u65f6\u95f4",hour:"\u65f6",minute:"\u5206",second:"\u79d2",AM:"\u4e0a\u5348",PM:"\u4e0b\u5348"},DatePicker:{placeholder:{date:"\u8bf7\u9009\u62e9\u65e5\u671f",dateTime:"\u8bf7\u9009\u62e9\u65e5\u671f\u53ca\u65f6\u95f4",dateRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],dateTimeRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],monthRange:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"]},presets:"\u5feb\u6377\u9009\u62e9",footer:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},selectDate:"\u8fd4\u56de\u9009\u62e9\u65e5\u671f",selectTime:"\u9009\u62e9\u65f6\u95f4",year:"\u5e74",month:"\u6708",day:"\u65e5",monthText:"${year}\u5e74 ${month}",months:{1:"1\u6708",2:"2\u6708",3:"3\u6708",4:"4\u6708",5:"5\u6708",6:"6\u6708",7:"7\u6708",8:"8\u6708",9:"9\u6708",10:"10\u6708",11:"11\u6708",12:"12\u6708"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"\u4e00",Tue:"\u4e8c",Wed:"\u4e09",Thu:"\u56db",Fri:"\u4e94",Sat:"\u516d",Sun:"\u65e5"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"\u6536\u8d77\u4fa7\u8fb9\u680f",expandText:"\u5c55\u5f00\u4fa7\u8fb9\u680f"},Popconfirm:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},Table:{emptyText:"\u6682\u65e0\u6570\u636e",pageText:"\u663e\u793a\u7b2c ${currentStart} \u6761-\u7b2c ${currentEnd} \u6761\uff0c\u5171 ${total} \u6761"},Select:{emptyText:"\u6682\u65e0\u6570\u636e",createText:"\u521b\u5efa"},Cascader:{emptyText:"\u6682\u65e0\u6570\u636e"},Tree:{emptyText:"\u6682\u65e0\u6570\u636e",searchPlaceholder:"\u641c\u7d22"},List:{emptyText:"\u6682\u65e0\u6570\u636e"},Calendar:{allDay:"\u5168\u5929",AM:"\u4e0a\u5348${time}\u65f6",PM:"\u4e0b\u5348${time}\u65f6",datestring:"\u65e5",remaining:"\u8fd8\u6709${remained}\u9879"},Upload:{mainText:"\u70b9\u51fb\u4e0a\u4f20\u6587\u4ef6\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u8fd9\u91cc",illegalTips:"\u4e0d\u652f\u6301\u6b64\u7c7b\u578b\u6587\u4ef6",legalTips:"\u677e\u624b\u5f00\u59cb\u4e0a\u4f20",retry:"\u91cd\u8bd5",replace:"\u66ff\u6362\u6587\u4ef6",clear:"\u6e05\u7a7a",selectedFiles:"\u5df2\u9009\u62e9\u6587\u4ef6",illegalSize:"\u6587\u4ef6\u5c3a\u5bf8\u4e0d\u5408\u6cd5",fail:"\u4e0a\u4f20\u5931\u8d25"},TreeSelect:{searchPlaceholder:"\u641c\u7d22"},Typography:{copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00",collapse:"\u6536\u8d77"},Transfer:{emptyLeft:"\u6682\u65e0\u6570\u636e",emptySearch:"\u65e0\u641c\u7d22\u7ed3\u679c",emptyRight:"\u6682\u65e0\u5185\u5bb9\uff0c\u53ef\u4ece\u5de6\u4fa7\u52fe\u9009",placeholder:"\u641c\u7d22",clear:"\u6e05\u7a7a",selectAll:"\u5168\u9009",clearSelectAll:"\u53d6\u6d88\u5168\u9009",total:"\u603b\u4e2a\u6570\uff1a${total}",selected:"\u5df2\u9009\u4e2a\u6570\uff1a${total}"},Form:{optional:"\uff08\u53ef\u9009\uff09"},Image:{preview:"\u9884\u89c8",loading:"\u52a0\u8f7d\u4e2d",loadError:"\u52a0\u8f7d\u5931\u8d25",prevTip:"\u4e0a\u4e00\u5f20",nextTip:"\u4e0b\u4e00\u5f20",zoomInTip:"\u653e\u5927",zoomOutTip:"\u7f29\u5c0f",rotateTip:"\u65cb\u8f6c",downloadTip:"\u4e0b\u8f7d",adaptiveTip:"\u9002\u5e94\u9875\u9762",originTip:"\u539f\u59cb\u5c3a\u5bf8"}};class x extends i.Component{renderChildren(e,t){const{componentName:r}=this.props;let i=e;(null==e?void 0:e.code)||(i=E);const s=(0,n.Z)(E,"dateFnsLocale"),o=(0,n.Z)(i,"dateFnsLocale",s);return t(i[r],i.code,o)}render(){const{children:e}=this.props;return i.createElement(c.Z.Consumer,null,(t=>{let{locale:r}=t;return i.createElement(a.Consumer,null,(t=>this.renderChildren(r||t,e)))}))}}x.propTypes={componentName:o().string.isRequired,children:o().any},x.defaultProps={componentName:""}},49576:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ie});var n=r(74510),i=r(18571);const s=`${r(4130).T}-modal`,o=["small","medium","large","full-width"],a=["ltr","rtl"];var c=r(46995),l=r(51810),u=r(70624);class d extends l.Z{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(e,t)=>{this._adapter.toggleDisplayNone(e,t)}}destroy(){this.afterHide()}handleCancel(e){var t;const r=this._adapter.notifyCancel(e);(0,u.Z)(r)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),null===(t=null==r?void 0:r.then((()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),e})))}handleOk(e){var t;const r=this._adapter.notifyOk(e);(0,u.Z)(r)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),null===(t=null==r?void 0:r.then((()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),e})))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}}var h=r(48712),p=r(76997),f=r(61235),m=r.n(f),g=r(18751),y=r.n(g),b=r(84616),v=r(30714),_=r(37678),w=r(75056),S=r(50867),E=r(58102),x=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};class T extends i.PureComponent{render(){const e=this.props,{heading:t}=e,r=x(e,["heading"]),n=-1!==S.j.HEADING.indexOf(t)?`h${t}`:"h1";return i.createElement(E.Z,Object.assign({component:n,heading:n},r))}}T.propTypes={copyable:m().oneOfType([m().object,m().bool]),delete:m().bool,disabled:m().bool,ellipsis:m().oneOfType([m().object,m().bool]),mark:m().bool,link:m().oneOfType([m().object,m().bool]),underline:m().bool,strong:m().bool,type:m().oneOf(S.j.TYPE),heading:m().oneOf(S.j.HEADING),style:m().object,className:m().string,component:m().string,weight:m().oneOfType([m().oneOf(S.j.WEIGHT),m().number])},T.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};var k=r(89471);class C{constructor(e,t,r,n,i){this.ruleMethods={"bytes-decimal":e=>{let t=0;for(;e>=1e3;)e/=1e3,t++;return`${this.truncatePrecision(e)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`},"bytes-binary":e=>{let t=0;for(;e>=1024;)e/=1024,t++;return`${this.truncatePrecision(e)} ${["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][t]}`},percentages:e=>`${this.truncatePrecision(100*e)}%`,exponential:e=>{const t=e.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(t[0]))}e${t[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=void 0!==i,this.content=e,this.rule=t,this.precision=r,this.truncate=n,this.parser=i}format(){return this.isDiyParser?this.parser(this.content):"text"===this.rule?O(this.content).map((e=>z(e)?this.truncatePrecision(e):e)).join(""):"numbers"===this.rule?O(this.content).filter((e=>z(e))).map((e=>this.truncatePrecision(e))).join(","):O(this.content).map((e=>z(e)?this.ruleMethods[this.rule](Number(e)):e)).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),r=t.toString().split(".");if(1===r.length)return t.toFixed(this.precision);const n=r[1].length;return n<this.precision?`${r[0]}.${r[1]}${"0".repeat(this.precision-n)}`:t.toString()}}function O(e){return e.match(/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g)||[]}function z(e){return!(isNaN(Number(e))||""===e.replace(/\s+/g,""))}class I extends i.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),1===(e=e.map((e=>"string"==typeof e||"number"==typeof e?new C(String(e),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():"function"==typeof e?this.formatNodeDFS(e()):"object"==typeof e&&"children"in e.props?Object.assign(Object.assign({},e),{props:Object.assign(Object.assign({},e.props),{children:this.formatNodeDFS(e.props.children)})}):e))).length?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),i.createElement(E.Z,Object.assign({component:"span"},e))}}I.propTypes={rule:m().oneOf(S.j.RULE),precision:m().number,truncate:m().oneOf(S.j.TRUNCATE),parser:m().func,copyable:m().oneOfType([m().object,m().bool]),delete:m().bool,disabled:m().bool,icon:m().oneOfType([m().node,m().string]),mark:m().bool,underline:m().bool,link:m().oneOfType([m().object,m().bool]),strong:m().bool,type:m().oneOf(S.j.TYPE),size:m().oneOf(S.j.SIZE),style:m().object,className:m().string,code:m().bool,component:m().string},I.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const M=_.Z;M.Text=w.Z,M.Title=T,M.Paragraph=k.Z,M.Numeral=I;const R=M;var D=r(98880),N=r(51616);class j extends l.Z{constructor(e){super(Object.assign(Object.assign({},j.defaultAdapter),e)),this.handleKeyDown=e=>{const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===N.ZP.ESC)return e.stopPropagation(),void this.close(e)}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target!==e.currentTarget||t||this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}var A=r(72457),L=r(13589);const U=function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1};const P=function(e){return e!=e};const G=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};const Z=function(e,t,r){return t==t?G(e,t,r):U(e,P,r)};const F=function(e,t){return!!(null==e?0:e.length)&&Z(e,t,0)>-1};const X=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1};var K=r(34073),B=r(51211),V=r(76208);const W=function(e,t,r,n){var i=-1,s=F,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;r&&(t=(0,K.Z)(t,(0,B.Z)(r))),n?(s=X,o=!1):t.length>=200&&(s=V.Z,o=!1,t=new L.Z(t));e:for(;++i<a;){var u=e[i],d=null==r?u:r(u);if(u=n||0!==u?u:0,o&&d==d){for(var h=l;h--;)if(t[h]===d)continue e;c.push(u)}else s(t,d,n)||c.push(u)}return c};var H=r(51931),Y=r(95434);const $=(0,H.Z)((function(e,t){return(0,Y.Z)(e)?W(e,t):[]}));var J=r(97313);class Q{constructor(e,t){var r;this.addFocusRedirectListener=e=>(this.focusRedirectListenerList.push(e),()=>this.removeFocusRedirectListener(e)),this.removeFocusRedirectListener=e=>{this.focusRedirectListenerList=$(this.focusRedirectListenerList,e)},this.destroy=()=>{var e;null===(e=this.container)||void 0===e||e.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=e=>{if(!this.enable)return!1;for(const t of this.focusRedirectListenerList){if(!t(e))return!1}return!0},this.focusElement=(e,t)=>{const{preventScroll:r}=this.options;null==e||e.focus({preventScroll:r}),t.preventDefault()},this.onKeyPress=e=>{if(e&&"Tab"===e.key){const t=Q.getFocusableElements(this.container);t.length&&(e.shiftKey?this.handleContainerShiftTabKeyDown(t,e):this.handleContainerTabKeyDown(t,e))}},this.handleContainerTabKeyDown=(e,t)=>{const r=Q.getActiveElement(),n=e[e.length-1]===r,i=e[0];n&&this.shouldFocusRedirect(i)&&this.focusElement(i,t)},this.handleContainerShiftTabKeyDown=(e,t)=>{const r=Q.getActiveElement(),n=e[0]===r,i=e[e.length-1];n&&this.shouldFocusRedirect(i)&&this.focusElement(i,t)},Object.freeze(t),this.container=e,this.options=t,this.enable=null===(r=null==t?void 0:t.enable)||void 0===r||r,this.focusRedirectListenerList=(null==t?void 0:t.onFocusRedirectListener)?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!(0,J.Z)(e))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(t))}static getActiveElement(){return document?document.activeElement:null}}const q=Q;var ee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};let te=0;class re extends D.Z{constructor(e){super(e),this.onKeyDown=e=>{this.foundation.handleKeyDown(e)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=e=>{this.foundation.handleMaskClick(e)},this.close=e=>{this.foundation.close(e)},this.getMaskElement=()=>{const e=ee(this.props,[]),{mask:t,maskClassName:r}=e;if(t){const t=y()(`${s}-mask`,{});return i.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:y()(t,r),style:e.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:e,closeIcon:t}=this.props;let r;if(e){const e=t||i.createElement(A.Z,{"x-semi-prop":"closeIcon"});r=i.createElement(v.Z,{"aria-label":"close",className:`${s}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return r},this.renderIcon=()=>{const{icon:e}=this.props;return e?i.createElement("span",{className:`${s}-icon-wrapper`,"x-semi-prop":"icon"},e):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:e}=this.props,t=this.renderCloseBtn(),r=this.renderIcon();return null==e?null:i.createElement("div",{className:`${s}-header`},r,i.createElement(R.Title,{heading:5,className:`${s}-title`,id:`${s}-title`,"x-semi-prop":"title"},e),t)},this.renderBody=()=>{const{bodyStyle:e,children:t,title:r}=this.props,n=y()(`${s}-body`,{[`${s}-withIcon`]:this.props.icon}),o=this.renderCloseBtn(),a=this.renderIcon();return null!=r||"header"in this.props?i.createElement("div",{className:n,id:`${s}-body`,style:e,"x-semi-prop":"children"},t):i.createElement("div",{className:`${s}-body-wrapper`},a,i.createElement("div",{className:n,style:e,"x-semi-prop":"children"},t),o)},this.getDialogElement=()=>{const e=ee(this.props,[]),t={},r=y()(`${s}`,{[`${s}-centered`]:e.centered,[`${s}-${e.size}`]:e.size});e.width&&(t.width=e.width),e.height&&(t.height=e.height),e.isFullScreen&&(t.width="100%",t.height="100%",t.margin="unset");const n=this.renderBody(),o=this.renderHeader(),a=e.footer?i.createElement("div",{className:`${s}-footer`,"x-semi-prop":"footer"},e.footer):null;return i.createElement("div",{key:"dialog-element",className:r,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},e.style),t),id:this.dialogId},i.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":`${s}-title`,"aria-describedby":`${s}-body`,onAnimationEnd:e.onAnimationEnd,className:y()([`${s}-content`,e.contentClassName,{[`${s}-content-fullScreen`]:e.isFullScreen}])},o,n,a))},this.state={dialogMouseDown:!1,prevFocusElement:q.getActiveElement()},this.foundation=new j(this.adapter),this.dialogId="dialog-"+te++,this.modalDialogRef=i.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout((()=>{this.setState({dialogMouseDown:!1})}),0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,r;const{preventScroll:n}=this.props;let i;if(this.modalDialogRef){const t=q.getActiveElement();i=this.modalDialogRef.current.contains(t),null===(e=this.focusTrapHandle)||void 0===e||e.destroy(),this.focusTrapHandle=new q(this.modalDialogRef.current,{preventScroll:n})}i||null===(r=null===(t=this.modalDialogRef)||void 0===t?void 0:t.current)||void 0===r||r.focus({preventScroll:n})},modalDialogBlur:()=>{var e,t;null===(e=this.modalDialogRef)||void 0===e||e.current.blur(),null===(t=this.focusTrapHandle)||void 0===t||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,r=(0,p.Z)(e,"focus");(0,h.Z)(r)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=q.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||null===(e=t[0])||void 0===e||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){const e=this.props,{maskClosable:t,className:r,getPopupContainer:n,maskFixed:o,getContainerContext:a}=e,c=ee(e,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:l}=this.context,u=y()(r,{[`${s}-popup`]:n&&!o,[`${s}-fixed`]:o,[`${s}-rtl`]:"rtl"===l}),d=a(),h=this.getDataAttr(c),p=i.createElement("div",Object.assign({className:u},h),this.getMaskElement(),i.createElement("div",Object.assign({role:"none",className:y()({[`${s}-wrap`]:!0,[`${s}-wrap-center`]:this.props.centered}),onClick:t?this.onMaskClick:null,onMouseUp:t?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return d&&d.Provider?i.createElement(d.Provider,{value:d.value},p):p}}re.contextType=b.Z,re.propTypes={close:m().func,getContainerContext:m().func,contentClassName:m().string,maskClassName:m().string,onAnimationEnd:m().func,preventScroll:m().bool},re.defaultProps={close:n.Z,getContainerContext:n.Z,contentClassName:"",maskClassName:""};var ne=r(29708),ie=r(28619),se=r(73221),oe=r(95291),ae=r(4157),ce=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const le=e=>{const[t,r]=(0,i.useState)(!0),[n,o]=(0,i.useState)(),[a,c]=(0,i.useState)(),{direction:l}=e,{title:u,content:d,icon:h,type:p,onCancel:f,onOk:m,className:g}=e,b=ce(e,["title","content","icon","type","onCancel","onOk","className"]),v=(0,i.useCallback)((e=>{const t=m&&m(e);t&&t.then?(o(!0),t.then((function(){r(!1),o(!1)}),(e=>{o(!1)}))):r(!1)}),[m]),_=(0,i.useCallback)((e=>{const t=f&&f(e);t&&t.then?(c(!0),t.then((function(){r(!1),c(!1)}),(e=>{c(!1)}))):r(!1)}),[f]),w=`${s}-confirm`,S=y()(g,w,{[`${w}-rtl`]:"rtl"===l}),E=y()(`${s}-${p}`),x=(0,ae.ID)(h)?i.cloneElement(h,{className:`${w}-icon ${E}-icon`,size:"extra-large"}):h,T=null==u?null:i.createElement("span",{className:`${w}-title-text`},u),k=y()(`${w}-content`,{[`${w}-content-withIcon`]:e.icon});return i.createElement(ze,Object.assign({className:S,title:T,confirmLoading:n,cancelLoading:a,onOk:v,onCancel:_,icon:x,visible:t},b),i.createElement("div",{className:k,"x-semi-prop":"content"},d))};var ue=r(4202),de=r(23264),he=r(641),pe=r(52070);const fe=(0,r(18506).A)((function(e){return i.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}),"help_circle");function me(e){const t=document.createElement("div");document.body.appendChild(t);let r=Object.assign({},e);function n(r){const{afterClose:n}=r;oe.render(i.createElement(le,Object.assign({},r,{afterClose:function(){null==n||n(...arguments),(()=>{oe.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t);for(let e=0;e<Ce.length;e++)if(Ce[e]===s){Ce.splice(e,1);break}})()},motion:e.motion})),t)}function s(){r=Object.assign(Object.assign({},r),{visible:!1}),n(r)}return n(r),Ce.push(s),{destroy:s,update:function(e){r=Object.assign(Object.assign({},r),e),n(r)}}}function ge(e){return Object.assign({type:"info",icon:i.createElement(ue.Z,null)},e)}function ye(e){return Object.assign({type:"success",icon:i.createElement(de.Z,null)},e)}function be(e){return Object.assign({type:"warning",icon:i.createElement(he.Z,null)},e)}function ve(e){return Object.assign({type:"error",icon:i.createElement(pe.Z,null),okButtonProps:Object.assign({type:"danger"},e.okButtonProps)},(0,se.Z)(e,["okButtonProps"]))}function _e(e){return Object.assign({type:"confirm",icon:i.createElement(fe,null)},e)}var we=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Se=(e,t)=>{var{afterClose:r,config:n}=e;we(e,["afterClose","config"]);const[s,o]=i.useState(n);i.useImperativeHandle(t,(()=>({destroy:()=>{o((e=>Object.assign(Object.assign({},e),{visible:!1})))},update:e=>{o((t=>Object.assign(Object.assign({},t),e)))}})));return i.createElement(le,Object.assign({},s,{afterClose:()=>{var e;null===(e=null==n?void 0:n.afterClose)||void 0===e||e.call(n),r()}}))},Ee=i.forwardRef(Se);let xe=0;var Te=r(37717),ke=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const Ce=[];class Oe extends D.Z{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleOk=e=>{this.foundation.handleOk(e)},this.updateState=()=>{const{visible:e}=this.props;this.foundation.toggleDisplayNone(!e)},this.renderFooter=()=>{const{okText:e,okType:t,cancelText:r,confirmLoading:n,cancelLoading:s,hasCancel:o}=this.props,a=e=>o?i.createElement(c.Z,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:void 0===s?"pending"===this.state.onCancelReturnPromiseStatus:s,type:"tertiary",autoFocus:!0},this.props.cancelButtonProps,{"x-semi-children-alias":"cancelText"}),r||e.cancel):null;return i.createElement(ie.Z,{componentName:"Modal"},((r,s)=>i.createElement("div",null,a(r),i.createElement(c.Z,Object.assign({"aria-label":"confirm",type:t,theme:"solid",loading:void 0===n?"pending"===this.state.onOKReturnPromiseStatus:n,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),e||r.confirm))))},this.renderDialog=()=>{let e=this.props,{footer:t,className:r,motion:n,maskStyle:o,keepDOM:a,style:c,zIndex:l,getPopupContainer:u,visible:d}=e,h=ke(e,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible"]),p=c;const f=o,m="footer"in this.props?t:this.renderFooter();let g={zIndex:l};u&&(g={zIndex:l,position:"static"});const b=y()(r,{[`${s}-displayNone`]:a&&this.state.displayNone}),v=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return v&&(this._haveRendered=!0),i.createElement(Te.Z,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${s}-content-animate-show`:`${s}-content-animate-hide`,onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:t,animationEventsNeedBind:r}=e;return i.createElement(Te.Z,{motion:this.props.motion,animationState:d?"enter":"leave",startClassName:d?`${s}-mask-animate-show`:`${s}-mask-animate-hide`,onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:n,animationEventsNeedBind:s}=e;return v?i.createElement(ne.Z,{style:g,getPopupContainer:u}," ",i.createElement(re,Object.assign({},h,{contentExtraProps:r,maskExtraProps:s,isFullScreen:this.state.isFullScreen,contentClassName:t,maskClassName:n,className:b,getPopupContainer:u,maskStyle:f,style:p,ref:this.modalRef,footer:m,onClose:this.handleCancel}))):i.createElement(i.Fragment,null)}))}))},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new d(this.adapter),this.modalRef=i.createRef(),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||n.Z)},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const r={};return e.fullScreen!==t.isFullScreen&&(r.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(r.displayNone=!1),r}componentDidMount(){this.scrollBarWidth=(0,ae.np)(),this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,r){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}render(){const{visible:e,keepDOM:t,lazyRender:r}=this.props;return this.renderDialog()}}Oe.propTypes={mask:m().bool,closable:m().bool,centered:m().bool,visible:m().bool,width:m().oneOfType([m().string,m().number]),height:m().oneOfType([m().string,m().number]),confirmLoading:m().bool,cancelLoading:m().bool,okText:m().string,okType:m().string,cancelText:m().string,maskClosable:m().bool,onCancel:m().func,onOk:m().func,afterClose:m().func,okButtonProps:m().object,cancelButtonProps:m().object,style:m().object,className:m().string,maskStyle:m().object,bodyStyle:m().object,zIndex:m().number,title:m().node,icon:m().node,header:m().node,footer:m().node,hasCancel:m().bool,motion:m().bool,children:m().node,getPopupContainer:m().func,getContainerContext:m().func,maskFixed:m().bool,closeIcon:m().node,closeOnEsc:m().bool,size:m().oneOf(o),keepDOM:m().bool,lazyRender:m().bool,direction:m().oneOf(a),fullScreen:m().bool},Oe.defaultProps={zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:n.Z,onOk:n.Z,afterClose:n.Z,maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1},Oe.useModal=function(){const[e,t]=function(){const[e,t]=i.useState([]);return[e,function(e){return t((t=>[...t,e])),()=>{t((t=>t.filter((t=>t!==e))))}}]}();function r(e){return function(r){xe+=1;const n=i.createRef();let s;const o=i.createElement(Ee,{key:`semi-modal-${xe}`,config:e(r),ref:n,afterClose:()=>{s()}});return s=t(o),{destroy:()=>{n.current&&n.current.destroy()},update:e=>{n.current&&n.current.update(e)}}}}return[{info:r(ge),success:r(ye),error:r(ve),warning:r(be),confirm:r(_e)},i.createElement(i.Fragment,null,e)]},Oe.info=function(e){return me(ge(e))},Oe.success=function(e){return me(ye(e))},Oe.error=function(e){return me(ve(e))},Oe.warning=function(e){return me(be(e))},Oe.confirm=function(e){return me(_e(e))},Oe.destroyAll=function(){for(;Ce.length;){const e=Ce.pop();e&&e()}};const ze=Oe,Ie=Oe},28246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(74510),i=r(48712),s=r(18571),o=r(18751),a=r.n(o),c=r(61235),l=r.n(c),u=r(84616),d=r(14635),h=r(39362),p=r(76997),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t="",className:r,arrowStyle:n,popStyle:i}=e,o=f(e,["position","className","arrowStyle","popStyle"]),c=0===t.indexOf("top")||0===t.indexOf("bottom"),l=a()(r,d.UX.ARROW),u=(0,p.Z)(n,"borderOpacity",d.j2.DEFAULT_ARROW_STYLE.borderOpacity),h=(0,p.Z)(n,"backgroundColor",(0,p.Z)(i,"backgroundColor",d.j2.DEFAULT_ARROW_STYLE.backgroundColor)),m=(0,p.Z)(n,"borderColor",(0,p.Z)(i,"borderColor",d.j2.DEFAULT_ARROW_STYLE.borderColor)),g=Object.assign(Object.assign({},o),{width:d.KT.ARROW_BOUNDING.width,height:d.KT.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:l});return c?s.createElement("svg",Object.assign({},g),s.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:m,opacity:u}),s.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:h})):s.createElement("svg",Object.assign({},g),s.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:m,opacity:u}),s.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:h}))};m.propTypes={position:l().string,className:l().string,arrowStyle:l().object,popStyle:l().object};const g=m;var y=r(44431),b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const v=d.j2.POSITION_SET,_=d.j2.TRIGGER_SET;class w extends s.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var e;null===(e=this.tooltipRef.current)||void 0===e||e.focusTrigger()},this.renderPopCard=e=>{let{initialFocusRef:t}=e;const{content:r,contentClassName:n,prefixCls:i}=this.props,{direction:o}=this.context,c=a()(i,n,{[`${i}-rtl`]:"rtl"===o}),l=this.renderContentNode({initialFocusRef:t,content:r});return s.createElement("div",{className:c},s.createElement("div",{className:`${i}-content`},l))},this.renderContentNode=e=>{const{initialFocusRef:t,content:r}=e,n={initialFocusRef:t};return(0,i.Z)(r)?r(n):r},this.tooltipRef=s.createRef()}render(){const e=this.props,{children:t,prefixCls:r,showArrow:n,arrowStyle:i={},arrowBounding:o,position:a,style:c,trigger:l}=e,u=b(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:p}=this.props;const f={position:a,className:"",popStyle:c,arrowStyle:i},m=!!n&&s.createElement(g,Object.assign({},f));(0,y.Z)(p)&&(p=n?d.KT.SPACING_WITH_ARROW:d.KT.SPACING);const v="click"===l||"custom"===l?"dialog":"tooltip";return s.createElement(h.Z,Object.assign({guardFocus:!0,ref:this.tooltipRef},u,{trigger:l,position:a,style:c,content:this.renderPopCard,prefixCls:r,spacing:p,showArrow:m,arrowBounding:o,role:v}),t)}}w.contextType=u.Z,w.propTypes={children:l().node,content:l().oneOfType([l().node,l().func]),visible:l().bool,autoAdjustOverflow:l().bool,motion:l().bool,position:l().oneOf(v),margin:l().oneOfType([l().number,l().object]),mouseEnterDelay:l().number,mouseLeaveDelay:l().number,trigger:l().oneOf(_).isRequired,contentClassName:l().oneOfType([l().string,l().array]),onVisibleChange:l().func,onClickOutSide:l().func,style:l().object,spacing:l().oneOfType([l().number,l().object]),zIndex:l().number,showArrow:l().bool,arrowStyle:l().shape({borderColor:l().string,backgroundColor:l().string,borderOpacity:l().oneOfType([l().string,l().number])}),arrowPointAtCenter:l().bool,arrowBounding:l().object,prefixCls:l().string,guardFocus:l().bool,disableArrowKeyDown:l().bool},w.defaultProps={arrowBounding:d.KT.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:d.KT.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:d.UX.PREFIX,onClickOutSide:n.Z,onEscKeyDown:n.Z,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0};const S=w},50382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>K});var n=r(18571),i=r(18751),s=r.n(i),o=r(61235),a=r.n(o);const c={PREFIX:`${r(4130).T}-progress`},l=["line","circle"],u="line",d="var(--semi-color-success)",h=["square","round"],p="round",f=["default","small","large"],m="default",g=["vertical","horizontal"],y="horizontal";var b=r(82879),v=r(45806),_=r.n(v);function w(e,t,r){return Math.min(Math.max(e,t),r)}function S(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;const t=w(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,1,10),r=w(e,.1,2);return e=>0===e||1===e?e:-t*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/r)}const E=(()=>{const e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],S],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],(e,t)=>r=>1-S(e,t)(1-r)],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],(e,t)=>r=>r<.5?S(e,t)(2*r)/2:1-S(e,t)(-2*r+2)/2]},r={linear:[.25,.25,.75,.75]};for(const n of Object.keys(t))t[n].forEach(((t,i)=>{r["ease"+n+e[i]]=t}));return r})();function x(e){if("function"==typeof e)return e;let t=(e=e&&"string"==typeof e?e.trim():"linear").split("(")[0];const r=function(e){const t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((e=>parseFloat(e))):[]}(e);let n;return"cubic-bezier"===t||"cubicBezier"===t?_()(...r.length?r:E.linear):((!t||"string"!=typeof t||"string"==typeof t&&null==E[t])&&(t="linear"),n=E[t],"function"==typeof n?n(...r):r.length?_()(...r):_()(...n))}class T{constructor(){this._eventMap=new Map}on(e,t){return e&&"function"==typeof t&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var r=this;if(e&&"function"==typeof t){const n=function(){t(...arguments),r.off(e,n)};this.on(e,n)}}off(e,t){if(e)if("function"==typeof t){const r=this._eventMap.get(e);if(Array.isArray(r)&&r.length){let e=-1;for(;(e=r.findIndex((e=>e===t)))>-1;)r.splice(e,1)}}else null==t&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!this._eventMap.has(e)&&(this._eventMap.get(e).forEach((e=>e(...r))),!0)}}function k(e){return Boolean(e&&"object"==typeof e&&(e.duration>0||"string"==typeof e.easing||"function"==typeof e.easing))}function C(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"==typeof e[r]?e[r]:e[r].val);return t}const O=[0,0];function z(e,t,r,n,i,s,o){const a=r+(-i*(t-n)+-s*r)*e,c=t+a*e;return Math.abs(a)<o&&Math.abs(c-n)<o?(O[0]=n,O[1]=0,O):(O[0]=c,O[1]=a,O)}const I=Object.assign(Object.assign({},{tension:170,friction:26}),{precision:.01});function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(k(t)){const e=x(t.easing),r="number"==typeof t.duration&&t.duration>0?t.duration:1e3;t=Object.assign(Object.assign({},t),{easing:e,duration:r})}let r=Object.assign(Object.assign(Object.assign({},I),t),{done:!1});if(e&&"object"==typeof e&&"val"in e){if(k(e)){const r=x(e.easing),n="number"==typeof e.duration&&e.duration>0?e.duration:parseInt(t.duration)||1e3;e=Object.assign(Object.assign({},e),{easing:r,duration:n})}r=Object.assign(Object.assign({},r),e)}else r=Object.assign(Object.assign({},r),{val:e});return r}const R=()=>Date.now(),D=1e3/60;class N extends T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._props=Object.assign({},e),this._config=Object.assign({},t),this.initStates()}_wrapConfig(e,t){t=t&&"object"==typeof t?t:this._config;const r={};for(const n of Object.keys(e))r[n]=M(e[n],t);return r}initStates(e,t){e=e&&"object"==typeof e?e:this._props,t=t&&"object"==typeof t?t:this._config;const{from:r,to:n}=e;if(this._from={},r)for(const o of Object.keys(r))this._from[o]="object"==typeof r[o]&&r[o].val?r[o].val:r[o];this._to=this._wrapConfig(n,t),this._delay=parseInt(t.delay)||0;const i=this._from&&C(this._from)||C(this._to),s=function(e){const t={},r=e&&Object.keys(e)||[];for(const n of r)t[n]=0;return t}(i);this._currentStyle=Object.assign({},i),this._currentVelocity=Object.assign({},s),this._lastIdealStyle=Object.assign({},i),this._lastIdealVelocity=Object.assign({},s),this.resetPlayStates(),this._frameCount=0,this._prevTime=0}animate(){null==this._timer&&(this._timer=requestAnimationFrame((e=>{const t=R();if(function(e,t,r,n,i){for(const s of Object.keys(t)){const o=t[s],a="number"==typeof o?o:o.val;if("object"!=typeof o||!o.done){if(k(o)&&n&&i&&o.duration){if(o.duration+n<=i||a!==e[s])return!1}else if("number"==typeof r[s]&&0!==r[s])return!1;if(e[s]!==a)return!1}}return!0}(this._currentStyle,this._to,this._currentVelocity,this._startedTime||t,t)||this._ended||this._stopped)return!this._wasAnimating||this._ended||this._stopped||(this._timer=setTimeout((()=>{clearTimeout(this._timer),this._timer=null,this._ended=!0,this.emit("rest",this.getCurrentStates())}),D)),void this.resetPlayStates();this._started||(this._started=!0,this.emit("start",this.getCurrentStates())),this._stopped=!1,this._paused=!1,this._wasAnimating=!0,0===this._startedTime&&(this._startedTime=t);const r=t,n=r-this._prevTime;this._prevTime=r,r-this._startedTime<this._delay&&(this._timer=null,this.animate());const i={},s={},o={},a={},c=this._to&&Object.keys(this._to)||[];for(const l of c){const e=this._to[l];this._accumulatedTime[l]="number"!=typeof this._accumulatedTime[l]?n:this._accumulatedTime[l]+n;const t=null!=this._from[l]&&"object"==typeof this._from[l]?this._from[l].val:this._from[l],c=e.val;if("number"==typeof e)o[l]=e,a[l]=0,i[l]=e,s[l]=0;else{let n=this._lastIdealStyle[l],u=this._lastIdealVelocity[l];if(k(this._config)||k(e)){const{easing:s,duration:a}=e;n=t+s((r-this._startedTime)/a)*(c-t),r>=this._startedTime+a&&(n=c,e.done=!0),i[l]=n,o[l]=n}else if(null!=c&&c===this._currentStyle[l])o[l]=c,a[l]=0,i[l]=c,s[l]=0;else{const t=(this._accumulatedTime[l]-Math.floor(this._accumulatedTime[l]/D)*D)/D,r=Math.floor(this._accumulatedTime[l]/D);for(let i=0;i<r;i++)[n,u]=z(D/1e3,n,u,e.val,e.tension,e.friction,e.precision);const[c,d]=z(D/1e3,n,u,e.val,e.tension,e.friction,e.precision);o[l]=n+(c-n)*t,a[l]=u+(d-u)*t,i[l]=n,s[l]=u,this._accumulatedTime[l]-=r*D}}}this._timer=null,this._currentStyle=Object.assign({},o),this._currentVelocity=Object.assign({},a),this._lastIdealStyle=Object.assign({},i),this._lastIdealVelocity=Object.assign({},s),this._destroyed||(this.emit("frame",this.getCurrentStates()),this.animate())})))}start(){this._prevTime=R(),this._startedTime=R(),this.animate()}end(){this._ended||(this._ended=!0,this._currentStyle=this.getFinalStates(),this.emit("frame",this.getFinalStates()),this.emit("rest",this.getFinalStates())),this.destroy()}pause(){this._paused||(this._pausedTime=R(),this._paused=!0,this.emit("pause",this.getCurrentStates()),this.destroy(),this._destroyed=!1)}resume(){if(this._started&&this._paused){const e=R()-this._pausedTime;this._paused=!1,this._startedTime+=e,this._prevTime+=e,this._pausedTime=0,this.emit("resume",this.getCurrentStates()),this.animate()}}stop(){this.destroy(),this._stopped||(this._stopped=!0,this.emit("stop",this.getInitialStates()),this.initStates())}destroy(){cancelAnimationFrame(this._timer),clearTimeout(this._timer),this._timer=null,this._destroyed=!0}resetPlayStates(){this._started=!1,this._stopped=!1,this._ended=!1,this._paused=!1,this._destroyed=!1,this._timer=null,this._wasAnimating=!1,this._accumulatedTime={},this._startedTime=0,this._pausedTime=0}reset(){this.destroy(),this.initStates()}reverse(){this.destroy();const e=Object.assign({},this._props),[t,r]=[e.to,e.from];e.from=t,e.to=r,this._props=Object.assign({},e),this.initStates()}getCurrentStates(){return Object.assign({},this._currentStyle)}getInitialStates(){return Object.assign({},C(this._props.from))}getFinalStates(){return Object.assign({},C(this._props.to))}}function j(e,t,r){try{const n=function(e,t,r){if(e.sort(((e,t)=>e.percent-t.percent)),e[0].percent>t)return d;const n=e[e.length-1];if(n.percent<t)return L(n.color);for(const[i,s]of e.entries()){if(s.percent===t)return L(s.color);if(t>s.percent)continue;const n=e[i-1];return r?A({startColor:L(n.color),endColor:L(s.color),size:s.percent-n.percent-1},t-n.percent-1):L(n.color)}return}(e,t,r);if(0!==n.length)return n}catch(n){return}}function A(e,t){const{startColor:r,endColor:n,size:i}=e,s=r.split(""),o=n.split(""),a=[parseInt(`${s[1]}${s[2]}`,16),parseInt(`${o[1]}${o[2]}`,16)],c=[parseInt(`${s[3]}${s[4]}`,16),parseInt(`${o[3]}${o[4]}`,16)],l=[parseInt(`${s[5]}${s[6]}`,16),parseInt(`${o[5]}${o[6]}`,16)],u=[parseInt(`${s[7]}${s[8]}`,16),parseInt(`${o[7]}${o[8]}`,16)],d=(a[0]-a[1])/(i+1),h=(c[0]-c[1])/(i+1),p=(l[0]-l[1])/(i+1),f=(u[0]-u[1])/(i+1);function m(e){const t=Math.round(a[0]-d*(e+1)).toString(16),r=Math.round(c[0]-h*(e+1)).toString(16),n=Math.round(l[0]-p*(e+1)).toString(16),i=`${g(t)}${g(r)}${g(n)}`,s=Math.floor(f*(e+1)+u[1]).toString(16);return U.Hex(`#${i}`,s)}function g(e){return 1===e.length?`0${e}`:0===e.length?"00":e}if(void 0===t){const e=[r];for(let t=0;t<i;t+=1)e.push(m(t));return e}return m(t)}function L(e){return e=e.trim().toLowerCase(),P.hex.test(e)?U.Hex(e,void 0):P.hslA.test(e)?U.Hex(U.HslA(e),void 0):P.rgbA.test(e)?U.Hex(U.RgbA(e),void 0):P.semiDesignTokens.test(e)?-1!==G.ALONG.indexOf(e)?U.SemiDesignToken(e):-1!==G.SEQUENCE.indexOf(e)?U.SemiDesignToken(`${e}-5`):U.SemiDesignToken(`${e}`):void 0}const U={Hex:(e,t)=>8===(e=e.replace("#","")).length?`#${e}`:(6===e.length||3===e.length&&(e=e.split("").map((e=>e+e)).join("")),`#${e}${t||"ff"}`),SemiDesignToken(e){if("undefined"==typeof window)return;const t=getComputedStyle(document.body).getPropertyValue(`--semi-${e}`);if(""===t)return;const r=`rgba(${t}, 1)`;return U.RgbA(r)},HslA(e){const t=P.hslA.exec(e),r=parseInt(t[2]),n=parseInt(t[3])/100,i=parseInt(t[4])/100,s=t[5],o=(1-Math.abs(2*i-1))*n,a=o*(1-Math.abs(r/60%2-1)),c=i-o/2;let l=0,u=0,d=0;return 0<=r&&r<60?(l=o,u=a,d=0):60<=r&&r<120?(l=a,u=o,d=0):120<=r&&r<180?(l=0,u=o,d=a):180<=r&&r<240?(l=0,u=a,d=o):240<=r&&r<300?(l=a,u=0,d=o):300<=r&&r<360&&(l=o,u=0,d=a),l=Math.round(255*(l+c)).toString(16),u=Math.round(255*(u+c)).toString(16),d=Math.round(255*(d+c)).toString(16),U.utils.pAL(l,u,d,s)},RgbA(e){const t=P.rgbA.exec(e),r=parseInt(t[2],10).toString(16),n=parseInt(t[3],10).toString(16),i=parseInt(t[4],10).toString(16),s=t[5];return U.utils.pAL(r,n,i,s)},utils:{pAL:(e,t,r,n)=>(1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),void 0!==n?(1==(n=Math.round(255*parseInt(n)).toString(16)).length&&(n="0"+n),"#"+e+t+r+n):"#"+e+t+r)}},P={hex:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,hslA:/(hsl)a?\(\s*?(\d+),?\s*?(\d+)%,?\s*?(\d+)%,?\s*?\/?(\s*?[\d.]+)?\s*?\)/,rgbA:/(rgb)a?\(\s*?(\d+),?\s*?(\d+),?\s*?(\d+),?\s*?\/?(\s*?[\d.]+)?\s*?\)/,semiDesignTokens:/(\w+)?-?(\w+)-?(\d)?/},G={ALONG:["black","white"],SEQUENCE:["amber","blue","cyan","green","grey","indigo","light-blue","light-green","lime","orange","pink","purple","red","teal","violet","yellow"]};var Z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const F=c.PREFIX;class X extends n.Component{constructor(e){super(e),this._mounted=!0,this._mounted=!0,this.state={percentNumber:this.props.percent}}componentDidUpdate(e){if(isNaN(this.props.percent)||isNaN(e.percent))throw new Error("[Semi Progress]:percent can not be NaN");if(e.percent!==this.props.percent){if(!this.props.motion)return void this.setState({percentNumber:this.props.percent});this.animation&&this.animation.destroy&&this.animation.destroy(),this.animation=new N({from:{value:e.percent},to:{value:this.props.percent}},{easing:"linear",duration:300}),this.animation.on("frame",(e=>{if(!1===this._mounted)return;const t=parseInt(e.value);this.setState({percentNumber:t})})),this.animation.on("rest",(()=>{!1!==this._mounted&&this.setState({percentNumber:this.props.percent})})),this.animation.start()}}componentWillUnmount(){this.animation&&this.animation.destroy(),this._mounted=!1}renderCircleProgress(){const e=this.props,{strokeLinecap:t,style:r,className:i,strokeWidth:o,format:a,size:c,stroke:l,strokeGradient:u,showInfo:d,percent:h,orbitStroke:p,id:f}=e,g=Z(e,["strokeLinecap","style","className","strokeWidth","format","size","stroke","strokeGradient","showInfo","percent","orbitStroke","id"]),y=this.props["aria-label"],v=this.props["aria-labelledby"],_=this.props["aria-valuetext"],{percentNumber:w}=this.state,S={wrapper:s()(`${F}-circle`,i),svg:s()(`${F}-circle-ring`),circle:s()(`${F}-circle-ring-inner`)},E=this.calcPercent(h),x=this.calcPercent(w);let T;T=this.props.width?this.props.width:c===m?72:24;const k=this.selectStroke(l,h,u),C=T/2,O=T/2,z=(T-o)/2,I=2*z*Math.PI,M=(1-E/100)*I,R=`${I} ${I}`,D=a(x);return n.createElement("div",Object.assign({id:f,className:S.wrapper,style:r,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":x,"aria-labelledby":v,"aria-label":y,"aria-valuetext":_},(0,b.Z)(g)),n.createElement("svg",{key:c,className:S.svg,height:T,width:T,"aria-hidden":!0},n.createElement("circle",{strokeDashoffset:0,strokeWidth:o,strokeDasharray:R,strokeLinecap:t,fill:"transparent",stroke:p,r:z,cx:O,cy:C,"aria-hidden":!0}),n.createElement("circle",{className:S.circle,strokeDashoffset:M,strokeWidth:o,strokeDasharray:R,strokeLinecap:t,fill:"transparent",stroke:k,r:z,cx:O,cy:C,"aria-hidden":!0})),d&&"small"!==c?n.createElement("span",{className:`${F}-circle-text`},D):null)}calcPercent(e){let t;return t=e>100?100:e<0?0:e,t}selectStroke(e,t,r){if("string"==typeof e)return e;const n=j(e,t,r);return void 0!==n?n:d}renderLineProgress(){const e=this.props,{className:t,style:r,stroke:i,strokeGradient:o,direction:a,format:c,showInfo:l,size:u,percent:d,orbitStroke:h,id:p}=e,f=Z(e,["className","style","stroke","strokeGradient","direction","format","showInfo","size","percent","orbitStroke","id"]),m=this.props["aria-label"],g=this.props["aria-labelledby"],v=this.props["aria-valuetext"],{percentNumber:_}=this.state,w=s()(F,t,{[`${F}-horizontal`]:a===y,[`${F}-vertical`]:a!==y,[`${F}-large`]:"large"===u}),S=s()({[`${F}-track`]:!0}),E=s()(`${F}-track-inner`),x=this.calcPercent(d),T=this.calcPercent(_),k={background:this.selectStroke(i,d,o)};a===y?k.width=`${x}%`:k.height=`${x}%`;const C=c(T);return n.createElement("div",Object.assign({id:p,className:w,style:r,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":x,"aria-labelledby":g,"aria-label":m,"aria-valuetext":v},(0,b.Z)(f)),n.createElement("div",{className:S,style:h?{backgroundColor:h}:{},"aria-hidden":!0},n.createElement("div",{className:E,style:k,"aria-hidden":!0})),l?n.createElement("div",{className:`${F}-line-text`},C):null)}render(){const{type:e}=this.props;return"line"===e?this.renderLineProgress():this.renderCircleProgress()}}X.propTypes={"aria-label":a().string,"aria-labelledby":a().string,"aria-valuetext":a().string,className:a().string,direction:a().oneOf(g),format:a().oneOfType([a().func,a().node]),id:a().string,motion:a().oneOfType([a().bool,a().func,a().object]),orbitStroke:a().string,percent:a().number,scale:a().number,showInfo:a().bool,size:a().oneOf(f),stroke:a().oneOfType([a().string,a().arrayOf(a().shape({percent:a().number,color:a().string}))]),strokeGradient:a().bool,strokeLinecap:a().oneOf(h),strokeWidth:a().number,style:a().object,type:a().oneOf(l),width:a().number},X.defaultProps={className:"",direction:y,format:e=>`${e}%`,motion:!0,orbitStroke:"var(--semi-color-fill-0)",percent:0,showInfo:!1,size:m,stroke:d,strokeGradient:!1,strokeLinecap:p,strokeWidth:4,style:{},type:u};const K=X},97228:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(18571),i=r(95291),s=r(61235),o=r.n(s),a=r(98880),c=r(75107);class l extends a.Z{constructor(e){super(e),this.getElement=()=>{try{return(0,i.findDOMNode)(this.childNode||this)}catch(e){return null}},this.mergeRef=(e,t)=>{this.childNode=t,"function"==typeof e?e(t):"object"==typeof e&&e&&"current"in e&&(e.current=t)},this.observer=new c.Z(e.onResize)}componentDidMount(){this.observeElement()}componentDidUpdate(e){this.observeElement(this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}observeElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getElement();this.observer||(this.observer=new c.Z(this.props.onResize)),t&&t instanceof Element?(t!==this.element||e)&&(this.observer.disconnect(),this.element=t,this.observer.observe(t),this.props.observeParent&&t.parentNode&&t.parentNode.ownerDocument&&t.parentNode.ownerDocument.defaultView&&t.parentNode instanceof t.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=t.parentNode,this.observer.observe(this._parentNode))):this.observer.disconnect()}render(){const e=n.Children.only(this.props.children),{ref:t}=e;return n.cloneElement(e,{ref:e=>this.mergeRef(t,e)})}}l.propTypes={onResize:o().func,observeParent:o().bool},l.defaultProps={onResize:()=>{},observeParent:!1}},72271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(18571),i=r(61235),s=r.n(i),o=r(18751),a=r.n(o),c=r(98880);const l={PREFIX:`${r(4130).T}-spin`};var u=r(51810);class d extends u.Z{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},d.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:r}=this._adapter.getStates();if(r){const r=this;this._timer=setTimeout((()=>{r._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const h=d;var p=r(79596),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const m=l.PREFIX;class g extends c.Z{constructor(e){super(e),this.foundation=new h(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:r}=this.state;return r?n.createElement("div",{className:`${m}-wrapper`},e?n.createElement("div",{className:`${m}-animate`,"x-semi-prop":"indicator"},e):n.createElement(p.Z,null),t?n.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:r,wrapperClassName:i,childStyle:s,size:o}=e,c=f(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,u=a()(m,i,{[`${m}-${o}`]:o,[`${m}-block`]:t,[`${m}-hidden`]:!l});return n.createElement("div",Object.assign({className:u,style:r},this.getDataAttr(c)),this.renderSpin(),n.createElement("div",{className:`${m}-children`,style:s,"x-semi-prop":"children"},t))}}g.propTypes={size:s().oneOf(["small","middle","large"]),spinning:s().bool,children:s().node,indicator:s().node,delay:s().number,tip:s().node,wrapperClassName:s().string,childStyle:s().object,style:s().object},g.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const y=g},41986:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(74535),i=r(18571),s=r(18751),o=r.n(s),a=r(61235),c=r.n(a),l=r(64410);const u={PREFIX:`${r(4130).T}-avatar`},d=["circle","square"],h=["extra-extra-small","extra-small","small","default","medium","large","extra-large"],p=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"];var f=r(51810),m=r(72839);class g extends f.Z{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(r){(0,m.Z)(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:e}=this.getProps(),t=this._adapter.getAvatarNode(),r=null==t?void 0:t.firstChild,[n,i]=[(null==t?void 0:t.offsetWidth)||0,(null==r?void 0:r.offsetWidth)||0];if(0!==n&&0!==i&&2*e<n){const t=n-2*e>i?1:(n-2*e)/i;this._adapter.setScale(t)}}}init(){const{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}var y=r(64729),b=r(98880),v=r(55646),_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const w=h,S=d,E=p,x=u.PREFIX;class T extends b.Z{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:e,onClick:t,imgAttr:r,src:n,srcSet:s,alt:a}=this.props,{isImgExist:c}=this.state;let l=e;const u=t!==y.Z,d=n&&c,h={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(d){const e=u?`clickable Avatar: ${a}`:a,t=Object.assign(Object.assign({src:n,srcSet:s,onError:this.handleError},r),{className:o()({[`${x}-no-focus-visible`]:u})}),c=u?Object.assign(Object.assign({},t),h):t;l=i.createElement("img",Object.assign({alt:e},c))}else if("string"==typeof e){const t=null!=a?a:e,r={role:"img","aria-label":u?`clickable Avatar: ${t}`:t,className:o()(`${x}-label`,{[`${x}-no-focus-visible`]:u})},n=u?Object.assign(Object.assign({},r),h):r,s={transform:`scale(${this.state.scale})`};l=i.createElement("span",{className:`${x}-content`,style:s},i.createElement("span",Object.assign({},n,{"x-semi-prop":"children"}),e))}return l},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=i.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,r=t;this.setState({hoverContent:r},(()=>{const{onMouseEnter:t}=this.props;t&&t(e)}))},notifyLeave:e=>{this.setState({hoverContent:""},(()=>{const{onMouseLeave:t}=this.props;t&&t(e)}))},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null===(e=this.avatarRef)||void 0===e?void 0:e.current}})}componentDidMount(){this.foundation=new g(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),(0,v.Jt)(e);break;case"Escape":e.target.blur()}}render(){const e=this.props,{shape:t,children:r,size:n,color:s,className:a,hoverMask:c,onClick:l,imgAttr:u,src:d,srcSet:h,style:p,alt:f,gap:m}=e,g=_(e,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap"]),{isImgExist:y,hoverContent:b,focusVisible:v}=this.state,w=d&&y,S=o()(x,{[`${x}-${t}`]:t,[`${x}-${n}`]:n,[`${x}-${s}`]:s&&!w,[`${x}-img`]:w,[`${x}-focus`]:v},a),E=b?i.createElement("div",{className:`${x}-hover`,"x-semi-prop":"hoverContent"},b):null;return i.createElement("span",Object.assign({},g,{style:p,className:S,onClick:l,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,role:"listitem",ref:this.avatarRef}),this.getContent(),E)}}T.defaultProps={size:"medium",color:"grey",shape:"circle",gap:3,onClick:y.Z,onMouseEnter:y.Z,onMouseLeave:y.Z},T.propTypes={children:c().node,color:c().oneOf(E),shape:c().oneOf(S),size:c().oneOf(w),hoverMask:c().node,className:c().string,style:c().object,gap:c().number,imgAttr:c().object,src:c().string,srcSet:c().string,alt:c().string,onError:c().func,onClick:c().func,onMouseEnter:c().func,onMouseLeave:c().func},T.elementType="Avatar";var k=r(72457),C=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const O=l.U.PREFIX,z=l.j.TAG_COLOR,I=l.j.TAG_SIZE,M=l.j.TAG_TYPE,R=l.j.AVATAR_SHAPE;class D extends i.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,r){const{onClose:n}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),n&&n(t,e,r),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:r,onKeyDown:n}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),(0,v.Jt)(e);break;case"Enter":r(e),(0,v.Jt)(e);break;case"Escape":e.target.blur()}n&&n(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return i.createElement(T,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:r,size:s,color:a,closable:c,visible:l,onClose:u,onClick:d,className:h,type:p,shape:f,avatarSrc:m,avatarShape:g,tabIndex:y,prefixIcon:b,suffixIcon:v}=e,_=C(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:w}=this.state,S=d!==D.defaultProps.onClick||c,E={role:"button",tabIndex:y||0,onKeyDown:this.handleKeyDown},x=Object.assign(Object.assign({},_),{onClick:d,tabIndex:y,className:o()(O,{[`${O}-default`]:"default"===s,[`${O}-small`]:"small"===s,[`${O}-large`]:"large"===s,[`${O}-square`]:"square"===f,[`${O}-circle`]:"circle"===f,[`${O}-${p}`]:p,[`${O}-${a}-${p}`]:a&&p,[`${O}-closable`]:c,[`${O}-invisible`]:!w,[`${O}-avatar-${g}`]:m},h)}),T=S?Object.assign(Object.assign({},x),E):x,z=c?i.createElement("div",{className:`${O}-close`,onClick:e=>this.close(e,r,t)},i.createElement(k.Z,{size:"small"})):null,I=(0,n.Z)(r),M=o()(`${O}-content`,`${O}-content-${I?"ellipsis":"center"}`);return i.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||I?`${c?"Closable ":""}Tag: ${r}`:""},T),b?i.createElement("div",{className:`${O}-prefix-icon`},b):null,m?this.renderAvatar():null,i.createElement("div",{className:M},r),v?i.createElement("div",{className:`${O}-suffix-icon`},v):null,z)}}D.defaultProps={size:I[0],color:z[0],closable:!1,type:M[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},D.propTypes={children:c().node,tagKey:c().oneOfType([c().string,c().number]),size:c().oneOf(I),color:c().oneOf(z),type:c().oneOf(M),closable:c().bool,visible:c().bool,onClose:c().func,onClick:c().func,prefixIcon:c().node,suffixIcon:c().node,style:c().object,className:c().string,avatarSrc:c().string,avatarShape:c().oneOf(R),"aria-label":c().string}},34994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(18571),i=r(95291),s=r(61235),o=r.n(s),a=r(51810);class c extends a.Z{constructor(e){super(Object.assign(Object.assign({},c.defaultAdapter),e)),this.handleMouseInSideChange=e=>{this._adapter.handleMouseInSideChange(e)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map((e=>{let{id:t}=e;return t})).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let r=this._adapter.getState("list");r=r.map((r=>r.id===e?Object.assign(Object.assign({},r),t):r));const n=r.filter((t=>t.id===e));this._adapter.updateToast(r,[],n)}removeToast(e){let t=this._adapter.getState("list");const r=[];t=t.filter((t=>t.id!==e||(r.push(t),!1))),this._adapter.updateToast(t,r,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const l=`${r(4130).T}-toast`,u={PREFIX:l,WRAPPER:`${l}-wrapper`,LIST:`${l}-list`},d=["warning","success","info","error","default"],h=["normal","light"],p=["ltr","rtl"];var f=r(98880),m=r(74510),g=r(18751),y=r.n(g),b=r(84616),v=r(61045);class _ extends a.Z{constructor(e){super(Object.assign(Object.assign({},_.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&(0,v.Z)(e)&&(this._timer=setTimeout((()=>{this.close()}),1e3*e))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}var w=r(30714),S=r(641),E=r(23264),x=r(4202),T=r(52070),k=r(72457),C=r(4157);const O=u.PREFIX;class z extends f.Z{constructor(e){super(e),this.toastEle=n.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new _(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,r={warning:n.createElement(S.Z,null),success:n.createElement(E.Z,null),info:n.createElement(x.Z,null),error:n.createElement(T.Z,null)}[e],i="large",s=y()(`${O}-icon`,`${O}-icon-${e}`);return t?(0,C.ID)(t)?n.cloneElement(t,{size:i,className:`${O}-icon`}):t:e&&r?n.cloneElement(r,{size:i,className:s}):null}render(){const{content:e,type:t,theme:r,showClose:i,textMaxWidth:s,className:o,style:a}=this.props,c=this.props.direction||this.context.direction,l=y()(O,o,{[`${O}-${t}`]:!0,[`${O}-${r}`]:"light"===r,[`${O}-rtl`]:"rtl"===c}),u={};u.maxWidth=s;const d=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,h=n.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${t||"default"} type`,className:l,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${-10*d}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},n.createElement("div",{className:`${O}-content`},this.renderIcon(),n.createElement("span",{className:`${O}-content-text`,style:u,"x-semi-prop":"content"},e),i&&n.createElement("div",{className:`${O}-close-button`},n.createElement(w.Z,{onClick:e=>this.close(e),type:"tertiary",icon:n.createElement(k.Z,{"x-semi-prop":"icon"}),theme:"borderless",size:"small"}))));if(this.props.stack){const e=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return n.createElement("div",{className:`${O}-zero-height-wrapper`,style:{height:e}},h)}return h}}z.contextType=b.Z,z.propTypes={onClose:o().func,content:o().node,close:o().func,duration:o().number,theme:o().oneOf(h),type:o().oneOf(d),textMaxWidth:o().oneOfType([o().string,o().number]),style:o().object,className:o().string,showClose:o().bool,stack:o().bool,stackExpanded:o().bool,icon:o().node,direction:o().oneOf(p)},z.defaultProps={onClose:m.Z,content:"",close:m.Z,duration:3,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"};const I=z;var M=r(22582),R=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const D=(e,t)=>{var{afterClose:r}=e,i=R(e,["afterClose"]);const[s,o]=(0,n.useState)(!0);return n.useImperativeHandle(t,(()=>({close:()=>{o(!1)}}))),(0,n.useEffect)((()=>{s||r(i.id)}),[s]),s?n.createElement(I,Object.assign({},i,{close:()=>{o(!1)}})):null},N=n.forwardRef(D),j={motion:!0,zIndex:1010,duration:3};function A(){const[e,t]=function(){const[e,t]=n.useState([]);return[e,function(e,r){return t((t=>[{element:e,config:r},...t])),e=>{t((t=>t.filter((t=>{let{config:r}=t;return r.id!==e}))))}}]}(),r=(0,n.useRef)(new Map),i=e=>{const i=(0,M.ZP)("semi_toast_"),s=Object.assign(Object.assign({},e),{id:i});let o;const a=n.createElement(N,Object.assign({},s,{key:i,afterClose:e=>o(e),ref:e=>{var t;r.current.set(i,{close:null!==(t=null==e?void 0:e.close)&&void 0!==t?t:m.Z})}}));return o=t(a,Object.assign({},s)),i};return[{success:e=>i(Object.assign(Object.assign(Object.assign({},j),e),{type:"success"})),info:e=>i(Object.assign(Object.assign(Object.assign({},j),e),{type:"info"})),error:e=>i(Object.assign(Object.assign(Object.assign({},j),e),{type:"error"})),warning:e=>i(Object.assign(Object.assign(Object.assign({},j),e),{type:"warning"})),open:e=>i(Object.assign(Object.assign(Object.assign({},j),e),{type:"default"})),close:e=>(e=>{var t;const{close:n}=null!==(t=r.current.get(e))&&void 0!==t?t:{};null==n||n()})(e)},n.createElement(n.Fragment,null,Array.isArray(e)&&e.length?n.createElement(n.Fragment,null,e.map((e=>e.element))):null)]}var L=r(37717);const U=()=>{var e;return e=class e extends f.Z{constructor(e){super(e),this.stack=!1,this.innerWrapperRef=n.createRef(),this.handleMouseEnter=e=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=e=>{var t;if(this.stack){(null===(t=this.foundation.getInputWrapperRect())||void 0===t?void 0:t.height)&&this.foundation.handleMouseInSideChange(!1)}},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new c(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(e,t,r)=>{this.setState({list:e,removedItems:t,updatedItems:r})},handleMouseInSideChange:e=>{this.setState({mouseInSide:e})},getInputWrapperRect:()=>{var e;return null===(e=this.innerWrapperRef.current)||void 0===e?void 0:e.getBoundingClientRect()}})}static create(t){var r;const s=null!==(r=t.id)&&void 0!==r?r:(0,M.ZP)("toast");if(e.ref){const r=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map((e=>{e in t&&(r.style[e]="number"==typeof t[e]?`${t[e]}px`:t[e])})),Boolean(t.stack)!==e.ref.stack&&(e.ref.stack=Boolean(t.stack)),e.ref.has(s)?e.ref.update(s,Object.assign(Object.assign({},t),{id:s})):e.ref.add(Object.assign(Object.assign({},t),{id:s}))}else{const r=document.createElement("div");if(this.wrapperId||(this.wrapperId=(0,M.ZP)("toast-wrapper").slice(0,26)),r.className=u.WRAPPER,r.id=this.wrapperId,r.style.zIndex=String("number"==typeof t.zIndex?t.zIndex:e.defaultOpts.zIndex),["top","left","bottom","right"].map((n=>{if(n in e.defaultOpts||n in t){const i=t[n]?t[n]:e.defaultOpts[n];r.style[n]="number"==typeof i?`${i}px`:i}})),e.defaultOpts.getPopupContainer){e.defaultOpts.getPopupContainer().appendChild(r)}else document.body.appendChild(r);i.render(n.createElement(e,{ref:t=>e.ref=t}),r,(()=>{e.ref.add(Object.assign(Object.assign({},t),{id:s})),e.ref.stack=Boolean(t.stack)}))}return s}static close(t){e.ref&&e.ref.remove(t)}static destroyAll(){if(e.ref){e.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);i.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),e.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"info"}))}static warning(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"warning"}))}static error(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"error"}))}static success(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach((r=>{r in t&&(e.defaultOpts[r]=t[r])})),"number"==typeof t.zIndex&&(e.defaultOpts.zIndex=t.zIndex),"number"==typeof t.duration&&(e.defaultOpts.duration=t.duration),"function"==typeof t.getPopupContainer&&(e.defaultOpts.getPopupContainer=t.getPopupContainer)}has(e){return this.foundation.hasToast(e)}add(e){return this.foundation.addToast(e)}update(e,t){return this.foundation.updateToast(e,t)}remove(e){return this.foundation.removeToast(e)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:e}=this.state;const{removedItems:t,updatedItems:r}=this.state;e=Array.from(new Set([...e,...t]));const i=r.map((e=>{let{id:t}=e;return t})),s=e=>{var t;(null===(t=null==e?void 0:e.foundation)||void 0===t?void 0:t._id)&&i.includes(e.foundation._id)&&e.foundation.restartCloseTimer()};return n.createElement(n.Fragment,null,n.createElement("div",{className:y()({[`${u.PREFIX}-innerWrapper`]:!0,[`${u.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.map(((r,i)=>{const o=void 0!==t.find((e=>e.id===r.id));return n.createElement(L.Z,{key:r.id,motion:r.motion,animationState:o?"leave":"enter",startClassName:o?`${u.PREFIX}-animation-hide`:`${u.PREFIX}-animation-show`},(t=>{let{animationClassName:a,animationEventsNeedBind:c,isAnimating:l}=t;return o&&!l?null:n.createElement(I,Object.assign({},r,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:e.length,index:i},className:y()({[r.className]:Boolean(r.className),[a]:!0})},c,{style:Object.assign({},r.style),close:e=>this.remove(e),ref:s}))}))}))))}},e.defaultOpts={motion:!0,zIndex:1010,content:""},e.propTypes={content:o().node,duration:o().number,onClose:o().func,icon:o().node,direction:o().oneOf(p),stack:o().bool},e.defaultProps={},e};const P=class{static create(e){const t=U();return t.useToast=A,e&&t.config(e),t}}.create()},58102:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ae});var n=r(48712),i=r(59248),s=r(74535),o=r(74917),a=r(31061),c=r(65136);const l=function(e,t,r){(void 0!==r&&!(0,c.Z)(e[t],r)||void 0===r&&!(t in e))&&(0,a.Z)(e,t,r)};var u=r(10481),d=r(48556),h=r(12546),p=r(40078),f=r(88081),m=r(68167),g=r(54618),y=r(95434),b=r(95960),v=r(7445),_=r(11125),w=r(32721);const S=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var E=r(55348),x=r(9268);const T=function(e){return(0,E.Z)(e,(0,x.Z)(e))};const k=function(e,t,r,i,s,o,a){var c=S(e,r),u=S(t,r),E=a.get(u);if(E)l(e,r,E);else{var x=o?o(c,u,r+"",e,t,a):void 0,k=void 0===x;if(k){var C=(0,g.Z)(u),O=!C&&(0,b.Z)(u),z=!C&&!O&&(0,w.Z)(u);x=u,C||O||z?(0,g.Z)(c)?x=c:(0,y.Z)(c)?x=(0,p.Z)(c):O?(k=!1,x=(0,d.Z)(u,!0)):z?(k=!1,x=(0,h.Z)(u,!0)):x=[]:(0,_.Z)(u)||(0,m.Z)(u)?(x=c,(0,m.Z)(c)?x=T(c):(0,v.Z)(c)&&!(0,n.Z)(c)||(x=(0,f.Z)(u))):k=!1}k&&(a.set(u,x),s(x,u,i,o,a),a.delete(u)),l(e,r,x)}};const C=function e(t,r,n,i,s){t!==r&&(0,u.Z)(r,(function(a,c){if(s||(s=new o.Z),(0,v.Z)(a))k(t,r,c,n,e,i,s);else{var u=i?i(S(t,c),a,c+"",t,r,s):void 0;void 0===u&&(u=a),l(t,c,u)}}),x.Z)};var O=r(51931),z=r(97588);const I=function(e){return(0,O.Z)((function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&(0,z.Z)(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,s)}return t}))}((function(e,t,r){C(e,t,r)}));var M=r(73221),R=r(30657),D=r(18571),N=r(18751),j=r.n(N),A=r(61235),L=r.n(A),U=r(50867),P=r(37678),G=r(39362),Z=r(42454),F=r.n(Z),X=r(64729),K=r(28619),B=r(52073);const V=(0,r(18506).A)((function(e){return D.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),D.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),D.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}),"copy");var W=r(3092);const H=U.U.PREFIX;class Y extends D.PureComponent{constructor(e){super(e),this.copy=e=>{const{content:t,duration:r,onCopy:n}=this.props,i=F()(t);n&&n(e,t,i),this.setCopied(t,r)},this.setCopied=(e,t)=>{this.setState({copied:!0,item:e}),this._timeId=setTimeout((()=>{this.resetCopied()}),1e3*t)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:e}=this.props;return void 0!==e?e:D.createElement(K.Z,{componentName:"Typography"},(e=>D.createElement("span",null,D.createElement(B.Z,null),e.copied)))},this.renderCopyIcon=()=>{const{icon:e}=this.props,t={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:e=>(0,W.Z)(e)&&this.copy(e)},r=D.createElement("a",{className:`${H}-action-copy-icon`},D.createElement(V,Object.assign({onClick:this.copy},t)));return D.isValidElement(e)?D.cloneElement(e,t):r},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:r,copyTip:n}=this.props,{copied:i}=this.state,s=j()(t,{[`${H}-action-copy`]:!i,[`${H}-action-copied`]:i});return D.createElement(K.Z,{componentName:"Typography"},(t=>D.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:s,ref:r},i?this.renderSuccessTip():D.createElement(G.Z,{content:void 0!==n?n:t.copy},this.renderCopyIcon()))))}}Y.propTypes={content:L().string,onCopy:L().func,successTip:L().node,copyTip:L().node,duration:L().number,style:L().object,className:L().string,icon:L().node},Y.defaultProps={content:"",onCopy:X.Z,duration:3,style:{},className:""};const $=Y;var J=r(28246),Q=r(95291);let q;function ee(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}const te=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(0===r.length)return"";q||(q=document.createElement("div"),q.setAttribute("aria-hidden","true"),document.body.appendChild(q));const a=window.getComputedStyle(e),c=(l=a,Array.prototype.slice.apply(l).map((e=>`${e}: ${l.getPropertyValue(e)};`)).join(""));var l;const u=ee(a.lineHeight),d=Math.round(u*(t+1)+ee(a.paddingTop)+ee(a.paddingBottom));function h(){const e=q.scrollWidth<=q.offsetWidth,r=q.scrollHeight<d;return 1===t?e&&r:r}q.setAttribute("style",c),q.style.position="fixed",q.style.left="0",q.style.height="auto",q.style.top="-999999px",q.style.zIndex="-1000",q.style.textOverflow="clip",q.style.webkitLineClamp="none",Q.render(D.createElement(D.Fragment,null),q);const p=document.createElement("span"),f=document.createTextNode(r);if(p.appendChild(f),s.length>0){const e=document.createTextNode(s);p.appendChild(e)}function m(e,t){const r=e.length;return t?"end"===o?e.slice(0,t)+i:e.slice(0,t)+i+e.slice(r-t,r):i}q.appendChild(p),Object.values((0,M.Z)(n,"expand")).map((e=>e&&q.appendChild(e.cloneNode(!0))));let g=r;return h()||(q.innerHTML="",q.appendChild(p),Object.values(n).map((e=>e&&q.appendChild(e.cloneNode(!0)))),g=function e(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.length,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const a=Math.floor((n+s)/2),c=m(r,a);if(t.textContent=c,n>=s-1&&s>0)for(let i=s;i>=n;i-=1){const e=m(r,i);if(t.textContent=e,h())return e}else if(0===s)return i;return h()?e(t,r,a,s,a):e(t,r,n,a,o)}(f,r,0,"middle"===o?Math.floor(r.length/2):r.length)),q.innerHTML="",g};var re=r(72839),ne=r(4157),ie=r(97228),se=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const oe=U.U.PREFIX;class ae extends D.Component{constructor(e){super(e),this.onResize=()=>{this.rafId&&window.cancelAnimationFrame(this.rafId),this.rafId=window.requestAnimationFrame(this.getEllipsisState.bind(this))},this.canUseCSSEllipsis=()=>{const{copyable:e}=this.props,{expandable:t,expandText:r,pos:n,suffix:i}=this.getEllipsisOpt();return!t&&(0,R.Z)(r)&&!e&&"end"===n&&!i.length},this.shouldTruncated=e=>{if(!e||e<1)return!1;return e<=1?this.wrapperRef.current.scrollWidth>this.wrapperRef.current.offsetWidth:this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight},this.showTooltip=()=>{var e,t;const{isOverflowed:r,isTruncated:n,expanded:i}=this.state,{showTooltip:s,expandable:o,expandText:a}=this.getEllipsisOpt(),c=!i&&(r||n),l=!o&&(0,R.Z)(a)&&c&&s;if(!l)return l;const u={type:"tooltip"};return"object"==typeof s?s.type&&"popover"===s.type.toLowerCase()?I({opts:{showArrow:!0}},s,{opts:{className:j()({[`${oe}-ellipsis-popover`]:!0,[null===(e=null==s?void 0:s.opts)||void 0===e?void 0:e.className]:Boolean(null===(t=null==s?void 0:s.opts)||void 0===t?void 0:t.className)})}}):Object.assign(Object.assign({},u),s):u},this.toggleOverflow=e=>{const{onExpand:t,expandable:r,collapsible:n}=this.getEllipsisOpt(),{expanded:i}=this.state;t&&t(!i,e),(r&&!i||n&&i)&&this.setState({expanded:!i})},this.getEllipsisOpt=()=>{const{ellipsis:e}=this.props;if(!e)return{};return Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:e.expandable?this.expandStr:void 0,collapseText:e.collapsible?this.collapseStr:void 0},"object"==typeof e?e:null)},this.renderExpandable=()=>{const{expanded:e,isTruncated:t}=this.state;if(!t)return null;const{expandText:r,expandable:n,collapseText:i,collapsible:s}=this.getEllipsisOpt(),o=!n&&(0,R.Z)(r),a=!s&&(0,R.Z)(i);let c;return e||o?e&&!a&&(c=i):c=r,o&&a?null:D.createElement("a",{role:"button",tabIndex:0,className:`${oe}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":c,onClick:this.toggleOverflow,onKeyPress:e=>(0,W.Z)(e)&&this.toggleOverflow(e)},c)},this.getEllipsisStyle=()=>{const{ellipsis:e,component:t}=this.props;if(!e)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:r}=this.getEllipsisOpt(),{expanded:n}=this.state,i=!n&&this.canUseCSSEllipsis();return{ellipsisCls:j()({[`${oe}-ellipsis`]:!0,[`${oe}-ellipsis-single-line`]:1===r,[`${oe}-ellipsis-multiple-line`]:r>1,[`${oe}-ellipsis-multiple-line-text`]:r>1&&"span"===t,[`${oe}-ellipsis-overflow-ellipsis`]:1===r&&i,[`${oe}-ellipsis-overflow-ellipsis-text`]:1===r&&i&&"span"===t}),ellipsisStyle:i&&r>1?{WebkitLineClamp:r}:{}}},this.renderEllipsisText=e=>{const{suffix:t}=e,{children:r}=this.props,{isTruncated:n,expanded:i,ellipsisContent:s}=this.state;return i||!n?D.createElement(D.Fragment,null,r,t&&t.length?t:null):D.createElement("span",null,s,t)},this.state={editable:!1,copied:!1,isOverflowed:!0,ellipsisContent:e.children,expanded:!1,isTruncated:!0,prevChildren:null},this.wrapperRef=D.createRef(),this.expandRef=D.createRef(),this.copyRef=D.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize()}static getDerivedStateFromProps(e,t){const{prevChildren:r}=t,n={};return n.prevChildren=e.children,e.ellipsis&&r!==e.children&&(n.isOverflowed=!0,n.ellipsisContent=e.children,n.expanded=!1,n.isTruncated=!0),n}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}getEllipsisState(){const{rows:e,suffix:t,pos:r}=this.getEllipsisOpt(),{children:n}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return this.onResize(),!1;const{expanded:s}=this.state,o=this.canUseCSSEllipsis();if((0,i.Z)(n))return void this.setState({isTruncated:!1,isOverflowed:!1});if((0,re.Z)("children"in this.props&&"string"!=typeof n,"[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!e||e<0||s)return;if(o){const t=this.shouldTruncated(e);return void this.setState({isOverflowed:t,isTruncated:!1})}const a={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},c=te(this.wrapperRef.current,e,String(n),a,"...",t,r);this.setState({isOverflowed:!1,ellipsisContent:c,isTruncated:n!==c})}renderOperations(){return D.createElement(D.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:r}=this.props;if(!t)return null;const n=null!==(e=null==t?void 0:t.content)&&void 0!==e?e:r;let i,s=!1;Array.isArray(n)?(i="",n.forEach((e=>{"object"==typeof e&&(s=!0),i+=String(e)}))):("object"!=typeof n||(s=!0),i=String(n)),(0,re.Z)(s,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const o=Object.assign({content:i,duration:3},"object"==typeof t?t:null);return D.createElement($,Object.assign({},o,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props;if(!e)return null;const r="small"===t?"small":"default";return D.createElement("span",{className:`${oe}-icon`,"x-semi-prop":"icon"},(0,ne.ID)(e)?D.cloneElement(e,{size:r}):e)}renderContent(){const e=this.props,{component:t,children:r,className:n,type:i,spacing:o,disabled:a,style:c,ellipsis:l,icon:u,size:d,link:h,heading:p,weight:f}=e,m=se(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),g=(0,M.Z)(m,["strong","editable","mark","copyable","underline","code","delete"]),y=this.renderIcon(),b=this.getEllipsisOpt(),{ellipsisCls:v,ellipsisStyle:_}=this.getEllipsisStyle();let w=l?this.renderEllipsisText(b):r;const S=j()({[`${oe}-link-text`]:h,[`${oe}-link-underline`]:this.props.underline&&h});w=((e,t)=>{const{mark:r,code:n,underline:i,strong:s,link:o,disabled:a}=e;let c=t;const l=(e,t)=>{let r={};e&&("object"==typeof e&&(r=Object.assign({},e)),c=D.createElement(t,r,c))};return l(r,"mark"),l(n,"code"),l(i&&!o,"u"),l(s,"strong"),l(e.delete,"del"),l(o,a?"span":"a"),c})(this.props,D.createElement(D.Fragment,null,y,this.props.link?D.createElement("span",{className:S},w):w));const E=(0,s.Z)(p)&&/^h[1-6]$/.test(p),x=j()(n,v,{[`${oe}-${i}`]:i&&!h,[`${oe}-${d}`]:d,[`${oe}-link`]:h,[`${oe}-disabled`]:a,[`${oe}-${o}`]:o,[`${oe}-${p}`]:E,[`${oe}-${p}-weight-${f}`]:E&&f&&isNaN(Number(f))}),T=Object.assign(Object.assign({},isNaN(Number(f))?{}:{fontWeight:f}),c);return D.createElement(P.Z,Object.assign({className:x,style:Object.assign(Object.assign({},T),_),component:t,forwardRef:this.wrapperRef},g),w,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),r=this.renderContent();if(t){const{type:i,opts:s,renderTooltip:o}=t;return(0,n.Z)(o)?o(e,r):"popover"===i.toLowerCase()?D.createElement(J.Z,Object.assign({content:e,position:"top"},s),r):D.createElement(G.Z,Object.assign({content:e,position:"top"},s),r)}return r}render(){const e=D.createElement(K.Z,{componentName:"Typography"},(e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper())));return this.props.ellipsis?D.createElement(ie.Z,{onResize:this.onResize,observeParent:!0},e):e}}ae.propTypes={children:L().node,copyable:L().oneOfType([L().shape({text:L().string,onCopy:L().func,successTip:L().node,copyTip:L().node}),L().bool]),delete:L().bool,disabled:L().bool,ellipsis:L().oneOfType([L().shape({rows:L().number,expandable:L().bool,expandText:L().string,onExpand:L().func,suffix:L().string,showTooltip:L().oneOfType([L().shape({type:L().string,opts:L().object}),L().bool]),collapsible:L().bool,collapseText:L().string,pos:L().oneOf(["end","middle"])}),L().bool]),mark:L().bool,underline:L().bool,link:L().oneOfType([L().object,L().bool]),spacing:L().oneOf(U.j.SPACING),strong:L().bool,size:L().oneOf(U.j.SIZE),type:L().oneOf(U.j.TYPE),style:L().object,className:L().string,icon:L().oneOfType([L().node,L().string]),heading:L().string,component:L().string},ae.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""}},89471:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(18571),i=r(61235),s=r.n(i),o=r(18751),a=r.n(o),c=r(50867),l=r(58102);const u=c.U.PREFIX;class d extends n.PureComponent{render(){const{className:e}=this.props,t=a()(e,`${u}-paragraph`);return n.createElement(l.Z,Object.assign({component:"p"},this.props,{className:t}))}}d.propTypes={copyable:s().oneOfType([s().object,s().bool]),delete:s().bool,disabled:s().bool,ellipsis:s().oneOfType([s().object,s().bool]),mark:s().bool,link:s().oneOfType([s().object,s().bool]),underline:s().bool,strong:s().bool,type:s().oneOf(c.j.TYPE),size:s().oneOf(c.j.SIZE),spacing:s().oneOf(c.j.SPACING),style:s().object,className:s().string,component:s().string},d.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""}},75056:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(18571),i=r(61235),s=r.n(i),o=r(50867),a=r(58102);class c extends n.PureComponent{render(){return n.createElement(a.Z,Object.assign({component:"span"},this.props))}}c.propTypes={copyable:s().oneOfType([s().object,s().bool]),delete:s().bool,disabled:s().bool,icon:s().oneOfType([s().node,s().string]),ellipsis:s().oneOfType([s().object,s().bool]),mark:s().bool,underline:s().bool,link:s().oneOfType([s().object,s().bool]),strong:s().bool,type:s().oneOf(o.j.TYPE),size:s().oneOf(o.j.SIZE),style:s().object,className:s().string,code:s().bool,component:s().string},c.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""}},37678:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(18571),i=r(18751),s=r.n(i),o=r(61235),a=r.n(o),c=r(50867),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const u=c.U.PREFIX;class d extends n.PureComponent{render(){const e=this.props,{component:t,className:r,children:i,forwardRef:o}=e,a=l(e,["component","className","children","forwardRef"]),c=t,d=s()(u,r);return n.createElement(c,Object.assign({className:d,ref:o},a),i)}}d.defaultProps={component:"article",style:{},className:""},d.propTypes={component:a().string,style:a().object,className:a().string};const h=d},96452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(57102),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&u(e,r,t[r]);return e};const h={version:void 0};var p=(e,t={})=>{return n.Z.call("openUrl",e,(r=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(r,o(i))));var r,i}},84900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(57102),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&u(e,r,t[r]);return e};const h={version:void 0};var p=(e,t={})=>{return n.Z.call("reportAppLog",e,(r=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(r,o(i))));var r,i}},47920:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>p});var n=r(57102),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&u(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&u(e,r,t[r]);return e};const h={version:void 0};var p=(e,t={})=>{return n.Z.call("showDialog",e,(r=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(r,o(i))));var r,i}},45806:e=>{var t=.1,r="function"==typeof Float32Array;function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function o(e,t,r){return((n(t,r)*e+i(t,r))*e+s(t))*e}function a(e,t,r){return 3*n(t,r)*e*e+2*i(t,r)*e+s(t)}function c(e){return e}e.exports=function(e,n,i,s){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&i===s)return c;for(var l=r?new Float32Array(11):new Array(11),u=0;u<11;++u)l[u]=o(u*t,e,i);function d(r){for(var n=0,s=1;10!==s&&l[s]<=r;++s)n+=t;--s;var c=n+(r-l[s])/(l[s+1]-l[s])*t,u=a(c,e,i);return u>=.001?function(e,t,r,n){for(var i=0;i<4;++i){var s=a(t,r,n);if(0===s)return t;t-=(o(t,r,n)-e)/s}return t}(r,c,e,i):0===u?c:function(e,t,r,n,i){var s,a,c=0;do{(s=o(a=t+(r-t)/2,n,i)-e)>0?r=a:t=a}while(Math.abs(s)>1e-7&&++c<10);return a}(r,n,n+t,e,i)}return function(e){return 0===e?0:1===e?1:o(d(e),n,s)}}},12437:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},42454:e=>{"use strict";const t=(e,{target:t=document.body}={})=>{const r=document.createElement("textarea"),n=document.activeElement;r.value=e,r.setAttribute("readonly",""),r.style.contain="strict",r.style.position="absolute",r.style.left="-9999px",r.style.fontSize="12pt";const i=document.getSelection();let s=!1;i.rangeCount>0&&(s=i.getRangeAt(0)),t.append(r),r.select(),r.selectionStart=0,r.selectionEnd=e.length;let o=!1;try{o=document.execCommand("copy")}catch(a){}return r.remove(),s&&(i.removeAllRanges(),i.addRange(s)),n&&n.focus(),o};e.exports=t,e.exports.default=t},45340:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],s=0;s<4;s++)8*n+6*s<=8*e.length?r.push(t.charAt(i>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},77517:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,o,l;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},86238:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},57705:(e,t,r)=>{var n,i,s,o,a;n=r(45340),i=r(12437).utf8,s=r(86238),o=r(12437).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var f=a._ff,m=a._gg,g=a._hh,y=a._ii;for(p=0;p<r.length;p+=16){var b=l,v=u,_=d,w=h;l=f(l,u,d,h,r[p+0],7,-680876936),h=f(h,l,u,d,r[p+1],12,-389564586),d=f(d,h,l,u,r[p+2],17,606105819),u=f(u,d,h,l,r[p+3],22,-1044525330),l=f(l,u,d,h,r[p+4],7,-176418897),h=f(h,l,u,d,r[p+5],12,1200080426),d=f(d,h,l,u,r[p+6],17,-1473231341),u=f(u,d,h,l,r[p+7],22,-45705983),l=f(l,u,d,h,r[p+8],7,1770035416),h=f(h,l,u,d,r[p+9],12,-1958414417),d=f(d,h,l,u,r[p+10],17,-42063),u=f(u,d,h,l,r[p+11],22,-1990404162),l=f(l,u,d,h,r[p+12],7,1804603682),h=f(h,l,u,d,r[p+13],12,-40341101),d=f(d,h,l,u,r[p+14],17,-1502002290),l=m(l,u=f(u,d,h,l,r[p+15],22,1236535329),d,h,r[p+1],5,-165796510),h=m(h,l,u,d,r[p+6],9,-1069501632),d=m(d,h,l,u,r[p+11],14,643717713),u=m(u,d,h,l,r[p+0],20,-373897302),l=m(l,u,d,h,r[p+5],5,-701558691),h=m(h,l,u,d,r[p+10],9,38016083),d=m(d,h,l,u,r[p+15],14,-660478335),u=m(u,d,h,l,r[p+4],20,-405537848),l=m(l,u,d,h,r[p+9],5,568446438),h=m(h,l,u,d,r[p+14],9,-1019803690),d=m(d,h,l,u,r[p+3],14,-187363961),u=m(u,d,h,l,r[p+8],20,1163531501),l=m(l,u,d,h,r[p+13],5,-1444681467),h=m(h,l,u,d,r[p+2],9,-51403784),d=m(d,h,l,u,r[p+7],14,1735328473),l=g(l,u=m(u,d,h,l,r[p+12],20,-1926607734),d,h,r[p+5],4,-378558),h=g(h,l,u,d,r[p+8],11,-2022574463),d=g(d,h,l,u,r[p+11],16,1839030562),u=g(u,d,h,l,r[p+14],23,-35309556),l=g(l,u,d,h,r[p+1],4,-1530992060),h=g(h,l,u,d,r[p+4],11,1272893353),d=g(d,h,l,u,r[p+7],16,-155497632),u=g(u,d,h,l,r[p+10],23,-1094730640),l=g(l,u,d,h,r[p+13],4,681279174),h=g(h,l,u,d,r[p+0],11,-358537222),d=g(d,h,l,u,r[p+3],16,-722521979),u=g(u,d,h,l,r[p+6],23,76029189),l=g(l,u,d,h,r[p+9],4,-640364487),h=g(h,l,u,d,r[p+12],11,-421815835),d=g(d,h,l,u,r[p+15],16,530742520),l=y(l,u=g(u,d,h,l,r[p+2],23,-995338651),d,h,r[p+0],6,-198630844),h=y(h,l,u,d,r[p+7],10,1126891415),d=y(d,h,l,u,r[p+14],15,-1416354905),u=y(u,d,h,l,r[p+5],21,-57434055),l=y(l,u,d,h,r[p+12],6,1700485571),h=y(h,l,u,d,r[p+3],10,-1894986606),d=y(d,h,l,u,r[p+10],15,-1051523),u=y(u,d,h,l,r[p+1],21,-2054922799),l=y(l,u,d,h,r[p+8],6,1873313359),h=y(h,l,u,d,r[p+15],10,-30611744),d=y(d,h,l,u,r[p+6],15,-1560198380),u=y(u,d,h,l,r[p+13],21,1309151649),l=y(l,u,d,h,r[p+4],6,-145523070),h=y(h,l,u,d,r[p+11],10,-1120210379),d=y(d,h,l,u,r[p+2],15,718787259),u=y(u,d,h,l,r[p+9],21,-343485551),l=l+b>>>0,u=u+v>>>0,d=d+_>>>0,h=h+w>>>0}return n.endian([l,u,d,h])})._ff=function(e,t,r,n,i,s,o){var a=e+(t&r|~t&n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._gg=function(e,t,r,n,i,s,o){var a=e+(t&n|r&~n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._hh=function(e,t,r,n,i,s,o){var a=e+(t^r^n)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._ii=function(e,t,r,n,i,s,o){var a=e+(r^(t|~n))+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(a(e,t));return t&&t.asBytes?r:t&&t.asString?o.bytesToString(r):n.bytesToHex(r)}},20165:(e,t,r)=>{"use strict";r.d(t,{jd:()=>s.O,FY:()=>o.F,Pi:()=>a.P,fv:()=>u});r(92432);var n=r(71975),i=r(25536),s=(r(69772),r(44115)),o=r(68487),a=r(77482),c=(r(45194),r(60963)),l=r(18571);function u(e,t){return(0,l.useState)((function(){return(0,c.LO)(e(),t,{autoBind:!0})}))[0]}var d;r(37811),r(70382);(0,i.z0)(n.m);d=s.O.finalizeAllImmediately},75107:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,n){return e[0]===t&&(r=n,!0)})),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r++){var i=n[r];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s=void 0!==r.g&&r.g.Math===Math?r.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,i=0;function s(){r&&(r=!1,e()),n&&c()}function a(){o(s)}function c(){var e=Date.now();if(r){if(e-i<2)return;n=!0}else r=!0,n=!1,setTimeout(a,t);i=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;a.some((function(e){return!!~r.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||s},h=b(0,0,0,0);function p(e){return parseFloat(e)||0}function f(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){return t+p(e["border-"+r+"-width"])}),0)}function m(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return h;var n=d(e).getComputedStyle(e),i=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r++){var i=n[r],s=e["padding-"+i];t[i]=p(s)}return t}(n),s=i.left+i.right,o=i.top+i.bottom,a=p(n.width),c=p(n.height);if("border-box"===n.boxSizing&&(Math.round(a+s)!==t&&(a-=f(n,"left","right")+s),Math.round(c+o)!==r&&(c-=f(n,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var l=Math.round(a+s)-t,u=Math.round(c+o)-r;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return b(i.left,i.top,a,c)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function y(e){return i?g(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):m(e):h}function b(e,t,r,n){return{x:e,y:t,width:r,height:n}}var v=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=y(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var r,n,i,s,o,a,c,l=(n=(r=t).x,i=r.y,s=r.width,o=r.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),u(c,{x:n,y:i,width:s,height:o,top:i,right:n+s,bottom:o+i,left:n}),c);u(this,{target:e,contentRect:l})},w=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!=typeof WeakMap?new WeakMap:new n,E=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=l.getInstance(),n=new w(t,r,this);S.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){E.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));const x=void 0!==s.ResizeObserver?s.ResizeObserver:E},46092:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(37721),i=r(8344),s=r(88793);const o=function(e,t,r){for(var o=-1,a=t.length,c={};++o<a;){var l=t[o],u=(0,n.Z)(e,l);r(u,l)&&(0,i.Z)(c,(0,s.Z)(l,e),u)}return c}},51931:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(80058),i=r(70802),s=r(41023);const o=function(e,t){return(0,s.Z)((0,i.Z)(e,t,n.Z),e+"")}},8344:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(82736),i=r(88793),s=r(17022),o=r(7445),a=r(337);const c=function(e,t,r,c){if(!(0,o.Z)(e))return e;for(var l=-1,u=(t=(0,i.Z)(t,e)).length,d=u-1,h=e;null!=h&&++l<u;){var p=(0,a.Z)(t[l]),f=r;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=d){var m=h[p];void 0===(f=c?c(m,p,h):void 0)&&(f=(0,o.Z)(m)?m:(0,s.Z)(t[l+1])?[]:{})}(0,n.Z)(h,p,f),h=h[p]}return e}},36104:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(95847);const i=function(e,t){return t="function"==typeof t?t:void 0,(0,n.Z)(e,5,t)}},58437:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});const n=function(e,t){return null!=e&&t in Object(e)};var i=r(88793),s=r(68167),o=r(54618),a=r(17022),c=r(36526),l=r(337);const u=function(e,t,r){for(var n=-1,u=(t=(0,i.Z)(t,e)).length,d=!1;++n<u;){var h=(0,l.Z)(t[n]);if(!(d=null!=e&&r(e,h)))break;e=e[h]}return d||++n!=u?d:!!(u=null==e?0:e.length)&&(0,c.Z)(u)&&(0,a.Z)(h,u)&&((0,o.Z)(e)||(0,s.Z)(e))};const d=function(e,t){return null!=e&&u(e,t,n)}},95434:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(63396),i=r(11474);const s=function(e){return(0,i.Z)(e)&&(0,n.Z)(e)}},59248:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){return null===e}},61045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(14276),i=r(11474);const s=function(e){return"number"==typeof e||(0,i.Z)(e)&&"[object Number]"==(0,n.Z)(e)}},74535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(14276),i=r(54618),s=r(11474);const o=function(e){return"string"==typeof e||!(0,i.Z)(e)&&(0,s.Z)(e)&&"[object String]"==(0,n.Z)(e)}},32547:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(46092),i=r(58437);const s=function(e,t){return(0,n.Z)(e,t,(function(t,r){return(0,i.Z)(e,r)}))};const o=(0,r(69968).Z)((function(e,t){return null==e?{}:s(e,t)}))},4911:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(8344);const i=function(e,t,r){return null==e?e:(0,n.Z)(e,t,r)}},78789:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(34073),i=r(40078),s=r(54618),o=r(31674),a=r(89614),c=r(337),l=r(98435);const u=function(e){return(0,s.Z)(e)?(0,n.Z)(e,c.Z):(0,o.Z)(e)?[e]:(0,i.Z)((0,a.Z)((0,l.Z)(e)))}}}]);