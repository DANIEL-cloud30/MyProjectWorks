/*! For license information please see 319.fb92145e.js.LICENSE.txt */
(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[319],{61458:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(18571),i=n(4509);function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.immediately,l=void 0!==a&&a,c=o.trailing,u=void 0===c||c,d=o.leading,h=void 0!==d&&d,p=n,f=t,g=(0,r.useRef)(),m=(0,r.useRef)(!1),y=(0,r.useRef)(!1),b=(0,r.useRef)(e);b.current=e;var v=(0,r.useRef)([]),_=(0,r.useCallback)((function(){g.current&&clearTimeout(g.current)}),[]),w=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(v.current=t,l&&!m.current)return b.current.apply(b,s(v.current)),void(m.current=!0);_(),h&&0==y.current&&(b.current.apply(b,s(v.current)),y.current=!0),g.current=function(e){return window.setTimeout((function(){e&&b.current.apply(b,s(v.current)),y.current=!1}),f)}(u)}),[f,_]);return(0,i.Z)((function(){return w(),_}),[].concat(s(p),[w])),(0,r.useEffect)((function(){return _}),[]),{run:w,cancel:_}}},54275:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18571);const i=function(e){var t=(0,r.useRef)();return t.current=(0,r.useMemo)((function(){return e}),[e]),(0,r.useCallback)((function(){var e=t.current;return e&&e.apply(void 0,arguments)}),[t])}},43792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(18571),i=n(75107),s=n(4509);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.immediately,l=void 0!==a&&a,c=i.trailing,u=void 0===c||c,d=i.leading,h=void 0!==d&&d,p=n,f=t,g=(0,r.useRef)(),m=(0,r.useRef)(!1),y=(0,r.useRef)(e);y.current=e;var b=(0,r.useRef)([]),v=(0,r.useCallback)((function(){g.current&&clearTimeout(g.current),g.current=void 0}),[]),_=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(b.current=t,!g.current){if(l&&!m.current)return y.current.apply(y,o(b.current)),void(m.current=!0);h&&y.current.apply(y,o(b.current)),g.current=function(e){return window.setTimeout((function(){e&&y.current.apply(y,o(b.current)),g.current=void 0,m.current=!1}),f)}(u)}}),[f,v]);return(0,s.Z)((function(){_()}),[].concat(o(p),[_])),(0,r.useEffect)((function(){return v}),[]),{run:_,cancel:v}};function c(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const p=function(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=50;"string"==typeof s?t=s:(s.dimension&&(t=s.dimension),s.throttle&&(a=s.throttle),s.throttleOption&&(n=s.throttleOption));var d=(0,r.useRef)(),h=u((0,r.useState)((function(){var t="function"==typeof e?e():e;return{width:(t||{}).clientWidth||0,height:(t||{}).clientHeight||0}})),2),p=h[0],f=h[1],g=(0,r.useCallback)((function(e){if(null!=e&&e.length){var n=e[0].contentRect,r=n.width,i=n.height;f((function(e){return e?"width"===t?e.width!==r?{width:r,height:i}:e:"height"===t?e.height!==i?{width:r,height:i}:e:e.width!==r||e.height!==i?{width:r,height:i}:e:{width:r,height:i}}))}}),[t]),m=l(g,a,[g],n).run;return(0,r.useLayoutEffect)((function(){var t=d.current;e&&(t="function"==typeof e?e():e);var n=new i.Z(m);return t&&n.observe(t),function(){return n.disconnect()}}),[d.current,"function"==typeof e?void 0:e,g].concat(c(o))),[d,p]}},4509:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18571);const i=function(e,t){var n=(0,r.useRef)(!1);(0,r.useEffect)((function(){return n.current?e():(n.current=!0,function(){})}),t)}},50140:function(e,t,n){e.exports=function(){"use strict";var e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var i=r;function s(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(l(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(a(n))for(i=Array.prototype.slice.call(arguments,1),r=(c=n.slice()).length,o=0;o<r;o++)c[o].apply(this,i);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=l(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};const c={debug:!1,region:"i18n",external:{},getSliceFunc:null,uploadSliceCount:5,retryUploadTime:2,retryProcess:!0,retryProcessTime:3,retryTaskTime:2,progressMonitorTime:10,progressMonitorSpeed:50,schema:"https",enableDiskBreakpoint:!0,replace:{},fixedSliceSize:!1,selectRouteFileSize:1048576,enableDmSchemaHeader:!1,multiTabUploadOptimize:!0,forTikTok:!0},u={initUploadFileUrl:"{tosDomain}/upload/v1/{oid}?uploadmode={uploadmode}&phase=init",uploadChunkedUrl:"{tosDomain}/upload/v1/{oid}?uploadid={uploadId}&part_number={part_number}&phase=transfer",uploadMergeUrl:"{tosDomain}/upload/v1/{oid}?uploadmode={uploadmode}&phase=finish&uploadid={uploadId}",getUploadListUrl:"{tosDomain}/upload/v1/{oid}?uploadid={uploadId}&action=part_list",directUploadFileUrl:"{tosDomain}/upload/v1/{oid}",getUploadStatusUrl:"{tosDomain}/upload/v1/{oid}?uploadmode=stream&uploadid={uploadid}&size={size}&action=fetch_state&part_number={part_number}"};var d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))((function(t,i){function s(e){try{a(r.next(e))}catch(t){i(t)}}function o(e){try{a(r.throw(e))}catch(t){i(t)}}function a(e){e.done?t(e.value):new n((function(t){t(e.value)})).then(s,o)}a((r=r.apply(e,[])).next())}))}function p(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var m,y=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function r(i){t(i),n.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&g(this._hooks[e]).forEach((function(e){try{e(t)}catch{}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),b=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},v=(m=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return m+=1}),_=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof t&&"number"==typeof n){var r,i=[];n=n<=25?n:n%25;var s=String.fromCharCode(n+97);r=e.split(s);for(var o=0;o<r.length;o++){var a=parseInt(r[o],n);a=1*a^t;var l=String.fromCharCode(a);i.push(l)}return i.join("")}}(e,64,25)},w=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},S=function(e){var t=document.createElement("a");return t.href=e,t},x=function(e){var t={};try{var n=S(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch{t[n]=r}}))}catch{}return t},E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{};function C(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function k(e,t){return e(t={exports:{}},t.exports),t.exports}var O,T,I,z=k((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function s(t,n,s){if(typeof document<"u"){"number"==typeof(s=e({path:"/"},i.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch{}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,!0!==s[l]&&(a+="="+s[l].split(";")[0]));return document.cookie=t+"="+n+a}}function o(e,n){if(typeof document<"u"){for(var i={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var a=s[o].split("="),l=a.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(r.read||r)(l,c)||t(l),n)try{l=JSON.parse(l)}catch{}if(i[c]=l,e===c)break}catch{}}return e?i[e]:i}}return i.set=s,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,n){s(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))},e.exports=n()})),R=function(e,t){try{return z.get(e)}catch{return""}},D=function(e,t,n,r){try{var i=r||document.domain,s=+new Date+(n||6048e5);z.set(e,t,{expires:new Date(s),path:"/",domain:i})}catch{}},M=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return R(e)},e.prototype.setCookie=function(e,t,n,r){D(e,t,n,r)},e}(),N={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch{}return n||{}}catch{}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch{}},removeItem:function(e){try{localStorage.removeItem(e)}catch{}},getCookie:function(e,t){return R(e)},setCookie:function(e,t,n,r){D(e,t,n,r)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch{return!1}}()},j={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch{}return n||{}}catch{}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch{}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch{}},getCookie:function(e,t){return R(e)},setCookie:function(e,t,n,r){D(e,t,n,r)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch{return!1}}()},P=function(){function e(e,t){this._storage=t&&"session"===t?j:!e&&N.isSupportLS?N:new M}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,r){this._storage.setCookie(e,t,n,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),A=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e,t=window.navigator.userAgent,n=window.navigator.language,r=document.referrer,i=r?S(r).hostname:"",s=x(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web",a=(null===(e=window.navigator.connection)||void 0===e?void 0:e.effectiveType)||"";this.utm=function(e,t,n,r){var i=new P(!1),s=new P(!1,"session"),o=e?"_tea_utm_cache_"+e:"_tea_utm_cache",a=e?"_$utm_from_url_"+e:"_$utm_from_url",l={},c=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],u={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var d=!1;for(var h in u)u[h]&&(-1!==c.indexOf(h)?(l.hasOwnProperty("tracer_data")||(l.tracer_data={}),l.tracer_data[h]=u[h]):l[h]=u[h],d=!0);if(d)s.setItem(a,"1"),i.setCookie(o,JSON.stringify(l),r,n);else{var p=i.getCookie(o,n);p&&(l=JSON.parse(p))}1==s.getItem(a)&&(l.hasOwnProperty("tracer_data")||(l.tracer_data={}),l.tracer_data.$utm_from_url=1)}catch{return u}return l}(this.appid,s,this.domain,this.cookie_expire);var l=this.browser(),c=this.os();return{browser:l.browser,browser_version:l.browser_version,platform:o,os_name:c.os_name,os_version:c.os_version,userAgent:t,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(c.os_name),language:n,referrer:r,referrer_host:i,network_type:a,utm:this.utm,latest_data:this.last(r,i)}},e.prototype.last=function(e,t){var n="",r="",i="",s=location.hostname,o=!1;if(e&&t&&s!==t){n=e,r=t,o=!0;var a=x(e);a.keyword&&(i=a.keyword)}return{$latest_referrer:n,$latest_referrer_host:r,$latest_search_keyword:i,isLast:o}},e.prototype.browser=function(){var e,t,n="",r=""+parseFloat(this.appVersion),i=this.userAgent;return-1!==i.indexOf("Edge")||-1!==i.indexOf("Edg")?(n="Microsoft Edge",-1!==i.indexOf("Edge")?(e=i.indexOf("Edge"),r=i.substring(e+5)):(e=i.indexOf("Edg"),r=i.substring(e+4))):-1!==(e=i.indexOf("MSIE"))?(n="Microsoft Internet Explorer",r=i.substring(e+5)):-1!==(e=i.indexOf("Lark"))?(n="Lark",r=i.substring(e+5,e+11)):-1!==i.indexOf("Chrome")?-1!==(e=i.indexOf("TTWebView"))?(n="TTWebView",r=i.substring(e+10,e+23)):(-1!==(e=i.indexOf("Chrome"))||-1!==(e=i.indexOf("Chrome")))&&(n="Chrome",r=i.substring(e+7)):-1!==i.indexOf("Safari")?-1!==(e=i.indexOf("Safari"))&&(n="Safari",r=i.substring(e+7),-1!==(e=i.indexOf("Version"))&&(r=i.substring(e+8))):-1!==(e=i.indexOf("Firefox"))&&(n="Firefox",r=i.substring(e+8)),-1!==(t=r.indexOf(";"))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(" "))&&(r=r.substring(0,t)),-1!==(t=r.indexOf(")"))&&(r=r.substring(0,t)),{browser:n,browser_version:r}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],r=0;r<n.length;r++){var i=n[r];if(i.r.test(this.userAgent)){"Mac OS X"===(e=i.s)&&this.isNewIpad()&&(e="iOS");break}}var s,o,a=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},l=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=a(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=l("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(o=a(/Android ([\.\_\d]+)/,s=this.userAgent))||(o=a(/Android\/([\.\_\d]+)/,s)),t=o,e="android";break;case"iOS":t=this.isNewIpad()?l("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var c=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(c+7,c+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),r=n.indexOf(";");t=n.slice(0,r)}}catch{return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),L={sg_central:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",us_east:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",sg_central_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_east_tt:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",us_ttp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",us_ttp_w:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",us_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z22z22z1nz4ez4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k",eu_ttp_gcp:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",eu_central:"1fz22z22z1nz21z4mz4bz4bz18z25z21z1dz20z49z1kz1az21z4az19z27z22z1cz1gz1lz22z1jz18z1nz1gz4az1az1mz1k",eu_ttp_ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp_ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23",eu_ttp2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4dz4iz49z1lz1mz20z1kz18z1jz49z1lz1mz4dz18z4az22z1gz1iz22z1mz1iz25z4az1cz23"},F=function(){return new Set(Object.keys(L))},U=function(){return Object.keys(L)},G={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",my:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z19z1bz49z1kz27z4az1jz18z20z1iz1mz1dz1dz1gz1az1cz4az1az1mz1k"},B={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},Z={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},K={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};(I=O||(O={})).Init="init",I.Config="config",I.Start="start",I.Ready="ready",I.TokenComplete="token-complete",I.TokenStorage="token-storage",I.TokenFetch="token-fetch",I.TokenError="token-error",I.ConfigUuid="config-uuid",I.ConfigWebId="config-webid",I.ConfigDiD="config-deviceid",I.ConfigDomain="config-domain",I.CustomWebId="custom-webid",I.TokenChange="token-change",I.TokenReset="token-reset",I.ConfigTransform="config-transform",I.EnvTransform="env-transform",I.SessionReset="session-reset",I.SessionResetTime="session-reset-time",I.Event="event",I.Events="events",I.EventNow="event-now",I.CleanEvents="clean-events",I.BeconEvent="becon-event",I.SubmitBefore="submit-before",I.SubmitScuess="submit-scuess",I.SubmitAfter="submit-after",I.SubmitError="submit-error",I.SubmitVerify="submit-verify",I.DestoryInstance="destory-instance",I.LogSettingReady="log-setting-ready",I.Stay="stay",I.ResetStay="reset-stay",I.StayReady="stay-ready",I.SetStay="set-stay",I.RouteChange="route-change",I.RouteReady="route-ready",I.Ab="ab",I.AbVar="ab-var",I.AbAllVars="ab-all-vars",I.AbConfig="ab-config",I.AbExternalVersion="ab-external-version",I.AbVersionChangeOn="ab-version-change-on",I.AbVersionChangeOff="ab-version-change-off",I.AbOpenLayer="ab-open-layer",I.AbCloseLayer="ab-close-layer",I.AbReady="ab-ready",I.AbComplete="ab-complete",I.AbTimeout="ab-timeout",I.Profile="profile",I.ProfileSet="profile-set",I.ProfileSetOnce="profile-set-once",I.ProfileUnset="profile-unset",I.ProfileIncrement="profile-increment",I.ProfileAppend="profile-append",I.ProfileClear="profile-clear",I.Autotrack="autotrack",I.AutotrackReady="autotrack-ready",I.CepReady="cep-ready",I.TracerReady="tracer-ready",I.sessionRecord="session-record",I.SessionRecordStart="session-record-start",I.SessionRecordPause="session-record-pause",I.SessionRecordEnd="session-record-end",I.SessionRecordReport="session-record-report",I.TrackEventDuration="track-event-duration",I.TrackEventDurationStart="track-event-duration-start",I.TrackEventDurationEnd="track-event-duration-end",I.TrackEventDurationPause="track-event-duration-pause",I.TrackEventDurationResume="tracl-event-duration-resume",I.VisualCollectReady="visual-collect-ready",I.VisualApiReady="visual-api-ready",I.VisualApiUpdate="visual-api-update",function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(T||(T={}));var X=O,V=void 0,W=(new Date).getTimezoneOffset(),H=parseInt(""+-W/60,10),$=60*W,Y=function(){function e(e,t){var n=this;this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var r=new A(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new P(!1,"session"),this.localStorage=new P(!1,"local"),this.channelUrl=this.getChannelForUrl(),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var s=this.localStorage.getItem(i);s&&1==s?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:V,user_type:V,user_id:V,user_is_auth:V,user_is_login:V,device_id:V,web_id:V,ip_addr_id:V,user_unique_id_type:V},header:{app_id:V,app_name:V,app_install_id:V,install_id:V,app_package:V,app_channel:V,app_version:V,ab_version:V,os_name:r.os_name,os_version:r.os_version,device_model:r.device_model,ab_client:V,traffic_type:V,network_type:r.network_type,client_ip:V,device_brand:V,os_api:V,access:V,language:r.language,region:V,app_language:V,app_region:V,creative_id:r.utm.creative_id,ad_id:r.utm.ad_id,campaign_id:r.utm.campaign_id,log_type:V,rnd:V,platform:r.platform,sdk_version:"5.3.5_oversea",sdk_lib:"js",province:V,city:V,timezone:H,tz_offset:$,tz_name:V,sim_region:V,carrier:V,resolution:r.screen_width+"x"+r.screen_height,browser:r.browser,browser_version:r.browser_version,referrer:r.referrer,referrer_host:r.referrer_host,width:r.screen_width,height:r.screen_height,screen_width:r.screen_width,screen_height:r.screen_height,utm_term:r.utm.utm_term,utm_content:r.utm.utm_content,utm_source:r.utm.utm_source,utm_medium:r.utm.utm_medium,utm_campaign:r.utm.utm_campaign,tracer_data:JSON.stringify(r.utm.tracer_data),custom:r.network_type?{network_type:r.network_type}:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(r),this.initDomain(),this.initABData(),this.collect.on("route-change",(function(e){n.changeReferInfo(e.config)}))}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.report_channel||this.initConfig.channel,r=this.getChannelDomain(n);r||(console.warn("current channel: "+n+" is not exist, use va instead, please check!!!!"),r=G.sg),this.domain=_(r)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.getChannelDomain=function(e){var t,n,r=e||this.initConfig.report_channel||this.initConfig.channel;return F().has(r)?L[r]:"tcpy"===(null===(t=this.initConfig)||void 0===t?void 0:t.channel_type)?Z[r]:"ttp"===(null===(n=this.initConfig)||void 0===n?void 0:n.channel_type)?K[r]:G[r]},e.prototype.getChannelForUrl=function(){return this.initConfig.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:this.initConfig.report_channel?-1!==["sg_central","us_east"].indexOf(this.initConfig.report_channel)?{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}:{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"}},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=5.3.5_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.changeReferInfo=function(e){var t=e;this.set({referrer:t.referrer});var n="";try{n=new URL(t.referrer).host}catch{}this.set({referrer_host:n||this.envInfo.header.referrer_host})},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=d(d({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=d(d({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var r="",i="";if(n.indexOf(".")>-1){var s=n.split(".");r=s[0],i=s[1]}r?"user"===r||"header"===r?t.envInfo[r][i]=e[n]:(t.envInfo.header.custom[i]=e[n],t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"})):Object.hasOwnProperty.call(t.envInfo.user,n)?(["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=!!e[n]:"device_id"===n&&(t.envInfo.user[n]=e[n]),t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"USER",common:n})):Object.hasOwnProperty.call(t.envInfo.header,n)?(t.envInfo.header[n]=e[n],t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Set Common Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:n})):(t.envInfo.header.custom[n]=e[n],t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Add Custom Params",level:"info",time:Date.now(),infoType:"sdk",secType:"HEADER",common:"custom"}))}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(t){console.log("get config stringify error "),this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(r){console.log("setStore error"),this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:r.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(t){return this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(n){this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"}),console.log("delete error")}},e}(),J=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),Q=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),q=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch{return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(r){console.log("AppLogBridge, error:"+JSON.stringify(r.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch{console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch{console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch{console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch{console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch{console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch{console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge report success",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch{console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch{console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch{console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch{console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch{console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch{console.error("profileAppend error")}},e}(),ee=k((function(e,t){e.exports=function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(!a&&C)return C();if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var s=C,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==E?E:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var r=e(1);function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return s.reject(e,i)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=f((function(){t(i,r)}));"error"===o.status&&r(o.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(c,o))}),(function(e){r||(r=!0,s.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,a=-1,l=new this(i);++a<n;)o=e[a],t.resolve(o).then((function(e){r||(r=!0,s.resolve(l,e))}),(function(e){r||(r=!0,s.reject(l,e))}));return l}},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==E?E:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}typeof Promise>"u"&&e(3);var o=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function c(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d=void 0,h={},p=Object.prototype.toString;function f(e){return"boolean"==typeof d?o.resolve(d):(t=e,new o((function(e){var n=t.transaction("local-forage-detect-blob-support","readwrite"),r=s([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))).then((function(e){return d=e}));var t}function g(e){var t=h[e.name],n={};n.promise=new o((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function m(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function y(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function b(e,t){return new o((function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);g(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var o=i.open.apply(i,s);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),m(e)}}))}function v(e){return b(e,!1)}function _(e){return b(e,!0)}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function S(e){return s([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function C(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(s){if(r>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return o.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),_(e)})).then((function(){return function(e){g(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,v(e).then((function(t){return e.db=t,w(e)?_(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw y(e,t),t}))}(e).then((function(){C(e,t,n,r-1)}))})).catch(n);n(s)}}var k={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=E);var s=[];function a(){return o.resolve()}for(var l=0;l<i.forages.length;l++){var c=i.forages[l];c!==t&&s.push(c._initReady().catch(a))}var u=i.forages.slice(0);return o.all(s).then((function(){return n.db=i.db,v(n)})).then((function(e){return n.db=e,w(n,t._defaultConfig.version)?_(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var s=u[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){C(n._dbInfo,"readonly",(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;x(r)&&(r=S(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(l){r(l)}}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new o((function(t,r){n.ready().then((function(){C(n._dbInfo,"readonly",(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),x(e)&&(e=S(e)),t(e)},o.onerror=function(){r(o.error)}}catch(a){r(a)}}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=new o((function(n,i){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===p.call(t)?f(s.db).then((function(e){return e?t:(n=t,new o((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){C(r._dbInfo,"readwrite",(function(s,o){if(s)return i(s);try{var a=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){try{var e=l.error?l.error:l.transaction.error;i(e)}catch(t){i(t)}}}catch(c){i(c)}}))})).catch(i)}));return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=new o((function(t,r){n.ready().then((function(){C(n._dbInfo,"readwrite",(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(o.error)},s.onabort=function(){try{var e=o.error?o.error:o.transaction.error;r(e)}catch(t){r(t)}}}catch(a){r(a)}}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){C(t._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){try{var e=s.error?s.error:s.transaction.error;n(e)}catch(t){n(t)}}}catch(o){n(o)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){C(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(o){n(o)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new o((function(t,r){e<0?t(null):n.ready().then((function(){C(n._dbInfo,"readonly",(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName),a=!1,l=(o.openKeyCursor||o.openCursor).call(o);l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(c){r(c)}}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){C(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName),o=(s.openKeyCursor||s.openCursor).call(s),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(l){n(l)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,s=this;if(e.name){var l=e.name===n.name&&s._dbInfo.db?o.resolve(s._dbInfo.db):v(e).then((function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?l.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;g(e);var r=h[e.name],s=r.forages;t.close();for(var a=0;a<s.length;a++){var l=s[a];l._dbInfo.db=null,l._dbInfo.version=n}return new o((function(t,r){var s=i.open(e.name,n);s.onerror=function(e){s.result.close(),r(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=e,m(n._dbInfo)}})).catch((function(t){throw(y(e,t)||o.resolve()).catch((function(){})),t}))}})):l.then((function(t){g(e);var n=h[e.name],r=n.forages;t.close();for(var s=0;s<r.length;s++)r[s]._dbInfo.db=null;return new o((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)m(r[t]._dbInfo)})).catch((function(t){throw(y(e,t)||o.resolve()).catch((function(){})),t}))}))}else r=o.reject("Invalid arguments");return a(r,t),r}},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,I=9,z=I+4,R=Object.prototype.toString;function D(e){var t,n,r,i,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=O.indexOf(e[t]),r=O.indexOf(e[t+1]),i=O.indexOf(e[t+2]),s=O.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return c}function M(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=O[n[t]>>2],r+=O[(3&n[t])<<4|n[t+1]>>4],r+=O[(15&n[t+1])<<2|n[t+2]>>6],r+=O[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var N={serialize:function(e,t){var n="";if(e&&(n=R.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===R.call(e.buffer))){var r,i="__lfsc__:";e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+M(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n="~~local_forage_type~"+e.type+"~"+M(this.result);t("__lfsc__:blob"+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,I))return JSON.parse(e);var t,n=e.substring(z),r=e.substring(I,z);if("blob"===r&&T.test(n)){var i=n.match(T);t=i[1],n=n.substring(i[0].length)}var o=D(n);switch(r){case"arbf":return o;case"blob":return s([o],{type:t});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:D,bufferToString:M};function j(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function P(e,t,n,r,i,s){e.executeSql(n,r,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,o):j(e,t,(function(){e.executeSql(n,r,i,s)}),s)}),s):s(e,o)}),s)}function A(e,t,n,r){var i=this;e=c(e);var s=new o((function(s,o){i.ready().then((function(){void 0===t&&(t=null);var a=t,l=i._dbInfo;l.serializer.serialize(t,(function(t,c){c?o(c):l.db.transaction((function(n){P(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(A.apply(i,[e,a,n,r-1]));o(t)}}))}))})).catch(o)}));return a(s,n),s}function L(e){return new o((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],s=0;s<r.rows.length;s++)i.push(r.rows.item(s).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new o((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){j(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=N,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){P(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var s=r.rows,o=s.length,a=0;a<o;a++){var l=s.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){P(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){return A.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=c(e);var r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){P(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){P(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){P(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){P(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){P(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=u.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return a(r=e.name?new o((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(L(r))})).then((function(e){return new o((function(t,n){e.db.transaction((function(r){function i(e){return new o((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],a=0,l=e.storeNames.length;a<l;a++)s.push(i(e.storeNames[a]));o.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):o.reject("Invalid arguments"),t),r}};function U(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function G(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch{return!0}}()||localStorage.length>0}var B={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=U(e,this._defaultConfig),G()?(this._dbInfo=t,t.serializer=N,o.resolve()):o.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,s=localStorage.length,o=1,a=0;a<s;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),o++)))return c}}}));return a(r,t),r},getItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=c(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new o((function(i,s){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(o.keyPrefix+e,t),i(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||s(a),s(a)}}))}))}));return a(i,n),i},removeItem:function(e,t){var n=this;e=c(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return a(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var s=localStorage.key(i);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return a(n,e),n},dropInstance:function(e,t){if(t=u.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return a(r=e.name?new o((function(t){e.storeName?t(U(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):o.reject("Invalid arguments"),t),r}},Z=function(e,t){for(var n,r,i=e.length,s=0;s<i;){if((n=e[s])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;s++}return!1},K=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},X={},V={},W={INDEXEDDB:k,WEBSQL:F,LOCALSTORAGE:B},H=[W.INDEXEDDB._driver,W.WEBSQL._driver,W.LOCALSTORAGE._driver],$=["dropInstance"],Y=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat($),J={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Q(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function q(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(K(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ee=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W)if(W.hasOwnProperty(n)){var r=W[n],i=r._driver;this[n]=i,X[i]||this.defineDriver(r)}this._defaultConfig=q({},J),this._config=q({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new o((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var s=Y.concat("_initStorage"),l=0,c=s.length;l<c;l++){var u=s[l];if((!Z($,u)||e[u])&&"function"!=typeof e[u])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=o.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=$.length;n<r;n++){var i=$[n];e[i]||(e[i]=t(i))}}();var d=function(n){X[r]&&console.info("Redefining LocalForage driver: "+r),X[r]=e,V[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(h){n(h)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=X[e]?o.resolve(X[e]):o.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=o.resolve(N);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;K(e)||(e=[e]);var i=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function a(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=c.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){var t;r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=(t=i,function(){var e=0;return function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}s();var l=new Error("No available storage method found.");return r._driverSet=o.reject(l),r._driverSet}()})}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=o.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!V[e]},e.prototype._extend=function(e){q(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=Y.length;e<t;e++)Q(this,Y[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)})),te=function(){function e(e,t){return this.dbStorage=ee.createInstance({driver:[ee.INDEXEDDB,ee.LOCALSTORAGE],name:e,storeName:t}),this.dbStorage}return e.prototype.getItem=function(e){return h(this,void 0,void 0,(function(){var t,n;return p(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.dbStorage.getItem(e)];case 1:t=r.sent(),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch{}return[2,n||void 0];case 2:return r.sent(),console.warn("db get storage error"),[3,3];case 3:return[2,void 0]}}))}))},e.prototype.setItem=function(e,t){try{this.dbStorage.setItem(e,t)}catch{console.warn("db set storage error")}},e.prototype.removeItem=function(e){try{this.dbStorage.removeItem(e)}catch{console.warn("db remove storage error")}},e}(),ne=function(){function e(){this.setUrl="/service/2/web_sdk_settings/",this.expireTime=216e5}return e.prototype.apply=function(e,t){if(t.enable_logsetting){this.collect=e,this.config=t;var n=e.adapters.storage;this.setKey="applog_web_logsetting_"+t.app_id,this.uniqueKey="web_logsetting_data",this.cacheStorgae=new n(!1),this.dbStorage=new te(this.setKey,"LOGSETTING_DATA_STORE"),this.domain=t.logsetting_domain||this.collect.configManager.getDomain(),this.check()}else e.emit(X.LogSettingReady)},e.prototype.check=function(){return h(this,void 0,void 0,(function(){var e;return p(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.getLocalData()];case 1:return(e=t.sent())&&Object.keys(e).length?(null==e?void 0:e.timestamp)<Date.now()-this.expireTime?this.fetchSetting():(this.setSettingData(e.settingConfig),this.collect.emit(X.LogSettingReady)):this.fetchSetting(),[3,3];case 2:return t.sent(),this.collect.emit(X.LogSettingReady),this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Check LogSetting Data Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),[3,3];case 3:return[2]}}))}))},e.prototype.fetchSetting=function(e){var t=this;if(e)this.collect.emit(X.LogSettingReady);else{var n=this.collect.configManager.get("header");n.custom=JSON.stringify(n.custom);var r=this.collect.configManager.get("user"),i={event_filter:0,header:d(d({aid:this.config.app_id},n),r),options:{params_block_enable:this.config.enable_logsetting_params?1:0,header_custom_allow_enable:this.config.enable_logsetting_header_custom?1:0}};this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch LogSetting Request",logType:"fetch",level:"info",time:Date.now(),data:i,infoType:"sdk"}),this.collect.requestManager.useRequest({url:""+this.domain+this.setUrl+"?device_platform=web",data:i,timeout:5e3,success:function(e){null!=e&&e.config?(t.setLocalData(e.config),t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Success",logType:"fetch",level:"info",time:Date.now(),data:e,infoType:"sdk"})):t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Response No Data",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"}),t.collect.emit(X.LogSettingReady)},fail:function(){t.collect.emit(X.LogSettingReady),t.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"LogSetting Request Fail",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})}})}},e.prototype.getLocalData=function(){return h(this,void 0,void 0,(function(){return p(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.dbStorage.getItem(this.uniqueKey)];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}}))}))},e.prototype.setLocalData=function(e){try{var t={timestamp:Date.now(),settingConfig:e};this.setSettingData(e),this.dbStorage.setItem(this.uniqueKey,t),this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Update LogSetting Cache",logType:"info",level:"info",time:Date.now(),infoType:"sdk",data:e})}catch{this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Set LogSetting Data Error",logType:"info",level:"error",time:Date.now(),infoType:"sdk"})}},e.prototype.getSettingData=function(e){return e?this.logSettingConfig[e]:this.logSettingConfig},e.prototype.setSettingData=function(e){this.logSettingConfig=e},e.prototype.getPredefineEventList=function(){return new Set(["predefine_pageview","onload","bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_exposure","predefine_page_alive","predefine_page_close","_be_active","__bav_click","__bav_page","__bav_beat","__bav_page_statistics","__bav_page_exposure"])},e.prototype.getPredefineParamsList=function(){return new Set(["event_index"])},e}(),re=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new P(!0),this.localStorage=new P(!1),this.logSetting=new ne,this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.logSetting.apply(e,t),this.collect.on(X.Ready,(function(){n.reportAll(!1)})),this.collect.on(X.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(X.Event,(function(e){n.event(e)})),this.collect.on(X.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(X.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e,t=this;window.addEventListener("unload",(function(){t.reportAll(!0)}),!1),e=function(){t.reportAll(!0)},w()?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{if(this.config.enable_ios_sendbeacon&&w())return void this.beconEvent(e);var n=g(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(i){this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:i.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=g(e,this.cacheStorgae.getItem(this.beconKey)||[]);if(this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady){this.cacheStorgae.removeItem(this.beconKey);try{var n=JSON.parse(JSON.stringify(t));if(this.send(this.split(this.merge(t)),!0),this.config.event_verify_url){var r=this.split(this.merge(n,!0));this.collect.emit(X.SubmitVerify,r)}}catch{this.send(this.split(this.merge(t)),!0)}}}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];if(e&&e.length){this.cacheStorgae.removeItem(this.beconKey);try{var t=JSON.parse(JSON.stringify(e));if(this.send(this.split(this.merge(e)),!0),this.config.event_verify_url){var n=this.split(this.merge(t,!0));this.collect.emit(X.SubmitVerify,n)}}catch{this.send(this.split(this.merge(e)),!0)}}}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var r;r=e.slice(n,n+this.eventLimit);try{var i=JSON.parse(JSON.stringify(r));if(this.send(this.split(this.merge(r)),t),this.config.event_verify_url){var s=this.split(this.merge(i,!0));this.collect.emit(X.SubmitVerify,s)}}catch{this.send(this.split(this.merge(r)),t)}}else try{i=JSON.parse(JSON.stringify(e)),this.send(this.split(this.merge(e)),t),this.config.event_verify_url&&(s=this.split(this.merge(i,!0)),this.collect.emit(X.SubmitVerify,s))}catch{this.send(this.split(this.merge(e)),t)}},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch{e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.configManager.get(),i=r.header,s=r.user;i.custom=this.customAllow(i.custom,t);var o=this.configManager.get("evtParams"),a=this.configManager.get("user_unique_id_type"),l=[];try{var c=e.filter((function(e){try{Object.keys(o).length&&(e.params=d(d({},o),e.params)),a&&(e.params.$user_unique_id_type=a);var r=n.configManager.getAbCache(),i=s[n.config.ab_user_mode]||s.user_unique_id,l=n.configManager.getAbUuidCache(i);if(r&&r.uuid&&r.uuid===i){var c=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(l&&l.length){var u=l.join(",");c&&c.includes(u)&&(e.ab_sdk_version=c)}}else c&&(e.ab_sdk_version=c)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=n.paramsAllow(e,t),e}catch(h){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",h&&h.message),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:h.message,infoType:"sdk"}),!1}})),u=JSON.parse(JSON.stringify({events:c,user:s,header:i}));u.local_time=Math.floor(Date.now()/1e3),u.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,u.verbose=1,l.push(u)}catch(h){console.warn("event merge error, pls check",h&&h.message)}return l},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.blockEvent=function(e){try{var t=this.blockList;if(this.config.enable_logsetting){var n=this.blockList,r=this.logSetting.getSettingData("blocklist_events").block_event;t=n.concat(r.filter((function(e){return-1===n.indexOf(e)})))}return!(t&&t.length&&t.includes(e))}catch{return!0}},e.prototype.whiteEvent=function(e){var t;try{return!(null!==(t=this.whiteList)&&void 0!==t&&t.length&&!this.whiteList.includes(e))}catch{return!0}},e.prototype.customAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_header_custom)return JSON.stringify(e);var n=this.logSetting.getSettingData().header_custom_allow;if(n){var r={};if(n.length&&Object.keys(e).length){var i=new Set(n);for(var s in e)i.has(s)&&(r[s]=e[s])}return JSON.stringify(r)}return JSON.stringify(e)}catch(o){return this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute customAllow Something Error",level:"error",time:Date.now(),data:o.message,infoType:"sdk"}),JSON.stringify(e)}},e.prototype.paramsAllow=function(e,t){try{if(t||!this.config.enable_logsetting||!this.config.enable_logsetting_params)return JSON.stringify(e.params);var n=this.logSetting.getSettingData().params_block,r=e.event,i=e.params;if(!n)return JSON.stringify(e.params);if(n[r]&&n[r].length){var s={},o=new Set(n[r]);for(var a in i)!this.logSetting.getPredefineParamsList().has(a)&&o.has(a)||(s[a]=i[a]);return JSON.stringify(s)}return JSON.stringify(e.params)}catch(l){return this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute paramsAllow Something Error",level:"error",time:Date.now(),data:l.message,infoType:"sdk"}),JSON.stringify(e.params)}},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var r=JSON.parse(JSON.stringify(e));n.config.filter&&((r=n.config.filter(r))||console.warn("filter must return data !!")),n.collect.eventFilter&&r&&((r=n.collect.eventFilter(r))||console.warn("filterEvent api must return data !!"));var i=r||e,s=JSON.parse(JSON.stringify(i));if(!i.length)return;var o=!0;if(i.forEach((function(e){e.events.length||(o=!1)})),!o)return;n.collect.emit(X.SubmitBefore,i),n.collect.requestManager.useRequest({url:n.reportUrl,data:i,success:function(e,t){e&&0!==e.e?(n.collect.emit(X.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_EVENT,info:"Event Report Fail",time:Date.now(),data:s,code:e.e,failType:"event data error",status:"fail"})):(n.collect.emit(X.SubmitScuess,{eventData:t,res:e}),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:s,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(X.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network Fail",time:Date.now(),data:s,code:t,failType:"network error",status:"fail"})},timeout:n.timeout,useBeacon:!n.config.disable_sendbeacon&&t,withCredentials:n.enable_ttwebid,zip:!0}),n.collect.emit(X.SubmitAfter,i)}catch(a){console.warn("something error, "+JSON.stringify(a.stack)),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:a.message})}})))},e}(),ie=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},se=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new P(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(X.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(X.ConfigWebId,(function(e){n.setWebId(e)})),this.collect.on(X.ConfigDiD,(function(e){n.setDeviceId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(X.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(X.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:ie(),user_unique_id:this.configManager.get("user_unique_id")||ie()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=x(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:n});var r=ie();this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=r,e.collect.configManager.set({localWebId:r}),e.collect.emit(X.TokenError),e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||r,user_unique_id:e.configManager.get("user_unique_id")||r}),e.collect.configManager.set({localWebId:r}),e.collect.emit(X.TokenError),e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id,r=e.device_id;if(e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.config.enable_device_id){var i=this.configManager.get("device_id")||r||t;this.collect.configManager.set({device_id:i}),e=d(d({},e),{device_id:i})}else delete e.device_id;this.setStorage(e),this.tokenReady=!0,this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:n},infoType:"sdk"}),this.collect.emit(X.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(X.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(X.TokenChange,"uuid"),this.collect.emit(X.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(X.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(X.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(X.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setDeviceId=function(e){this.configManager.set({device_id:e}),this.config.enable_device_id&&this.cacheToken&&(this.cacheToken.device_id=e,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken))},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var n={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:n,success:function(n){n&&0===n.e?(t(n.tobid),e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"})):(t(""),e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:n,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")}))},e}(),oe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},ae=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new P(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(X.SessionReset,(function(e){n.resetSessionId(e)})),this.collect.on(X.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:oe(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:oe(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||oe(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:oe(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}();function le(e){let t=e.length;for(;--t>=0;)e[t]=0}const ce=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ue=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),de=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),he=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pe=new Array(576);le(pe);const fe=new Array(60);le(fe);const ge=new Array(512);le(ge);const me=new Array(256);le(me);const ye=new Array(29);le(ye);const be=new Array(30);function ve(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let _e,we,Se;function xe(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}le(be);const Ee=e=>e<256?ge[e]:ge[256+(e>>>7)],Ce=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ke=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Ce(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Oe=(e,t,n)=>{ke(e,n[2*t],n[2*t+1])},Te=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Ie=(e,t,n)=>{const r=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=Te(r[t]++,t))}},ze=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Re=e=>{e.bi_valid>8?Ce(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},De=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},Me=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&De(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!De(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Ne=(e,t,n)=>{let r,i,s,o,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?Oe(e,i,t):(s=me[i],Oe(e,s+256+1,t),o=ce[s],0!==o&&(i-=ye[s],ke(e,i,o)),r--,s=Ee(r),Oe(e,s,n),o=ue[s],0!==o&&(r-=be[s],ke(e,r,o)))}while(a<e.sym_next);Oe(e,256,t)},je=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)Me(e,n,o);l=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Me(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[2*l]=n[2*o]+n[2*a],e.depth[l]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=l,e.heap[1]=l++,Me(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,h,p,f,g=0;for(h=0;h<=15;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],h=n[2*n[2*u+1]+1]+1,h>l&&(h=l,g++),n[2*u+1]=h,u>r||(e.bl_count[h]++,p=0,u>=a&&(p=o[u-a]),f=n[2*u],e.opt_len+=f*(h+p),s&&(e.static_len+=f*(i[2*u+1]+p)));if(0!==g){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(h=l;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--c],d>r||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(e,t),Ie(n,c,e.bl_count)},Pe=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<l&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))},Ae=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<l&&i===o)){if(a<c)do{Oe(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(Oe(e,i,e.bl_tree),a--),Oe(e,16,e.bl_tree),ke(e,a-3,2)):a<=10?(Oe(e,17,e.bl_tree),ke(e,a-3,3)):(Oe(e,18,e.bl_tree),ke(e,a-11,7));a=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}};let Le=!1;const Fe=(e,t,n,r)=>{ke(e,0+(r?1:0),3),Re(e),Ce(e,n),Ce(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Ue={_tr_init:e=>{Le||((()=>{let e,t,n,r,i;const s=new Array(16);for(n=0,r=0;r<28;r++)for(ye[r]=n,e=0;e<1<<ce[r];e++)me[n++]=r;for(me[n-1]=r,i=0,r=0;r<16;r++)for(be[r]=i,e=0;e<1<<ue[r];e++)ge[i++]=r;for(i>>=7;r<30;r++)for(be[r]=i<<7,e=0;e<1<<ue[r]-7;e++)ge[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)pe[2*e+1]=8,e++,s[8]++;for(;e<=255;)pe[2*e+1]=9,e++,s[9]++;for(;e<=279;)pe[2*e+1]=7,e++,s[7]++;for(;e<=287;)pe[2*e+1]=8,e++,s[8]++;for(Ie(pe,287,s),e=0;e<30;e++)fe[2*e+1]=5,fe[2*e]=Te(e,5);_e=new ve(pe,ce,257,286,15),we=new ve(fe,ue,0,30,15),Se=new ve(new Array(0),de,0,19,7)})(),Le=!0),e.l_desc=new xe(e.dyn_ltree,_e),e.d_desc=new xe(e.dyn_dtree,we),e.bl_desc=new xe(e.bl_tree,Se),e.bi_buf=0,e.bi_valid=0,ze(e)},_tr_stored_block:Fe,_tr_flush_block:(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),je(e,e.l_desc),je(e,e.d_desc),o=(e=>{let t;for(Pe(e,e.dyn_ltree,e.l_desc.max_code),Pe(e,e.dyn_dtree,e.d_desc.max_code),je(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*he[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?Fe(e,t,n,r):4===e.strategy||s===i?(ke(e,2+(r?1:0),3),Ne(e,pe,fe)):(ke(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(ke(e,t-257,5),ke(e,n-1,5),ke(e,r-4,4),i=0;i<r;i++)ke(e,e.bl_tree[2*he[i]+1],3);Ae(e,e.dyn_ltree,t-1),Ae(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Ne(e,e.dyn_ltree,e.dyn_dtree)),ze(e),r&&Re(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(me[n]+256+1)]++,e.dyn_dtree[2*Ee(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{var t;ke(e,2,3),Oe(e,256,pe),16===(t=e).bi_valid?(Ce(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},Ge=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{i=i+t[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const Be=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Ze=(e,t,n,r)=>{const i=Be,s=r+n;e^=-1;for(let o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return~e},Ke={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Xe={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ve,_tr_stored_block:We,_tr_flush_block:He,_tr_tally:$e,_tr_align:Ye}=Ue,{Z_NO_FLUSH:Je,Z_PARTIAL_FLUSH:Qe,Z_FULL_FLUSH:qe,Z_FINISH:et,Z_BLOCK:tt,Z_OK:nt,Z_STREAM_END:rt,Z_STREAM_ERROR:it,Z_DATA_ERROR:st,Z_BUF_ERROR:ot,Z_DEFAULT_COMPRESSION:at,Z_FILTERED:lt,Z_HUFFMAN_ONLY:ct,Z_RLE:ut,Z_FIXED:dt,Z_DEFAULT_STRATEGY:ht,Z_UNKNOWN:pt,Z_DEFLATED:ft}=Xe,gt=(e,t)=>(e.msg=Ke[t],t),mt=e=>2*e-(e>4?9:0),yt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},bt=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let vt=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const _t=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},wt=(e,t)=>{He(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_t(e.strm)},St=(e,t)=>{e.pending_buf[e.pending++]=t},xt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Et=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Ge(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Ze(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ct=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258;let p=c[s+o-1],f=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,c[n+o]===f&&c[n+o-1]===p&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<h);if(r=258-(h-s),s=h-258,r>o){if(e.match_start=t,o=r,r>=a)break;p=c[s+o-1],f=c[s+o]}}}while((t=d[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead},kt=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),bt(e),r+=t),0===e.strm.avail_in)break;if(n=Et(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=vt(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=vt(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},Ot=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==et||t===Je||n!==r+e.strm.avail_in)))break;o=t===et&&n===r+e.strm.avail_in?1:0,We(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,_t(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Et(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==Je&&t!==et&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Et(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=s||(r||t===et)&&t!==Je&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===et&&0===e.strm.avail_in&&n===r?1:0,We(e,e.block_start,n,o),e.block_start+=n,_t(e.strm)),o?3:1)},Tt=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(kt(e),e.lookahead<262&&t===Je)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=Ct(e,n)),e.match_length>=3)if(r=$e(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=vt(e,e.ins_h,e.window[e.strstart+1]);else r=$e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2},It=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<262){if(kt(e),e.lookahead<262&&t===Je)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=Ct(e,n),e.match_length<=5&&(e.strategy===lt||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=$e(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=vt(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(wt(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=$e(e,0,e.window[e.strstart-1]),r&&wt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=$e(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2};function zt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Rt=[new zt(0,0,0,0,Ot),new zt(4,4,8,4,Tt),new zt(4,5,16,8,Tt),new zt(4,6,32,32,Tt),new zt(4,4,16,16,It),new zt(8,16,32,32,It),new zt(8,16,128,128,It),new zt(8,32,128,256,It),new zt(32,128,258,1024,It),new zt(32,258,258,4096,It)];function Dt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ft,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yt(this.dyn_ltree),yt(this.dyn_dtree),yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),yt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Mt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Nt=e=>{if(Mt(e))return gt(e,it);e.total_in=e.total_out=0,e.data_type=pt;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ve(t),nt},jt=e=>{const t=Nt(e);var n;return t===nt&&((n=e.state).window_size=2*n.w_size,yt(n.head),n.max_lazy_match=Rt[n.level].max_lazy,n.good_match=Rt[n.level].good_length,n.nice_match=Rt[n.level].nice_length,n.max_chain_length=Rt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Pt=(e,t,n,r,i,s)=>{if(!e)return it;let o=1;if(t===at&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==ft||r<8||r>15||t<0||t>9||s<0||s>dt||8===r&&1!==o)return gt(e,it);8===r&&(r=9);const a=new Dt;return e.state=a,a.strm=e,a.status=42,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,jt(e)};var At={deflateInit:(e,t)=>Pt(e,t,ft,15,8,ht),deflateInit2:Pt,deflateReset:jt,deflateResetKeep:Nt,deflateSetHeader:(e,t)=>Mt(e)||2!==e.state.wrap?it:(e.state.gzhead=t,nt),deflate:(e,t)=>{if(Mt(e)||t>tt||t<0)return e?gt(e,it):it;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==et)return gt(e,0===e.avail_out?ot:it);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(_t(e),0===e.avail_out)return n.last_flush=-1,nt}else if(0===e.avail_in&&mt(t)<=mt(r)&&t!==et)return gt(e,ot);if(666===n.status&&0!==e.avail_in)return gt(e,ot);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ft+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=ct||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,xt(n,t),0!==n.strstart&&(xt(n,e.adler>>>16),xt(n,65535&e.adler)),e.adler=1,n.status=113,_t(e),0!==n.pending)return n.last_flush=-1,nt}if(57===n.status)if(e.adler=0,St(n,31),St(n,139),St(n,8),n.gzhead)St(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),St(n,255&n.gzhead.time),St(n,n.gzhead.time>>8&255),St(n,n.gzhead.time>>16&255),St(n,n.gzhead.time>>24&255),St(n,9===n.level?2:n.strategy>=ct||n.level<2?4:0),St(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(St(n,255&n.gzhead.extra.length),St(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Ze(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(St(n,0),St(n,0),St(n,0),St(n,0),St(n,0),St(n,9===n.level?2:n.strategy>=ct||n.level<2?4:0),St(n,3),n.status=113,_t(e),0!==n.pending)return n.last_flush=-1,nt;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,_t(e),0!==n.pending)return n.last_flush=-1,nt;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-r,r)),_t(e),0!==n.pending)return n.last_flush=-1,nt;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,St(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-r,r)),_t(e),0!==n.pending)return n.last_flush=-1,nt;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,St(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=Ze(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(_t(e),0!==n.pending))return n.last_flush=-1,nt;St(n,255&e.adler),St(n,e.adler>>8&255),e.adler=0}if(n.status=113,_t(e),0!==n.pending)return n.last_flush=-1,nt}if(0!==e.avail_in||0!==n.lookahead||t!==Je&&666!==n.status){let r=0===n.level?Ot(n,t):n.strategy===ct?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(kt(e),0===e.lookahead)){if(t===Je)return 1;break}if(e.match_length=0,n=$e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ut?((e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=258){if(kt(e),e.lookahead<=258&&t===Je)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+258;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=258-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=$e(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=$e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===et?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2})(n,t):Rt[n.level].func(n,t);if(3!==r&&4!==r||(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),nt;if(2===r&&(t===Qe?Ye(n):t!==tt&&(We(n,0,0,!1),t===qe&&(yt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),_t(e),0===e.avail_out))return n.last_flush=-1,nt}return t!==et?nt:n.wrap<=0?rt:(2===n.wrap?(St(n,255&e.adler),St(n,e.adler>>8&255),St(n,e.adler>>16&255),St(n,e.adler>>24&255),St(n,255&e.total_in),St(n,e.total_in>>8&255),St(n,e.total_in>>16&255),St(n,e.total_in>>24&255)):(xt(n,e.adler>>>16),xt(n,65535&e.adler)),_t(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?nt:rt)},deflateEnd:e=>{if(Mt(e))return it;const t=e.state.status;return e.state=null,113===t?gt(e,st):nt},deflateSetDictionary:(e,t)=>{let n=t.length;if(Mt(e))return it;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return it;if(1===i&&(e.adler=Ge(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(yt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,kt(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=vt(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,kt(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,nt},deflateInfo:"pako deflate (from Nodeca project)"};const Lt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ft=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Lt(n,t)&&(e[t]=n[t])}}return e},Ut=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,s=e.length;r<s;r++){let t=e[r];n.set(t,i),i+=t.length}return n};let Gt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Gt=!1}const Bt=new Uint8Array(256);for(let n=0;n<256;n++)Bt[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Bt[254]=Bt[254]=1;var Zt=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},Kt=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){s[i++]=t;continue}let o=Bt[t];if(o>4)s[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Gt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},Xt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Bt[e[n]]>t?n:t},Vt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Wt=Object.prototype.toString,{Z_NO_FLUSH:Ht,Z_SYNC_FLUSH:$t,Z_FULL_FLUSH:Yt,Z_FINISH:Jt,Z_OK:Qt,Z_STREAM_END:qt,Z_DEFAULT_COMPRESSION:en,Z_DEFAULT_STRATEGY:tn,Z_DEFLATED:nn}=Xe;function rn(e){this.options=Ft({level:en,method:nn,chunkSize:16384,windowBits:15,memLevel:8,strategy:tn},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vt,this.strm.avail_out=0;let n=At.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Qt)throw new Error(Ke[n]);if(t.header&&At.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Zt(t.dictionary):"[object ArrayBuffer]"===Wt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=At.deflateSetDictionary(this.strm,e),n!==Qt)throw new Error(Ke[n]);this._dict_set=!0}}function sn(e,t){const n=new rn(t);if(n.push(e,!0),n.err)throw n.msg||Ke[n.err];return n.result}rn.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Jt:Ht,"string"==typeof e?n.input=Zt(e):"[object ArrayBuffer]"===Wt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===$t||s===Yt)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=At.deflate(n,s),i===qt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=At.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Qt;if(0!==n.avail_out){if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},rn.prototype.onData=function(e){this.chunks.push(e)},rn.prototype.onEnd=function(e){e===Qt&&(this.result=Ut(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var on={Deflate:rn,deflate:sn,deflateRaw:function(e,t){return(t=t||{}).raw=!0,sn(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,sn(e,t)},constants:Xe},an=function(e,t){let n,r,i,s,o,a,l,c,u,d,h,p,f,g,m,y,b,v,_,w,S,x,E,C;const k=e.state;n=e.next_in,E=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=k.dmax,l=k.wsize,c=k.whave,u=k.wnext,d=k.window,h=k.hold,p=k.bits,f=k.lencode,g=k.distcode,m=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),b=f[h&m];t:for(;;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,0===v)C[i++]=65535&b;else{if(!(16&v)){if(!(64&v)){b=f[(65535&b)+(h&(1<<v)-1)];continue t}if(32&v){k.mode=16191;break e}e.msg="invalid literal/length code",k.mode=16209;break e}_=65535&b,v&=15,v&&(p<v&&(h+=E[n++]<<p,p+=8),_+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=E[n++]<<p,p+=8,h+=E[n++]<<p,p+=8),b=g[h&y];n:for(;;){if(v=b>>>24,h>>>=v,p-=v,v=b>>>16&255,!(16&v)){if(!(64&v)){b=g[(65535&b)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",k.mode=16209;break e}if(w=65535&b,v&=15,p<v&&(h+=E[n++]<<p,p+=8,p<v&&(h+=E[n++]<<p,p+=8)),w+=h&(1<<v)-1,w>a){e.msg="invalid distance too far back",k.mode=16209;break e}if(h>>>=v,p-=v,v=i-s,w>v){if(v=w-v,v>c&&k.sane){e.msg="invalid distance too far back",k.mode=16209;break e}if(S=0,x=d,0===u){if(S+=l-v,v<_){_-=v;do{C[i++]=d[S++]}while(--v);S=i-w,x=C}}else if(u<v){if(S+=l+u-v,v-=u,v<_){_-=v;do{C[i++]=d[S++]}while(--v);if(S=0,u<_){v=u,_-=v;do{C[i++]=d[S++]}while(--v);S=i-w,x=C}}}else if(S+=u-v,v<_){_-=v;do{C[i++]=d[S++]}while(--v);S=i-w,x=C}for(;_>2;)C[i++]=x[S++],C[i++]=x[S++],C[i++]=x[S++],_-=3;_&&(C[i++]=x[S++],_>1&&(C[i++]=x[S++]))}else{S=i-w;do{C[i++]=C[S++],C[i++]=C[S++],C[i++]=C[S++],_-=3}while(_>2);_&&(C[i++]=C[S++],_>1&&(C[i++]=C[S++]))}break}}break}}while(n<r&&i<o);_=p>>3,n-=_,p-=_<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),k.hold=h,k.bits=p};const ln=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),un=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var hn=(e,t,n,r,i,s,o,a)=>{const l=a.bits;let c,u,d,h,p,f,g=0,m=0,y=0,b=0,v=0,_=0,w=0,S=0,x=0,E=0,C=null;const k=new Uint16Array(16),O=new Uint16Array(16);let T,I,z,R=null;for(g=0;g<=15;g++)k[g]=0;for(m=0;m<r;m++)k[t[n+m]]++;for(v=l,b=15;b>=1&&0===k[b];b--);if(v>b&&(v=b),0===b)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(y=1;y<b&&0===k[y];y++);for(v<y&&(v=y),S=1,g=1;g<=15;g++)if(S<<=1,S-=k[g],S<0)return-1;if(S>0&&(0===e||1!==b))return-1;for(O[1]=0,g=1;g<15;g++)O[g+1]=O[g]+k[g];for(m=0;m<r;m++)0!==t[n+m]&&(o[O[t[n+m]]++]=m);if(0===e?(C=R=o,f=20):1===e?(C=ln,R=cn,f=257):(C=un,R=dn,f=0),E=0,m=0,g=y,p=s,_=v,w=0,d=-1,x=1<<v,h=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){T=g-w,o[m]+1<f?(I=0,z=o[m]):o[m]>=f?(I=R[o[m]-f],z=C[o[m]-f]):(I=96,z=0),c=1<<g-w,u=1<<_,y=u;do{u-=c,i[p+(E>>w)+u]=T<<24|I<<16|z}while(0!==u);for(c=1<<g-1;E&c;)c>>=1;if(0!==c?(E&=c-1,E+=c):E=0,m++,0==--k[g]){if(g===b)break;g=t[n+o[m]]}if(g>v&&(E&h)!==d){for(0===w&&(w=v),p+=y,_=g-w,S=1<<_;_+w<b&&(S-=k[_+w],!(S<=0));)_++,S<<=1;if(x+=1<<_,1===e&&x>852||2===e&&x>592)return 1;d=E&h,i[d]=v<<24|_<<16|p-s}}return 0!==E&&(i[p+E]=g-w<<24|64<<16),a.bits=v,0};const{Z_FINISH:pn,Z_BLOCK:fn,Z_TREES:gn,Z_OK:mn,Z_STREAM_END:yn,Z_NEED_DICT:bn,Z_STREAM_ERROR:vn,Z_DATA_ERROR:_n,Z_MEM_ERROR:wn,Z_BUF_ERROR:Sn,Z_DEFLATED:xn}=Xe,En=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Cn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},On=e=>{if(kn(e))return vn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mn},Tn=e=>{if(kn(e))return vn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,On(e)},In=(e,t)=>{let n;if(kn(e))return vn;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?vn:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Tn(e))},zn=(e,t)=>{if(!e)return vn;const n=new Cn;e.state=n,n.strm=e,n.window=null,n.mode=16180;const r=In(e,t);return r!==mn&&(e.state=null),r};let Rn,Dn,Mn=!0;const Nn=e=>{if(Mn){Rn=new Int32Array(512),Dn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(hn(1,e.lens,0,288,Rn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;hn(2,e.lens,0,32,Dn,0,e.work,{bits:5}),Mn=!1}e.lencode=Rn,e.lenbits=9,e.distcode=Dn,e.distbits=5},jn=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Pn={inflateReset:Tn,inflateReset2:In,inflateResetKeep:On,inflateInit:e=>zn(e,15),inflateInit2:zn,inflate:(e,t)=>{let n,r,i,s,o,a,l,c,u,d,h,p,f,g,m,y,b,v,_,w,S,x,E=0;const C=new Uint8Array(4);let k,O;const T=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kn(e)||!e.output||!e.input&&0!==e.avail_in)return vn;n=e.state,16191===n.mode&&(n.mode=16192),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,h=l,x=mn;e:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&c,C[1]=c>>>8&255,n.check=Ze(n.check,C,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&c)!==xn){e.msg="unknown compression method",n.mode=16209;break}if(c>>>=4,u-=4,S=8+(15&c),0===n.wbits&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:16191,c=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==xn){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Ze(n.check,C,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,n.check=Ze(n.check,C,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Ze(n.check,C,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(C[0]=255&c,C[1]=c>>>8&255,n.check=Ze(n.check,C,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>a&&(p=a),p&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),S)),512&n.flags&&4&n.wrap&&(n.check=Ze(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;p=0;do{S=r[s+p++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S))}while(S&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=Ze(n.check,r,p,s)),a-=p,s+=p,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;p=0;do{S=r[s+p++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S))}while(S&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=Ze(n.check,r,p,s)),a-=p,s+=p,S)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}e.adler=n.check=En(c),c=0,u=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,bn;e.adler=n.check=1,n.mode=16191;case 16191:if(t===fn||t===gn)break e;case 16192:if(n.last){c>>>=7&u,u-=7&u,n.mode=16206;break}for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Nn(n),n.mode=16199,t===gn){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&c,c=0,u=0,n.mode=16194,t===gn)break e;case 16194:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=16191;break;case 16196:for(;u<14;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.lens[T[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},x=hn(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,x){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[c&(1<<n.lenbits)-1],m=E>>>24,y=E>>>16&255,b=65535&E,!(m<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(b<16)c>>>=m,u-=m,n.lens[n.have++]=b;else{if(16===b){for(O=m+2;u<O;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(c>>>=m,u-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}S=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(17===b){for(O=m+3;u<O;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,S=0,p=3+(7&c),c>>>=3,u-=3}else{for(O=m+7;u<O;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=m,u-=m,S=0,p=11+(127&c),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;p--;)n.lens[n.have++]=S}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,k={bits:n.lenbits},x=hn(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,x){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},x=hn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,x){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===gn)break e;case 16199:n.mode=16200;case 16200:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,an(e,h),o=e.next_out,i=e.output,l=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;E=n.lencode[c&(1<<n.lenbits)-1],m=E>>>24,y=E>>>16&255,b=65535&E,!(m<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(y&&!(240&y)){for(v=m,_=y,w=b;E=n.lencode[w+((c&(1<<v+_)-1)>>v)],m=E>>>24,y=E>>>16&255,b=65535&E,!(v+m<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=m,u-=m,n.back+=m,n.length=b,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=16191;break}if(64&y){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(O=n.extra;u<O;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;E=n.distcode[c&(1<<n.distbits)-1],m=E>>>24,y=E>>>16&255,b=65535&E,!(m<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(!(240&y)){for(v=m,_=y,w=b;E=n.distcode[w+((c&(1<<v+_)-1)>>v)],m=E>>>24,y=E>>>16&255,b=65535&E,!(v+m<=u);){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=m,u-=m,n.back+=m,64&y){e.msg="invalid distance code",n.mode=16209;break}n.offset=b,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(O=n.extra;u<O;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=i,f=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{i[o++]=g[f++]}while(--p);0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break e;i[o++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;u<32;){if(0===a)break e;a--,c|=r[s++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Ze(n.check,i,h,o-h):Ge(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?c:En(c))!==n.check){e.msg="incorrect data check",n.mode=16209;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,c+=r[s++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=16209;break}c=0,u=0}n.mode=16208;case 16208:x=yn;break e;case 16209:x=_n;break e;case 16210:return wn;default:return vn}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==pn))&&jn(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?Ze(n.check,i,h,e.next_out-h):Ge(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(16191===n.mode?128:0)+(16199===n.mode||16194===n.mode?256:0),(0===d&&0===h||t===pn)&&x===mn&&(x=Sn),x},inflateEnd:e=>{if(kn(e))return vn;let t=e.state;return t.window&&(t.window=null),e.state=null,mn},inflateGetHeader:(e,t)=>{if(kn(e))return vn;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,mn):vn},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return kn(e)?vn:(r=e.state,0!==r.wrap&&16190!==r.mode?vn:16190===r.mode&&(i=1,i=Ge(i,t,n,0),i!==r.check)?_n:(s=jn(e,t,n,n),s?(r.mode=16210,wn):(r.havedict=1,mn)))},inflateInfo:"pako inflate (from Nodeca project)"},An=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ln=Object.prototype.toString,{Z_NO_FLUSH:Fn,Z_FINISH:Un,Z_OK:Gn,Z_STREAM_END:Bn,Z_NEED_DICT:Zn,Z_STREAM_ERROR:Kn,Z_DATA_ERROR:Xn,Z_MEM_ERROR:Vn}=Xe;function Wn(e){this.options=Ft({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Vt,this.strm.avail_out=0;let n=Pn.inflateInit2(this.strm,t.windowBits);if(n!==Gn)throw new Error(Ke[n]);if(this.header=new An,Pn.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Zt(t.dictionary):"[object ArrayBuffer]"===Ln.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Pn.inflateSetDictionary(this.strm,t.dictionary),n!==Gn)))throw new Error(Ke[n])}function Hn(e,t){const n=new Wn(t);if(n.push(e),n.err)throw n.msg||Ke[n.err];return n.result}Wn.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Un:Fn,"[object ArrayBuffer]"===Ln.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=Pn.inflate(n,o),s===Zn&&i&&(s=Pn.inflateSetDictionary(n,i),s===Gn?s=Pn.inflate(n,o):s===Xn&&(s=Zn));n.avail_in>0&&s===Bn&&n.state.wrap>0&&0!==e[n.next_in];)Pn.inflateReset(n),s=Pn.inflate(n,o);switch(s){case Kn:case Xn:case Zn:case Vn:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===Bn))if("string"===this.options.to){let e=Xt(n.output,n.next_out),t=n.next_out-e,i=Kt(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==Gn||0!==a){if(s===Bn)return s=Pn.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Wn.prototype.onData=function(e){this.chunks.push(e)},Wn.prototype.onEnd=function(e){e===Gn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ut(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var $n={Inflate:Wn,inflate:Hn,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Hn(e,t)},ungzip:Hn,constants:Xe};const{Deflate:Yn,deflate:Jn,deflateRaw:Qn,gzip:qn}=on,{Inflate:er,inflate:tr,inflateRaw:nr,ungzip:rr}=$n;var ir={Deflate:Yn,deflate:Jn,deflateRaw:Qn,gzip:qn,Inflate:er,inflate:tr,inflateRaw:nr,ungzip:rr,constants:Xe},sr=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,r=e.method,i=e.success,s=e.fail,o={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var a in this.customHeader)o[a]=this.customHeader[a];window.fetch?fetch(t,{method:r||"POST",headers:o,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){i&&i(e)})).catch((function(e){s&&s(n,e)})):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:n,method:r,success:i,fail:s}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,r=e.success,i=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(n))?r&&r():i&&i(n,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,n=e.url,r=e.data,i=e.method,s=e.success,o=e.fail,a=e.timeout,l=e.withCredentials,c=e.app_key,u=e.zip;try{var d=new XMLHttpRequest,h=i||"POST";if(d.open(h,""+n,!0),d.setRequestHeader("Content-Type","application/json; charset=utf-8"),c&&d.setRequestHeader("X-MCS-AppKey",""+c),Object.keys(this.customHeader).length)for(var p in this.customHeader)d.setRequestHeader(p,this.customHeader[p]);l&&(d.withCredentials=!0),a&&(d.timeout=a,d.ontimeout=function(){o&&o(r,t.errorCode.TIMEOUT)}),d.onload=function(){if(s){var e=null;if(d.responseText){try{e=JSON.parse(d.responseText)}catch{e={}}s(e,r)}}},d.onerror=function(){d.abort(),o&&o(r,t.errorCode.XHR_ON)};try{var f=JSON.stringify(r);if(this.config.need_zip&&u){var g=(new TextEncoder).encode(f),m=ir.gzip(g);d.setRequestHeader("Content-Encoding","gzip"),d.send(m)}else d.send(f)}catch(y){this.collector.emit("sdk-inner-error",{type:"sdk_error_send",eventData:r,errorCode:1e3,msg:y.message||y.stack||"sdk_error_send"})}}catch(y){this.collector.emit("sdk-inner-error",{type:"sdk_error_request",eventData:r,errorCode:1001,msg:y.message||y.stack||"sdk_error_request"})}},e.prototype.useRequest=function(e){var t=e.useBeacon,n=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!n)return void this.useFetch(e);this.useXhr(e)}},e}(),or=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters.storage;this.cacheStorgae=new n(!1),this.loadUrl=t.devtool_url||"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(n){console.log("devTool load fail, "+n.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}))}catch{}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(t){console.log("debug fail, "+t.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.5_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab"),t=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||_(B[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}];e.content=t,this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach((function(n){n.key===e&&(t=n)})),t},e.prototype.setInfo=function(e,t){var n=!1;this.info.forEach((function(r){r.key===e&&(n=!0,r=t)})),n||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var n=this.getInfo(e),r=null;return n.content.forEach((function(e){e.name===t&&(r=e)})),r},e.prototype.setSecondInfo=function(e,t,n){var r=this.getInfo(e),i=!1;if(r.content.forEach((function(e){e.name===t&&(e.value=n,i=!0)})),!i){var s={name:t,value:n,desc:t.toLocaleUpperCase()};r.content.push(s)}this.setInfo(e,r)},e.prototype.loadHook=function(){var e=this;this.collect.on(T.DEBUGGER_MESSAGE,(function(t){switch(t.type){case T.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};if(t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType)e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache());else if("USER"===t.secType)e.setSecondInfo("user","user_unique_id"===t.common?"uuid":t.common,e.collect.configManager.get(t.common));else if("HEADER"===t.secType){var r=e.collect.configManager.get(t.common);e.setSecondInfo("common",t.common,"custom"===t.common?JSON.stringify(r):r)}return void e.updateInfo();case T.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],s=i.events;if(!s.length)return;s.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.focusShow=!0,n.status=t.status,n.type=e.filterEvent.has(n.event)?"sdk":"cus",n.verifyType=t.verifyType?"verify":"no",n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"\uff0c msg: "+(t.msg||t.failType)})})),e.updateEvent(i)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.5_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};window&&window.postMessage(n,this.devToolOrigin)}catch{}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+_("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var r=document.createElement("div");r.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var i=document.createElement("div");i.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(r),document.getElementsByTagName("body")[0].appendChild(i);var s=document.getElementById("debugger-applog-web");s&&s.addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),ar={autotrack:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/autotrack.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/ab.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/stay.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/route.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/tracer.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/retry.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/visual.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/visual.js"},object:"LogVisual"}},lr=["et","profile","heartbeat","monitor"],cr=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new y,this.remotePlugin=new Map,this.Types=X,this.adapters.storage=P}return e.usePlugin=function(t,n,r){if(n){for(var i=!1,s=0,o=e.plugins.length;s<o;s++)if(e.plugins[s].name===n){e.plugins[s].plugin=t,e.plugins[s].options=r||{},i=!0;break}i||e.plugins.push({name:n,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&lr.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,r,i=this;try{n=JSON.parse(JSON.stringify(t))}catch{n=t}if(this.logger=new J(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&b(n))if(n.app_id&&"number"==typeof(r=n.app_id)&&!isNaN(r))if(n.app_key&&"string"!=typeof n.app_key)this.logger.warn("app_key param is error, must be string, please check!");else{if(n.channel_domain||(n.report_channel&&!F().has(n.report_channel)?(this.logger.warn("your report_channel: "+n.channel+" is not exist. report_channel must be one of "+U().join(",")+", use default report_channel: us_east instead, please check!!!"),n.report_channel="us_east"):n.report_channel||-1!==["sg","va","in","my","ie","ie2"].indexOf(n.channel)||(this.logger.warn("your channel: "+n.channel+" is not exist. use report_channel instead and report_channel must be one of "+U().join(",")+", use default report_channel: us_east instead, please check!!!"),n.report_channel="us_east"),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK set channel warning",level:"error",time:Date.now(),data:"your report_channel: "+n.channel+" is not exist. report_channel must be one of "+U().join(",")+", use us_east instead, please check!!!",infoType:"sdk"})),this.spider=new Q,this.spider.checkSpider(n))return this.logger.warn("The current environment may be a spider, can not report!"),void this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK hit spider",level:"error",time:Date.now(),data:"The current environment may be a spider, can not report!",infoType:"sdk"});this.appBridge=new q(this,n.enable_native),this.requestManager=new sr(this,n),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new Y(this,n),this.debugger=new or(this,n),this.initConfig=n,this.emit(X.Init),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:n,level:"info",time:Date.now(),infoType:"cus"}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new re,this.tokenManager=new se,this.sessionManager=new ae,Promise.all([new Promise((function(e){i.once(X.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){i.once(X.Start,(function(){e(!0)}))})),new Promise((function(e){i.once(X.LogSettingReady,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,r=t.options,s=Object.assign(i.initConfig,r);i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var o=new n;return o.apply(i,s),e.push(o),e}),i.pluginInstances)}catch(t){console.warn("load plugin error, "+t.message),i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}i.sdkReady=!0,i.emit(X.Ready),i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Init Completed",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",data:i.configManager.get("user"),infoType:"sdk"}),i.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(i.configManager.get("user"))),i.logger.info("appid: "+n.app_id+", sdk is ready, version is 5.3.5_oversea, you can report now !!!"),n.disable_auto_pv&&(i.disableAutoPageView=!0);try{("full"===i.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(t){i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"})}i.pageView(),i.on(X.TokenChange,(function(e){"webid"===e&&i.pageView(),i.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})})),i.on(X.TokenReset,(function(){i.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user"),infoType:"sdk"})})),i.on(X.RouteChange,(function(e){e.init||n.disable_route_report||i.pageView()}))})),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0}else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(!this.inited)return console.warn("config must be use after function init"),void this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config must be use after function init",infoType:"sdk"});if(!e||!b(e))return console.warn("config params is error, please check"),void this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Config Error",level:"error",time:Date.now(),data:"config params is error, please check",infoType:"sdk"});var t;try{t=JSON.parse(JSON.stringify(t))}catch{t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var n=d({},t);if(this.initConfig&&this.initConfig.configPersist){var r=this.configManager.getStore();r&&(n=Object.assign(r,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id,n.device_id;var i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}(n,["web_id","user_unique_id","device_id"]);n.hasOwnProperty("web_id")&&this.emit(X.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(X.ConfigUuid,n.user_unique_id),n.hasOwnProperty("device_id")&&this.emit(X.ConfigDiD,n.device_id),this.configManager.set(i),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:n,infoType:"cus"})}},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(X.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(X.Start),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(X.Ready)))},e.prototype.event=function(e,t){var n=this;try{var r=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&r.push(t)}));else{var i=this.processEvent(e,t);if(!i)return;r.push(i)}this.bridgeReport?r.forEach((function(e){var t=e.event,r=e.params;n.appBridge.onEventV3(t,JSON.stringify(r))})):r.length&&(this.emit(X.Event,r),this.emit(X.SessionResetTime)),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(s){this.logger.warn("something error, please check"),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:s.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))return this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK BeconEvent Error",level:"error",time:Date.now(),data:"beconEvent not support batch report, please check",infoType:"sdk"}),void this.logger.warn("beconEvent not support batch report, please check");var n=[],r=this.processEvent(e,t||{});r&&(n.push(r),n.length&&(this.emit(X.BeconEvent,n),this.emit(X.SessionResetTime)),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is null\uff0c please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var r=t;"object"!=typeof r&&(r={}),r.profile?delete r.profile:r.event_index=v();var i=void 0;return r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(s){return this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:s.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=d(d({},t),e);this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",n)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(X.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return oe()},e.prototype.setSessionId=function(e){this.emit(X.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(X.ResetStay,{url_path:e,title:t,url:n},X.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(X.SetStay,{url_path:e,title:t,url:n},X.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var r=!1,i=function(t){if(!r){r=!0;var i=n.configManager.get().user;return t&&(i.tobid=t,i["diss".split("").reverse().join("")]=t),e(d({},i))}},s=function(){n.tokenManager.getTobId().then((function(e){i(e)}))};this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?s():(t&&setTimeout((function(){i()}),t),this.on(X.Ready,(function(){s()})))}else console.warn("predefinePageView should call after init")},e.prototype.startTrackEvent=function(e){e&&this.emit(X.TrackEventDurationStart,e,X.TrackEventDuration)},e.prototype.endTrackEvent=function(e,t){void 0===t&&(t={}),e&&this.emit(X.TrackEventDurationEnd,{eventName:e,params:t},X.TrackEventDuration)},e.prototype.pauseTrackEvent=function(e){e&&this.emit(X.TrackEventDurationPause,e,X.TrackEventDuration)},e.prototype.resumeTrackEvent=function(e){e&&this.emit(X.TrackEventDurationResume,e,X.TrackEventDuration)},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(X.ProfileSet,e,X.Profile),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(X.ProfileSetOnce,e,X.Profile),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(X.ProfileIncrement,e,X.Profile),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(X.ProfileUnset,e,X.Profile),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(X.ProfileAppend,e,X.Profile),this.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(X.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,X.Ab)},e.prototype.getVar=function(e,t,n,r){this.emit(X.AbVar,{name:e,defaultValue:t,callback:n,uuid:r},X.Ab)},e.prototype.getABconfig=function(e,t){this.emit(X.AbConfig,{params:e,callback:t},X.Ab)},e.prototype.getABConfig=function(e,t){this.emit(X.AbConfig,{params:e,callback:t},X.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(X.AbVersionChangeOn,e,X.Ab),function(){t.emit(X.AbVersionChangeOff,e,X.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(X.AbVersionChangeOff,e,X.Ab)},e.prototype.openOverlayer=function(){this.emit(X.AbOpenLayer,"",X.Ab)},e.prototype.closeOverlayer=function(){this.emit(X.AbCloseLayer,"",X.Ab)},e.prototype.getAllVars=function(e){this.emit(X.AbAllVars,e,X.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(X.TokenComplete),this.emit(X.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(X.TokenComplete),this.emit(X.DestoryInstance))},e.plugins=[],e}(),ur=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var r=e.Types;e.on(r.SubmitVerify,(function(r){r.forEach((function(r){try{var i=JSON.parse(JSON.stringify(r));t.filter&&((i=t.filter(i))||console.warn("filter must return data !!")),e.eventFilter&&i&&((i=e.eventFilter(i))||console.warn("filterEvent api must return data !!"));var s=i||r,o=JSON.parse(JSON.stringify(s));if(!s.length)return;var a=!0;if(s.forEach((function(e){e.events.length||(a=!1)})),!a)return;e.requestManager.useBeacon({url:n.url,data:s}),e.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:o,code:200,status:"success",verifyType:!0})}catch(l){console.warn("something error, "+JSON.stringify(l.stack)),n.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"SDK Report ByteIo Verify Request Error",level:"error",time:Date.now(),data:l.message})}}))}))}}else console.log("please use correct et_test url")},e}(),dr=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,r=Date.now()+t;return n=window.setTimeout((function i(){var s=Date.now()-r;e(),r+=t,n=window.setTimeout(i,Math.max(0,t-s))}),t),function(){window.clearTimeout(n)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),hr=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var r=this.collect.Types;this.collect.on(r.Ready,(function(){n.sdkOnload()})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode,s=e.response;"f_data"===t&&n.sdkError(r,i,s)})),this.collect.on(e.Types.SDKInnerError,(function(e){var t=e.type,r=e.eventData,i=e.errorCode,s=e.msg;n.sdkInnerError(t,r,i,s)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,r=t.user,i=n.app_id,s=n.app_name,o=n.sdk_version,a=(r.web_id,{events:[{event:"onload",params:JSON.stringify({app_id:i,app_name:s||"",sdk_version:o,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA",url:location.href,is_setting:this.config.enable_logsetting||!1,enable_logsetting_params:this.config.enable_logsetting_params||!1,enable_logsetting_header_custom:this.config.enable_logsetting_header_custom||!1}),local_time_ms:Date.now()}],user:{user_unique_id:r.user_unique_id},header:{app_id:6656}});setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[a],timeout:3e4,forceXhr:!0})}),16)}catch{}},e.prototype.sdkError=function(e,t,n){var r=this;try{var i=e[0],s=i.user,o=i.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var l={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({type:"sdk_event_error",error_code:t,app_id:o.app_id,app_name:o.app_name||"",error_event:e.event,sdk_version:o.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:o,user:s,err_msg:n.m||""}),local_time_ms:Date.now()}})),user:{user_unique_id:s.user_unique_id},header:{app_id:6656}};setTimeout((function(){r.collect.requestManager.useRequest({url:r.url,data:[l],timeout:3e4,forceXhr:!0})}),16)}catch{}},e.prototype.sdkInnerError=function(e,t,n,r){var i=this;try{var s=t[0],o=s.user,a=s.header,l=[];t.forEach((function(e){e.events.forEach((function(e){l.push(e)}))}));var c={events:l.map((function(t){return{event:"on_error",params:JSON.stringify({type:e,error_code:n,app_id:a.app_id,app_name:a.app_name||"",error_event:t.event,sdk_version:a.sdk_version,local_time_ms:t.local_time_ms,tea_event_index:Date.now(),params:t.params,header:a,user:o,ua:window.navigator.userAgent,err_msg:r}),local_time_ms:Date.now()}})),user:o,header:{}};setTimeout((function(){i.collect.requestManager.useRequest({url:i.url,data:[c],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch{}},e}(),pr=typeof window<"u"?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,fr=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(ar.hasOwnProperty(n)){var r=ar[n].object,i=""+ar[n].src[e.channel];e.exist(n,r,i)}else console.warn("your "+n+" is not exist\uff0cplease check plugin name");else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(t){this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"LoadExtend Fail",level:"error",time:Date.now(),data:t.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var r=this;pr[t]?(this.process(e,pr[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,n,(function(){r.process(e,pr[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var r=new t;r.apply&&r.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(i){this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Extend Process Fail",level:"error",time:Date.now(),data:i.message}),console.log("excude "+e+" error, message:"+i.message)}},e.prototype.loadPlugin=function(e,t,n,r){var i=this;try{var s=document.createElement("script");s.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),s.onerror=function(){r(t)},s.onload=function(){i._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(s)}catch(o){this.collect.emit(T.DEBUGGER_MESSAGE,{type:T.DEBUGGER_MESSAGE_SDK,info:"Extend LoadPlugin Fail",level:"error",time:Date.now(),data:o.message})}},e}();cr.usePlugin(fr,"extend"),cr.usePlugin(ur,"et"),cr.usePlugin(dr,"heartbeat"),cr.usePlugin(hr,"monitor");var gr=new cr("default");const mr={selectRoute:900,browserError:1e3,crc32:1e3,preUpload:1001,initUploadID:1002,process:1003,fetchStatus:10031,fileMerge:1004,complete:1005},yr=999,br=1e3,vr=36e5,_r=1024;var wr=(e=>(e.VIDEO="video",e.IMAGE="image",e.OBJECT="object",e))(wr||{});const Sr={video:"video_upload",image:"image_upload",object:"object_upload"},xr={UPLOADING:1,CANCEL:2,PAUSE:3},Er={VOD:"vod",IMAGEX:"imagex"},Cr=611736,kr=3145728,Or=3145728,Tr="uploading_";class Ir{constructor(e,t){this.options=e,this.context=t,this.teaLog=gr,this.noLog=!1;let n=this.getConfigByRegion(this.options.region);const r=this.options.teaConfig;if(r)try{n=Object.assign(n,r),this.noLog=!1}catch{console.warn("[BytedUpload]: tea user config invalid!")}this.noLog||(this.teaLog.init(Object.assign(n,r)),this.teaLog.config({evtParams:{sdk_version:"0.1.12"}}),this.setLineAppId(this.options.appId),this.setUserUniqueId(this.options.userId),this.teaLog.start())}getConfigByRegion(e=""){const t=e.toLowerCase().indexOf("ttp")>=0,n=e.toLowerCase().indexOf("eu")>=0;return this.tea_app_id=Cr,this.tea_report_channel="EU-TTP"===e||"EU-TTP2"===e||"us-east-red"===e||"gcp"===e||n&&t?"eu_ttp2":t?"us_ttp_w":"sg_central_tt",this.options.logDomain&&(this.tea_channel_domain=this.options.logDomain,this.noLog=!1),{app_id:this.tea_app_id,channel_domain:this.tea_channel_domain,report_channel:this.tea_report_channel,log:!1,disable_sdk_monitor:!0,disable_auto_pv:!0}}send(e,t={}){var n,r,i,s;const o=this.context,{key:a}=e,l=o.tasks[a],c=mr[e.stage]||yr,u=e.fileType||l&&l.fileType,d=e.fileSize||0,h={log_type:Sr[u],stage:c,fk:a,fs:d,req:e.req,res:e.res,ts:Math.round(Date.now()/br),sst:e.stageStartTime,set:e.stageEndTime,dur:e.duration,tdur:e.totalDuration||0,durs:e.duration/br||0,tdurs:e.totalDuration/br||0,eslr:e.enableSelectRoute,ucsrr:e.useClientSelectRouteResult,skipCommit:!!e.skipCommit,errc:null==(n=e.extra)?void 0:n.errorCode,err:null==(r=e.extra)?void 0:r.error,msg:null==(i=e.extra)?void 0:i.message,experimental:+!!e.logicalPart,ss:e.sliceSize,sc:e.sliceCount,isBreak:+!!e.isBreak,store_region:e.storeRegion,idu:e.isDirect,serviceType:e.serviceType,gwu:!!e.gatewayUpload,merge_request:!!e.mergeRequest,cache_apply:!!e.cacheApply,ixe:!(null==l||!l.imagexEnableEncrypt),isRestart:+!(null==l||!l.isRestart)},p="image"===u?"image":"video",f=e.type,g=`${p}_`+(["error","retry","finish"].includes(f||"")?f:c);switch(c){case mr.crc32:this.teaLog.event(g,Object.assign({},h,{type:e.type,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,crc32Array:e.crc32Array,isDirect:e.isDirect})}));break;case mr.preUpload:this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,sig:e.signature,stk:e.proxyStsToken})}));break;case mr.initUploadID:this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,upid:e.uploadID})}));break;case mr.process:case mr.fetchStatus:e.isAllFinish||e.isDirect||(delete h.sst,delete h.set,delete h.dur),this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,errc:e.extra&&e.extra.errorCode,upload_host:e.tosDomain,af:!!e.isAllFinish,cst:e.crc32StartTime,cet:e.crc32EndTime,cdur:e.crc32Duration,slst:e.sliceStartTime,slet:e.sliceEndTime,sldurs:e.sliceDuration&&e.sliceDuration/1e3,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message,af:e.isAllFinish}),...t}));break;case mr.fileMerge:this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message})}));break;case mr.complete:this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,speed:Math.round(d/(e.totalDuration/br)/_r),vid:(null==(s=e.uploadResult)?void 0:s.Vid)||"",ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message,vid:e.uploadResult&&e.uploadResult.Vid})}));break;case mr.selectRoute:this.teaLog.event(g,Object.assign({},h,{type:e.type,errc:e.extra&&e.extra.errorCode,race_info:e.raceInfo,client_ip:e.lastClientIp,uc:e.useCache,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,err:e.extra&&e.extra.error,msg:e.extra&&e.extra.message})}));break;default:this.teaLog.event(g,Object.assign({},h,{type:e.type,oid:e.oid,upload_host:e.tosDomain,errc:e.extra&&e.extra.errorCode,ex:JSON.stringify({errc:e.extra&&e.extra.errorCode,msg:e.extra&&e.extra.message})}))}}setLineAppId(e){this.teaLog.config({evtParams:{line_app_id:e}})}setUserUniqueId(e){this.teaLog.config({user_unique_id:e})}baseSend(e,t){this.teaLog.event(e,t)}console(e){this.options.debug&&console.log(e)}}var zr,Rr={exports:{}},Dr={exports:{}};function Mr(){return zr||(zr=1,function(e){var t;t=function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},i=r.lib={},s=i.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),(!t.hasOwnProperty("init")||this.init===t.init)&&(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=o<<24-(r+s)%4*8}else for(s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],i=function(t){var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}},s=0;s<t;s+=4){var a=i(4294967296*(n||e.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new o.init(r,t)}}),a=r.enc={},l=a.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((15&s).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},u=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,a=i/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,c=e.min(4*l,i);if(l){for(var u=0;u<l;u+=s)this._doProcessBlock(r,u);var d=r.splice(0,l);n.sigBytes-=c}return new o.init(d,c)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=r.algo={};return r}(Math);return e},e.exports=t()}(Dr)),Dr.exports}var Nr,jr={exports:{}};function Pr(){return Nr||(Nr=1,function(e){var t;t=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,a=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(a[i]=n(t.pow(r,.5))),l[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],u=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=c[p-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=g+c[p-7]+y+c[p-16]}var b=r&i^r&s^i&s,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+l[p]+c[p];h=d,d=u,u=a,a=o+_|0,o=s,s=i,i=r,r=_+(v+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=s._createHelper(u),n.HmacSHA256=s._createHmacHelper(u)}(Math),e.SHA256},e.exports=t(Mr())}(jr)),jr.exports}var Ar,Lr={exports:{}};function Fr(){return Ar||(Ar=1,function(e){var t;t=function(e){var t,n,r;n=(t=e).lib.Base,r=t.enc.Utf8,t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),o=this._iKey=t.clone(),a=s.words,l=o.words,c=0;c<n;c++)a[c]^=1549556828,l[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})},e.exports=t(Mr())}(Lr)),Lr.exports}!function(e){var t;t=function(e){return e.HmacSHA256},e.exports=t(Mr(),Pr(),Fr())}(Rr);const Ur=t(Rr.exports),Gr=t(Pr());function Br(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zr={exports:{}};!function(t){var n;n=function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof Br&&Br;if(!a&&l)return l(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof Br&&Br,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,r){(function(e){var t,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var i=0,s=new r(u),o=e.document.createTextNode("");s.observe(o,{characterData:!0}),t=function(){o.data=i=++i%2}}else if(!e.setImmediate&&typeof e.MessageChannel<"u"){var a=new e.MessageChannel;a.port1.onmessage=u,t=function(){a.port2.postMessage(0)}}else t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};var l,c=[];function u(){l=!0;for(var e,t,n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}l=!1}function d(e){1===c.push(e)&&!l&&t()}n.exports=d}).call(this,typeof e<"u"?e:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(e,t,n){var r=e(1);function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(i){return s.reject(e,i)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}function o(){t(i,r)}var a=f(o);"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function g(e){return e instanceof this?e:s.resolve(new this(i),e)}function m(e){var t=new this(i);return s.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){function l(e){o[i]=e,++a===n&&!r&&(r=!0,s.resolve(c,o))}t.resolve(e).then(l,(function(e){r||(r=!0,s.reject(c,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(i);++o<n;)l(e[o]);return a;function l(e){t.resolve(e).then((function(e){r||(r=!0,s.resolve(a,e))}),(function(e){r||(r=!0,s.reject(a,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=g,c.reject=m,c.all=y,c.race=b},{1:1}],3:[function(t,n,r){(function(e){"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,typeof e<"u"?e:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var o=s();function a(){try{if(!o||!o.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function l(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}typeof Promise>"u"&&e(3);var c=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",g=void 0,m={},y=Object.prototype.toString,b="readonly",v="readwrite";function _(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function w(e){return new c((function(t){var n=e.transaction(f,v),r=l([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"==typeof g?c.resolve(g):w(e).then((function(e){return g=e}))}function x(e){var t=m[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function C(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function k(e,t){return new c((function(n,r){if(m[e.name]=m[e.name]||P(),e.db){if(!t)return n(e.db);x(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var s=o.open.apply(o,i);t&&(s.onupgradeneeded=function(t){var n=s.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),r(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function O(e){return k(e,!1)}function T(e){return k(e,!0)}function I(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function z(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function R(e){return l([_(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function M(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function N(e){x(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,I(e)?T(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw C(e,t),t}))}function j(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(s){if(r>0&&(!e.db||"InvalidStateError"===s.name||"NotFoundError"===s.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===s.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),T(e)})).then((function(){return N(e).then((function(){j(e,t,n,r-1)}))})).catch(n);n(s)}}function P(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function A(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=m[n.name];i||(i=P(),m[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=M);var s=[];function o(){return c.resolve()}for(var a=0;a<i.forages.length;a++){var l=i.forages[a];l!==t&&s.push(l._initReady().catch(o))}var u=i.forages.slice(0);return c.all(s).then((function(){return n.db=i.db,O(n)})).then((function(e){return n.db=e,I(n,t._defaultConfig.version)?T(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var s=u[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))}function L(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){j(n._dbInfo,b,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),D(e)&&(e=R(e)),t(e)},o.onerror=function(){r(o.error)}}catch(a){r(a)}}))})).catch(r)}));return u(r,t),r}function F(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){j(n._dbInfo,b,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;D(r)&&(r=R(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(l){r(l)}}))})).catch(r)}));return u(r,t),r}function U(e,t,n){var r=this;e=h(e);var i=new c((function(n,i){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===y.call(t)?S(s.db).then((function(e){return e?t:z(t)})):t})).then((function(t){j(r._dbInfo,v,(function(s,o){if(s)return i(s);try{var a=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(c){i(c)}}))})).catch(i)}));return u(i,n),i}function G(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){j(n._dbInfo,v,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(o.error)},s.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(a){r(a)}}))})).catch(r)}));return u(r,t),r}function B(e){var t=this,n=new c((function(e,n){t.ready().then((function(){j(t._dbInfo,v,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)}));return u(n,e),n}function Z(e){var t=this,n=new c((function(e,n){t.ready().then((function(){j(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(o){n(o)}}))})).catch(n)}));return u(n,e),n}function K(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){j(n._dbInfo,b,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName),a=!1,l=o.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(c){r(c)}}))})).catch(r)}));return u(r,t),r}function X(e){var t=this,n=new c((function(e,n){t.ready().then((function(){j(t._dbInfo,b,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];s.onsuccess=function(){var t=s.result;t?(o.push(t.key),t.continue()):e(o)},s.onerror=function(){n(s.error)}}catch(a){n(a)}}))})).catch(n)}));return u(n,e),n}function V(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var s=e.name===n.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):O(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;x(e);var r=m[e.name],i=r.forages;t.close();for(var s=0;s<i.length;s++){var a=i[s];a._dbInfo.db=null,a._dbInfo.version=n}return new c((function(t,r){var i=o.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(C(e,t)||c.resolve()).catch((function(){})),t}))}})):s.then((function(t){x(e);var n=m[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;return new c((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(C(e,t)||c.resolve()).catch((function(){})),t}))}))}else r=c.reject("Invalid arguments");return u(r,t),r}var W={_driver:"asyncStorage",_initStorage:A,_support:a(),iterate:F,getItem:L,setItem:U,removeItem:G,clear:B,length:Z,key:K,keys:X,dropInstance:V};function H(){return"function"==typeof openDatabase}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",q=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",ie="uic8",se="si16",oe="si32",ae="ur16",le="ui32",ce="fl32",ue="fl64",de=q+ee.length,he=Object.prototype.toString;function pe(e){var t,n,r,i,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=$.indexOf(e[t]),r=$.indexOf(e[t+1]),i=$.indexOf(e[t+2]),s=$.indexOf(e[t+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return c}function fe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=$[n[t]>>2],r+=$[(3&n[t])<<4|n[t+1]>>4],r+=$[(15&n[t+1])<<2|n[t+2]>>6],r+=$[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,i=Q;e instanceof ArrayBuffer?(r=e,i+=ee):(r=e.buffer,"[object Int8Array]"===n?i+=ne:"[object Uint8Array]"===n?i+=re:"[object Uint8ClampedArray]"===n?i+=ie:"[object Int16Array]"===n?i+=se:"[object Uint16Array]"===n?i+=ae:"[object Int32Array]"===n?i+=oe:"[object Uint32Array]"===n?i+=le:"[object Float32Array]"===n?i+=ce:"[object Float64Array]"===n?i+=ue:t(new Error("Failed to get type for BinaryArray"))),t(i+fe(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n=Y+e.type+"~"+fe(this.result);t(Q+te+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}}function me(e){if(e.substring(0,q)!==Q)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(q,de);if(r===te&&J.test(n)){var i=n.match(J);t=i[1],n=n.substring(i[0].length)}var s=pe(n);switch(r){case ee:return s;case te:return l([s],{type:t});case ne:return new Int8Array(s);case re:return new Uint8Array(s);case ie:return new Uint8ClampedArray(s);case se:return new Int16Array(s);case ae:return new Uint16Array(s);case oe:return new Int32Array(s);case le:return new Uint32Array(s);case ce:return new Float32Array(s);case ue:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}}var ye={serialize:ge,deserialize:me,stringToBuffer:pe,bufferToString:fe};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction((function(i){be(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,i}function _e(e,t,n,r,i,s){e.executeSql(n,r,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,o):be(e,t,(function(){e.executeSql(n,r,i,s)}),s)}),s):s(e,o)}),s)}function we(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){_e(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Se(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){_e(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var s=r.rows,o=s.length,a=0;a<o;a++){var l=s.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function xe(e,t,n,r){var i=this;e=h(e);var s=new c((function(s,o){i.ready().then((function(){void 0===t&&(t=null);var a=t,l=i._dbInfo;l.serializer.serialize(t,(function(t,c){c?o(c):l.db.transaction((function(n){_e(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(xe.apply(i,[e,a,n,r-1]));o(t)}}))}))})).catch(o)}));return u(s,n),s}function Ee(e,t,n){return xe.apply(this,[e,t,n,1])}function Ce(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){_e(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function ke(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Oe(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Te(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){_e(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ie(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){_e(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function ze(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],s=0;s<r.rows.length;s++)i.push(r.rows.item(s).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Re(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return u(r=e.name?new c((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(ze(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function i(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],o=0,a=e.storeNames.length;o<a;o++)s.push(i(e.storeNames[o]));c.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),r}var De={_driver:"webSQLStorage",_initStorage:ve,_support:H(),iterate:Se,getItem:we,setItem:Ee,removeItem:Ce,clear:ke,length:Oe,key:Te,keys:Ie,dropInstance:Re};function Me(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ne(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Pe(){return!je()||localStorage.length>0}function Ae(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Ne(e,t._defaultConfig),Pe()?(t._dbInfo=n,n.serializer=ye,c.resolve()):c.reject()}function Le(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function Fe(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function Ue(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,s=localStorage.length,o=1,a=0;a<s;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,l.substring(i),o++)))return c}}}));return u(r,t),r}function Ge(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function Be(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var s=localStorage.key(i);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function Ze(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Ke(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function Xe(e,t,n){var r=this;e=h(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(i,s){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(o.keyPrefix+e,t),i(n)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&s(a),s(a)}}))}))}));return u(i,n),i}function Ve(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return u(r=e.name?new c((function(t){e.storeName?t(Ne(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),t),r}var We={_driver:"localStorageWrapper",_initStorage:Ae,_support:Me(),iterate:Ue,getItem:Fe,setItem:Xe,removeItem:Ke,clear:Le,length:Ze,key:Ge,keys:Be,dropInstance:Ve},He=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},$e=function(e,t){for(var n=e.length,r=0;r<n;){if(He(e[r],t))return!0;r++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Qe={},qe={INDEXEDDB:W,WEBSQL:De,LOCALSTORAGE:We},et=[qe.INDEXEDDB._driver,qe.WEBSQL._driver,qe.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ot=function(){function e(t){for(var n in i(this,e),qe)if(qe.hasOwnProperty(n)){var r=qe[n],s=r._driver;this[n]=s,Je[s]||this.defineDriver(r)}this._defaultConfig=st({},rt),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(typeof e>"u"?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var s=nt.concat("_initStorage"),o=0,a=s.length;o<a;o++){var l=s[o];if((!$e(tt,l)||e[l])&&"function"!=typeof e[l])return void n(i)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var i=tt[n];e[i]||(e[i]=t(i))}};d();var h=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(p){n(p)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?c.resolve(Je[e]):c.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ye(e)||(e=[e]);var i=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function o(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(o).catch(n)}s();var a=new Error("No available storage method found.");return r._driverSet=c.reject(a),r._driverSet}return n()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=l.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(i)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)it(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new ot;t.exports=at},{3:3}]},{},[4])(4)},t.exports=n()}(Zr);const Kr=t(Zr.exports),Xr={FILE_ERROR:1000001,STSTOKEN_FORMAT_ERROR:1000002,CRC32_ERROR:1000003,APPLY_NETWORK_ERROR:1001e3,INIT_UPLOAD_ID_NETWORK_ERROR:1002e3,PROGRESS_NETWORK_ERROR:1003e3,FILE_ERROR_UPLOADING:1003003,GET_PART_FAIL:1003004,MERGE_NETWORK_ERROR:1004e3,COMMIT_NETWORK_ERROR:1005e3},Vr={STS_TOKEN_ERROR:100026,TOKEN_EXPIRED:100006,READ_IO_ERROR:4099,ENCRYPTION_ERROR:5003,PART_NUMBER_NOT_FOUND:4021,UPLOAD_PART_OUT_OF_RANGE:4010,BAD_REQUEST:4e3,ACQUIRE_LOCK_TIMEOUT:4026,PART_MERGED:4024},Wr={FILE_ERROR:"The file is not an instance of Blob ",STSTOKEN_FORMAT_ERROR:"The format of stsToken is incorrect.",FILE_ERROR_UPLOADING:"An error occurred reading the file",GET_PART_FAIL:"An error occurred getting part information from server",PROGRESS_NETWORK_ERROR:"slice upload failed: NETERROR"};let Hr=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function $r(e,t){e=new Uint8Array(e);let n=~t;const{length:r}=e;for(let i=0;i<r;i++)n=Hr[255&(n^e[i])]^n>>>8;return~n>>>0}function Yr(e){return e.length<8?Yr(e=`0${e}`):e}function Jr(e){if(typeof e<"u")return Yr(Number(e).toString(16))}typeof Int32Array<"u"&&(Hr=new Int32Array(Hr));const Qr={crc32:$r,dec2hex:Jr},qr="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBLPXR5cGVvZiBnbG9iYWxUaGlzPCJ1Ij9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3c8InUiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsPCJ1Ij9nbG9iYWw6dHlwZW9mIHNlbGY8InUiP3NlbGY6e307ZnVuY3Rpb24gVChDKXtyZXR1cm4gQyYmQy5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQywiZGVmYXVsdCIpP0MuZGVmYXVsdDpDfXZhciBYPXtleHBvcnRzOnt9fSxWPXtleHBvcnRzOnt9fSxycjtmdW5jdGlvbiBVKCl7cmV0dXJuIHJyfHwocnI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMpe0MuZXhwb3J0cz1jKCl9KShLLGZ1bmN0aW9uKCl7dmFyIGI9Ynx8ZnVuY3Rpb24oYyxrKXt2YXIgRD1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHIoKXt9cmV0dXJuIGZ1bmN0aW9uKGYpe3ZhciBoO3JldHVybiByLnByb3RvdHlwZT1mLGg9bmV3IHIsci5wcm90b3R5cGU9bnVsbCxofX0oKSxGPXt9LFM9Ri5saWI9e30seT1TLkJhc2U9ZnVuY3Rpb24oKXtyZXR1cm57ZXh0ZW5kOmZ1bmN0aW9uKHIpe3ZhciBmPUQodGhpcyk7cmV0dXJuIHImJmYubWl4SW4ociksKCFmLmhhc093blByb3BlcnR5KCJpbml0Iil8fHRoaXMuaW5pdD09PWYuaW5pdCkmJihmLmluaXQ9ZnVuY3Rpb24oKXtmLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGYuaW5pdC5wcm90b3R5cGU9ZixmLiRzdXBlcj10aGlzLGZ9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciByPXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHIuaW5pdC5hcHBseShyLGFyZ3VtZW50cykscn0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24ocil7Zm9yKHZhciBmIGluIHIpci5oYXNPd25Qcm9wZXJ0eShmKSYmKHRoaXNbZl09cltmXSk7ci5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9ci50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX19KCksdD1TLldvcmRBcnJheT15LmV4dGVuZCh7aW5pdDpmdW5jdGlvbihyLGYpe3I9dGhpcy53b3Jkcz1yfHxbXSxmIT1rP3RoaXMuc2lnQnl0ZXM9Zjp0aGlzLnNpZ0J5dGVzPXIubGVuZ3RoKjR9LHRvU3RyaW5nOmZ1bmN0aW9uKHIpe3JldHVybihyfHxtKS5zdHJpbmdpZnkodGhpcyl9LGNvbmNhdDpmdW5jdGlvbihyKXt2YXIgZj10aGlzLndvcmRzLGg9ci53b3JkcyxhPXRoaXMuc2lnQnl0ZXMsbj1yLnNpZ0J5dGVzO2lmKHRoaXMuY2xhbXAoKSxhJTQpZm9yKHZhciB1PTA7dTxuO3UrKyl7dmFyIHo9aFt1Pj4+Ml0+Pj4yNC11JTQqOCYyNTU7ZlthK3U+Pj4yXXw9ejw8MjQtKGErdSklNCo4fWVsc2UgZm9yKHZhciB1PTA7dTxuO3UrPTQpZlthK3U+Pj4yXT1oW3U+Pj4yXTtyZXR1cm4gdGhpcy5zaWdCeXRlcys9bix0aGlzfSxjbGFtcDpmdW5jdGlvbigpe3ZhciByPXRoaXMud29yZHMsZj10aGlzLnNpZ0J5dGVzO3JbZj4+PjJdJj00Mjk0OTY3Mjk1PDwzMi1mJTQqOCxyLmxlbmd0aD1jLmNlaWwoZi80KX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgcj15LmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHIud29yZHM9dGhpcy53b3Jkcy5zbGljZSgwKSxyfSxyYW5kb206ZnVuY3Rpb24ocil7Zm9yKHZhciBmPVtdLGg9ZnVuY3Rpb24odyl7dmFyIHc9dyxQPTk4NzY1NDMyMSxIPTQyOTQ5NjcyOTU7cmV0dXJuIGZ1bmN0aW9uKCl7UD0zNjk2OSooUCY2NTUzNSkrKFA+PjE2KSZILHc9MThlMyoodyY2NTUzNSkrKHc+PjE2KSZIO3ZhciBlPShQPDwxNikrdyZIO3JldHVybiBlLz00Mjk0OTY3Mjk2LGUrPS41LGUqKGMucmFuZG9tKCk+LjU/MTotMSl9fSxhPTAsbjthPHI7YSs9NCl7dmFyIHU9aCgobnx8Yy5yYW5kb20oKSkqNDI5NDk2NzI5Nik7bj11KCkqOTg3NjU0MDcxLGYucHVzaCh1KCkqNDI5NDk2NzI5NnwwKX1yZXR1cm4gbmV3IHQuaW5pdChmLHIpfX0pLEI9Ri5lbmM9e30sbT1CLkhleD17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLndvcmRzLGg9ci5zaWdCeXRlcyxhPVtdLG49MDtuPGg7bisrKXt2YXIgdT1mW24+Pj4yXT4+PjI0LW4lNCo4JjI1NTthLnB1c2goKHU+Pj40KS50b1N0cmluZygxNikpLGEucHVzaCgodSYxNSkudG9TdHJpbmcoMTYpKX1yZXR1cm4gYS5qb2luKCIiKX0scGFyc2U6ZnVuY3Rpb24ocil7Zm9yKHZhciBmPXIubGVuZ3RoLGg9W10sYT0wO2E8ZjthKz0yKWhbYT4+PjNdfD1wYXJzZUludChyLnN1YnN0cihhLDIpLDE2KTw8MjQtYSU4KjQ7cmV0dXJuIG5ldyB0LmluaXQoaCxmLzIpfX0scD1CLkxhdGluMT17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLndvcmRzLGg9ci5zaWdCeXRlcyxhPVtdLG49MDtuPGg7bisrKXt2YXIgdT1mW24+Pj4yXT4+PjI0LW4lNCo4JjI1NTthLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1KSl9cmV0dXJuIGEuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHIpe2Zvcih2YXIgZj1yLmxlbmd0aCxoPVtdLGE9MDthPGY7YSsrKWhbYT4+PjJdfD0oci5jaGFyQ29kZUF0KGEpJjI1NSk8PDI0LWElNCo4O3JldHVybiBuZXcgdC5pbml0KGgsZil9fSxsPUIuVXRmOD17c3RyaW5naWZ5OmZ1bmN0aW9uKHIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShwLnN0cmluZ2lmeShyKSkpfWNhdGNoe3Rocm93IG5ldyBFcnJvcigiTWFsZm9ybWVkIFVURi04IGRhdGEiKX19LHBhcnNlOmZ1bmN0aW9uKHIpe3JldHVybiBwLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChyKSkpfX0sRT1TLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG09eS5leHRlbmQoe3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fZGF0YT1uZXcgdC5pbml0LHRoaXMuX25EYXRhQnl0ZXM9MH0sX2FwcGVuZDpmdW5jdGlvbihyKXt0eXBlb2Ygcj09InN0cmluZyImJihyPWwucGFyc2UocikpLHRoaXMuX2RhdGEuY29uY2F0KHIpLHRoaXMuX25EYXRhQnl0ZXMrPXIuc2lnQnl0ZXN9LF9wcm9jZXNzOmZ1bmN0aW9uKHIpe3ZhciBmPXRoaXMuX2RhdGEsaD1mLndvcmRzLGE9Zi5zaWdCeXRlcyxuPXRoaXMuYmxvY2tTaXplLHU9bio0LHo9YS91O3I/ej1jLmNlaWwoeik6ej1jLm1heCgoenwwKS10aGlzLl9taW5CdWZmZXJTaXplLDApO3ZhciB3PXoqbixQPWMubWluKHcqNCxhKTtpZih3KXtmb3IodmFyIEg9MDtIPHc7SCs9bil0aGlzLl9kb1Byb2Nlc3NCbG9jayhoLEgpO3ZhciBlPWguc3BsaWNlKDAsdyk7Zi5zaWdCeXRlcy09UH1yZXR1cm4gbmV3IHQuaW5pdChlLFApfSxjbG9uZTpmdW5jdGlvbigpe3ZhciByPXkuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gci5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCkscn0sX21pbkJ1ZmZlclNpemU6MH0pO1MuSGFzaGVyPUUuZXh0ZW5kKHtjZmc6eS5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChyKSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7RS5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHIpe3JldHVybiB0aGlzLl9hcHBlbmQociksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHIpe3ImJnRoaXMuX2FwcGVuZChyKTt2YXIgZj10aGlzLl9kb0ZpbmFsaXplKCk7cmV0dXJuIGZ9LGJsb2NrU2l6ZToxNixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKHIpe3JldHVybiBmdW5jdGlvbihmLGgpe3JldHVybiBuZXcgci5pbml0KGgpLmZpbmFsaXplKGYpfX0sX2NyZWF0ZUhtYWNIZWxwZXI6ZnVuY3Rpb24ocil7cmV0dXJuIGZ1bmN0aW9uKGYsaCl7cmV0dXJuIG5ldyBnLkhNQUMuaW5pdChyLGgpLmZpbmFsaXplKGYpfX19KTt2YXIgZz1GLmFsZ289e307cmV0dXJuIEZ9KE1hdGgpO3JldHVybiBifSl9KFYpKSxWLmV4cG9ydHN9dmFyIEc9e2V4cG9ydHM6e319LGVyO2Z1bmN0aW9uIHlyKCl7cmV0dXJuIGVyfHwoZXI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMpe0MuZXhwb3J0cz1jKFUoKSl9KShLLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPWIsaz1jLmxpYixEPWsuV29yZEFycmF5LEY9Yy5lbmM7Ri5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih5KXt2YXIgdD15LndvcmRzLEI9eS5zaWdCeXRlcyxtPXRoaXMuX21hcDt5LmNsYW1wKCk7Zm9yKHZhciBwPVtdLGw9MDtsPEI7bCs9Mylmb3IodmFyIEU9dFtsPj4+Ml0+Pj4yNC1sJTQqOCYyNTUsZz10W2wrMT4+PjJdPj4+MjQtKGwrMSklNCo4JjI1NSxyPXRbbCsyPj4+Ml0+Pj4yNC0obCsyKSU0KjgmMjU1LGY9RTw8MTZ8Zzw8OHxyLGg9MDtoPDQmJmwraCouNzU8QjtoKyspcC5wdXNoKG0uY2hhckF0KGY+Pj42KigzLWgpJjYzKSk7dmFyIGE9bS5jaGFyQXQoNjQpO2lmKGEpZm9yKDtwLmxlbmd0aCU0OylwLnB1c2goYSk7cmV0dXJuIHAuam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHkpe3ZhciB0PXkubGVuZ3RoLEI9dGhpcy5fbWFwLG09dGhpcy5fcmV2ZXJzZU1hcDtpZighbSl7bT10aGlzLl9yZXZlcnNlTWFwPVtdO2Zvcih2YXIgcD0wO3A8Qi5sZW5ndGg7cCsrKW1bQi5jaGFyQ29kZUF0KHApXT1wfXZhciBsPUIuY2hhckF0KDY0KTtpZihsKXt2YXIgRT15LmluZGV4T2YobCk7RSE9PS0xJiYodD1FKX1yZXR1cm4gUyh5LHQsbSl9LF9tYXA6IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89In07ZnVuY3Rpb24gUyh5LHQsQil7Zm9yKHZhciBtPVtdLHA9MCxsPTA7bDx0O2wrKylpZihsJTQpe3ZhciBFPUJbeS5jaGFyQ29kZUF0KGwtMSldPDxsJTQqMixnPUJbeS5jaGFyQ29kZUF0KGwpXT4+PjYtbCU0KjI7bVtwPj4+Ml18PShFfGcpPDwyNC1wJTQqOCxwKyt9cmV0dXJuIEQuY3JlYXRlKG0scCl9fSgpLGIuZW5jLkJhc2U2NH0pfShHKSksRy5leHBvcnRzfXZhciBqPXtleHBvcnRzOnt9fSx0cjtmdW5jdGlvbiBCcigpe3JldHVybiB0cnx8KHRyPTEsZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGs9YixEPWsubGliLEY9RC5Xb3JkQXJyYXksUz1ELkhhc2hlcix5PWsuYWxnbyx0PVtdOyhmdW5jdGlvbigpe2Zvcih2YXIgZz0wO2c8NjQ7ZysrKXRbZ109Yy5hYnMoYy5zaW4oZysxKSkqNDI5NDk2NzI5NnwwfSkoKTt2YXIgQj15Lk1ENT1TLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9oYXNoPW5ldyBGLmluaXQoWzE3MzI1ODQxOTMsNDAyMzIzMzQxNywyNTYyMzgzMTAyLDI3MTczMzg3OF0pfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24oZyxyKXtmb3IodmFyIGY9MDtmPDE2O2YrKyl7dmFyIGg9citmLGE9Z1toXTtnW2hdPShhPDw4fGE+Pj4yNCkmMTY3MTE5MzV8KGE8PDI0fGE+Pj44KSY0Mjc4MjU1MzYwfXZhciBuPXRoaXMuX2hhc2gud29yZHMsdT1nW3IrMF0sej1nW3IrMV0sdz1nW3IrMl0sUD1nW3IrM10sSD1nW3IrNF0sZT1nW3IrNV0saT1nW3IrNl0sXz1nW3IrN10sdj1nW3IrOF0sQT1nW3IrOV0sUj1nW3IrMTBdLEw9Z1tyKzExXSxJPWdbcisxMl0sTT1nW3IrMTNdLHE9Z1tyKzE0XSxOPWdbcisxNV0sbz1uWzBdLHM9blsxXSx4PW5bMl0sZD1uWzNdO289bShvLHMseCxkLHUsNyx0WzBdKSxkPW0oZCxvLHMseCx6LDEyLHRbMV0pLHg9bSh4LGQsbyxzLHcsMTcsdFsyXSkscz1tKHMseCxkLG8sUCwyMix0WzNdKSxvPW0obyxzLHgsZCxILDcsdFs0XSksZD1tKGQsbyxzLHgsZSwxMix0WzVdKSx4PW0oeCxkLG8scyxpLDE3LHRbNl0pLHM9bShzLHgsZCxvLF8sMjIsdFs3XSksbz1tKG8scyx4LGQsdiw3LHRbOF0pLGQ9bShkLG8scyx4LEEsMTIsdFs5XSkseD1tKHgsZCxvLHMsUiwxNyx0WzEwXSkscz1tKHMseCxkLG8sTCwyMix0WzExXSksbz1tKG8scyx4LGQsSSw3LHRbMTJdKSxkPW0oZCxvLHMseCxNLDEyLHRbMTNdKSx4PW0oeCxkLG8scyxxLDE3LHRbMTRdKSxzPW0ocyx4LGQsbyxOLDIyLHRbMTVdKSxvPXAobyxzLHgsZCx6LDUsdFsxNl0pLGQ9cChkLG8scyx4LGksOSx0WzE3XSkseD1wKHgsZCxvLHMsTCwxNCx0WzE4XSkscz1wKHMseCxkLG8sdSwyMCx0WzE5XSksbz1wKG8scyx4LGQsZSw1LHRbMjBdKSxkPXAoZCxvLHMseCxSLDksdFsyMV0pLHg9cCh4LGQsbyxzLE4sMTQsdFsyMl0pLHM9cChzLHgsZCxvLEgsMjAsdFsyM10pLG89cChvLHMseCxkLEEsNSx0WzI0XSksZD1wKGQsbyxzLHgscSw5LHRbMjVdKSx4PXAoeCxkLG8scyxQLDE0LHRbMjZdKSxzPXAocyx4LGQsbyx2LDIwLHRbMjddKSxvPXAobyxzLHgsZCxNLDUsdFsyOF0pLGQ9cChkLG8scyx4LHcsOSx0WzI5XSkseD1wKHgsZCxvLHMsXywxNCx0WzMwXSkscz1wKHMseCxkLG8sSSwyMCx0WzMxXSksbz1sKG8scyx4LGQsZSw0LHRbMzJdKSxkPWwoZCxvLHMseCx2LDExLHRbMzNdKSx4PWwoeCxkLG8scyxMLDE2LHRbMzRdKSxzPWwocyx4LGQsbyxxLDIzLHRbMzVdKSxvPWwobyxzLHgsZCx6LDQsdFszNl0pLGQ9bChkLG8scyx4LEgsMTEsdFszN10pLHg9bCh4LGQsbyxzLF8sMTYsdFszOF0pLHM9bChzLHgsZCxvLFIsMjMsdFszOV0pLG89bChvLHMseCxkLE0sNCx0WzQwXSksZD1sKGQsbyxzLHgsdSwxMSx0WzQxXSkseD1sKHgsZCxvLHMsUCwxNix0WzQyXSkscz1sKHMseCxkLG8saSwyMyx0WzQzXSksbz1sKG8scyx4LGQsQSw0LHRbNDRdKSxkPWwoZCxvLHMseCxJLDExLHRbNDVdKSx4PWwoeCxkLG8scyxOLDE2LHRbNDZdKSxzPWwocyx4LGQsbyx3LDIzLHRbNDddKSxvPUUobyxzLHgsZCx1LDYsdFs0OF0pLGQ9RShkLG8scyx4LF8sMTAsdFs0OV0pLHg9RSh4LGQsbyxzLHEsMTUsdFs1MF0pLHM9RShzLHgsZCxvLGUsMjEsdFs1MV0pLG89RShvLHMseCxkLEksNix0WzUyXSksZD1FKGQsbyxzLHgsUCwxMCx0WzUzXSkseD1FKHgsZCxvLHMsUiwxNSx0WzU0XSkscz1FKHMseCxkLG8seiwyMSx0WzU1XSksbz1FKG8scyx4LGQsdiw2LHRbNTZdKSxkPUUoZCxvLHMseCxOLDEwLHRbNTddKSx4PUUoeCxkLG8scyxpLDE1LHRbNThdKSxzPUUocyx4LGQsbyxNLDIxLHRbNTldKSxvPUUobyxzLHgsZCxILDYsdFs2MF0pLGQ9RShkLG8scyx4LEwsMTAsdFs2MV0pLHg9RSh4LGQsbyxzLHcsMTUsdFs2Ml0pLHM9RShzLHgsZCxvLEEsMjEsdFs2M10pLG5bMF09blswXStvfDAsblsxXT1uWzFdK3N8MCxuWzJdPW5bMl0reHwwLG5bM109blszXStkfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcy5fZGF0YSxyPWcud29yZHMsZj10aGlzLl9uRGF0YUJ5dGVzKjgsaD1nLnNpZ0J5dGVzKjg7cltoPj4+NV18PTEyODw8MjQtaCUzMjt2YXIgYT1jLmZsb29yKGYvNDI5NDk2NzI5Niksbj1mO3JbKGgrNjQ+Pj45PDw0KSsxNV09KGE8PDh8YT4+PjI0KSYxNjcxMTkzNXwoYTw8MjR8YT4+PjgpJjQyNzgyNTUzNjAsclsoaCs2ND4+Pjk8PDQpKzE0XT0objw8OHxuPj4+MjQpJjE2NzExOTM1fChuPDwyNHxuPj4+OCkmNDI3ODI1NTM2MCxnLnNpZ0J5dGVzPShyLmxlbmd0aCsxKSo0LHRoaXMuX3Byb2Nlc3MoKTtmb3IodmFyIHU9dGhpcy5faGFzaCx6PXUud29yZHMsdz0wO3c8NDt3Kyspe3ZhciBQPXpbd107elt3XT0oUDw8OHxQPj4+MjQpJjE2NzExOTM1fChQPDwyNHxQPj4+OCkmNDI3ODI1NTM2MH1yZXR1cm4gdX0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZz1TLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIGcuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLGd9fSk7ZnVuY3Rpb24gbShnLHIsZixoLGEsbix1KXt2YXIgej1nKyhyJmZ8fnImaCkrYSt1O3JldHVybih6PDxufHo+Pj4zMi1uKStyfWZ1bmN0aW9uIHAoZyxyLGYsaCxhLG4sdSl7dmFyIHo9ZysociZofGYmfmgpK2ErdTtyZXR1cm4oejw8bnx6Pj4+MzItbikrcn1mdW5jdGlvbiBsKGcscixmLGgsYSxuLHUpe3ZhciB6PWcrKHJeZl5oKSthK3U7cmV0dXJuKHo8PG58ej4+PjMyLW4pK3J9ZnVuY3Rpb24gRShnLHIsZixoLGEsbix1KXt2YXIgej1nKyhmXihyfH5oKSkrYSt1O3JldHVybih6PDxufHo+Pj4zMi1uKStyfWsuTUQ1PVMuX2NyZWF0ZUhlbHBlcihCKSxrLkhtYWNNRDU9Uy5fY3JlYXRlSG1hY0hlbHBlcihCKX0oTWF0aCksYi5NRDV9KX0oaikpLGouZXhwb3J0c312YXIgJD17ZXhwb3J0czp7fX0sUT17ZXhwb3J0czp7fX0sYXI7ZnVuY3Rpb24gbXIoKXtyZXR1cm4gYXJ8fChhcj0xLGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyl7Qy5leHBvcnRzPWMoVSgpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9YixrPWMubGliLEQ9ay5Xb3JkQXJyYXksRj1rLkhhc2hlcixTPWMuYWxnbyx5PVtdLHQ9Uy5TSEExPUYuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IEQuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKEIsbSl7Zm9yKHZhciBwPXRoaXMuX2hhc2gud29yZHMsbD1wWzBdLEU9cFsxXSxnPXBbMl0scj1wWzNdLGY9cFs0XSxoPTA7aDw4MDtoKyspe2lmKGg8MTYpeVtoXT1CW20raF18MDtlbHNle3ZhciBhPXlbaC0zXV55W2gtOF1eeVtoLTE0XV55W2gtMTZdO3lbaF09YTw8MXxhPj4+MzF9dmFyIG49KGw8PDV8bD4+PjI3KStmK3lbaF07aDwyMD9uKz0oRSZnfH5FJnIpKzE1MTg1MDAyNDk6aDw0MD9uKz0oRV5nXnIpKzE4NTk3NzUzOTM6aDw2MD9uKz0oRSZnfEUmcnxnJnIpLTE4OTQwMDc1ODg6bis9KEVeZ15yKS04OTk0OTc1MTQsZj1yLHI9ZyxnPUU8PDMwfEU+Pj4yLEU9bCxsPW59cFswXT1wWzBdK2x8MCxwWzFdPXBbMV0rRXwwLHBbMl09cFsyXStnfDAscFszXT1wWzNdK3J8MCxwWzRdPXBbNF0rZnwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBCPXRoaXMuX2RhdGEsbT1CLndvcmRzLHA9dGhpcy5fbkRhdGFCeXRlcyo4LGw9Qi5zaWdCeXRlcyo4O3JldHVybiBtW2w+Pj41XXw9MTI4PDwyNC1sJTMyLG1bKGwrNjQ+Pj45PDw0KSsxNF09TWF0aC5mbG9vcihwLzQyOTQ5NjcyOTYpLG1bKGwrNjQ+Pj45PDw0KSsxNV09cCxCLnNpZ0J5dGVzPW0ubGVuZ3RoKjQsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIEI9Ri5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiBCLl9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSxCfX0pO2MuU0hBMT1GLl9jcmVhdGVIZWxwZXIodCksYy5IbWFjU0hBMT1GLl9jcmVhdGVIbWFjSGVscGVyKHQpfSgpLGIuU0hBMX0pfShRKSksUS5leHBvcnRzfXZhciBZPXtleHBvcnRzOnt9fSxucjtmdW5jdGlvbiBDcigpe3JldHVybiBucnx8KG5yPTEsZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXsoZnVuY3Rpb24oKXt2YXIgYz1iLGs9Yy5saWIsRD1rLkJhc2UsRj1jLmVuYyxTPUYuVXRmOCx5PWMuYWxnbzt5LkhNQUM9RC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxCKXt0PXRoaXMuX2hhc2hlcj1uZXcgdC5pbml0LHR5cGVvZiBCPT0ic3RyaW5nIiYmKEI9Uy5wYXJzZShCKSk7dmFyIG09dC5ibG9ja1NpemUscD1tKjQ7Qi5zaWdCeXRlcz5wJiYoQj10LmZpbmFsaXplKEIpKSxCLmNsYW1wKCk7Zm9yKHZhciBsPXRoaXMuX29LZXk9Qi5jbG9uZSgpLEU9dGhpcy5faUtleT1CLmNsb25lKCksZz1sLndvcmRzLHI9RS53b3JkcyxmPTA7ZjxtO2YrKylnW2ZdXj0xNTQ5NTU2ODI4LHJbZl1ePTkwOTUyMjQ4NjtsLnNpZ0J5dGVzPUUuc2lnQnl0ZXM9cCx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faGFzaGVyO3QucmVzZXQoKSx0LnVwZGF0ZSh0aGlzLl9pS2V5KX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9oYXNoZXIudXBkYXRlKHQpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3ZhciBCPXRoaXMuX2hhc2hlcixtPUIuZmluYWxpemUodCk7Qi5yZXNldCgpO3ZhciBwPUIuZmluYWxpemUodGhpcy5fb0tleS5jbG9uZSgpLmNvbmNhdChtKSk7cmV0dXJuIHB9fSl9KSgpfSl9KFkpKSxZLmV4cG9ydHN9dmFyIGlyO2Z1bmN0aW9uIG9yKCl7cmV0dXJuIGlyfHwoaXI9MSxmdW5jdGlvbihDLFcpeyhmdW5jdGlvbihiLGMsayl7Qy5leHBvcnRzPWMoVSgpLG1yKCksQ3IoKSl9KShLLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3ZhciBjPWIsaz1jLmxpYixEPWsuQmFzZSxGPWsuV29yZEFycmF5LFM9Yy5hbGdvLHk9Uy5NRDUsdD1TLkV2cEtERj1ELmV4dGVuZCh7Y2ZnOkQuZXh0ZW5kKHtrZXlTaXplOjEyOC8zMixoYXNoZXI6eSxpdGVyYXRpb25zOjF9KSxpbml0OmZ1bmN0aW9uKEIpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChCKX0sY29tcHV0ZTpmdW5jdGlvbihCLG0pe2Zvcih2YXIgcD10aGlzLmNmZyxsPXAuaGFzaGVyLmNyZWF0ZSgpLEU9Ri5jcmVhdGUoKSxnPUUud29yZHMscj1wLmtleVNpemUsZj1wLml0ZXJhdGlvbnM7Zy5sZW5ndGg8cjspe2gmJmwudXBkYXRlKGgpO3ZhciBoPWwudXBkYXRlKEIpLmZpbmFsaXplKG0pO2wucmVzZXQoKTtmb3IodmFyIGE9MTthPGY7YSsrKWg9bC5maW5hbGl6ZShoKSxsLnJlc2V0KCk7RS5jb25jYXQoaCl9cmV0dXJuIEUuc2lnQnl0ZXM9cio0LEV9fSk7Yy5FdnBLREY9ZnVuY3Rpb24oQixtLHApe3JldHVybiB0LmNyZWF0ZShwKS5jb21wdXRlKEIsbSl9fSgpLGIuRXZwS0RGfSl9KCQpKSwkLmV4cG9ydHN9dmFyIFo9e2V4cG9ydHM6e319LGNyO2Z1bmN0aW9uIE8oKXtyZXR1cm4gY3J8fChjcj0xLGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCksb3IoKSl9KShLLGZ1bmN0aW9uKGIpe2IubGliLkNpcGhlcnx8ZnVuY3Rpb24oYyl7dmFyIGs9YixEPWsubGliLEY9RC5CYXNlLFM9RC5Xb3JkQXJyYXkseT1ELkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0sdD1rLmVuYzt0LlV0Zjg7dmFyIEI9dC5CYXNlNjQsbT1rLmFsZ28scD1tLkV2cEtERixsPUQuQ2lwaGVyPXkuZXh0ZW5kKHtjZmc6Ri5leHRlbmQoKSxjcmVhdGVFbmNyeXB0b3I6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5jcmVhdGUodGhpcy5fRU5DX1hGT1JNX01PREUsZSxpKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0RFQ19YRk9STV9NT0RFLGUsaSl9LGluaXQ6ZnVuY3Rpb24oZSxpLF8pe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZChfKSx0aGlzLl94Zm9ybU1vZGU9ZSx0aGlzLl9rZXk9aSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7eS5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0scHJvY2VzczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXBwZW5kKGUpLHRoaXMuX3Byb2Nlc3MoKX0sZmluYWxpemU6ZnVuY3Rpb24oZSl7ZSYmdGhpcy5fYXBwZW5kKGUpO3ZhciBpPXRoaXMuX2RvRmluYWxpemUoKTtyZXR1cm4gaX0sa2V5U2l6ZToxMjgvMzIsaXZTaXplOjEyOC8zMixfRU5DX1hGT1JNX01PREU6MSxfREVDX1hGT1JNX01PREU6MixfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShpKXtyZXR1cm4gdHlwZW9mIGk9PSJzdHJpbmciP0g6en1yZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24oXyx2LEEpe3JldHVybiBlKHYpLmVuY3J5cHQoaSxfLHYsQSl9LGRlY3J5cHQ6ZnVuY3Rpb24oXyx2LEEpe3JldHVybiBlKHYpLmRlY3J5cHQoaSxfLHYsQSl9fX19KCl9KTtELlN0cmVhbUNpcGhlcj1sLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9wcm9jZXNzKCEwKTtyZXR1cm4gZX0sYmxvY2tTaXplOjF9KTt2YXIgRT1rLm1vZGU9e30sZz1ELkJsb2NrQ2lwaGVyTW9kZT1GLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShlLGkpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKGUsaSl9LGluaXQ6ZnVuY3Rpb24oZSxpKXt0aGlzLl9jaXBoZXI9ZSx0aGlzLl9pdj1pfX0pLHI9RS5DQkM9ZnVuY3Rpb24oKXt2YXIgZT1nLmV4dGVuZCgpO2UuRW5jcnlwdG9yPWUuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24oXyx2KXt2YXIgQT10aGlzLl9jaXBoZXIsUj1BLmJsb2NrU2l6ZTtpLmNhbGwodGhpcyxfLHYsUiksQS5lbmNyeXB0QmxvY2soXyx2KSx0aGlzLl9wcmV2QmxvY2s9Xy5zbGljZSh2LHYrUil9fSksZS5EZWNyeXB0b3I9ZS5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihfLHYpe3ZhciBBPXRoaXMuX2NpcGhlcixSPUEuYmxvY2tTaXplLEw9Xy5zbGljZSh2LHYrUik7QS5kZWNyeXB0QmxvY2soXyx2KSxpLmNhbGwodGhpcyxfLHYsUiksdGhpcy5fcHJldkJsb2NrPUx9fSk7ZnVuY3Rpb24gaShfLHYsQSl7dmFyIFI9dGhpcy5faXY7aWYoUil7dmFyIEw9Ujt0aGlzLl9pdj1jfWVsc2UgdmFyIEw9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgST0wO0k8QTtJKyspX1t2K0ldXj1MW0ldfXJldHVybiBlfSgpLGY9ay5wYWQ9e30saD1mLlBrY3M3PXtwYWQ6ZnVuY3Rpb24oZSxpKXtmb3IodmFyIF89aSo0LHY9Xy1lLnNpZ0J5dGVzJV8sQT12PDwyNHx2PDwxNnx2PDw4fHYsUj1bXSxMPTA7TDx2O0wrPTQpUi5wdXNoKEEpO3ZhciBJPVMuY3JlYXRlKFIsdik7ZS5jb25jYXQoSSl9LHVucGFkOmZ1bmN0aW9uKGUpe3ZhciBpPWUud29yZHNbZS5zaWdCeXRlcy0xPj4+Ml0mMjU1O2Uuc2lnQnl0ZXMtPWl9fTtELkJsb2NrQ2lwaGVyPWwuZXh0ZW5kKHtjZmc6bC5jZmcuZXh0ZW5kKHttb2RlOnIscGFkZGluZzpofSkscmVzZXQ6ZnVuY3Rpb24oKXtsLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcsaT1lLml2LF89ZS5tb2RlO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpdmFyIHY9Xy5jcmVhdGVFbmNyeXB0b3I7ZWxzZXt2YXIgdj1fLmNyZWF0ZURlY3J5cHRvcjt0aGlzLl9taW5CdWZmZXJTaXplPTF9dGhpcy5fbW9kZSYmdGhpcy5fbW9kZS5fX2NyZWF0b3I9PXY/dGhpcy5fbW9kZS5pbml0KHRoaXMsaSYmaS53b3Jkcyk6KHRoaXMuX21vZGU9di5jYWxsKF8sdGhpcyxpJiZpLndvcmRzKSx0aGlzLl9tb2RlLl9fY3JlYXRvcj12KX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGUsaSl7dGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSxpKX0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNmZy5wYWRkaW5nO2lmKHRoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREUpe2UucGFkKHRoaXMuX2RhdGEsdGhpcy5ibG9ja1NpemUpO3ZhciBpPXRoaXMuX3Byb2Nlc3MoITApfWVsc2V7dmFyIGk9dGhpcy5fcHJvY2VzcyghMCk7ZS51bnBhZChpKX1yZXR1cm4gaX0sYmxvY2tTaXplOjEyOC8zMn0pO3ZhciBhPUQuQ2lwaGVyUGFyYW1zPUYuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKGUpe3RoaXMubWl4SW4oZSl9LHRvU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybihlfHx0aGlzLmZvcm1hdHRlcikuc3RyaW5naWZ5KHRoaXMpfX0pLG49ay5mb3JtYXQ9e30sdT1uLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbihlKXt2YXIgaT1lLmNpcGhlcnRleHQsXz1lLnNhbHQ7aWYoXyl2YXIgdj1TLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KF8pLmNvbmNhdChpKTtlbHNlIHZhciB2PWk7cmV0dXJuIHYudG9TdHJpbmcoQil9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciBpPUIucGFyc2UoZSksXz1pLndvcmRzO2lmKF9bMF09PTEzOTg4OTM2ODQmJl9bMV09PTE3MDEwNzY4MzEpe3ZhciB2PVMuY3JlYXRlKF8uc2xpY2UoMiw0KSk7Xy5zcGxpY2UoMCw0KSxpLnNpZ0J5dGVzLT0xNn1yZXR1cm4gYS5jcmVhdGUoe2NpcGhlcnRleHQ6aSxzYWx0OnZ9KX19LHo9RC5TZXJpYWxpemFibGVDaXBoZXI9Ri5leHRlbmQoe2NmZzpGLmV4dGVuZCh7Zm9ybWF0OnV9KSxlbmNyeXB0OmZ1bmN0aW9uKGUsaSxfLHYpe3Y9dGhpcy5jZmcuZXh0ZW5kKHYpO3ZhciBBPWUuY3JlYXRlRW5jcnlwdG9yKF8sdiksUj1BLmZpbmFsaXplKGkpLEw9QS5jZmc7cmV0dXJuIGEuY3JlYXRlKHtjaXBoZXJ0ZXh0OlIsa2V5Ol8saXY6TC5pdixhbGdvcml0aG06ZSxtb2RlOkwubW9kZSxwYWRkaW5nOkwucGFkZGluZyxibG9ja1NpemU6ZS5ibG9ja1NpemUsZm9ybWF0dGVyOnYuZm9ybWF0fSl9LGRlY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodiksaT10aGlzLl9wYXJzZShpLHYuZm9ybWF0KTt2YXIgQT1lLmNyZWF0ZURlY3J5cHRvcihfLHYpLmZpbmFsaXplKGkuY2lwaGVydGV4dCk7cmV0dXJuIEF9LF9wYXJzZTpmdW5jdGlvbihlLGkpe3JldHVybiB0eXBlb2YgZT09InN0cmluZyI/aS5wYXJzZShlLHRoaXMpOmV9fSksdz1rLmtkZj17fSxQPXcuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbihlLGksXyx2KXt2fHwodj1TLnJhbmRvbSg2NC84KSk7dmFyIEE9cC5jcmVhdGUoe2tleVNpemU6aStffSkuY29tcHV0ZShlLHYpLFI9Uy5jcmVhdGUoQS53b3Jkcy5zbGljZShpKSxfKjQpO3JldHVybiBBLnNpZ0J5dGVzPWkqNCxhLmNyZWF0ZSh7a2V5OkEsaXY6UixzYWx0OnZ9KX19LEg9RC5QYXNzd29yZEJhc2VkQ2lwaGVyPXouZXh0ZW5kKHtjZmc6ei5jZmcuZXh0ZW5kKHtrZGY6UH0pLGVuY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodik7dmFyIEE9di5rZGYuZXhlY3V0ZShfLGUua2V5U2l6ZSxlLml2U2l6ZSk7di5pdj1BLml2O3ZhciBSPXouZW5jcnlwdC5jYWxsKHRoaXMsZSxpLEEua2V5LHYpO3JldHVybiBSLm1peEluKEEpLFJ9LGRlY3J5cHQ6ZnVuY3Rpb24oZSxpLF8sdil7dj10aGlzLmNmZy5leHRlbmQodiksaT10aGlzLl9wYXJzZShpLHYuZm9ybWF0KTt2YXIgQT12LmtkZi5leGVjdXRlKF8sZS5rZXlTaXplLGUuaXZTaXplLGkuc2FsdCk7di5pdj1BLml2O3ZhciBSPXouZGVjcnlwdC5jYWxsKHRoaXMsZSxpLEEua2V5LHYpO3JldHVybiBSfX0pfSgpfSl9KFopKSxaLmV4cG9ydHN9KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCkseXIoKSxCcigpLG9yKCksTygpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9YixrPWMubGliLEQ9ay5CbG9ja0NpcGhlcixGPWMuYWxnbyxTPVtdLHk9W10sdD1bXSxCPVtdLG09W10scD1bXSxsPVtdLEU9W10sZz1bXSxyPVtdOyhmdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxuPTA7bjwyNTY7bisrKW48MTI4P2Fbbl09bjw8MTphW25dPW48PDFeMjgzO2Zvcih2YXIgdT0wLHo9MCxuPTA7bjwyNTY7bisrKXt2YXIgdz16Xno8PDFeejw8Ml56PDwzXno8PDQ7dz13Pj4+OF53JjI1NV45OSxTW3VdPXcseVt3XT11O3ZhciBQPWFbdV0sSD1hW1BdLGU9YVtIXSxpPWFbd10qMjU3XncqMTY4NDMwMDg7dFt1XT1pPDwyNHxpPj4+OCxCW3VdPWk8PDE2fGk+Pj4xNixtW3VdPWk8PDh8aT4+PjI0LHBbdV09aTt2YXIgaT1lKjE2ODQzMDA5XkgqNjU1MzdeUCoyNTdedSoxNjg0MzAwODtsW3ddPWk8PDI0fGk+Pj44LEVbd109aTw8MTZ8aT4+PjE2LGdbd109aTw8OHxpPj4+MjQsclt3XT1pLHU/KHU9UF5hW2FbYVtlXlBdXV0sel49YVthW3pdXSk6dT16PTF9fSkoKTt2YXIgZj1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0saD1GLkFFUz1ELmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighKHRoaXMuX25Sb3VuZHMmJnRoaXMuX2tleVByaW9yUmVzZXQ9PT10aGlzLl9rZXkpKXtmb3IodmFyIGE9dGhpcy5fa2V5UHJpb3JSZXNldD10aGlzLl9rZXksbj1hLndvcmRzLHU9YS5zaWdCeXRlcy80LHo9dGhpcy5fblJvdW5kcz11KzYsdz0oeisxKSo0LFA9dGhpcy5fa2V5U2NoZWR1bGU9W10sSD0wO0g8dztIKyspaWYoSDx1KVBbSF09bltIXTtlbHNle3ZhciBlPVBbSC0xXTtIJXU/dT42JiZIJXU9PTQmJihlPVNbZT4+PjI0XTw8MjR8U1tlPj4+MTYmMjU1XTw8MTZ8U1tlPj4+OCYyNTVdPDw4fFNbZSYyNTVdKTooZT1lPDw4fGU+Pj4yNCxlPVNbZT4+PjI0XTw8MjR8U1tlPj4+MTYmMjU1XTw8MTZ8U1tlPj4+OCYyNTVdPDw4fFNbZSYyNTVdLGVePWZbSC91fDBdPDwyNCksUFtIXT1QW0gtdV1eZX1mb3IodmFyIGk9dGhpcy5faW52S2V5U2NoZWR1bGU9W10sXz0wO188dztfKyspe3ZhciBIPXctXztpZihfJTQpdmFyIGU9UFtIXTtlbHNlIHZhciBlPVBbSC00XTtfPDR8fEg8PTQ/aVtfXT1lOmlbX109bFtTW2U+Pj4yNF1dXkVbU1tlPj4+MTYmMjU1XV1eZ1tTW2U+Pj44JjI1NV1dXnJbU1tlJjI1NV1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbihhLG4pe3RoaXMuX2RvQ3J5cHRCbG9jayhhLG4sdGhpcy5fa2V5U2NoZWR1bGUsdCxCLG0scCxTKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKGEsbil7dmFyIHU9YVtuKzFdO2FbbisxXT1hW24rM10sYVtuKzNdPXUsdGhpcy5fZG9DcnlwdEJsb2NrKGEsbix0aGlzLl9pbnZLZXlTY2hlZHVsZSxsLEUsZyxyLHkpO3ZhciB1PWFbbisxXTthW24rMV09YVtuKzNdLGFbbiszXT11fSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKGEsbix1LHosdyxQLEgsZSl7Zm9yKHZhciBpPXRoaXMuX25Sb3VuZHMsXz1hW25dXnVbMF0sdj1hW24rMV1edVsxXSxBPWFbbisyXV51WzJdLFI9YVtuKzNdXnVbM10sTD00LEk9MTtJPGk7SSsrKXt2YXIgTT16W18+Pj4yNF1ed1t2Pj4+MTYmMjU1XV5QW0E+Pj44JjI1NV1eSFtSJjI1NV1edVtMKytdLHE9elt2Pj4+MjRdXndbQT4+PjE2JjI1NV1eUFtSPj4+OCYyNTVdXkhbXyYyNTVdXnVbTCsrXSxOPXpbQT4+PjI0XV53W1I+Pj4xNiYyNTVdXlBbXz4+PjgmMjU1XV5IW3YmMjU1XV51W0wrK10sbz16W1I+Pj4yNF1ed1tfPj4+MTYmMjU1XV5QW3Y+Pj44JjI1NV1eSFtBJjI1NV1edVtMKytdO189TSx2PXEsQT1OLFI9b312YXIgTT0oZVtfPj4+MjRdPDwyNHxlW3Y+Pj4xNiYyNTVdPDwxNnxlW0E+Pj44JjI1NV08PDh8ZVtSJjI1NV0pXnVbTCsrXSxxPShlW3Y+Pj4yNF08PDI0fGVbQT4+PjE2JjI1NV08PDE2fGVbUj4+PjgmMjU1XTw8OHxlW18mMjU1XSledVtMKytdLE49KGVbQT4+PjI0XTw8MjR8ZVtSPj4+MTYmMjU1XTw8MTZ8ZVtfPj4+OCYyNTVdPDw4fGVbdiYyNTVdKV51W0wrK10sbz0oZVtSPj4+MjRdPDwyNHxlW18+Pj4xNiYyNTVdPDwxNnxlW3Y+Pj44JjI1NV08PDh8ZVtBJjI1NV0pXnVbTCsrXTthW25dPU0sYVtuKzFdPXEsYVtuKzJdPU4sYVtuKzNdPW99LGtleVNpemU6MjU2LzMyfSk7Yy5BRVM9RC5fY3JlYXRlSGVscGVyKGgpfSgpLGIuQUVTfSl9KShYKTt2YXIga3I9WC5leHBvcnRzLGZyPVQoa3IpLHNyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjLGspe0MuZXhwb3J0cz1jKFUoKSxPKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gYi5tb2RlLkVDQj1mdW5jdGlvbigpe3ZhciBjPWIubGliLkJsb2NrQ2lwaGVyTW9kZS5leHRlbmQoKTtyZXR1cm4gYy5FbmNyeXB0b3I9Yy5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbihrLEQpe3RoaXMuX2NpcGhlci5lbmNyeXB0QmxvY2soayxEKX19KSxjLkRlY3J5cHRvcj1jLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKGssRCl7dGhpcy5fY2lwaGVyLmRlY3J5cHRCbG9jayhrLEQpfX0pLGN9KCksYi5tb2RlLkVDQn0pfSkoc3IpO3ZhciBFcj1zci5leHBvcnRzLHhyPVQoRXIpLGRyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjLGspe0MuZXhwb3J0cz1jKFUoKSxPKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gYi5wYWQuUGtjczd9KX0pKGRyKTt2YXIgenI9ZHIuZXhwb3J0cyx3cj1UKHpyKSx2cj17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyxrKXtDLmV4cG9ydHM9YyhVKCksTygpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGIucGFkLk5vUGFkZGluZz17cGFkOmZ1bmN0aW9uKCl7fSx1bnBhZDpmdW5jdGlvbigpe319LGIucGFkLk5vUGFkZGluZ30pfSkodnIpO3ZhciBBcj12ci5leHBvcnRzLFNyPVQoQXIpLHVyPXtleHBvcnRzOnt9fTsoZnVuY3Rpb24oQyxXKXsoZnVuY3Rpb24oYixjKXtDLmV4cG9ydHM9YyhVKCkpfSkoSyxmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXtpZih0eXBlb2YgQXJyYXlCdWZmZXI9PSJmdW5jdGlvbiIpe3ZhciBjPWIsaz1jLmxpYixEPWsuV29yZEFycmF5LEY9RC5pbml0LFM9RC5pbml0PWZ1bmN0aW9uKHkpe2lmKHkgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHk9bmV3IFVpbnQ4QXJyYXkoeSkpLCh5IGluc3RhbmNlb2YgSW50OEFycmF5fHx0eXBlb2YgVWludDhDbGFtcGVkQXJyYXk8InUiJiZ5IGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXl8fHkgaW5zdGFuY2VvZiBJbnQxNkFycmF5fHx5IGluc3RhbmNlb2YgVWludDE2QXJyYXl8fHkgaW5zdGFuY2VvZiBJbnQzMkFycmF5fHx5IGluc3RhbmNlb2YgVWludDMyQXJyYXl8fHkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXl8fHkgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkpJiYoeT1uZXcgVWludDhBcnJheSh5LmJ1ZmZlcix5LmJ5dGVPZmZzZXQseS5ieXRlTGVuZ3RoKSkseSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2Zvcih2YXIgdD15LmJ5dGVMZW5ndGgsQj1bXSxtPTA7bTx0O20rKylCW20+Pj4yXXw9eVttXTw8MjQtbSU0Kjg7Ri5jYWxsKHRoaXMsQix0KX1lbHNlIEYuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtTLnByb3RvdHlwZT1EfX0oKSxiLmxpYi5Xb3JkQXJyYXl9KX0pKHVyKTt2YXIgRHI9dXIuZXhwb3J0cyxGcj1UKERyKSxocj17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKEMsVyl7KGZ1bmN0aW9uKGIsYyl7Qy5leHBvcnRzPWMoVSgpKX0pKEssZnVuY3Rpb24oYil7cmV0dXJuIGIuZW5jLlV0Zjh9KX0pKGhyKTt2YXIgSHI9aHIuZXhwb3J0cyxwcj1UKEhyKTtsZXQgSj1bMCwxOTk2OTU5ODk0LDM5OTM5MTk3ODgsMjU2NzUyNDc5NCwxMjQ2MzQxMzcsMTg4NjA1NzYxNSwzOTE1NjIxNjg1LDI2NTczOTIwMzUsMjQ5MjY4Mjc0LDIwNDQ1MDgzMjQsMzc3MjExNTIzMCwyNTQ3MTc3ODY0LDE2Mjk0MTk5NSwyMTI1NTYxMDIxLDM4ODc2MDcwNDcsMjQyODQ0NDA0OSw0OTg1MzY1NDgsMTc4OTkyNzY2Niw0MDg5MDE2NjQ4LDIyMjcwNjEyMTQsNDUwNTQ4ODYxLDE4NDMyNTg2MDMsNDEwNzU4MDc1MywyMjExNjc3NjM5LDMyNTg4Mzk5MCwxNjg0Nzc3MTUyLDQyNTExMjIwNDIsMjMyMTkyNjYzNiwzMzU2MzM0ODcsMTY2MTM2NTQ2NSw0MTk1MzAyNzU1LDIzNjYxMTUzMTcsOTk3MDczMDk2LDEyODE5NTM4ODYsMzU3OTg1NTMzMiwyNzI0Njg4MjQyLDEwMDY4ODgxNDUsMTI1ODYwNzY4NywzNTI0MTAxNjI5LDI3Njg5NDI0NDMsOTAxMDk3NzIyLDExMTkwMDA2ODQsMzY4NjUxNzIwNiwyODk4MDY1NzI4LDg1MzA0NDQ1MSwxMTcyMjY2MTAxLDM3MDUwMTU3NTksMjg4MjYxNjY2NSw2NTE3Njc5ODAsMTM3MzUwMzU0NiwzMzY5NTU0MzA0LDMyMTgxMDQ1OTgsNTY1NTA3MjUzLDE0NTQ2MjE3MzEsMzQ4NTExMTcwNSwzMDk5NDM2MzAzLDY3MTI2Njk3NCwxNTk0MTk4MDI0LDMzMjI3MzA5MzAsMjk3MDM0NzgxMiw3OTU4MzU1MjcsMTQ4MzIzMDIyNSwzMjQ0MzY3Mjc1LDMwNjAxNDk1NjUsMTk5NDE0NjE5MiwzMTE1ODUzNCwyNTYzOTA3NzcyLDQwMjM3MTc5MzAsMTkwNzQ1OTQ2NSwxMTI2MzcyMTUsMjY4MDE1MzI1MywzOTA0NDI3MDU5LDIwMTM3NzYyOTAsMjUxNzIyMDM2LDI1MTcyMTUzNzQsMzc3NTgzMDA0MCwyMTM3NjU2NzYzLDE0MTM3NjgxMywyNDM5Mjc3NzE5LDM4NjUyNzEyOTcsMTgwMjE5NTQ0NCw0NzY4NjQ4NjYsMjIzODAwMTM2OCw0MDY2NTA4ODc4LDE4MTIzNzA5MjUsNDUzMDkyNzMxLDIxODE2MjUwMjUsNDExMTQ1MTIyMywxNzA2MDg4OTAyLDMxNDA0MjcwNCwyMzQ0NTMyMjAyLDQyNDAwMTc1MzIsMTY1ODY1ODI3MSwzNjY2MTk5NzcsMjM2MjY3MDMyMyw0MjI0OTk0NDA1LDEzMDM1MzU5NjAsOTg0OTYxNDg2LDI3NDcwMDcwOTIsMzU2OTAzNzUzOCwxMjU2MTcwODE3LDEwMzc2MDQzMTEsMjc2NTIxMDczMywzNTU0MDc5OTk1LDExMzEwMTQ1MDYsODc5Njc5OTk2LDI5MDkyNDM0NjIsMzY2Mzc3MTg1NiwxMTQxMTI0NDY3LDg1NTg0MjI3NywyODUyODAxNjMxLDM3MDg2NDg2NDksMTM0MjUzMzk0OCw2NTQ0NTkzMDYsMzE4ODM5NjA0OCwzMzczMDE1MTc0LDE0NjY0Nzk5MDksNTQ0MTc5NjM1LDMxMTA1MjM5MTMsMzQ2MjUyMjAxNSwxNTkxNjcxMDU0LDcwMjEzODc3NiwyOTY2NDYwNDUwLDMzNTI3OTk0MTIsMTUwNDkxODgwNyw3ODM1NTE4NzMsMzA4MjY0MDQ0MywzMjMzNDQyOTg5LDM5ODgyOTIzODQsMjU5NjI1NDY0Niw2MjMxNzA2OCwxOTU3ODEwODQyLDM5Mzk4NDU5NDUsMjY0NzgxNjExMSw4MTQ3MDk5NywxOTQzODAzNTIzLDM4MTQ5MTg5MzAsMjQ4OTU5NjgwNCwyMjUyNzQ0MzAsMjA1Mzc5MDM3NiwzODI2MTc1NzU1LDI0NjY5MDYwMTMsMTY3ODE2NzQzLDIwOTc2NTEzNzcsNDAyNzU1MjU4MCwyMjY1NDkwMzg2LDUwMzQ0NDA3MiwxNzYyMDUwODE0LDQxNTA0MTcyNDUsMjE1NDEyOTM1NSw0MjY1MjIyMjUsMTg1MjUwNzg3OSw0Mjc1MzEzNTI2LDIzMTIzMTc5MjAsMjgyNzUzNjI2LDE3NDI1NTU4NTIsNDE4OTcwODE0MywyMzk0ODc3OTQ1LDM5NzkxNzc2MywxNjIyMTgzNjM3LDM2MDQzOTA4ODgsMjcxNDg2NjU1OCw5NTM3Mjk3MzIsMTM0MDA3NjYyNiwzNTE4NzE5OTg1LDI3OTczNjA5OTksMTA2ODgyODM4MSwxMjE5NjM4ODU5LDM2MjQ3NDE4NTAsMjkzNjY3NTE0OCw5MDYxODU0NjIsMTA5MDgxMjUxMiwzNzQ3NjcyMDAzLDI4MjUzNzk2NjksODI5MzI5MTM1LDExODEzMzUxNjEsMzQxMjE3NzgwNCwzMTYwODM0ODQyLDYyODA4NTQwOCwxMzgyNjA1MzY2LDM0MjMzNjkxMDksMzEzODA3ODQ2Nyw1NzA1NjIyMzMsMTQyNjQwMDgxNSwzMzE3MzE2NTQyLDI5OTg3MzM2MDgsNzMzMjM5OTU0LDE1NTUyNjE5NTYsMzI2ODkzNTU5MSwzMDUwMzYwNjI1LDc1MjQ1OTQwMywxNTQxMzIwMjIxLDI2MDcwNzE5MjAsMzk2NTk3MzAzMCwxOTY5OTIyOTcyLDQwNzM1NDk4LDI2MTc4MzcyMjUsMzk0MzU3NzE1MSwxOTEzMDg3ODc3LDgzOTA4MzcxLDI1MTIzNDE2MzQsMzgwMzc0MDY5MiwyMDc1MjA4NjIyLDIxMzI2MTExMiwyNDYzMjcyNjAzLDM4NTU5OTAyODUsMjA5NDg1NDA3MSwxOTg5NTg4ODEsMjI2MjAyOTAxMiw0MDU3MjYwNjEwLDE3NTkzNTk5OTIsNTM0NDE0MTkwLDIxNzY3MTg1NDEsNDEzOTMyOTExNSwxODczODM2MDAxLDQxNDY2NDU2NywyMjgyMjQ4OTM0LDQyNzkyMDAzNjgsMTcxMTY4NDU1NCwyODUyODExMTYsMjQwNTgwMTcyNyw0MTY3MjE2NzQ1LDE2MzQ0Njc3OTUsMzc2MjI5NzAxLDI2ODUwNjc4OTYsMzYwODAwNzQwNiwxMzA4OTE4NjEyLDk1NjU0MzkzOCwyODA4NTU1MTA1LDM0OTU5NTgyNjMsMTIzMTYzNjMwMSwxMDQ3NDI3MDM1LDI5MzI5NTk4MTgsMzY1NDcwMzgzNiwxMDg4MzU5MjcwLDkzNjkxOGUzLDI4NDc3MTQ4OTksMzczNjgzNzgyOSwxMjAyOTAwODYzLDgxNzIzMzg5NywzMTgzMzQyMTA4LDM0MDEyMzcxMzAsMTQwNDI3NzU1Miw2MTU4MTgxNTAsMzEzNDIwNzQ5MywzNDUzNDIxMjAzLDE0MjM4NTc0NDksNjAxNDUwNDMxLDMwMDk4Mzc2MTQsMzI5NDcxMDQ1NiwxNTY3MTAzNzQ2LDcxMTkyODcyNCwzMDIwNjY4NDcxLDMyNzIzODAwNjUsMTUxMDMzNDIzNSw3NTUxNjcxMTddO3R5cGVvZiBJbnQzMkFycmF5PCJ1IiYmKEo9bmV3IEludDMyQXJyYXkoSikpO2Z1bmN0aW9uIGxyKEMsVyl7bGV0IGI9fn5XXi0xO3JldHVybiBiPWJyKEMsYiksKGJeLTEpPj4+MH1mdW5jdGlvbiBicihDLFcpe0M9bmV3IFVpbnQ4QXJyYXkoQyk7Y29uc3R7bGVuZ3RoOmJ9PUM7Zm9yKGxldCBjPTA7YzxiO2MrKylXPUpbKFdeQ1tjXSkmMjU1XV5XPj4+ODtyZXR1cm4gV31mdW5jdGlvbiBfcihDKXtyZXR1cm4gQy5sZW5ndGg8OD8oQz1gMCR7Q31gLF9yKEMpKTpDfWZ1bmN0aW9uIGdyKEMpe2lmKHR5cGVvZiBDPCJ1IilyZXR1cm4gX3IoTnVtYmVyKEMpLnRvU3RyaW5nKDE2KSl9ZnVuY3Rpb24gV3IoQyl7Y29uc3QgVz1DLnNpZ0J5dGVzLHt3b3JkczpifT1DLGM9bmV3IFVpbnQ4QXJyYXkoVyk7bGV0IGs9MCxEPTA7Zm9yKDtrIT09Vzspe2NvbnN0IEY9YltEKytdO2lmKGNbaysrXT0oRiY0Mjc4MTkwMDgwKT4+PjI0LGs9PT1XfHwoY1trKytdPShGJjE2NzExNjgwKT4+PjE2LGs9PT1XKXx8KGNbaysrXT0oRiY2NTI4MCk+Pj44LGs9PT1XKSlicmVhaztjW2srK109RiYyNTV9cmV0dXJuIGN9ZnVuY3Rpb24gUHIoQyl7Y29uc3R7dHlwZTpXLGRhdGE6Yn09Qztzd2l0Y2goVyl7Y2FzZSJjcmMzMk1hcHBpbmciOmNvbnN0e2lkOmMsYnVmOmssY3JjOkR9PWIsRj1icihrLEQpO3Bvc3RNZXNzYWdlKHt0eXBlOiJjcmMzMk1hcHBpbmdSZXNwb25zZSIsZGF0YTp7aWQ6YyxjcmMzMjpGfX0pO2JyZWFrfX1zZWxmLm9ubWVzc2FnZT1DPT57Y29uc3R7ZGF0YTpXfT1DO2lmKFc9PT0icGluZyIpe3Bvc3RNZXNzYWdlKCJwb25nIik7cmV0dXJufWlmKFcudHlwZSl7UHIoVyk7cmV0dXJufWNvbnN0IGI9V1swXSxjPVdbMV0saz1XWzJdLEQ9V1szXSxGPVdbNF0sUz1XWzVdO2lmKEQpe2NvbnN0IHk9RnIuY3JlYXRlKGIpLHQ9UyYmYi5ieXRlTGVuZ3RoJTE2IT09MD9mci5lbmNyeXB0KHkscHIucGFyc2UoRikse21vZGU6eHIscGFkZGluZzp3cn0pOmZyLmVuY3J5cHQoeSxwci5wYXJzZShGKSx7bW9kZTp4cixwYWRkaW5nOlNyfSksQj1Xcih0LmNpcGhlcnRleHQpLG09bHIoQiwwKTtwb3N0TWVzc2FnZShbQi5idWZmZXIsZ3IobSksYyxrXSxbQi5idWZmZXJdKX1lbHNle2NvbnN0IHk9bHIoYiwwKTtwb3N0TWVzc2FnZShbYixncih5KSxjLGtdLFtiXSl9fX0pKCk7Cg==",ei=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),ti=typeof self<"u"&&self.Blob&&new Blob([ei(qr)],{type:"text/javascript;charset=utf-8"});function ni(e){let t;try{if(t=ti&&(self.URL||self.webkitURL).createObjectURL(ti),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(t)})),n}catch{return new Worker("data:text/javascript;base64,"+qr,{name:null==e?void 0:e.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const ri=()=>new ni,ii="presigned-expires",si={hmac:(e,t)=>Ur(t,e),sha256:function(e){return Gr(e)}},oi={iso8601:e=>(void 0===e&&(e=yi()),e.toISOString().replace(/\.\d{3}Z$/,"Z"))},ai=["authorization","content-type","content-length","user-agent",ii,"expect","x-amzn-trace-id"],li="AWS4-HMAC-SHA256",ci="aws4_request",ui=e=>{try{return encodeURIComponent(e).replace(/[^A-Za-z0-9_.~\-%]+/g,escape).replace(/[*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))}catch{return""}},di=e=>Object.keys(e).sort().map((t=>{const n=e[t];if(typeof n>"u"||null===n)return;const r=ui(t);return r?Array.isArray(n)?`${r}=${n.map(ui).sort().join(`&${r}=`)}`:`${r}=${ui(n)}`:void 0})).filter((e=>e)).join("&");class hi{constructor(e,t,n){this.request=e,this.request.headers=e.headers||{},this.serviceName=t,n=n||{},this.signatureCache="boolean"!=typeof n.signatureCache||n.signatureCache,this.operation=n.operation,this.signatureVersion=n.signatureVersion}addAuthorization(e,t){const n=this.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.addHeaders(e,n),this.request.headers.Authorization=this.authorization(e,n)}addHeaders(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.body&&(this.request.headers["X-Amz-Content-Sha256"]=si.sha256(JSON.stringify(this.request.body)).toString())}authorization(e,t){const n=[],r=this.credentialString(t);return n.push(`${li} Credential=${e.accessKeyId}/${r}`),n.push(`SignedHeaders=${this.signedHeaders()}`),n.push(`Signature=${this.signature(e,t)}`),n.join(", ")}signature(e,t){const n=this.getSigningKey(e,t.substr(0,8),this.request.region,this.serviceName);return si.hmac(n,this.stringToSign(t))}stringToSign(e){const t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")}canonicalString(){const e=[],t=this.request.pathname||"/";return e.push(this.request.method.toUpperCase()),e.push(t),e.push(di(this.request.params)||""),e.push(`${this.canonicalHeaders()}\n`),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")}canonicalHeaders(){const e=[];Object.keys(this.request.headers).forEach((t=>{e.push([t,this.request.headers[t]])})),e.sort(((e,t)=>e[0].toLowerCase()<t[0].toLowerCase()?-1:1));const t=[];return e.forEach((e=>{const n=e[0].toLowerCase();if(this.isSignableHeader(n)){const r=e[1];if(typeof r>"u"||null===r||"function"!=typeof r.toString)throw new Error(`Header ${n} contains invalid value`);t.push(`${n}:${this.canonicalHeaderValues(r.toString())}`)}})),t.join("\n")}canonicalHeaderValues(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")}signedHeaders(){const e=[];return Object.keys(this.request.headers).forEach((t=>{t=t.toLowerCase(),this.isSignableHeader(t)&&e.push(t)})),e.sort().join(";")}credentialString(e){return this.createScope(e.substr(0,8),this.request.region,this.serviceName)}hexEncodedHash(e){return si.sha256(e)}hexEncodedBodyHash(){return this.request.headers["X-Amz-Content-Sha256"]?this.request.headers["X-Amz-Content-Sha256"]:this.request.body?this.hexEncodedHash(di(this.request.body)):this.hexEncodedHash("")}isSignableHeader(e){return 0===e.toLowerCase().indexOf("x-amz-")||ai.indexOf(e)<0}iso8601(e){return void 0===e&&(e=new Date),e.toISOString().replace(/\.\d{3}Z$/,"Z")}getSigningKey(e,t,n,r){const i=si.hmac(`AWS4${e.secretAccessKey}`,t),s=si.hmac(i,n),o=si.hmac(s,r);return si.hmac(o,ci)}createScope(e,t,n){return[e.substr(0,8),t,n,ci].join("/")}}const pi=()=>{const e=[];let t=0;return{require:()=>new Promise((n=>{t++,t<=1?n():e.push(n)})),release(){t--;const n=e.shift();n&&n()},isEmpty:()=>t<=0}},fi=()=>{const e={};return{require(t){const n=e[t]||pi();return e[t]||(e[t]=n),n.require()},release(t){const n=e[t]||pi();e[t]||(e[t]=n),n.release(),n.isEmpty()&&delete e[t]}}},gi=(()=>{const e="byted_uploader_",t=t=>e+t,n=fi();return{async removeItem(e){e=t(e),await n.require(e),Kr.removeItem(e,(()=>n.release(e)))},async setItem(e,r){e=t(e),await n.require(e),Kr.setItem(e,r,(()=>n.release(e)))},getItem:e=>new Promise((async r=>{e=t(e),await n.require(e);const i=setTimeout((()=>{n.release(e),r(null)}),5e3);Kr.getItem(e).then((t=>{n.release(e),clearTimeout(i),r(t)})).catch((()=>{n.release(e),clearTimeout(i),r(null)}))})),clear(){Kr.keys().then((t=>{t.forEach((async t=>{t.startsWith(e)&&(await n.require(t),Kr.removeItem(t,(()=>n.release(t))))}))})).catch((e=>{console.error(e)}))}}})();function mi(e){const t=Number(e.substring(0,4)),n=Number(e.substring(4,6)),r=Number(e.substring(6,8)),i=Number(e.substring(8,10)),s=Number(e.substring(10,12)),o=Number(e.substring(12,14));return Date.UTC(t,n-1,r,i,s,o)-Date.now()}function yi(){return new Date}function bi(e={}){return Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&")}function vi(){const e=window.Blob||window.WebKitBlob;try{const t=e.prototype;return!(!FormData||!(t.slice||t.webkitSlice||t.mozSlice))}catch{return!1}}function _i(){return!!window.FormData||window.ProgressEvent&&window.FileReader}function wi(){const e=window.FileReader&&window.FileReader.prototype.readAsBinaryString;return typeof Int32Array<"u"&&e&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)}function Si(e,t=!0){const n=e,r={removeItem(e){delete n.cache[e]},setItem(e,t){n.cache[e]=t},getItem:async e=>n.cache[e],clear(){delete n.cache,n.cache={}}};if(!t)return r;try{if(window.localStorage&&Kr.supports(Kr.LOCALSTORAGE))return window.localStorage.setItem("",""),gi}catch{return r}return r}function xi(e){return`${e}_${(new Date).getTime()}_${parseInt(1e6*Math.random())}`}function Ei(e,t){const{size:n}=e,r=1048576;if(t&&!Number.isNaN(Number(t))&&Number(t)>0)return t;if(t&&"function"==typeof t){let e=Or;try{e=t(n)}catch(i){console.warn(i)}return e<Or?Or:e}return n>=1e3*r?10*r:n>=400*r?5*r:Or}function Ci(e){if(!e||"[object String]"!==Object.prototype.toString.call(e))return;const t=e.lastIndexOf(".");if(t>0){const n="."+e.substring(t+1);if(n.length<=8)return n}}function ki(e,t,n){return(e.slice||e.webkitSlice||e.mozSlice).call(e,t,n)}function Oi(e){return/^(?:(https?\:)\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/.exec(e)[5]||"/"}function Ti(e){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*r));return t}function Ii(e,t){return!e&&t?5242880:0}function zi({errorCode:e,requestId:t}){return e===Vr.TOKEN_EXPIRED||!!t&&Math.abs(mi(t))>12e5}function Ri(e,t){const n=mi(t);Object.assign(e,{topExpires:604800,systemTimeGap:n})}function Di({useServerCurrentTime:e,stsToken:t,uploaderCtx:n}){e&&Math.abs(new Date(t.CurrentTime)-new Date)>6e4&&!n.priorInfo.systemTimeGap&&(n.priorInfo.systemTimeGap=new Date(t.CurrentTime)-new Date);let r=new Date;return n.priorInfo.systemTimeGap&&(r=new Date((new Date).getTime()+n.priorInfo.systemTimeGap)),r}function Mi(...e){let t=0;for(const s of e)t+=s.byteLength;const n=new ArrayBuffer(t),r=new Uint8Array(n);let i=0;for(const s of e)r.set(new Uint8Array(s),i),i+=s.byteLength;return n}function Ni(e){const t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function ji(e,t){return Qr.dec2hex(Qr.crc32(e,t))}function Pi(e){let t=0,n=0,r=0,i=[],s=36;if(!e&&e.length<=0)return[t,n,r,i,s];const o=e[0].end-e[0].start;i.push(o);for(let a=1;a<e.length;a++){const n=e[a],r=n.end-n.start;o!==r&&(t=1),i.push(r)}return t?(r=0,n=e.length,s+=8*n,[t,0,n,i,s]):(r=o,i=[],[t,r,n,i,s])}function Ai(e,t,n,r){if(e&&!r)return;let i=t,s=0,o=[],a=36;r&&r.length>0&&([e,i,s,o,a]=Pi(r));const l=new ArrayBuffer(a),c=new DataView(l);for(let f=0;f<a;f++)c.setUint8(f,0);const u=Ni("aes-256-cfb-part"),d=new Uint8Array(u);let h=0;for(let f=0;f<16;f++)h=f,c.setUint8(h,d[f]);h++,c.setUint16(h,0,!0),h+=2,c.setUint16(h,e?1:0,!0),h+=2,c.setUint32(h,i,!0),h+=8,c.setUint32(h,s,!0),h+=8,o.forEach((e=>{c.setUint32(h,e,!0),h+=8}));const p=Mi(l,Ni(n));return{crc32:ji(p,0),buffer:p,encryptMeta:!0,start:-p.byteLength,end:0,iv:n}}function Li(e){return new Promise((t=>{const n=()=>t(ri());if(e.crc32WorkerUrl&&"string"==typeof e.crc32WorkerUrl){const r=e.crc32WorkerUrl;try{const e=new Worker(r);e.onmessage=n=>{"pong"===n.data&&t(e)},e.onerror=()=>{n()},e.postMessage("ping")}catch{n()}}else n()}))}function Fi(e,t){try{localStorage.setItem(e,t)}catch{}}function Ui(e){return localStorage.getItem(e)}function Gi(e){try{localStorage.removeItem(e)}catch{}}const Bi={resolveLocalTimeDiff:mi,toQueryString:bi,supportChunked:vi,supportXhr:_i,supportCrc32:wi,storage:Si,createCrc32Worker:Li,noop(){},getUnique:xi,getFileSliceLength:Ei,getFileSuffix:Ci,fileSlice:ki,getPathByURL:Oi,crypto:si,date:oi,signRequest(e,{serviceName:t,stsToken:n,uploaderCtx:r,config:i}){const{AccessKeyID:s,AccessKeyId:o,SecretAccessKey:a,SessionToken:l}=n,c=new hi(e,t),u=this.requestTime({useServerCurrentTime:i.useServerCurrentTime,stsToken:n,uploaderCtx:r});c.addAuthorization({accessKeyId:o||s,secretAccessKey:a,sessionToken:l},u),i.enableDmSchemaHeader&&(e.headers={...e.headers,"X-Dm-Schema-Name":e.params.Action})},Buffer:Uint8Array,generateKey:Ti,minSliceSize:Ii,mayLocalTimeError:zi,calibrationTimeConfig:Ri,requestTime:Di,concatAb:Mi,str2ab:Ni,generateEncryptMeta:Ai,computeCrc32:ji,setStoreSync:Fi,getStoreSync:Ui,removeStoreSync:Gi},Zi=e=>{if(null==e||!e.SessionToken)return"";const t=e.SessionToken.substring(4);let n="";try{n=JSON.parse(JSON.parse(JSON.parse(atob(t)).PolicyString).Statement[0].Condition).StoreRegion||""}catch{return n}return n};class Ki{constructor(){this.stopCallbacks=[]}call(e){let t=null,n=!1;t=e((()=>{n=!0,t&&this.stopCallbacks.splice(this.stopCallbacks.indexOf(t),1)})),n?t&&t():t&&this.stopCallbacks.push(t)}cancel(){this.stopCallbacks.forEach((e=>e())),this.stopCallbacks=[]}}class Xi{abort(){}}class Vi extends i.EventEmitter{constructor(){super(),this.xhr=new XMLHttpRequest,this._data=null}_ajax(e){const{xhr:t}=this;t.upload.onprogress=e=>{this.emit("progress",e)},t.onreadystatechange=()=>{4===t.readyState&&(t.upload.onprogress=Bi.noop,t.onreadystatechange=Bi.noop,t.params=e,this._data&&this._data.url&&(t.currentUrl=this._data.url),t.status>=200&&t.status<300?this.emit("complete",t):t.status>=400&&this.emit("error",t))},t.onerror=()=>{t.errText="unknow net error",this.emit("error",t)},t.ontimeout=()=>{t.errText="timeout",this.emit("error",t)},t.onabort=()=>{t.errText="abort",this.emit("error",t)},t.send(e)}send(e){return this._data=e,this.xhr.open(e.method||"POST",e.url||"",!0),e.headers&&Object.keys(e.headers).forEach((t=>{this.xhr.setRequestHeader(t,e.headers[t])})),this.xhr.timeout=e.timeout||0,e.ontimeout&&(this.xhr.ontimeout=e.ontimeout),e.binary?this.sendAsBinary(e):e.custom?"object"==typeof e.custom?this.sendAsCustom(JSON.stringify(e.custom)):"none"===e.custom?(delete e.custom,this.sendAsCustom()):this.sendAsCustom(e.custom):this.sendAsFormData(e)}sendAsBinary(e){return this.xhr.setRequestHeader("Content-Type","application/octet-stream"),this.xhr.setRequestHeader("Content-Disposition",`attachment; filename="${encodeURI(e.filename)}"`),this._ajax(e.file)}sendAsFormData(e){let t;e.formData&&(t="function"==typeof e.formData?e.formData():e.formData),t||(t=[]);const n=new FormData;for(let r=0,i=t.length;r<i;r++){const e=t[r];n.append(e.name,e.value)}return e.file&&n.append(e.field,e.file,e.name),this._ajax(n)}sendAsCustom(e){return this._ajax(e)}abort(){this.xhr.onreadystatechange=Bi.noop,this.xhr.abort()}getResponse(){return this.xhr.response}getText(){return this.xhr.responseText}getJson(){return JSON.parse(this.xhr.responseText)}}function Wi(e){return((null==e?void 0:e.gatewayUpload)||!e.omitInitUpload)&&!e.isDirect}function Hi(e,t){let n;return t=t||{},Object.keys(t).forEach((r=>{n=new RegExp(`{${r}}`,"g"),e=e.replace(n,t[r])})),e}const $i=e=>{const t=[];return e.forEach((e=>{var n,r;if("Snapshot"===e.name||"Snapshot"===e.Name||"snapshot"===e.name){const i={name:"snapshot",input:{snapshot_time:null==(n=e.input)?void 0:n.SnapshotTime,skip_black_detect:!(null==(r=e.input)||!r.SkipBlackDetect)}};t.push(i)}else if("Encryption"===e.name||"Encryption"===e.Name||"encryption"===e.name){const n={name:"encryption",input:{config:e.input.Config||{},policy_params:e.input.PolicyParams||{}}};t.push(n)}})),t};function Yi(e,t){const n=[];let r=!0;t.sort(((e,t)=>e.num<t.num?-1:e.num>t.num?1:0));let i=0,s=0;for(let a=0;a<t.length;a++){const o=t[a],l=o.num-(i+1),c=o.offset-s,u=Math.floor(c/l);let d=!1;for(let t=0;t<l;t++){const i=s,a=t===l-1?o.offset:i+u;if(1!==o.num&&(0===o.offset||o.offset>e)){d=!0,r=!1;break}s=a,r=!1,n.push({start:i,end:a,crc32:0})}if(d)break;const h={start:s,end:s+o.size,crc32:o.crc32,finished:!0,loaded:o.size};s=h.end,n.push(h),i=o.num}const o=Ji(e,n);return o.length>0&&(r=!1),[o,n,r]}function Ji(e,t){const n=[];let r=!1,i=0;if(t.length>0){const n=t[t.length-1];n.end===e?r=!0:i=n.end||0}if(!r){const t={start:i,end:e,crc32:0};n.push(t)}return n}function Qi(e,t,n){return n&&e<5242880&&(e=5242880),e||3145728}function qi(e,t){let n,r,i=-1;if(t&&t.enableSelectRoute){n=!0;const{selectRouteResult:s}=t;if(s&&e){r=(s[0]&&s[0].domainName)===e;const t=s.find((t=>t.domainName===e));i=(null==t?void 0:t.speed)||-1}}return{serverSpeed:i,useClientSelectRouteResult:r,enableSelectRoute:n}}class es extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.file=this._createBlob(e),this.cacheKey="__bd_uploader_cache",this._abortCallbacks=[],this._aborted=!1,this.retryCount=0,this.MAX_RETRY_TIME=3}_createBlob(e){const t=new File([new ArrayBuffer(_r*_r)],"speed_test_file");return e.file||t}_speed(e,t,n){return e/_r/((n-t)/br)}async _runAsyncFn(e){let t=!1;const n=()=>{t=!0};this._abortCallbacks.push(n);const r=await e();return this._removeAbortCallback(n),[t,r]}async start(e,t){this._aborted=!1,this._st=Date.now(),this.uploaderCtx._broadcast("startSelectRoute",null,!0),this.clientIp=e.clientIp,this.selectRouteTimeout=e.selectRouteTimeout||20*br,this.selectRouteCacheTime=e.selectRouteCacheTime||vr,this.selectRouteFileSize=e.selectRouteFileSize||this.config.selectRouteFileSize||_r*_r,this.completeCallback=t;const[n,r]=await this._runAsyncFn((()=>this.checkSelect({clientIp:this.clientIp})));n||(r?this._retestSpeed(r):this.startSelectRoute())}_retestSpeed(e){if(!e||!e.raceInfo||e.raceInfo.length<=0)return;const t=e.raceInfo.map((e=>e.domainInfo));this.race(t,null,e)}_retry(){return this.retryCount++,this.retryCount<=this.MAX_RETRY_TIME&&(this.startSelectRoute(),!0)}async checkSelect({clientIp:e}){let t=null;try{t=JSON.parse(await this.uploaderCtx.storage.getItem(this.cacheKey))}catch{return null}if(t){const{lastClientIp:n}=t,{lastSelectRouteTime:r}=t;if(e&&e!==n)return null;if((new Date).getTime()-r<this.selectRouteCacheTime)return t}return null}_removeAbortCallback(e){this._abortCallbacks.splice(this._abortCallbacks.indexOf(e),1)}startSelectRoute(){const{region:e}=this.config,t=new Vi,n=()=>{t.abort()};this._abortCallbacks.push(n);const r=()=>this._removeAbortCallback(n);t.on("complete",(e=>{if(r(),e.response)try{const t=JSON.parse(e.response);if(t.ResponseMetadata.Error)this.fail({xhr:e,errorCode:t.ResponseMetadata.Error.CodeN,error:t.ResponseMetadata.Error.Code,message:t.ResponseMetadata.Error.Message});else{const{Result:n}=t,{Domains:r}=n;this.race(r,e)}}catch(t){this.fail({error:`catch error: ${t.toString()}`,xhr:e})}else this.fail({error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e})})),t.on("error",(e=>{r();const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const n=JSON.parse(e.response);n.ResponseMetadata&&n.ResponseMetadata.Error&&(t.errorCode=n.ResponseMetadata.Error.CodeN,t.error=n.ResponseMetadata.Error.Code,t.message=n.ResponseMetadata.Error.Message),n.ResponseMetadata&&n.ResponseMetadata.RequestId&&(t.requestId=n.ResponseMetadata.RequestId)}this.fail(t)}));const i=this.config.videoHost,s=Er.VOD;let o=this.config.videoConfig&&this.config.videoConfig.spaceName;this.options.type===wr.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(o=this.config.objectConfig.spaceName);const a={Action:"GetUploadCandidates",Version:"2020-11-19",SpaceName:o};this.uploaderCtx.priorInfo.topExpires>0&&(a["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const{stsToken:l}=this.options;this.config.extraQuery&&Object.assign(a,{...this.config.extraQuery});const c={method:"GET",url:`${i}?${Bi.toQueryString(a)}`,timeout:30*br,region:e,params:a,pathname:Bi.getPathByURL(i)};Bi.signRequest(c,{serviceName:s,stsToken:l,uploaderCtx:this.uploaderCtx,config:this.config}),t.send(c)}race(e,t,n){const{file:r}=this,i=(r.slice||r.webkitSlice||r.mozSlice).call(r,0,Math.min(this.selectRouteFileSize,r.size)),s=(new Date).getTime(),o=e.map((e=>({domainName:e.Name,domainInfo:e,percent:0,startTime:s,endTime:s,speed:0,complete:!1}))),a=()=>{o.forEach((e=>{e.complete||(e.transport&&e.transport.abort(),e.speed=this._speed(this.file.size*e.percent,e.startTime,(new Date).getTime()))})),this.formatRaceInfo(o,t,n)};this._abortCallbacks.push(a);const l=()=>this._removeAbortCallback(a);o.forEach(((e,r)=>{const i=new Vi;i.on("complete",(()=>{o[r].endTime=(new Date).getTime(),o[r].complete=!0,o[r].speed=this._speed(this.file.size,o[r].startTime,o[r].endTime),o.every((e=>e.complete))&&!this._aborted&&(l(),this.formatRaceInfo(o,t,n))})),i.on("error",(e=>{o[r].endTime=(new Date).getTime(),o[r].complete=!0,o[r].error=e.errText;const{percent:i}=o[r];o[r].speed=this._speed(this.file.size*i,o[r].startTime,o[r].endTime),o.every((e=>e.complete))&&!this._aborted&&(l(),this.formatRaceInfo(o,t,n))})),i.on("progress",(e=>{const t=e.loaded/e.total;o[r].percent=t})),o[r].transport=i})),o.forEach((e=>{const t=e.domainInfo,n={oid:t.StoreID,tosDomain:`${this.config.schema}://${t.Name}`},r=Hi(u.directUploadFileUrl,n)+"?speedtest",s=t.Sign;e.transport.send({method:"post",url:r,headers:{Authorization:s,"Content-CRC32":"ignore"},file:i,binary:1,timeout:this.selectRouteTimeout})}))}formatRaceInfo(e,t,n){if(e.sort(((e,t)=>e.speed<t.speed?1:e.speed>t.speed?-1:e.percent<t.percent?1:e.percent>t.percent?-1:e.error?1:t.error?-1:0)),e.forEach((e=>{delete e.transport})),n){const r={...n,raceInfo:e,type:"success"};this.uploaderCtx.storage.setItem(this.cacheKey,JSON.stringify(r)),this.success(r,t,!0)}else{const n={lastClientIp:this.clientIp,lastSelectRouteTime:(new Date).getTime(),raceInfo:e,type:"success"};this.uploaderCtx.storage.setItem(this.cacheKey,JSON.stringify(n)),this.success(n,t,!1)}}success(e,t,n=!1){const r=t&&this.formatXhr(t);this.uploaderCtx.logger.send(Object.assign({stage:"selectRoute",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,fileSize:this.file&&this.file.size,...r,useCache:n},e)),this.uploaderCtx._broadcast("completeSelectRoute",{...e,useCache:n},!0),this.completeCallback({selectRouteResult:e.raceInfo,expiredTime:e.lastSelectRouteTime+this.selectRouteCacheTime},{aborted:this._aborted})}abort(){this._aborted=!0,this._abortCallbacks.forEach((e=>{e()})),this._abortCallbacks=[]}fail(e){const{errorCode:t,requestId:n}=e;if(Bi.mayLocalTimeError({errorCode:t,requestId:n})&&(Bi.calibrationTimeConfig(this.uploaderCtx.priorInfo,n),this._retry()))return;const r="warn",i={error:e.error,errorCode:e.errorCode,message:e.message};this.uploaderCtx.logger.send(Object.assign({stage:"selectRoute",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,fileSize:this.file&&this.file.size,extra:i,type:r,...this.formatXhr(e.xhr)})),this.uploaderCtx._broadcast("completeSelectRoute",{type:r,...i},!0),this.completeCallback(void 0,{aborted:this._aborted})}formatXhr(e){return{req:{url:e.currentUrl,param:e.params},res:{status:e.status,header:e.getAllResponseHeaders(),body:e.responseText}}}}class ts{constructor(e,t,n,r){this.file=e,this.sliceLength=t,this.successProcess=n,this.failProcess=r,this.retryTime=0,this.crc32Array=[],this.MAX_RETRY_TIME=3}start(){this.readFileCrc32(this.file)}readFileCrc32(e){const t=e.slice||e.webkitSlice||e.mozSlice,n=new FileReader;let r=0;n.readAsArrayBuffer(t.call(e,0,this.sliceLength)),n.onload=e=>{const t=e.target.result;r=Qr.crc32(t,0),this.crc32Array.push({start:0,end:this.sliceLength,crc32:Qr.dec2hex(r),buffer:t}),this.success(this.crc32Array)},n.onerror=e=>{var t,n,r,i;const s=null==(n=null==(t=e.target)?void 0:t.error)?void 0:n.name,o=null==(i=null==(r=e.target)?void 0:r.error)?void 0:i.message;this.fail({crc32Array:this.crc32Array,errorCode:1000003,message:`${s}: ${o}`})}}success(e){this.successProcess(e)}fail(e){this.retryTime>=this.MAX_RETRY_TIME?this.failProcess(e):setTimeout((()=>{this.readFileCrc32(this.file),this.retryTime++}),1e3)}}var ns={exports:{}};!function(e){var t;t=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||typeof Uint8ClampedArray<"u"&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],i=0;i<t;i++)r[i>>>2]|=e[i]<<24-i%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray},e.exports=t(Mr())}(ns);const rs=t(ns.exports);var is,ss={exports:{}},os={exports:{}};function as(){return is||(is=1,function(e){var t;t=function(e){return function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var i=[],s=0,o=0;o<t;o++)if(o%4){var a=r[e.charCodeAt(o-1)]<<o%4*2,l=r[e.charCodeAt(o)]>>>6-o%4*2;i[s>>>2]|=(a|l)<<24-s%4*8,s++}return n.create(i,s)}t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],s=0;s<n;s+=3)for(var o=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,a=0;a<4&&s+.75*a<n;a++)i.push(r.charAt(o>>>6*(3-a)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<n.length;s++)i[n.charCodeAt(s)]=s}var o=n.charAt(64);if(o){var a=e.indexOf(o);-1!==a&&(t=a)}return r(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},e.exports=t(Mr())}(os)),os.exports}var ls,cs={exports:{}};function us(){return ls||(ls=1,function(e){var t;t=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,s=r.Hasher,o=n.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=o.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var s=this._hash.words,o=e[t+0],l=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],b=e[t+7],v=e[t+8],_=e[t+9],w=e[t+10],S=e[t+11],x=e[t+12],E=e[t+13],C=e[t+14],k=e[t+15],O=s[0],T=s[1],I=s[2],z=s[3];O=c(O,T,I,z,o,7,a[0]),z=c(z,O,T,I,l,12,a[1]),I=c(I,z,O,T,p,17,a[2]),T=c(T,I,z,O,f,22,a[3]),O=c(O,T,I,z,g,7,a[4]),z=c(z,O,T,I,m,12,a[5]),I=c(I,z,O,T,y,17,a[6]),T=c(T,I,z,O,b,22,a[7]),O=c(O,T,I,z,v,7,a[8]),z=c(z,O,T,I,_,12,a[9]),I=c(I,z,O,T,w,17,a[10]),T=c(T,I,z,O,S,22,a[11]),O=c(O,T,I,z,x,7,a[12]),z=c(z,O,T,I,E,12,a[13]),I=c(I,z,O,T,C,17,a[14]),O=u(O,T=c(T,I,z,O,k,22,a[15]),I,z,l,5,a[16]),z=u(z,O,T,I,y,9,a[17]),I=u(I,z,O,T,S,14,a[18]),T=u(T,I,z,O,o,20,a[19]),O=u(O,T,I,z,m,5,a[20]),z=u(z,O,T,I,w,9,a[21]),I=u(I,z,O,T,k,14,a[22]),T=u(T,I,z,O,g,20,a[23]),O=u(O,T,I,z,_,5,a[24]),z=u(z,O,T,I,C,9,a[25]),I=u(I,z,O,T,f,14,a[26]),T=u(T,I,z,O,v,20,a[27]),O=u(O,T,I,z,E,5,a[28]),z=u(z,O,T,I,p,9,a[29]),I=u(I,z,O,T,b,14,a[30]),O=d(O,T=u(T,I,z,O,x,20,a[31]),I,z,m,4,a[32]),z=d(z,O,T,I,v,11,a[33]),I=d(I,z,O,T,S,16,a[34]),T=d(T,I,z,O,C,23,a[35]),O=d(O,T,I,z,l,4,a[36]),z=d(z,O,T,I,g,11,a[37]),I=d(I,z,O,T,b,16,a[38]),T=d(T,I,z,O,w,23,a[39]),O=d(O,T,I,z,E,4,a[40]),z=d(z,O,T,I,o,11,a[41]),I=d(I,z,O,T,f,16,a[42]),T=d(T,I,z,O,y,23,a[43]),O=d(O,T,I,z,_,4,a[44]),z=d(z,O,T,I,x,11,a[45]),I=d(I,z,O,T,k,16,a[46]),O=h(O,T=d(T,I,z,O,p,23,a[47]),I,z,o,6,a[48]),z=h(z,O,T,I,b,10,a[49]),I=h(I,z,O,T,C,15,a[50]),T=h(T,I,z,O,m,21,a[51]),O=h(O,T,I,z,x,6,a[52]),z=h(z,O,T,I,f,10,a[53]),I=h(I,z,O,T,w,15,a[54]),T=h(T,I,z,O,l,21,a[55]),O=h(O,T,I,z,v,6,a[56]),z=h(z,O,T,I,k,10,a[57]),I=h(I,z,O,T,y,15,a[58]),T=h(T,I,z,O,E,21,a[59]),O=h(O,T,I,z,g,6,a[60]),z=h(z,O,T,I,S,10,a[61]),I=h(I,z,O,T,p,15,a[62]),T=h(T,I,z,O,_,21,a[63]),s[0]=s[0]+O|0,s[1]=s[1]+T|0,s[2]=s[2]+I|0,s[3]=s[3]+z|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var s=t.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,s,o){var a=e+(t&n|~t&r)+i+o;return(a<<s|a>>>32-s)+t}function u(e,t,n,r,i,s,o){var a=e+(t&r|n&~r)+i+o;return(a<<s|a>>>32-s)+t}function d(e,t,n,r,i,s,o){var a=e+(t^n^r)+i+o;return(a<<s|a>>>32-s)+t}function h(e,t,n,r,i,s,o){var a=e+(n^(t|~r))+i+o;return(a<<s|a>>>32-s)+t}n.MD5=s._createHelper(l),n.HmacMD5=s._createHmacHelper(l)}(Math),e.MD5},e.exports=t(Mr())}(cs)),cs.exports}var ds,hs,ps={exports:{}},fs={exports:{}};function gs(){return ds||(ds=1,function(e){var t;t=function(e){return n=(t=e).lib,r=n.WordArray,i=n.Hasher,s=t.algo,o=[],a=s.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],l=n[4],c=0;c<80;c++){if(c<16)o[c]=0|e[t+c];else{var u=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=u<<1|u>>>31}var d=(r<<5|r>>>27)+l+o[c];d+=c<20?1518500249+(i&s|~i&a):c<40?1859775393+(i^s^a):c<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,l=a,a=s,s=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=i._createHelper(a),t.HmacSHA1=i._createHmacHelper(a),e.SHA1;var t,n,r,i,s,o,a},e.exports=t(Mr())}(fs)),fs.exports}function ms(){return hs||(hs=1,function(e){var t;t=function(e){return n=(t=e).lib,r=n.Base,i=n.WordArray,s=t.algo,o=s.MD5,a=s.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),s=i.create(),o=s.words,a=n.keySize,l=n.iterations;o.length<a;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var u=1;u<l;u++)c=r.finalize(c),r.reset();s.concat(c)}return s.sigBytes=4*a,s}}),t.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},e.EvpKDF;var t,n,r,i,s,o,a},e.exports=t(Mr(),gs(),Fr())}(ps)),ps.exports}var ys,bs={exports:{}};function vs(){return ys||(ys=1,function(e){var t;t=function(e){e.lib.Cipher||function(t){var n=e,r=n.lib,i=r.Base,s=r.WordArray,o=r.BufferedBlockAlgorithm,a=n.enc;a.Utf8;var l=a.Base64,c=n.algo.EvpKDF,u=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=n.mode={},h=r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var e=h.extend();function n(e,n,r){var i=this._iv;if(i){var s=i;this._iv=t}else s=this._prevBlock;for(var o=0;o<r;o++)e[n+o]^=s[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,s=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=s}}),e}(),f=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var l=s.create(o,r);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:f}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else r=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var g=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=s.create([1398893684,1701076831]).concat(n).concat(t);else r=t;return r.toString(l)},parse:function(e){var t=l.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=s.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:r})}},y=r.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),s=i.finalize(t),o=i.cfg;return g.create({ciphertext:s,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(n.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=s.random(8));var i=c.create({keySize:t+n}).compute(e,r),o=s.create(i.words.slice(t),4*n);return i.sigBytes=4*t,g.create({key:i,iv:o,salt:r})}},v=r.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:b}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var s=y.encrypt.call(this,e,t,i.key,r);return s.mixIn(i),s},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,y.decrypt.call(this,e,t,i.key,r)}})}()},e.exports=t(Mr(),ms())}(bs)),bs.exports}!function(e){var t;t=function(e){return function(){var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],s=[],o=[],a=[],l=[],c=[],u=[],d=[],h=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,i[n]=f,s[f]=n;var g=e[n],m=e[g],y=e[m],b=257*e[f]^16843008*f;o[n]=b<<24|b>>>8,a[n]=b<<16|b>>>16,l[n]=b<<8|b>>>24,c[n]=b,b=16843009*y^65537*m^257*g^16843008*n,u[f]=b<<24|b>>>8,d[f]=b<<16|b>>>16,h[f]=b<<8|b>>>24,p[f]=b,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),s=this._keySchedule=[],o=0;o<r;o++)if(o<n)s[o]=t[o];else{var a=s[o-1];o%n?n>6&&o%n==4&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a]):(a=i[(a=a<<8|a>>>24)>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[255&a],a^=f[o/n|0]<<24),s[o]=s[o-n]^a}for(var l=this._invKeySchedule=[],c=0;c<r;c++)o=r-c,a=c%4?s[o]:s[o-4],l[c]=c<4||o<=4?a:u[i[a>>>24]]^d[i[a>>>16&255]]^h[i[a>>>8&255]]^p[i[255&a]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,l,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,p,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<l;f++){var g=r[c>>>24]^i[u>>>16&255]^s[d>>>8&255]^o[255&h]^n[p++],m=r[u>>>24]^i[d>>>16&255]^s[h>>>8&255]^o[255&c]^n[p++],y=r[d>>>24]^i[h>>>16&255]^s[c>>>8&255]^o[255&u]^n[p++],b=r[h>>>24]^i[c>>>16&255]^s[u>>>8&255]^o[255&d]^n[p++];c=g,u=m,d=y,h=b}g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^n[p++],m=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^n[p++],y=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^n[p++],b=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^n[p++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=b},keySize:8});t.AES=n._createHelper(g)}(),e.AES},e.exports=t(Mr(),as(),us(),ms(),vs())}(ss);const _s=t(ss.exports);var ws={exports:{}};!function(e){var t;t=function(e){return e.enc.Utf8},e.exports=t(Mr())}(ws);const Ss=t(ws.exports);var xs={exports:{}};!function(e){var t;t=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var i=this._iv;if(i){var s=i.slice(0);this._iv=void 0}else s=this._prevBlock;r.encryptBlock(s,0);for(var o=0;o<n;o++)e[t+o]^=s[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,s=e.slice(t,t+i);n.call(this,e,t,i,r),this._prevBlock=s}}),t}(),e.mode.CFB},e.exports=t(Mr(),vs())}(xs);const Es=t(xs.exports);var Cs={exports:{}};!function(e){var t;t=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},e.exports=t(Mr(),vs())}(Cs);const ks=t(Cs.exports);function Os(e){const{words:t,sigBytes:n}=e,r=new Uint8Array(n);for(let i=0;i<n;i+=1)r[i]=t[i>>>2]>>>24-i%4*8&255;return r}function Ts(e){const{key:t,iv:n,data:r}=e;return Os(_s.encrypt(rs.create(r),Ss.parse(t),{mode:Es,padding:ks,iv:Ss.parse(n)}).ciphertext).buffer}class Is{constructor(e,t={}){var n,r,i,s,o,a;this.context=e.context,this.key=e.key,this.currFileCtx=this.context.tasks[this.key],this.isDirect=e.isDirect,this.isImageBatchUpload=e.isImageBatchUpload,this.file=e.file,this.type=(this.isImageBatchUpload?null==(n=this.file[0])?void 0:n.type:null==(r=this.file)?void 0:r.type)||"",this.sliceLength=Bi.getFileSliceLength(this.file,t.getSliceFunc),this.config=t,this.crc32Key=null,this.bucket=(null==(i=this.currFileCtx)?void 0:i.serviceType)===Er.IMAGEX?null==(s=t.imageConfig)?void 0:s.serviceId:(null==(o=t.videoConfig)?void 0:o.spaceName)||(null==(a=t.objectConfig)?void 0:a.spaceName)}start(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.currFileCtx.imagexEnableEncrypt?this.imagex_encrypt(this.file):this.crc32(this.file,this.sliceLength)}imagex_encrypt(e){const{imagexEncryptKey:t}=this.currFileCtx;if(this.isDirect){const n=this.isImageBatchUpload?e:[e],r=[];n.forEach(((e,i)=>{const s=new FileReader;s.readAsArrayBuffer(e),s.onload=e=>{const s=e.target.result,o=Bi.generateKey(16),a=Ts({key:t,iv:o,data:s}),l=Bi.concatAb(Bi.str2ab("aes256cfb-direct"),Bi.str2ab(o),a);if(r[i]={data:l,iv:o},r.filter((e=>!!e)).length===n.length){const e=r.map((e=>({start:0,end:e.data.byteLength,crc32:Bi.computeCrc32(e.data),buffer:e.data})));this.success(e)}},s.onerror=()=>{this.fail({message:"Read file error."})}}))}else{const t=Bi.generateKey(16),n=[Bi.generateEncryptMeta(!1,this.sliceLength,t)],r=this.sliceLength,i=e.size;let s=0,o=0;for(;o<i;)o=Math.min(s+r,i),n.push({start:s,end:o,crc32:0}),s=o;this.success(n)}}crc32(e,t){if(this.isImageBatchUpload){const t=e.length,n=[];for(let r=0;r<t;r++)new ts(e[r],e[r].size,(e=>{n[r]=e[0],n.filter((e=>!!e)).length===t&&this.success(n)}),(e=>{this.fail(e)})).start()}else{if(!e||!e.size||e.size<=0)return void this.fail({errorCode:Xr.CRC32_ERROR,message:"There is a problem with the input file or fileSize."});this.isDirect?new ts(e,e.size,(e=>{this.success(e)}),(e=>{this.fail({errorCode:Xr.CRC32_ERROR,message:`get crc32 error: ${e&&e.message}`})})).start():this.sliceFile(e,t,(e=>{this.success(e)}),(e=>{this.fail(e)}))}}sliceFile(e,t,n,r){const i=[],s=e.size,o=e.slice||e.webkitSlice||e.mozSlice;function a(l){const c=new FileReader,u=Math.min(s,l+t);c.readAsArrayBuffer(o.call(e,l,u)),c.onload=e=>{const r=e.target.result;i.push({start:l,end:u,crc32:Bi.computeCrc32(r,0)}),u===s?n(i):a(s-(s%t||t))},c.onerror=e=>{const t=e.target.error.name,n=e.target.error.message;r({crc32Array:i,errorCode:Xr.CRC32_ERROR,message:`${t}: ${n}`})}}try{a(0)}catch(l){r({message:l&&l.toString()})}}getCrc32Key(e,t){let n;return n="[object Array]"===Object.prototype.toString.call(t)?[...t]:[t],n.push(e[0].crc32,e[e.length-1].crc32),this.config.instanceId&&n.push(this.config.instanceId),this.bucket&&n.unshift(this.bucket),n.join("_")}success(e){const t=this.context,{key:n}=this;let r=[],i=[];if(this.isImageBatchUpload)for(let a=0;a<this.file.length;a++)r.push(this.file[a].size),i.push(this.file[a].name);else r=this.file.size,i=this.file.name;this.crc32Key=this.getCrc32Key(e,r);const s=t.tasks[n],o=Object.assign(s,{key:n,crc32Array:e,crc32Key:this.crc32Key,sdkVersion:"0.1.12",extra:{message:"get crc32 success"},stage:"crc32",type:"success",fileSize:r,fileName:i,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st,isDirect:this.isDirect,isImageBatchUpload:this.isImageBatchUpload});return this.successProcess(o)}fail(e){const t=this.context,{key:n}=this,r=t.tasks[n],i=e&&e.message?e.message:"get crc32 error",s=e&&e.errorCode,o=Object.assign(r,{extra:{message:i,errorCode:s},type:"error",stage:"crc32",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st});this.failProcess(o)}}class zs{constructor(e){this.options=e}async fetch(){const{info:e}=this.options,t=new Vi;return new Promise(((n,r)=>{t.on("complete",(e=>{n(e)})),t.on("error",(e=>{r(e)}));const{userId:i}=this.options.config;let s=Hi(u.getUploadListUrl,{tosDomain:e.tosDomain,oid:e.oid,uploadId:e.UploadID});this.options.stream&&(s+="&uploadmode=stream"),t.send({method:"GET",url:s,headers:{Authorization:e.signature,"X-Storage-U":encodeURIComponent(i),...e.UploadHeader},timeout:3e4})}))}}let Rs=!1;try{Rs="1"===localStorage.getItem("ttupload_debug")}catch{}class Ds{static log(...e){Rs&&console.log("[UPLOAD]",...e)}}const Ms={checkFile:()=>{},checkStsToken:e=>!e||e.SessionToken&&e.SecretAccessKey&&(e.AccessKeyId||e.AccessKeyID),checkServiceName:(e,t,n)=>{if(n===Er.VOD||n===Er.IMAGEX)return n;if(e===wr.VIDEO)return Er.VOD;if(e===wr.IMAGE)return Er.IMAGEX;if(e===wr.OBJECT){if(t.objectConfig&&t.objectConfig.spaceName)return Er.VOD;if(t.objectConfig&&t.objectConfig.serviceId)return Er.IMAGEX;if(t.videoConfig&&t.videoConfig.spaceName)return Er.VOD;if(t.imageConfig&&t.imageConfig.serviceId)return Er.IMAGEX}return Er.VOD},checkIfGateway:e=>!!e&&"gateway"===e["X-Storage-Mode"],checkIfLogicalpart:e=>!!e&&"logical_part"===e["X-Logical-Part-Mode"]};class Ns{constructor({options:e,config:t,uploaderCtx:n,currFileCtx:r,startOptions:i,success:s,fail:o}){this.config=t,this.options=e,this.uploaderCtx=n,this.currFileCtx=r||{},this.startOptions=i,this.fail=o,this.success=s,this.retryInfo={default:{retryCount:0,MAX_TIME:2},defaultDomainFail:{retryCount:0,MAX_TIME:2}}}start(){const{region:e}=this.config,t=new Vi;t.on("complete",(e=>{var t;if(!e.response)return this.fail({error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e});{let r=null;try{r=JSON.parse(e.response)}catch(n){return this.fail({error:`catch error: ${n.message||n.toString()}`,xhr:e})}if(!r)return this.fail({message:"Parse response error.Invalid response.",xhr:e});if(null!=(t=null==r?void 0:r.ResponseMetadata)&&t.Error)return this.fail({xhr:e,errorCode:r.ResponseMetadata.Error.CodeN,error:r.ResponseMetadata.Error.Code,message:r.ResponseMetadata.Error.Message});this.success(r,e)}})),t.on("error",(e=>{if((this.options.type===wr.IMAGE&&this.config.imageFallbackHost||this.options.type===wr.VIDEO&&this.config.videoFallbackHost)&&!this.uploaderCtx.useBackupDomain)return void(this._innerRetry("defaultDomainFail")||(this.uploaderCtx.useBackupDomain=!0,this.start()));const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const n=JSON.parse(e.response);n.ResponseMetadata&&n.ResponseMetadata.Error&&(t.errorCode=n.ResponseMetadata.Error.CodeN,t.error=n.ResponseMetadata.Error.Code,t.message=n.ResponseMetadata.Error.Message),n.ResponseMetadata&&n.ResponseMetadata.RequestId&&(t.requestId=n.ResponseMetadata.RequestId);const{requestId:r,errorCode:i}=t;if(r&&Bi.mayLocalTimeError({errorCode:i,requestId:r})&&(Bi.calibrationTimeConfig(this.uploaderCtx.priorInfo,r),this._innerRetry()))return}this.fail(t)}));let n="",r={};const{useBackupDomain:i}=this.uploaderCtx;this.uploaderCtx.priorInfo.topExpires>0&&(r["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const s=Ms.checkServiceName(this.options.type,this.config,this.options.serviceType);if(s===Er.IMAGEX&&(n=i?this.config.imageFallbackHost:this.config.imageHost,r={Action:"ApplyImageUpload",Version:"2018-08-01"},this.options.type===wr.IMAGE&&(this.config.imageConfig&&(this.currFileCtx.serviceId||this.config.imageConfig.serviceId)?r.ServiceId=this.currFileCtx.serviceId||this.config.imageConfig.serviceId:r.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName),this.options.type===wr.OBJECT&&(r.ServiceId=this.currFileCtx.serviceId||this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),this.currFileCtx.fileSize&&this.currFileCtx.fileSize.length>1&&(r.UploadNum=this.currFileCtx.fileSize.length),this.options.storeKey)){const{storeKey:e}=this.options;"[object Array]"===Object.prototype.toString.call(e)?r.StoreKeys=e:"[object String]"===Object.prototype.toString.call(e)&&(r.StoreKeys=[e])}if(s===Er.VOD){let e=this.config.videoConfig&&this.config.videoConfig.spaceName;if(this.options.type===wr.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(e=this.config.objectConfig.spaceName),n=i?this.config.videoFallbackHost:this.config.videoHost,r={Action:"ApplyUploadInner",Version:"2020-11-19",SpaceName:e,FileType:this.options.type,IsInner:1},this.config.enOID&&(r.EnOID=1),(this.options.testHost||this.config.testHost)&&(r.TestHost=this.options.testHost||this.config.testHost),this.startOptions&&this.startOptions.selectRouteResult){const{selectRouteResult:e}=this.startOptions;r.ClientBestHosts=e.map((e=>e.domainName)).join(",")}}if(this.currFileCtx.fileSize&&!this.currFileCtx.isImageBatchUpload&&(r.FileSize=this.currFileCtx.fileSize),this.config.useFileExtension&&this.currFileCtx.fileName&&(this.options.type===wr.OBJECT||this.options.type===wr.IMAGE)){const{fileName:e}=this.currFileCtx,t=Bi.getFileSuffix(e);t&&(r.FileExtension=t)}this.config.accountId&&(r["X-Account-Id"]=this.config.accountId),(this.options.type===wr.IMAGE||this.options.type===wr.OBJECT)&&this.config.bizType&&(r.BizType=this.config.bizType,r.AppID=this.config.appId,r.UserID=this.config.userId),this.config.openExperiment&&(r.app_id=this.config.appId,r.user_id=this.config.userId),this.config.extraQuery&&Object.assign(r,{...this.config.extraQuery}),this.options.extraParams&&Object.assign(r,this.options.extraParams),r.s=Math.random().toString(36).substr(2),this.options.fileSize&&(r.FileSize=this.options.fileSize),this.config.extraQuery&&Object.assign(r,{...this.config.extraQuery}),this.options.scene&&(r.Scene=this.options.scene),r.device_platform="web";const o=this.currFileCtx.proxyStsToken||this.config.stsToken,a={method:"GET",url:`${n}?${Bi.toQueryString(r)}`,timeout:this.currFileCtx.gatewayTimeout||this.config.gatewayTimeout||3e4,region:e,params:r,pathname:Bi.getPathByURL(n)};Bi.signRequest(a,{serviceName:s,stsToken:o,uploaderCtx:this.uploaderCtx,config:this.config}),t.send(a)}_innerRetry(e="default"){const{MAX_TIME:t}=this.retryInfo[e];return this.retryInfo[e].retryCount++,this.retryInfo[e].retryCount<=t&&(this.start(),!0)}}class js{constructor({options:e,config:t,uploaderCtx:n,currFileCtx:r,startOptions:i}){this.config=t,this.options=e,this.uploaderCtx=n,this.currFileCtx=r||{},this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.startOptions=i}parseResult(e){var t;const n=e,r=Ms.checkServiceName(this.options.type,this.config,this.options.serviceType),{Result:i}=n,s=r===Er.IMAGEX?i.UploadAddress:i.InnerUploadAddress.UploadNodes[0],{StoreInfos:o,UploadHosts:a,SessionKey:l,UploadHeader:c={}}=s;let u=r===Er.IMAGEX?a[0]:s.UploadHost;const{SDKParam:d}=i,h=null==(t=o[0])?void 0:t.UploadID;let p,f=[],g=[],m=Ms.checkIfGateway(c);if(Ds.log("1001 Result: ",i),this.config.tosDomain&&this.config.tosDomain.length>0&&(u=this.config.tosDomain),this.isImageBatchUpload&&o.length>1?o.forEach((e=>{f.push(e.Auth),g.push(e.StoreUri)})):(f=o[0].Auth,g=o[0].StoreUri),r===Er.VOD){const{UploadNodes:e}=i.InnerUploadAddress;if(e.length&&e.length>1){const t=e[1];p={SessionKey:t.SessionKey,UploadHeader:t.UploadHeader,StoreInfo:t.StoreInfos[0],UploadHost:t.UploadHost}}}const{serverSpeed:y,enableSelectRoute:b,useClientSelectRouteResult:v}=qi(u,this.startOptions),_=Ms.checkIfLogicalpart(c);let w=null==d?void 0:d.dynamic_slice_web;const S=!!Number(null==d?void 0:d.enable_omit_initupload_web),x=1024*Number(null==d?void 0:d.slice_size_web)||w?Or:this.currFileCtx.sliceSize,E=Number(null==d?void 0:d.slice_count_web)||this.config.uploadSliceCount,C=Number(null==d?void 0:d.large_file_threshold),k=!!Number(null==d?void 0:d.enable_merge_request_web),O=null==d?void 0:d.retry_03_err_time_web,T=null==d?void 0:d.retry_useful_err_time_web,I=1e3*(null==d?void 0:d.file_merge_timeout_web)||void 0,z=1e3*(null==d?void 0:d.gateway_timeout_web)||void 0,R=1e3*(null==d?void 0:d.init_upload_timeout_web)||void 0,D=1e3*(null==d?void 0:d.upload_timeout_web)||void 0,M=this.currFileCtx.fileSize;if(w){const{normal_slice_size_500M:e,high_slice_size_500M:t}=w;e&&t&&("number"==typeof M&&M>=524288e3&&(w=Object.assign({},w,{normal_slice_size:e,high_slice_size:t})),delete w.normal_slice_size_500M,delete w.high_slice_size_500M)}return"number"==typeof M&&"number"==typeof C&&c&&!m&&M>=C&&(c["X-Storage-Mode"]="gateway",delete c["X-Logical-Part-Mode"],m=!0),{useBackupDomain:this.uploaderCtx.useBackupDomain,signature:f,oid:g,tosDomain:`${this.config.schema}://${u}`,UploadHeader:c||{},SessionKey:l,fallbackStoreInfo:p,useClientSelectRouteResult:v,enableSelectRoute:b,gatewayUpload:m,sliceSize:x,sliceCount:E,logicalPart:_,omitInitUpload:S,mergeRequest:k,dynamicSliceRule:w,serverSpeed:y,UploadID:h,retryUseful03Time:O,retryUsefulReqTime:T,fileMergeTimeout:I,gatewayTimeout:z,initUploadTimeout:R,uploadTimeout:D,preferMode:null==d?void 0:d.upload_mode}}}let Ps;const As=new Uint8Array(16);function Ls(){if(!Ps&&(Ps=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ps))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(As)}const Fs=[];for(let n=0;n<256;++n)Fs.push((n+256).toString(16).slice(1));function Us(e,t=0){return(Fs[e[t+0]]+Fs[e[t+1]]+Fs[e[t+2]]+Fs[e[t+3]]+"-"+Fs[e[t+4]]+Fs[e[t+5]]+"-"+Fs[e[t+6]]+Fs[e[t+7]]+"-"+Fs[e[t+8]]+Fs[e[t+9]]+"-"+Fs[e[t+10]]+Fs[e[t+11]]+Fs[e[t+12]]+Fs[e[t+13]]+Fs[e[t+14]]+Fs[e[t+15]]).toLowerCase()}const Gs={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Bs(e,t,n){if(Gs.randomUUID&&!t&&!e)return Gs.randomUUID();const r=(e=e||{}).random||(e.rng||Ls)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,Us(r)}class Zs extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.isDirect=this.options.isDirect||!!this.currFileCtx.isDirect}async start(e,t,n){this.startOptions=e,this.failProcess=n,this.successProcess=t,this._st=Date.now();let r=null;(()=>{var e;return!this.config.multiTabUploadOptimize||!(null!=(e=this.uploaderCtx.uploadingStore)&&e.isUploading(this.currFileCtx.crc32Key))})()?r=await this.uploaderCtx._getCache(this.currFileCtx.crc32Key):this.currFileCtx.noCache=!0;let i={};try{i=r?JSON.parse(r):{}}catch{return this.startPreUpload()}!this.isDirect&&i.oid&&i.UploadID?this.resumeFromCache(i):this.startPreUpload()}startPreUpload(){var e;const t=Ms.checkServiceName(this.options.type,this.config,this.options.serviceType);if(!this.isImageBatchUpload&&t===Er.VOD&&this.uploaderCtx.priorInfo.preUploadRet&&null!=(e=this.uploaderCtx.priorInfo.preUploadRet.Result.SDKParam)&&e.large_file_threshold){const e=this.uploaderCtx.priorInfo.preUploadRet,t=this.uploaderCtx.priorInfo.preUploadXhr;return this.currFileCtx.cacheApply=!0,delete this.uploaderCtx.priorInfo.preUploadRet,delete this.uploaderCtx.priorInfo.preUploadXhr,this.success(e,t)}this.api=new Ns({options:this.options,config:this.config,uploaderCtx:this.uploaderCtx,currFileCtx:this.currFileCtx,startOptions:this.startOptions||{},success:this.success.bind(this),fail:this.fail.bind(this)}),this.api.start()}getHostFromUri(e){if(e)return e.substring(e.match("://").index+3)}resumeFromCache(e){const{key:t}=this.options;new zs({config:this.config,info:e,stream:e.streamMode}).fetch().then((n=>{let r=null;try{const i=JSON.parse(n.response);if(!(2e3===i.code&&i.data.partlist.length>0))return this.startPreUpload();{const{isAllFinished:s,needSliceArray:o,dynamicCrc32Array:a}=this.confirmCache(i.data.partlist),l=e.hasMerge?5:s?4:3,c=this.getHostFromUri(e.tosDomain),{serverSpeed:u}=qi(c,this.startOptions);r=Object.assign(this.currFileCtx,e,{key:t,xhr:n,extra:{message:"prepare upload from cache success"},stage:"preUpload",type:"success",percent:0,cacheTask:l,proxyStsToken:this.options.stsToken,currentTask:1,status:1,isBreak:1,crc32Array:[],dynamicCrc32Array:a,needSliceArray:o,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,serverSpeed:u})}}catch{return this.startPreUpload()}return this.successProcess(r)})).catch((e=>{e.status>=400?this.startPreUpload():this.fail({error:"request error",xhr:e})}))}confirmCache(e){const{fileSize:t}=this.currFileCtx,[n,r,i]=Yi(t,e);return{isAllFinished:i,needSliceArray:n,dynamicCrc32Array:r}}success(e,t){const n=new js({options:this.options,config:this.config,uploaderCtx:this.uploaderCtx,currFileCtx:this.currFileCtx,startOptions:this.startOptions||{}}).parseResult(e);Ds.log("1001 Parsed Result: ",n);let r=[],i=[],s=this.currFileCtx.crc32Array;this.isDirect||(s=[],[i,r]=Yi(this.currFileCtx.fileSize,[])),!this.currFileCtx.imagexEnableEncrypt&&!this.isImageBatchUpload&&!this.config.clientEncrypt&&!n.gatewayUpload&&("stream"===n.preferMode||this.config.streamMode)&&(this.currFileCtx.streamMode=!0,n.UploadHeader&&delete n.UploadHeader["X-Logical-Part-Mode"]);let o=0;!n.gatewayUpload&&!this.isDirect&&n.omitInitUpload&&(n.UploadID=Bs());let a=n.sliceSize||this.currFileCtx.sliceSize;this.isDirect||(o=Bi.minSliceSize(!1,n.gatewayUpload),a=Qi(a,!1,n.gatewayUpload));const l={key:this.options.key,type:"success",extra:{message:"prepare upload success"},stage:"preUpload",stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,needSliceArray:i,dynamicCrc32Array:r,crc32Array:s,xhr:t,minSliceSize:o,sliceSize:a},c=Object.assign(this.currFileCtx,n,l);this.successProcess(c)}fail(e){var t;const{xhr:n}=e,r=e.errorCode||Xr.APPLY_NETWORK_ERROR;let i="prepare upload error: UNKNOWN";n&&(i=0===n.status?"prepare upload error: NETERROR":e.message||`prepare upload error: ${n.status}`);const s=Object.assign(this.currFileCtx,{extra:{message:i,error:e.error,errorCode:r},type:"error",stage:"preUpload",xhr:n,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.isImageBatchUpload&&(s.successImage=[],s.failImage=null==(t=this.currFileCtx)?void 0:t.crc32Array.map(((e,t)=>{var n,r;return{crc32:e.crc32,fileSize:null==(n=this.currFileCtx)?void 0:n.fileSize[t],fileName:null==(r=this.currFileCtx)?void 0:r.fileName[t],finishSize:0,success:!1}}))),this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(s)}}class Ks extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.transport=new Vi,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.eventInit()}get uploadmode(){return this.currFileCtx.streamMode?"stream":"part"}fallbackStorePlace(){const{fallbackStoreInfo:e}=this.currFileCtx;e&&(Object.assign(this.currFileCtx,{oid:e.StoreInfo.StoreUri,tosDomain:`${this.config.schema}://${e.UploadHost}`,signature:e.StoreInfo.Auth,UploadHeader:e.UploadHeader,SessionKey:e.SessionKey}),this.uploaderCtx._saveTask(this.options.key))}initUpload(e){e&&this.fallbackStorePlace();const t={oid:this.currFileCtx.oid,tosDomain:this.currFileCtx.tosDomain,uploadmode:this.uploadmode},n=Hi(u.initUploadFileUrl,t),{userId:r}=this.config,i={method:"post",url:n,headers:{Authorization:this.currFileCtx.signature,"X-Storage-U":encodeURIComponent(r),...this.currFileCtx.UploadHeader},timeout:this.currFileCtx.initUploadTimeout||this.config.initUploadTimeout||3e4};this.transport.send(i)}start(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.initUpload(e&&e.changeNodeRetry)}eventInit(){this.transport.on("complete",(e=>{var t;let n=null;try{const r=JSON.parse(e.response),i=null==(t=r.data)?void 0:t.uploadid;if(2e3!==r.code||!i)return this.fail({error:`fail! response.code: ${r.code}, fail message: ${r.message}`,errorCode:null==r?void 0:r.code,message:null==r?void 0:r.message,xhr:e});n=Object.assign(this.currFileCtx,{UploadID:i,percent:0,type:"success",extra:{message:"init upload id success"},stage:"initUploadID",xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}catch(r){return this.fail({error:`catch error: ${r.message||JSON.stringify(r)}`,xhr:e})}return this.successProcess(n)})),this.transport.on("error",(e=>{this.fail({error:`1002 Request Failed: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e})}))}fail(e){const t=Object.assign(this.currFileCtx,{extra:{message:`init upload id error, ${e.error}`,errorCode:e.errorCode||Xr.INIT_UPLOAD_ID_NETWORK_ERROR},type:"error",stage:"initUploadID",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.uploaderCtx._removeTaskCache(this.options.key),this.failProcess(t)}}class Xs extends i.EventEmitter{constructor({sliceItem:e,crc32:t,url:n,signature:r,uploadHeader:i,userId:s,retryTime:o,timeout:a,method:l="POST",mergeRequest:c,extraParams:u,config:d}){super(),this.fileSlice=e,this.crc32=t,this.uploadUrl=n,this.uploadHeader=i,this.signature=r,this.userId=s,this.retryTime=o||0,this.method=l,this.retryCount=0,this.timeout=a||18e5,this.ready=!1,this.cancel=!1,this.mergeRequest=!!c,this.extraParams=u,this.config=d,this.transport=new Vi,this.eventInit()}upload(e,t){var n;if(!this.isParamsValid())return;this._st=Date.now();const r={method:this.method,url:this.uploadUrl,headers:{Authorization:this.signature,"Content-CRC32":this.crc32,"X-Storage-U":encodeURIComponent(this.userId),...this.uploadHeader},file:this.fileSlice,binary:1,timeout:this.timeout};if(this.mergeRequest&&this.extraParams){r.headers["X-Upload-With-PostUpload"]=1,r.binary=!1,r.file=null;const e=[{name:"file",value:new Blob([this.fileSlice],{type:"application/octet-stream"})}],t={sts2_token:this.extraParams.proxyStsToken.SessionToken,sts2_secret:this.extraParams.proxyStsToken.SecretAccessKey,session_key:this.extraParams.SessionKey};Array.isArray(null==(n=this.config.videoConfig)?void 0:n.processAction)&&(t.functions=$i(this.config.videoConfig.processAction)),e.push({name:"post_upload_req",value:JSON.stringify(t)}),r.formData=e}this.transport&&this.transport.send(r),e&&this.emit("retry",t)}isParamsValid(){return this.fileSlice&&(this.fileSlice.size||this.fileSlice.byteLength)?this.crc32?!!this.uploadUrl||(this.emit("error",{message:"slice upload failed: NOURL",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCRC32",crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength}),!1):(this.emit("error",{message:"slice upload failed: NOCONTENT",crc32:this.crc32}),!1)}eventInit(){this.transport.on("complete",(e=>{try{const t=JSON.parse(e.response);2e3===t.code?this.success(e,t):this.fail(e,t)}catch(t){this.fail(e,t)}})),this.transport.on("error",(e=>{this.fail(e)})),this.transport.on("progress",(e=>{this.process(e)}))}success(e,t){this.ready=!0;const n=Date.now()-this._st,r=this.fileSlice.size||this.fileSlice.byteLength,i=r/n;this.emit("complete",{crc32:this.crc32,size:r,speed:i,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st,result:t})}fail(e,t=null){if(this.cancel)return;const n={crc32:this.crc32,size:this.fileSlice.size||this.fileSlice.byteLength,xhr:e,sliceStartTime:this._st,sliceEndTime:Date.now(),sliceDuration:Date.now()-this._st};if(e&&401===e.status)return void this.emit("error",{message:"slice upload failed: UNAUTHORIZED",...n});let r=`slice upload failed: ${(null==t?void 0:t.message)||"UNKNOWN"}`;if(e&&(r=e.status?`slice upload failed: ${(null==t?void 0:t.message)||e.status}`:"slice upload failed: NETERROR"),this.retryCount<this.retryTime)return setTimeout((()=>{this.upload(!0,{message:r,...n})}),1e3),void this.retryCount++;this.emit("error",{message:r,errorCode:null==t?void 0:t.code,...n})}process(e){this.cancel||this.emit("progress",{crc32:this.crc32,loaded:e.loaded||0,total:e.total||0})}abort(){this.transport&&(this.cancel=!0,this.transport.abort())}destroy(){this.transport=null}}class Vs{constructor(e){this.currentCtx=e.currentCtx,this.options=e,this.config=e.config,this.transport=new Vi}getUrl(){const{partNumber:e,partSize:t}=this.options,n={oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain,uploadid:this.currentCtx.UploadID,size:t,part_number:e};return Hi(u.getUploadStatusUrl,n)}getTransportReq(e){const{userId:t}=this.config;return{method:"get",url:e,headers:{Authorization:this.currentCtx.signature,"X-Storage-U":encodeURIComponent(t),...this.currentCtx.UploadHeader},timeout:this.config.getPartStatusTimeout||1e5}}onTransportComplete(e,t,n){try{t(JSON.parse(e.response))}catch(r){n(r)}}fetch(){const e=this.getUrl(),t=this.getTransportReq(e),{transport:n}=this,{controller:r}=this.options;return r.abort=()=>{n.abort()},new Promise(((e,r)=>{n.on("complete",(t=>this.onTransportComplete(t,e,r))),n.on("error",(e=>{r(e.errText)})),n.send(t)}))}}class Ws{constructor(e){this.api=new Vs(e),this.options=e}async fetch(){const{maxRetryCount:e=0}=this.options;let t=0;for(;t<e;)try{const e=await this.api.fetch();if(2e3===e.code)return{completed:!0,offset:this.options.partSize};if(4009===e.code)return{completed:!1,offset:e.data.offset};if(4021===e.code)return{completed:!1,offset:0};throw new Error(`GetPartStatus failed with code ${e.code}`)}catch(n){if("abort"===n||(t++,Ds.log(`GetPartStatus failed with error ${n}, retrying...`),t>=e))throw n}return{completed:!1,offset:0}}}class Hs extends i.EventEmitter{constructor(e,t={}){super(),this.cancelableCallbacks=new Ki,this.maxPausedDelay=6e5,this.dynamicCrc32Array=[],this.streamModeConfig={maxFetchStatusRetryTime:3},this.setMaxListeners(1/0),this.file=e.file,this.context=e.context,this.key=e.key,this.config=t,this.finishArr=[],this.errorLength=0,this.finishSize=0,this.retryUploadTime=Number(t.retryUploadTime)||2,this.progressMonitorTime=Number(t.progressMonitorTime)||10,this.progressMonitorSpeed=Number(t.progressMonitorSpeed)||50,this.uploadSliceCount=Number(t.uploadSliceCount)||3,this.realtimeSpeedInterval=Number(t.realtimeSpeedInterval)||5,this.lastFinishSize=-1,this.lastProcessPercent=-1,this.lastIntervalSize=-1,this.lastCalculateSpeedTime=-1,this.lastCalculateSpeedSize=0,this.retryCount={},this.uploadHandlers={},this.RETRY_UPLOAD_DELAY=1e3}generateUrl(e,t,n,r){if(!this.currentCtx)return"";const i={part_number:e,uploadId:this.currentCtx.UploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain};let s=Hi(u.uploadChunkedUrl,i);return s+="&part_offset="+t,this.currentCtx.streamMode&&(s+="&uploadmode=stream&enable_omit_initupload="+(Wi(this.currentCtx)?"0":"1")+"&size="+n+"&offset="+r),s}_isLastSlice(e){return 0===this.needSliceArray.length&&this.dynamicCrc32Array.length-1===e}_nextSliceInfor(e){const{lastIndex:t}=this;let n=this.dynamicCrc32Array[t];const r=this.needSliceArray[0];if(!n&&r){const{start:i}=r,s=e||this._dynamicSliceSize();let o=Math.min(r.start+s,r.end);Ds.log("1003 use slice size: "+(o-i)+" speed: "+this.getUploadSpeed()),this.currentCtx.minSliceSize&&r.end-(i+s)<this.currentCtx.minSliceSize&&(o=r.end),n={start:i,end:o,crc32:0},this.dynamicCrc32Array[t]=n,r.start=o,r.start>=r.end&&this.needSliceArray.shift()}return{lastIndex:t,sliceInfor:n}}_isAllSliceFinish(){return 0===this.needSliceArray.length&&this.finishArr.length>=this.dynamicCrc32Array.length}_isAllFileSliceFinish(){return!this.dynamicCrc32Array.slice(1).some((e=>!e.finished))}getUploadSpeed(){return this.currentCtx.serverSpeed}_hasSpeedResult(){return typeof this.currentCtx.serverSpeed<"u"&&this.currentCtx.serverSpeed>=0}_setSpeed(e){this.currentCtx.serverSpeed=e,Ds.log("1003 update speed: ",e)}_dynamicSliceSize(){let{sliceSize:e}=this.currentCtx;if(!this._hasSpeedResult()||this.config.fixedSliceSize)return e;if(this.currentCtx.dynamicSliceRule){const{low_normal_network_threshold:t,normal_high_network_threshold:n,low_slice_size:r,normal_slice_size:i,high_slice_size:s}=this.currentCtx.dynamicSliceRule;Ds.log("dynamic slice rule: ",JSON.stringify(this.currentCtx.dynamicSliceRule)),e=this.getUploadSpeed()<=t?r:this.getUploadSpeed()<=n?i:s}return e=Math.max(this.currentCtx.minSliceSize,e),e}_getSliceInfor(e){return this.dynamicCrc32Array[e]}_needUploadSize(){let e=0;return e+=this.dynamicCrc32Array.reduce(((e,t)=>e+(t.finished?0:t.end-t.start)),0),e+=this.needSliceArray.reduce(((e,t)=>e+t.end-t.start),0),e}_markSpliceFinish(e){const t=e.index;this.dynamicCrc32Array[t].finished=!0,this.dynamicCrc32Array[t].speed=e.speed,this._setSpeed(e.speed)}_isSliceInfoEqual(e,t){return e.start===t.start&&e.end===t.end&&e.crc32===t.crc32}_isLastDynamicSlice(e){const t=this.dynamicCrc32Array[this.dynamicCrc32Array.length-1];return!(!t||!this._isSliceInfoEqual(e,t))}_getFinishSize(){const{dynamicCrc32Array:e}=this;let t=0;return e.forEach((e=>{t+=e.loaded})),t}_getUploadSliceCount(){return this.currentCtx?this.currentCtx.sliceCount:1}_resetState(){if(this.lastCalculateSpeedTime=Date.now(),this.errorLength=0,this.dynamicCrc32Array=this.context.tasks[this.key].dynamicCrc32Array,this.needSliceArray=this.context.tasks[this.key].needSliceArray,this.uploadSliceCount=this._getUploadSliceCount(),this.lastIndex=0,this.uploading=[],this._uploadSize=this._needUploadSize(),this.imagexEncrypt=this.context.tasks[this.key].imagexEnableEncrypt,this.imagexEncryptMetaGenerated=!1,this.context.tasks[this.key].imagexEnableEncrypt){const e=Bi.generateKey(16);this.imagexEncryptIv=e,this.dynamicCrc32Array.unshift({encryptMeta:!0}),this.lastIndex++}}async _refetchPartList(){this.stop(),this.currentCtx=this.context.tasks[this.key];const e=new zs({config:this.config,info:this.currentCtx,stream:!!this.currentCtx.streamMode});try{const t=await e.fetch(),n=JSON.parse(t.response),{fileSize:r}=this.currentCtx;let i=this.currentCtx.needSliceArray||[],s=this.currentCtx.dynamicCrc32Array||[],o=!1;2e3===n.code&&n.data.partlist.length>0?([i,s,o]=Yi(r,n.data.partlist),this.retryCount={}):5e3===n.code&&([i,s,o]=Yi(r,[]),this.retryCount={}),this.currentCtx.dynamicCrc32Array=s,this.currentCtx.needSliceArray=i,Ds.log("1003 restart, got part list from server: ",n,"dynamicCrc32Array",s,"needSliceArray",i,"isAllFinish: ",o)}catch(t){Ds.log("1003 get part list error: ",t)}}async start(e,t,n){this.failProcess=n,this.successProcess=t,this.currentCtx=this.context.tasks[this.key];const r=Date.now();this._st=r,this._lastStartTime&&r-this._lastStartTime>=this.maxPausedDelay&&await this._refetchPartList(),this._lastStartTime=r,this._resetState(),await this.initWorker(),this.setProgressMonitor(),Ds.log("1003 start. use tosDomain: "+this.currentCtx.tosDomain+", use stream mode: "+!!this.currentCtx.streamMode),this.threadUpload()}async initWorker(){this.worker||(this.worker=await Bi.createCrc32Worker(this.config),this.worker.onmessage=e=>{if(e.data&&e.data.type)return;const[t,n,r,i]=e.data,s=Date.now(),o=this._getSliceInfor(r);o.index=r,o.crc32=n,o.crc32StartTime=i,o.crc32EndTime=s,o.crc32Duration=s-i,this.upload(o,t,r)})}read(e,t){if(e.encryptMeta)return;const{file:n}=this,r=n.slice||n.webkitSlice||n.mozSlice,i=r.call(n,e.start,e.end),s=new FileReader,o=Date.now();s.onload=e=>{var n;let r=e.target.result;this.imagexEncrypt&&(r=Ts({iv:this.imagexEncryptIv,key:this.currentCtx.imagexEncryptKey,data:e.target.result})),null==(n=this.worker)||n.postMessage([r,t,o,!!this.config.clientEncrypt,this.currentCtx.clientEncryptKey,this._isLastSlice(t)],[r])},s.onerror=this.onReadFileError(s,i,e).bind(this),s.readAsArrayBuffer(r.call(n,e.start,e.end))}onReadFileError(e,t,n){let r=0;return i=>{var s,o;if(r<1)return void this.cancelableCallbacks.call((n=>{const i=setTimeout((()=>{r++,e.readAsArrayBuffer(t),n()}),1e3);return()=>clearTimeout(i)}));const a=null==(s=i.target.error)?void 0:s.name,l=null==(o=i.target.error)?void 0:o.message,c=Xr.FILE_ERROR_UPLOADING;this.stop();const u={errorCode:c,index:n.index,crc32:0,size:n.end-n.start,message:l||Wr.FILE_ERROR_UPLOADING,extra:{message:l?`${a}: ${l}`:Wr.FILE_ERROR_UPLOADING,errorCode:c}};this.fail(u)}}calculateCrc32AndUpload(e,t){t.loaded=0,this.uploading.push(e),this.read(t,e)}threadUpload(){var e;if(!this.uploading||this.uploading.length>=this.uploadSliceCount)return;const{lastIndex:t,sliceInfor:n}=this._nextSliceInfor();if(!n)return this.imagexEncrypt&&!this.imagexEncryptMetaGenerated?void this._uploadImagexEncryptMeta():void 0;if(!n.finished&&n.crc32&&null!=(e=this.currentCtx)&&e.streamMode&&"number"==typeof t)n.index=t,this.reuploadPartSlice(n,t);else if(n.finished){if(this.checkFinishAndStop(n))return}else n.index=t,this.calculateCrc32AndUpload(t,n);this.lastIndex++,this.threadUpload()}checkFinishAndStop(e){return!(-1!==this.finishArr.indexOf(e.start)||(this.finishArr.push(e.start),!this._isAllSliceFinish())||(this.stop(),this.success(),0))}reuploadPartSlice(e,t){this.getPartStatus({sliceInfor:e,index:t,onGetPartOffset:n=>{this.uploading.push(t),this._sliceAndUpload(e,t,n)},onGetPartFinished:()=>{e.finished=!0,this.checkFinishAndStop(e)},onGetPartFailed:()=>{this.calculateCrc32AndUpload(t,e)}})}_uploadImagexEncryptMeta(){const e=Bi.generateEncryptMeta(!0,0,this.imagexEncryptIv,this.dynamicCrc32Array.slice(1));this.imagexEncryptMetaGenerated=!0,this.dynamicCrc32Array[0]=e,this.upload(e,e.buffer,0)}stop(){Object.keys(this.uploadHandlers).forEach((e=>{this.uploadHandlers[e].abort(),this.uploadHandlers[e].destroy()})),this.uploadHandlers={},this.worker&&this.worker.terminate(),this.worker=null,this.clearMonitor(),this.cancelableCallbacks.cancel()}setProgressMonitor(){this.progressMonitorInterval=setInterval((()=>{const{finishSize:e}=this;if(e-this.lastIntervalSize<this.progressMonitorTime*this.progressMonitorSpeed*1024){const e=Object.assign(this.currentCtx,{stage:"process",type:"warn",extra:{message:`percent are not updated in ${this.progressMonitorTime} seconds`}});this.context.logger.send(e),this.context._broadcast("slowProgress",e),this.clearMonitor()}else this.lastIntervalSize=e}),1e3*this.progressMonitorTime)}clearMonitor(){this.progressMonitorInterval&&clearInterval(this.progressMonitorInterval)}_retryAsPartMode({uploader:e,sliceInfor:t,infor:n,index:r}){this.cancelableCallbacks.call((i=>{const s=setTimeout((()=>{e.upload(),1===this.currentCtx.status&&this.reportRetry(n,t,r),i()}),this.RETRY_UPLOAD_DELAY);return()=>clearTimeout(s)}))}_sliceAndUpload(e,t,n){if(this.file instanceof Array)return;const r=Bi.fileSlice(this.file,e.start+n,e.end);this._uploadSliceItem(e,r,t,n)}retryAsStreamMode({infor:e,sliceInfor:t,index:n}){this.getPartStatus({sliceInfor:t,index:n,onGetPartOffset:e=>{this._sliceAndUpload(t,n,e)},onGetPartFinished:()=>{const r={...e,index:n,start:t.start,end:t.end,speed:this.getUploadSpeed()||0,crc32StartTime:t.crc32StartTime,crc32EndTime:t.crc32EndTime,crc32Duration:t.crc32Duration};this.fileSliceSuccess(r)},onGetPartFailed:()=>{this._sliceAndUpload(t,n,0)}})}getPartStatus({sliceInfor:e,index:t,onGetPartOffset:n,onGetPartFinished:r,onGetPartFailed:i}){const s=async s=>{try{const i=e.end-e.start,o=await this.fetchUploadStatus(t,i,s);if(o.completed)o.completed&&r();else{const e=o.offset;n(e)}}catch(o){"abort"!==o&&i()}};this.cancelableCallbacks.call((e=>{const t=new Xi;return s(t).then((()=>e())),()=>{t.abort()}}))}retryUploadSlice({uploader:e,sliceInfor:t,infor:n,index:r}){var i;!this.retryCount[r]&&(this.retryCount[r]=0),this.retryCount[r]++,delete n.errorCode,null!=(i=this.currentCtx)&&i.streamMode?this.retryAsStreamMode({infor:n,sliceInfor:t,index:r}):this._retryAsPartMode({uploader:e,sliceInfor:t,infor:n,index:r})}_endUploadAndFailed(e,t,n){t.start=e.start,t.crc32StartTime=e.crc32StartTime,t.crc32EndTime=e.crc32EndTime,t.crc32Duration=e.crc32Duration,t.index=n,this.fail(t)}onUploaderComplete(e,t,n){1===this.currentCtx.status&&(e.start=t.start,e.crc32StartTime=t.crc32StartTime,e.crc32EndTime=t.crc32EndTime,e.crc32Duration=t.crc32Duration,e.index=n,this.fileSliceSuccess(e))}onUploaderError(e,t,n,r){1===this.currentCtx.status&&(this._setSpeed(0),(()=>{const t=e.errorCode||0;return!this.currentCtx.retryUseful03Time&&!this.config.retryUseful03Time||!e.xhr||e.xhr.status&&![Vr.READ_IO_ERROR,Vr.ENCRYPTION_ERROR,Vr.PART_NUMBER_NOT_FOUND,Vr.UPLOAD_PART_OUT_OF_RANGE,Vr.BAD_REQUEST].includes(t)?(!this.retryCount[n]||this.retryCount[n]<this.retryUploadTime)&&!(e.xhr&&401===e.xhr.status):!this.retryCount[n]||this.currentCtx.retryUseful03Time&&this.retryCount[n]<this.currentCtx.retryUseful03Time||this.config.retryUseful03Time&&this.retryCount[n]<this.config.retryUseful03Time})()?this.retryUploadSlice({uploader:r,sliceInfor:t,infor:e,index:n}):this._endUploadAndFailed(t,e,n))}async fetchUploadStatus(e,t,n){const r={config:this.config,currentCtx:this.currentCtx,partNumber:e+1,partSize:t,maxRetryCount:this.streamModeConfig.maxFetchStatusRetryTime,controller:n};return await new Ws(r).fetch()}onUploaderProgress(e,t,n){1===this.currentCtx.status&&(t.loaded=e.loaded+n,this.process())}onUploaderRetry(e,t,n){this.reportRetry(e,t,n)}_getUploadHeader(){return this.currentCtx.UploadHeader||{}}upload(e,t,n){!this.config.clientEncrypt&&!this.imagexEncrypt&&(t=Bi.fileSlice(this.file,e.start,e.end)),this._uploadSliceItem(e,t,n,0)}_uploadSliceItem(e,t,n,r){const{crc32:i}=e,{userId:s}=this.config,o="POST",a=this.currentCtx.uploadTimeout||this.config.uploadTimeout,l=e.end-e.start,c={sliceItem:t,crc32:i,url:`${this.generateUrl(n+1,e.start,l,r)}`,signature:this.currentCtx.signature,uploadHeader:this._getUploadHeader(),userId:s,method:o,timeout:a,config:this.config},u=new Xs(c);u.on("complete",(t=>this.onUploaderComplete(t,e,n))),u.on("error",(t=>this.onUploaderError(t,e,n,u))),u.on("progress",(t=>this.onUploaderProgress(t,e,r))),u.on("retry",(t=>this.onUploaderRetry(t,e,n))),u.upload(),this.uploadHandlers[n]=u}success(e){this.finishArr=[];const t=Date.now()-this._st,n=this._uploadSize/t,r=Object.assign(this.currentCtx,{type:"success",stage:"process",percent:99,extra:{message:"upload all slice success."},speed:n,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._lastStartTime+this.currentCtx.totalDuration,isAllFinish:!0});this.worker&&this.worker.terminate(),this.successProcess(r)}fail(e){var t;const n=this.errorFormat(e);n.type="error",void 0!==e.statusCode&&Object.assign(this.currentCtx,{statusCode:e.statusCode}),this.errorLength||(this.context.logger.send(Object.assign({},n,{stage:e.stage||"process"})),this.stop(),this.context._broadcast("error",n),this.context.logger.send(Object.assign({},n,{type:"finish"})),null!=(t=this.currentCtx)&&t.isBreak?this.context._cancel(this.key):this.context._pause(this.key),this.errorLength++)}reportRetry(e,t,n){e.start=t.start,e.crc32StartTime=t.crc32StartTime,e.crc32EndTime=t.crc32EndTime,e.crc32Duration=t.crc32Duration,e.index=n;const r=this.errorFormat(e);this.context.logger.send(Object.assign({},r,{type:"retry"}))}_removeUploadingSlice(e){this.uploading.splice(this.uploading.indexOf(e),1),this.uploadHandlers[e]&&delete this.uploadHandlers[e]}fileSliceSuccess(e){const t=e.index;delete this.retryCount[t];const n=Date.now();-1===this.finishArr.indexOf(e.start)&&this.finishArr.push(e.start),this._markSpliceFinish(e);const r={message:"slice upload success"};if(e.xhr){const t=e.xhr;r.currentUrl=t.currentUrl||"",Object.assign(this.currentCtx,{req:{url:t.currentUrl,param:t.params},res:{status:t.status,body:t.responseText,header:t.getAllResponseHeaders()}}),delete e.xhr}if(this.context.logger.send(Object.assign(this.currentCtx,{stage:"process",type:"success",sliceIndex:t,extra:r,totalDuration:n-this._lastStartTime+this.currentCtx.totalDuration,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration}),{af:!1,si:t+1,ss:e.size,sldur:e.sliceDuration+(e.crc32Duration||0),csldur:e.crc32Duration||0,tsldur:e.sliceDuration,ex:`Slice:${e.crc32},success.si:${t+1},t:${this.dynamicCrc32Array.length}.`}),this._lastStartTime=n,this._removeUploadingSlice(t),this._isAllSliceFinish())return this.stop(),void this.success(e.xhr);this.threadUpload()}process(){let e=this.currentCtx.realtimeSpeed||0;const t=this.currentCtx.fileSize;if(this.finishSize=this._getFinishSize(),this.finishSize>this.lastFinishSize){const t=new Date;if(t.getTime()-this.lastCalculateSpeedTime>1e3*this.realtimeSpeedInterval){const n=t.getTime()-this.lastCalculateSpeedTime,r=this.finishSize-this.lastCalculateSpeedSize;e=Math.floor(r/n),this.lastCalculateSpeedTime=t.getTime(),this.lastCalculateSpeedSize=this.finishSize}this.lastFinishSize=this.finishSize}let n=Math.floor(this.finishSize/t*100*100)/100||0;n=Math.min(n,99);const r=Object.assign(this.currentCtx,{stage:"process",percent:n,realtimeSpeed:e});n>this.lastProcessPercent&&100!==n&&(this.lastProcessPercent=n,this.context._broadcast("progress",r))}errorFormat(e){const t=this.currentCtx.totalDuration,n=Date.now()-this._st,r=e.index,i=e.crc32?{message:e.message,data:e.crc32,size:e.size}:e.extra;i.errorCode=(null==e?void 0:e.errorCode)||i.errorCode||Xr.PROGRESS_NETWORK_ERROR;const s=Object.assign(this.currentCtx,{extra:i,sliceIndex:r,stage:"process",req:{},res:{},totalDuration:n+t,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration,crc32StartTime:e.crc32StartTime,crc32EndTime:e.crc32EndTime,crc32Duration:e.crc32Duration});if(e.xhr){const t=e.xhr;s.req={url:e.xhr.currentUrl},s.res={status:t.status,body:t.responseText,header:t.getAllResponseHeaders()},delete e.xhr}return s}}class $s extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.transport=new Vi,this.eventInit(),this.errorCount=0,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key]}start(e,t,n){this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.mergeFile()}get uploadmode(){return this.currFileCtx.streamMode?"stream":"part"}get fileSizeQuery(){let e="";return"number"==typeof this.currFileCtx.fileSize&&(e=`&size=${this.currFileCtx.fileSize}`),e}mergeFile(){var e;const t={oid:this.currFileCtx.oid,uploadId:this.currFileCtx.UploadID,tosDomain:this.currFileCtx.tosDomain,uploadmode:this.uploadmode},{dynamicCrc32Array:n}=this.currFileCtx;let r="";for(let a=0;a<n.length;a++)r=r?`${r},${a+1}:${n[a].crc32}`:`${a+1}:${n[a].crc32}`;const i=Hi(u.uploadMergeUrl,t),{userId:s}=this.config,o={Authorization:this.currFileCtx.signature,"X-Storage-U":encodeURIComponent(s),...this.currFileCtx.UploadHeader};this.config.clientEncrypt&&(o["x-upload-encryption-mode"]=2,o["x-upload-encryption-key"]=btoa(this.currFileCtx.clientEncryptKey)),this.currFileCtx.mergeRequest&&(o["X-Upload-With-PostUpload"]=1,o["Content-Type"]="application/json",r={parts_crc:r,post_upload_param:{sts2_token:this.currFileCtx.proxyStsToken.SessionToken,sts2_secret:this.currFileCtx.proxyStsToken.SecretAccessKey,session_key:this.currFileCtx.SessionKey}},Array.isArray(null==(e=this.config.videoConfig)?void 0:e.processAction)&&(r.post_upload_param.functions=$i(this.config.videoConfig.processAction))),this.currFileCtx.contentType&&(o["Specified-Content-Type"]=this.currFileCtx.contentType),this.transport.send({method:"post",url:i+this.fileSizeQuery,headers:o,timeout:this.currFileCtx.fileMergeTimeout||this.config.fileMergeTimeout,custom:r})}eventInit(){const{stage:e}=this.options;this.transport.on("complete",(t=>{var n,r,i,s,o,a;let l=null;try{const c=JSON.parse(t.response);if(this.currFileCtx.mergeRequest){if(2e3!==c.code||null==(r=null==(n=c.data)?void 0:n.post_upload_resp)||!r.results)return this.fail({error:`fail! response.code: ${c.code}, fail message: ${c.message}`,errorCode:null==c?void 0:c.code,message:null==c?void 0:c.message,xhr:t});{const{results:n}=c.data.post_upload_resp,r={Vid:null==(i=n[0])?void 0:i.vid,VideoMeta:null==(s=n[0])?void 0:s.video_meta,PosterUri:null==(o=n[0])?void 0:o.poster_uri};l=Object.assign(this.currFileCtx,{uploadResult:r,stage:e,type:"success",hasMerge:!0,extra:{message:"merge file success, With-PostUpload."},xhr:t,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}}else{if(2e3!==c.code||null==(a=c.data)||!a.key)return this.fail({error:`fail! response.code: ${c.code}, fail message: ${c.message}`,errorCode:null==c?void 0:c.code,message:null==c?void 0:c.message,xhr:t});l=Object.assign(this.currFileCtx,{stage:e,type:"success",hasMerge:!0,extra:{message:"merge file success"},xhr:t,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration})}}catch(c){return this.fail({error:`response parse error: ${c.message||JSON.stringify(c)}`,xhr:t})}return this.successProcess(l)})),this.transport.on("error",(e=>{this.fail({error:`request fail: ${e.statusText||e.errText}`,xhr:e})}))}getProcessIndex(e){let t=0;return e.forEach(((e,n)=>{"process"===e.stage&&(t=n)})),t}fail(e){const t=Object.assign(this.currFileCtx,{extra:{message:`merge file error, ${e.error}`,errorCode:(null==e?void 0:e.errorCode)||Xr.MERGE_NETWORK_ERROR},type:"error",stage:this.options.stage,xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration});this.failProcess(t)}}class Ys extends i.EventEmitter{constructor(e,t={}){super(),this.netErrRetryTime=8,this.errorTimes={},this.cancelableCallbacks=new Ki,this.options=e,this.file=e.file,this.context=e.context,this.key=e.key,this.isImageBatchUpload=e.isImageBatchUpload,this.config=t,this.finishSize=0,this.retryUploadTime=this.config.retryUploadTime||0,this.lastFinishSize=-1,this.lastProcessPercent=-1,this.uploader={},this._uploadProcessMap={}}start(e,t,n){this.failProcess=n,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.crc32Array=this.context.tasks[this.key].crc32Array,this._uploadSize=this.isImageBatchUpload?this.currentCtx.fileSize.reduce(((e,t)=>e+t)):this.file.size,this._st=Date.now(),this.upload(),this.netErrRetryTime=this.currentCtx.retryUseful03Time||this.config.retryUseful03Time||this.netErrRetryTime}stop(){this.uploader&&Object.keys(this.uploader).forEach((e=>{this.uploader[e]&&(this.uploader[e].abort(),this.uploader[e].destroy())})),this.cancelableCallbacks.cancel()}_shouldRetry(e,t){const n=!t.xhr||!t.xhr.status,r=this.errorTimes[e],i=t.errorCode||0;return n||[Vr.READ_IO_ERROR,Vr.ENCRYPTION_ERROR,Vr.PART_NUMBER_NOT_FOUND,Vr.UPLOAD_PART_OUT_OF_RANGE].includes(i)?r<=this.netErrRetryTime:r<=this.retryUploadTime}upload(){const e=this.crc32Array.length;let t=0,n=0;for(let r=0;r<e;r++){const i=this.crc32Array[r],s=i.buffer,{crc32:o}=i,a=this.currentCtx.signature,l="[object Array]"===Object.prototype.toString.call(a)?a[r]:a,c=this.currentCtx.oid,d="[object Array]"===Object.prototype.toString.call(c)?c[r]:c,h={oid:d,tosDomain:this.currentCtx.tosDomain},p=Hi(u.directUploadFileUrl,h),{userId:f}=this.config,g="POST",m=this.currentCtx.uploadTimeout||this.config.uploadTimeout;let y,b;if(this.isImageBatchUpload?(y=this.currentCtx.fileSize[r],b=this.currentCtx.fileName[r]):(y=this.file.size,b=this.file.name),this._uploadProcessMap[o]&&this._uploadProcessMap[o].success){t+=1;continue}this._uploadProcessMap[o]={crc32:o,fileSize:y,fileName:b,oid:d,finishSize:0,success:!1};const v={sliceItem:s,crc32:o,url:p,signature:l,uploadHeader:this.currentCtx.UploadHeader||{},userId:f,method:g,timeout:m,config:this.config};this.currentCtx.contentType&&(v.uploadHeader["Specified-Content-Type"]=this.currentCtx.contentType),this.currentCtx.mergeRequest&&(v.mergeRequest=!0,v.extraParams=this.currentCtx,v.config=this.config);const _=new Xs(v);_.on("complete",(i=>{t++,this._uploadProcessMap[i.crc32].finishSize=i.size,this._uploadProcessMap[i.crc32].success=!0,this.context.logger.send(this.currentCtx,{af:!1,si:r+1,ss:i.size,sldur:i.sliceDuration,csldur:0,tsldur:i.sliceDuration,ex:`Direct:${i.crc32}:success.si:${r+1},t:${e}.`}),n+t===e&&this.success(i.xhr,i.result)})),_.on("error",(i=>{this.errorTimes[r]=this.errorTimes[r]+1||1,this._shouldRetry(r,i)?this.cancelableCallbacks.call((e=>{const t=setTimeout((()=>{_.upload(),this.reportRetry(i),e()}),1e3);return()=>clearTimeout(t)})):(n++,n+t===e&&this.fail(i))})),_.on("progress",(e=>{this.process(e)})),_.upload(),this.uploader[o]=_}}reportRetry(e){const t=this.errorFormat(e);this.context.logger.send(Object.assign({},t,{type:"retry"}))}errorFormat(e){const t=this.currentCtx.totalDuration,n=Date.now()-this._st,r=e.crc32?{message:e.message,data:e.crc32,size:e.size}:e.extra;r.errorCode=(null==e?void 0:e.errorCode)||r.errorCode||Xr.PROGRESS_NETWORK_ERROR;const i=Object.assign(this.currentCtx,{extra:r,stage:"process",req:{},res:{},totalDuration:n+t,sliceStartTime:e.sliceStartTime,sliceEndTime:e.sliceEndTime,sliceDuration:e.sliceDuration});if(e.xhr){const t=e.xhr;i.req={url:e.xhr.currentUrl},i.res={status:t.status,body:t.responseText,header:t.getAllResponseHeaders()},delete e.xhr}return i}success(e,t){var n,r,i,s,o,a,l,c,u;const d=Date.now()-this._st,h={type:"success",stage:"process",percent:99,extra:{message:"direct upload success"},speed:this._uploadSize/d,xhr:e,isAllFinish:!0,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration};if(this.currentCtx.mergeRequest){const e={Vid:null==(i=null==(r=null==(n=t.data)?void 0:n.post_upload_resp)?void 0:r.results[0])?void 0:i.vid,VideoMeta:null==(a=null==(o=null==(s=t.data)?void 0:s.post_upload_resp)?void 0:o.results[0])?void 0:a.video_meta,PosterUri:null==(u=null==(c=null==(l=t.data)?void 0:l.post_upload_resp)?void 0:c.results[0])?void 0:u.poster_uri};h.uploadResult=e}const p=Object.assign(this.currentCtx,h);this.isImageBatchUpload&&(p.successImage=[],p.failImage=[],Object.values(this._uploadProcessMap).forEach((e=>{e.success?p.successImage.push(e):p.failImage.push(e)}))),this.uploader=null,this._uploadProcessMap=null,this.successProcess(p)}fail(e){var t;const n=Object.assign(this.currentCtx,{extra:{message:`direct upload error: ${e.message||(null==(t=e.xhr)?void 0:t.errText)}`,errorCode:e.errorCode||Xr.PROGRESS_NETWORK_ERROR},type:"error",stage:"process",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration});this.isImageBatchUpload&&(n.failImage=Object.values(this._uploadProcessMap)),this.uploader=null,this._uploadProcessMap=null,this.failProcess(n)}process(e){const t=this._uploadSize;this._uploadProcessMap[e.crc32].finishSize=Math.max(this._uploadProcessMap[e.crc32].finishSize,e.loaded),this.finishSize=Object.values(this._uploadProcessMap).reduce(((e,t)=>e+t.finishSize),0),this.finishSize>this.lastFinishSize&&(this.lastFinishSize=this.finishSize);const n=Math.min(Math.floor(this.finishSize/t*100*100)/100||0,99),r=Object.assign(this.currentCtx,{stage:"process",percent:n});n>this.lastProcessPercent&&100!==n&&(this.lastProcessPercent=n,this.context._broadcast("progress",r))}}class Js extends i.EventEmitter{constructor(e,t={}){super(),this.options=e,this.file=e.file,this.context=e.context,this.key=e.key,this.config=t,this.errorLength=0,this.retryUploadTime=Number(t.retryUploadTime)||2,this.maxUploadSliceCount=Number(t.uploadSliceCount)||5,this.uploadQueue=[],this.sliceInfoArray=[],this.uploadSliceCount=0,this.isCalcCrc32=!1,this.isFileReading=!1,this.hasStarted=!1,this.hasCompleteAddingSlice=!1}async start(e,t,n){this.failProcess=n,this.successProcess=t,this.currentCtx=this.context.tasks[this.key],this.hasStarted=!0,this._st=Date.now(),await this.initWorker()}async initWorker(){this.worker||(this.worker=await Bi.createCrc32Worker(this.config),this.worker.onmessage=e=>{this.isCalcCrc32=!1;const[t,n,r]=e.data;this.uploadQueue.forEach(((e,i)=>{e.index===r&&(this.uploadQueue[i].crc32=n,this.uploadQueue[i].fileSliceBuffer=t,this.sliceInfoArray[r].crc32=n)})),this.startUploadQueue()},this.startUploadQueue())}addStreamSlice({fileSlice:e,index:t}){this.isFileReading=!0;const n=new FileReader;n.readAsArrayBuffer(e),n.onload=e=>{this.isFileReading=!1;const n=e.target.result;this.uploadQueue.push({fileSliceBuffer:n,index:t}),this.sliceInfoArray[t]={finished:!1},this.hasStarted&&this.startUploadQueue()}}completeStreamUpload(){this.hasCompleteAddingSlice=!0,0===this.uploadQueue.length&&!this.isFileReading&&this.success()}startUploadQueue(){if(this.uploadSliceCount<=this.maxUploadSliceCount&&this.uploadQueue.length>0&&this.uploadQueue[0].crc32){const e=this.uploadQueue.shift();this.uploadSliceCount++,this.upload({sliceItem:e.fileSliceBuffer,index:e.index,crc32:e.crc32})}else this.uploadQueue.length>0&&!this.uploadQueue[0].crc32&&this.startCrc32Queue()}startCrc32Queue(){if(!this.isCalcCrc32)for(let e=0;e<this.uploadQueue.length;e++){const t=this.uploadQueue[e];if(!t.crc32){this.isCalcCrc32=!0,this.worker.postMessage([t.fileSliceBuffer,t.index],[t.fileSliceBuffer]);break}}}upload({sliceItem:e,index:t,crc32:n}){const{signature:r}=this.currentCtx,i={part_number:t+1,uploadId:this.currentCtx.UploadID,oid:this.currentCtx.oid,tosDomain:this.currentCtx.tosDomain},s=Hi(u.uploadChunkedUrl,i),{userId:o}=this.config,a={sliceItem:e,crc32:n,url:s,signature:r,uploadHeader:this.currentCtx.UploadHeader,userId:o,retryTime:this.retryUploadTime,method:"POST",timeout:this.currentCtx.uploadTimeout||this.config.uploadTimeout,config:this.config},l=new Xs(a);l.on("complete",(e=>{1===this.currentCtx.status&&(e.index=t,this.fileSliceSuccess(e))})),l.on("error",(e=>{1===this.currentCtx.status&&(e.index=t,this.fail(e))})),l.upload()}isAllSliceUploaded(){return this.hasCompleteAddingSlice&&0===this.uploadQueue.length&&!this.sliceInfoArray.some((e=>!e.finished))}fileSliceSuccess(e){const t=e.index,n=Date.now(),r={message:"stream slice upload success"};if(e.xhr){const t=e.xhr;r.currentUrl=t.currentUrl||"",Object.assign(this.currentCtx,{req:{url:t.currentUrl,param:t.params},res:{status:t.status,body:t.responseText,header:t.getAllResponseHeaders()}}),delete e.xhr}this.context.logger.send(Object.assign(this.currentCtx,{stage:"process",type:"success",sliceIndex:t,extra:r,totalDuration:n-this._lastSaveTime+this.currentCtx.totalDuration}));const i=Object.assign(this.currentCtx,{uploadQueueLength:this.uploadQueue.length,sliceIndex:t});this.sliceInfoArray[t].finished=!0,this.context._broadcast("stream-progress",i),this.uploadSliceCount--,this.isAllSliceUploaded()?this.success(e.xhr):this.startUploadQueue()}success(e){if(this.isAllSuccess)return;const t=()=>{const e=[];for(let t=0;t<this.sliceInfoArray.length;t++){const n=this.sliceInfoArray[t];n&&e.push({crc32:n.crc32,index:t})}return e},n=Object.assign(this.currentCtx,{type:"success",stage:"process",percent:100,extra:{message:"all slice upload success"},dynamicCrc32Array:t(),xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration});this.successProcess(n),this.isAllSuccess=!0}fail(e){const t=e.index,n=Object.assign(this.currentCtx,{extra:{message:"stream slice upload error"},type:"error",stage:"process",xhr:e.xhr,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currentCtx.totalDuration,sliceIndex:t});this.context.logger.send(Object.assign({},n)),this.context._broadcast("error",n),this.context.logger.send(Object.assign({},n,{type:"finish"}))}}class Qs extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.currFileCtx=e.context.tasks[e.key],this.isImageBatchUpload=!!this.options.isImageBatchUpload,this.skipCommit=e.skipCommit,this.transport=new Vi,this.eventInit(),this.innerRetryCount=0,this.MAX_INNER_RETRY_TIME=3}_innerRetry(){return this.innerRetryCount++,this.innerRetryCount<=this.MAX_INNER_RETRY_TIME&&(this.commitUpload(),!0)}commitUpload(){const{key:e}=this.options,t=this.options.context.tasks[e],{region:n}=this.config;let r,i,s="",o={};const{useBackupDomain:a}=this.uploaderCtx;this.uploaderCtx.priorInfo.topExpires>0&&(o["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires);const l=Ms.checkServiceName(this.options.type,this.config,this.options.serviceType);if(l===Er.IMAGEX){if(s=a?this.config.imageFallbackHost:this.config.imageHost,o={Action:"CommitImageUpload",Version:"2018-08-01"},r={SessionKey:t.SessionKey},this.options.type===wr.IMAGE){this.config.imageConfig&&(this.currFileCtx.serviceId||this.config.imageConfig.serviceId)?o.ServiceId=this.currFileCtx.serviceId||this.config.imageConfig.serviceId:o.SpaceName=this.config.videoConfig&&this.config.videoConfig.spaceName;const e=this.config.imageConfig&&this.config.imageConfig.processAction;Array.isArray(e)&&e.length>0&&(r.Functions=e),this.config.skipMeta&&(o.SkipMeta=!0)}const{imagexEnableEncrypt:e,imagexPublicKey:n}=this.currFileCtx;e&&n&&!this.options.skipMeta&&this.uploaderCtx.plugins.forEach((e=>{if("imagex-encrypt-plugin"===(null==e?void 0:e._identifier))try{r.DecryptKeys=e.apply(this.currFileCtx)}catch(t){console.warn(t)}})),this.options.type===wr.OBJECT&&(o.ServiceId=this.currFileCtx.serviceId||this.config.objectConfig&&this.config.objectConfig.serviceId||this.config.imageConfig&&this.config.imageConfig.serviceId),i=JSON.stringify(r)}if(l===Er.VOD){let e=this.config.videoConfig&&this.config.videoConfig.spaceName;this.options.type===wr.OBJECT&&this.config.objectConfig&&this.config.objectConfig.spaceName&&(e=this.config.objectConfig.spaceName),s=a?this.config.videoFallbackHost:this.config.videoHost,o={Action:"CommitUploadInner",Version:"2020-11-19",SpaceName:e},r={SessionKey:t.SessionKey,Functions:[]};let n=this.config.videoConfig&&this.config.videoConfig.processAction;this.options.type===wr.OBJECT&&this.config.objectConfig&&this.config.objectConfig.processAction&&(n=this.config.objectConfig.processAction),Array.isArray(n)&&n.length>0&&(r.Functions=n),(this.config.videoConfig&&this.config.videoConfig.callbackArgs||this.options.callbackArgs)&&(r.CallbackArgs=this.options.callbackArgs||this.config.videoConfig.callbackArgs),this.options.type===wr.VIDEO&&this.config.skipDownload&&(o.SkipDownload=!0),this.options.type===wr.OBJECT&&this.options.objectSync&&(r.ObjectSync=this.options.objectSync),this.options.type===wr.VIDEO&&this.options.needExactFormat&&(r.needExactFormat=this.options.needExactFormat),this.options.vstyle&&(r.VStyle=this.options.vstyle),i=JSON.stringify(r)}this.config.accountId&&(o["X-Account-Id"]=this.config.accountId),this.config.openExperiment&&(o.app_id=this.config.appId,o.user_id=this.config.userId),this.config.extraQuery&&Object.assign(o,{...this.config.extraQuery});const c=Bi.toQueryString(o),u=this.currFileCtx.proxyStsToken||this.config.stsToken,d={method:"POST",url:`${s}?${c}`,timeout:this.currFileCtx.gatewayTimeout||this.config.gatewayTimeout||3e4,region:n,params:o,headers:{},pathname:Bi.getPathByURL(s)};d.custom=i,d.body=r,l===Er.IMAGEX&&(d.headers["Content-Type"]="application/json"),Bi.signRequest(d,{serviceName:l,stsToken:u,uploaderCtx:this.uploaderCtx,config:this.config}),this.transport.send(d)}start(e,t,n){if(this.successProcess=t,this.failProcess=n,this._st=Date.now(),this.currFileCtx.mergeRequest)return this.successProcess(Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful,merge request."},stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit}));if(this.skipCommit)return this.successProcess(Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful, skip commit"},stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit}));try{this.commitUpload()}catch(r){this.fail({error:`catch error: ${r.toString()}`})}}eventInit(){this.transport.on("complete",(e=>{let t=null;try{const n=JSON.parse(e.response);if(n.ResponseMetadata.Error)return this.fail({xhr:e,errorCode:n.ResponseMetadata.Error.CodeN,error:n.ResponseMetadata.Error.Code,message:n.ResponseMetadata.Error.Message});{const r=Ms.checkServiceName(this.options.type,this.config,this.options.serviceType),{Result:i}=n;let s={};if(r===Er.IMAGEX)if(this.isImageBatchUpload){const{Results:e}=i,t=i.PluginResult||[];e.forEach(((n,r)=>{e[r]={...e[r],...t[r]}})),s=e}else s=i.Results[0],Object.assign(s,i.PluginResult&&i.PluginResult[0]);else s=i.Results[0];t=Object.assign(this.currFileCtx,{stage:"complete",type:"success",percent:100,extra:{message:"upload successful"},uploadResult:s,xhr:e,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit})}}catch(n){return this.fail({error:`catch error: ${n.message||n.toString()}`,xhr:e})}return this.successProcess(t)})),this.transport.on("error",(e=>{const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const n=JSON.parse(e.response);n.ResponseMetadata&&n.ResponseMetadata.Error&&(t.errorCode=n.ResponseMetadata.Error.CodeN,t.error=n.ResponseMetadata.Error.Code,t.message=n.ResponseMetadata.Error.Message),n.ResponseMetadata&&n.ResponseMetadata.RequestId&&(t.requestId=n.ResponseMetadata.RequestId)}this.fail(t)}))}fail(e){const{context:t}=this.options,{key:n}=this.options,{xhr:r}=e,i=e.errorCode||Xr.COMMIT_NETWORK_ERROR;let s="commit upload error: UNKNOWN";const{requestId:o}=e;if(Bi.mayLocalTimeError({errorCode:i,requestId:o})&&(Bi.calibrationTimeConfig(this.uploaderCtx.priorInfo,o),this._innerRetry()))return;r&&(s=0===r.status?"commit upload error: NETERROR":e.message||`commit upload error: ${r.status}`);const a=Object.assign(t.tasks[n],{extra:{message:s,error:e.error,errorCode:i},type:"error",stage:"complete",xhr:r,stageStartTime:this._st,stageEndTime:Date.now(),duration:Date.now()-this._st,totalDuration:Date.now()-this._st+this.currFileCtx.totalDuration,skipCommit:this.skipCommit});this.failProcess(a)}}class qs extends i.EventEmitter{constructor(e,t={},n,r){super(),this.tasks=e,this.config=t,this.key=r,this.uploaderCtx=n,this.current=0,this.length=this.tasks.length,this.taskError={},this.uploadList=[],this.retryTaskTime=t.retryTaskTime||2}getRetryMaxCount(e,t){return[Xr.APPLY_NETWORK_ERROR,Xr.INIT_UPLOAD_ID_NETWORK_ERROR,Xr.PROGRESS_NETWORK_ERROR,Xr.MERGE_NETWORK_ERROR,Xr.COMMIT_NETWORK_ERROR,Vr.BAD_REQUEST,Vr.PART_MERGED,Vr.ACQUIRE_LOCK_TIMEOUT].includes(e)&&(t.retryUsefulReqTime||this.config.retryUsefulReqTime)||this.retryTaskTime}start(e){const t=this.tasks.shift();t&&(this.current=t.index,this.execTask(t,e))}execTask(e,t){const{key:n}=e,{uploaderCtx:r}=this,i=r.tasks[n];if(!i)return;const{cacheTask:s}=i,{length:o}=r.taskList[n];s&&e.index>0&&e.index<s?this.start():(i.currentTask=e.index,1===i.status&&((1===e.index||"initUploadID"===e.stage)&&(e.arg=Object.assign(e.arg,t)),i.stage=e.stage,e&&e.func.call(e.context,e.arg,(s=>{if(!r.taskList[n])return;const a=()=>r.taskList[n].some((e=>2===e.index));1===e.index&&!a()&&Wi(i)&&r._insert1002Task(n);const l=r.taskList[n].findIndex((t=>t.index===e.index))+1,c=r.taskList[n][l];c&&0!==e.index?r._saveTask(n,{currentTask:c.index,stage:c.stage}):l===o&&r._removeTaskCache(n),this.success(s),this.tasks.length>0?this.start(t):r._queueSuccess(n)}),(r=>{var s;if(r.xhr&&r.xhr.status>=400)return void this.fail(r);if(3===e.index&&r.isDirect)return void this.fail(r);const o=null==(s=r.extra)?void 0:s.errorCode,a=this.getRetryMaxCount(o,i);if(!this.taskError[n]||this.taskError[n]<a){this.taskError[n]?this.taskError[n]++:this.taskError[n]=1;const i=this.errorFormat(r,!0);this.uploaderCtx.logger.send(i),setTimeout((()=>{"initUploadID"===e.stage?this.execTask(e,{...t,changeNodeRetry:!0}):this.execTask(e,t)}),(()=>{if(5===e.index){const e=this.taskError[n];return Math.min(e*e*1e3,1e4)}return 1e3})())}else r.key=n,this.fail(r)}))))}addTask(e,t=!1){t?this.tasks.unshift(e):this.tasks.push(e)}success(e){const t={type:"success"};if(e.xhr){const t=e.xhr;e.req={url:t.currentUrl,param:t.params},e.res={status:t.status,header:t.getAllResponseHeaders(),body:t.responseText},delete e.xhr}Object.assign(e,t);try{this.uploaderCtx._broadcast(e.stage,e)}catch(n){console.warn(n)}this.uploaderCtx.logger.send(e)}fail(e){var t;const{uploaderCtx:n}=this,{key:r}=e,i=this.errorFormat(e);try{n._broadcast("error",i),n.logger.send(Object.assign({},i,{type:"finish"}))}catch(s){console.warn(s)}null!=(t=n.tasks[r])&&t.isBreak?n._cancel(r):n._pause(r),n.logger.send(i)}cancel(e){var t;const{key:n}=this,r=this.uploaderCtx.tasks[n].currentTask;let i;if(this.uploaderCtx.taskList[n].forEach((e=>{r===e.index&&(i=e)})),!e)return this.tasks=[],i&&3===i.index&&i.context.stop(),void this.uploaderCtx._removeTaskCache(n);3===r&&(this.uploaderCtx.tasks[n].isDirect||this.uploaderCtx.tasks[n].streamMode)&&i&&(null==(t=null==i?void 0:i.context)||t.stop())}restart(){this.uploadList.forEach((e=>{e.cancel=!1})),this.start()}errorFormat(e,t){const n={type:t?"retry":"error"};if(e.xhr){const t=e.xhr;e.req={url:t.currentUrl,param:t.params},e.res={status:t.status,header:t.getAllResponseHeaders(),body:t.responseText},e.extra&&(e.extra.req=e.req,e.extra.res=e.res),delete e.xhr}return Object.assign(e,n)}}class eo extends i.EventEmitter{constructor(e,t){super(),this.options=e,this.config=t,this.uploaderCtx=e.context,this.stsToken=e.stsToken,this.extraParams=e.extraParams,this.logger=this.uploaderCtx.logger,this.retryCount=0,this.MAX_RETRY_TIME=3}_retry(){return this.retryCount++,this.retryCount<=this.MAX_RETRY_TIME&&(this.start(),!0)}start(){var e;if(this.uploaderCtx.priorInfo.preUploadRet)return;const t=new Vi,{stsToken:n,extraParams:r}=this,i={Action:"ApplyUploadInner",Version:"2020-11-19",SpaceName:null==(e=this.config.videoConfig)?void 0:e.spaceName,FileType:"video",IsInner:1,device_platform:"web"};this.config.enOID&&(i.EnOID=1),this.config.openExperiment&&(i.app_id=this.config.appId,i.user_id=this.config.userId),this.uploaderCtx.priorInfo.topExpires>0&&(i["X-Amz-Expires"]=this.uploaderCtx.priorInfo.topExpires),this.config.extraQuery&&Object.assign(i,{...this.config.extraQuery}),r&&Object.assign(i,r);const s=Bi.toQueryString(i),o=this.config.videoHost,a="vod",l={method:"GET",url:`${o}?${s}`,timeout:this.config.gatewayTimeout||3e4,region:this.config.region||"i18n",params:i,pathname:Bi.getPathByURL(o)};Bi.signRequest(l,{serviceName:a,stsToken:n,uploaderCtx:this.uploaderCtx,config:this.config});const c="video_999";t.on("complete",(e=>{var t;let n=null;try{n=JSON.parse(e.response),n.Result?(this.uploaderCtx.priorInfo.preUploadRet=n,this.uploaderCtx.priorInfo.preUploadXhr=e,this.logger.baseSend(c,{type:"success",ts:Math.round(Date.now()/br),ex:"Pre_apply upload success."})):null!=(t=n.ResponseMetadata)&&t.Error&&this.logger.baseSend(c,{type:"warn",ts:Math.round(Date.now()/br),ex:`Pre_apply upload failed:${n.ResponseMetadata.Error.CodeN},${n.ResponseMetadata.Error.Code}`,req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})}catch(r){this.logger.baseSend(c,{type:"warn",ts:Math.round(Date.now()/br),ex:`Pre_apply upload failed:${null==r?void 0:r.message}`,req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})}})),t.on("error",(e=>{const t={error:`request fail: ${e.statusText||e.errText||"UNKNOWN"}`,xhr:e};if(e.response){const n=JSON.parse(e.response);n.ResponseMetadata&&n.ResponseMetadata.Error&&(t.errorCode=n.ResponseMetadata.Error.CodeN,t.error=n.ResponseMetadata.Error.Code,t.message=n.ResponseMetadata.Error.Message),n.ResponseMetadata&&n.ResponseMetadata.RequestId&&(t.requestId=n.ResponseMetadata.RequestId)}const{errorCode:n,requestId:r}=t;Bi.mayLocalTimeError({errorCode:n,requestId:r})&&(Bi.calibrationTimeConfig(this.uploaderCtx.priorInfo,r),this._retry())||this.logger.baseSend(c,{type:"warn",ts:Math.round(Date.now()/br),ex:"Pre_apply upload failed: XHR error.",req:{url:e.currentUrl,param:e.params},res:{status:e.status,body:e.responseText}})})),t.send(l)}}class to{constructor(e,t){this.options=e,this.config=t,this.uploaderCtx=e.context,this.logger=this.uploaderCtx.logger}start(){this.api=new Ns({options:{type:wr.VIDEO,...this.options},config:this.config,uploaderCtx:this.uploaderCtx,startOptions:{enableSelectRoute:!0,selectRouteResult:this.options.selectRouteInfo.selectRouteResult},currFileCtx:{proxyStsToken:this.options.stsToken},success:this.success.bind(this),fail:this.fail.bind(this)}),this.api.start()}success(e,t){this.uploaderCtx.priorInfo.preUploadRet=e,this.uploaderCtx.priorInfo.preUploadXhr=t}fail(e){const t="video_999",{xhr:n}=e;this.logger.baseSend(t,{type:"warn",ts:Math.round(Date.now()/br),ex:"Pre_apply upload failed: XHR error.",req:{url:null==n?void 0:n.currentUrl,param:null==n?void 0:n.params},res:{status:null==n?void 0:n.status,body:null==n?void 0:n.responseText}})}}class no{constructor(){this.uploadingKeys=[]}bindEventClearUploadingSign(){window.addEventListener("unload",(()=>{this.uploadingKeys.forEach((e=>{Bi.removeStoreSync(Tr+e)}))}))}add(e){this.uploadingKeys.includes(e)||(Bi.setStoreSync(Tr+e,"1"),this.uploadingKeys.push(e))}remove(e){Bi.removeStoreSync(Tr+e),this.uploadingKeys.splice(this.uploadingKeys.findIndex((t=>t===e)),1)}isUploading(e){return!!Bi.getStoreSync(Tr+e)}}class ro extends i.EventEmitter{constructor(e){super(),this.historyKeys={},this.cache={},this.config=Object.assign({},c),this._mergeOptions(this.config,e),this._checkConfig(),this.tasks={},this.taskList={},this.storage=Bi.storage(this,this.config.enableDiskBreakpoint),this.logger=this.config.noLog?{send:()=>{}}:new Ir(this.config,this),this.priorInfo={systemTimeGap:0,topExpires:0},this.plugins=[],this.config.multiTabUploadOptimize&&(this.uploadingStore=new no,this.uploadingStore.bindEventClearUploadingSign())}_checkConfig(){}_use(e){let t=!1;for(const n of this.plugins)if((null==n?void 0:n.stage)===(null==e?void 0:e.stage)&&(null==n?void 0:n._identifier)===e._identifier){t=!0;break}t||this.plugins.push(e)}_mergeOptions(e,t){!t||"object"!=typeof t||(Object.assign(e,t),Object.keys(t).forEach((n=>{"vodDomain"===n&&(e.replace[n]=t[n])})))}_setCache(e,t){this.storage.setItem(e,t)}async _getCache(e){return await this.storage.getItem(e)}_removeCache(e){e?this.storage.removeItem(e):this.storage.clear()}_addTask(e,t,n=!1){const{tasks:r}=this,{taskList:i}=this;if(n&&r[e])return i[e].splice(2,0,t),void r[e].task.addTask(t,!0);r[e]&&r[e].task?(i[e].push(t),r[e].task.addTask(t)):(i[e]=[],i[e].push(t),r[e]=r[e]||{},r[e].task=new qs([],this.config,this,e),r[e].task.addTask(t))}_broadcast(e,t,n){if(n)return void this.emit(e,t);let r=null;try{r=this.tasks[t.key].status}catch{return}(r===xr.UPLOADING||0===r)&&this.emit(e,t)}_addCrc32ProcessTask(e,t,{isDirect:n,isImageBatchUpload:r=!1}={}){const i=new Is({file:e.file,context:this,key:t,isDirect:n,isImageBatchUpload:r},this.config),s={context:i,func:i.start,arg:{},key:t,index:0,stage:"crc32"};this._addTask(t,s)}_addPreUploadTask(e,t,{isDirect:n,isImageBatchUpload:r=!1}={}){const i={file:e.file,stsToken:e.stsToken,context:this,type:e.type||wr.VIDEO,preUploadUriParams:e.preUploadUriParams?e.preUploadUriParams:{},storeKey:e.storeKey,testHost:e.testHost,key:t,isDirect:n,isImageBatchUpload:r,fileSize:e.fileSize,serviceType:e.serviceType||null,scene:e.scene,prefix:e.prefix},s=new Zs(i,this.config),o={context:s,func:s.start,arg:{},key:t,index:1,stage:"preUpload"};this._addTask(t,o)}_addDirectUploadTask(e,t,{isImageBatchUpload:n=!1}={}){const r=new Ys({file:e.file,context:this,key:t,isImageBatchUpload:n},this.config),i={context:r,func:r.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,i)}_addInitUploadIDTask(e,t){const n=new Ks({file:e.file,context:this,key:t},this.config),r={context:n,func:n.start,arg:{},key:t,index:2,stage:"initUploadID"};this._addTask(t,r)}_insert1002Task(e){const t=new Ks({context:this,key:e},this.config),n={context:t,func:t.start,arg:{},key:e,index:2,stage:"initUploadID"};this._addTask(e,n,!0)}_addUploadProcessTask(e,t){const n=new Hs({file:e.file,context:this,key:t},this.config),r={context:n,func:n.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,r)}_addStreamUploadTask(e,t){this.streamUploadTask=new Js({context:this,key:t},this.config);const n={context:this.streamUploadTask,func:this.streamUploadTask.start,arg:{},key:t,index:3,stage:"process"};this._addTask(t,n)}_mergeFileTask(e,t){const n=new $s({file:e.file,context:this,stage:"fileMerge",key:t},this.config),r={context:n,func:n.start,arg:{},key:t,index:4,stage:"fileMerge"};this._addTask(t,r)}_getMetaInfoTask(e,t,{isImageBatchUpload:n=!1,skipCommit:r=!1}={}){var i;const s={file:e.file,context:this,data:e.data,type:e.type||wr.VIDEO,callbackArgs:e.callbackArgs,objectSync:e.objectSync,needExactFormat:e.needExactFormat,vstyle:null==(i=e.extra)?void 0:i.vstyle,key:t,isImageBatchUpload:n,skipCommit:r,serviceType:e.serviceType||null,skipMeta:e.skipMeta},o=new Qs(s,this.config),a={context:o,func:o.start,arg:{},key:t,index:5,stage:"complete"};this._addTask(t,a)}_addAllUploadProcess(e,t){var n,r,i,s,o,a;const l=e.type===wr.IMAGE&&"[object Array]"===Object.prototype.toString.call(e.file);this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wr.VIDEO,this.tasks[t].fileSize=e.file&&e.file.size,this.tasks[t].proxyStsToken=e.stsToken,this.tasks[t].streamMode="stream"===e.uploadMode,e.serviceId&&(this.tasks[t].serviceId=e.serviceId),e.contentType&&(this.tasks[t].contentType=e.contentType),this.tasks[t].gatewayUpload=void 0,this.tasks[t].serviceType=Ms.checkServiceName(e.type,this.config,e.serviceType),this.lastStsToken=e.stsToken,this.lastFile=e.file;const c=Bi.getFileSliceLength(e.file,this.config.getSliceFunc);this.tasks[t].sliceSize=c,this.tasks[t].storeRegion=Zi(e.stsToken),this.tasks[t].options=e;const u=Ms.checkServiceName(e.type,this.config),d=this.tasks[t];d.serviceType=u;const h=!!(e.useDirectUpload||l||e.file.size<=kr||e.file.size<=c);if(this.tasks[t].isDirect=h,u===Er.IMAGEX){const e=!(null==(r=null==(n=this.config)?void 0:n.imageConfig)||!r.imagexEnableEncrypt);d.imagexEnableEncrypt=e,e&&(d.imagexEncryptKey=(null==(s=null==(i=this.config)?void 0:i.imageConfig)?void 0:s.imagexEncryptKey)||Bi.generateKey(32),d.imagexPublicKey=null==(a=null==(o=this.config)?void 0:o.imageConfig)?void 0:a.imagexPublicKey)}this._addCrc32ProcessTask(e,t,{isDirect:h,isImageBatchUpload:l}),this._addPreUploadTask(e,t,{isDirect:h,isImageBatchUpload:l}),h?this._addDirectUploadTask(e,t,{isImageBatchUpload:l}):(this._addUploadProcessTask(e,t),this._mergeFileTask(e,t));const p=!(!this.config.skipCommit||Ms.checkServiceName(e.type,this.config)!==Er.IMAGEX);this._getMetaInfoTask(e,t,{isImageBatchUpload:l,skipCommit:p})}_addAllUploadProcessClientEncrypt(e){if(e.type===wr.IMAGE&&Array.isArray(e.file)){const t=[];return e.file.forEach((n=>{t.push(this._createClientEncryptTask({stsToken:e.stsToken,type:e.type,file:n}))})),t}return this._createClientEncryptTask(e)}_createClientEncryptTask(e){const t=Bi.getUnique("file");this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wr.VIDEO,this.tasks[t].fileSize=e.file&&e.file.size,this.tasks[t].proxyStsToken=e.stsToken,this.tasks[t].storeRegion=Zi(e.stsToken);const n=16;this.tasks[t].clientEncryptKey=Bi.generateKey(n);const r=Bi.getFileSliceLength(e.file,this.config.getSliceFunc);this.tasks[t].sliceSize=r,this._addCrc32ProcessTask(e,t,{isDirect:!1,isImageBatchUpload:!1}),this._addPreUploadTask(e,t,{isDirect:!1,isImageBatchUpload:!1}),this._addInitUploadIDTask(e,t),this._addUploadProcessTask(e,t),this._mergeFileTask(e,t);const i=!(!this.config.skipCommit||Ms.checkServiceName(e.type,this.config)!==Er.IMAGEX);return this._getMetaInfoTask(e,t,{isImageBatchUpload:!1,skipCommit:i}),t}_addAllStreamUploadProcess(e,t){this.tasks[t]=this.tasks[t]||{},this.tasks[t].fileType=e.type||wr.VIDEO,this.tasks[t].proxyStsToken=e.stsToken,this._addPreUploadTask(e,t),this._addInitUploadIDTask(e,t),this._addStreamUploadTask(e,t),this._mergeFileTask(e,t),this._getMetaInfoTask(e,t)}_addStreamSlice({fileSlice:e,index:t}){this.streamUploadTask.addStreamSlice({fileSlice:e,index:t})}_completeStreamUpload(){this.streamUploadTask.completeStreamUpload()}_run(e,t){const{tasks:n}=this,r=navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/);if(r&&r[1]&&Number(r[1])<=9)return this._broadcast("error",Object.assign(n[e],{key:e,status:0,stage:"browserError",extra:{message:"cannot support the browser below ie10"},type:"error"})),this.logger.send(n[e]),void this._cancel(e);n[e]?(this.historyKeys[e]&&(this.historyKeys[e].startOptions=t),n[e].status===xr.PAUSE?this._restart(e):(n[e].startTime=(new Date).getTime(),n[e].task&&n[e].status!==xr.UPLOADING&&n[e].task.tasks.length&&(n[e].status=xr.UPLOADING,this.logger.send(Object.assign({},n[e],{extra:{message:"start upload"},type:"start",key:e})),n[e].task.start(t)))):console.warn(`${e} is not exit in object tasks, stop running...`)}_selectRoute(e){var t;null==(t=this.selectRouteTask)||t.abort();const n=new es({stsToken:e.stsToken,context:this,type:wr.VIDEO,file:this.lastFile},this.config);return new Promise((t=>{n.start(e,((e,n)=>{this._selectRouteInfo=e,t({selectRouteInfo:e,extra:n})})),this.selectRouteTask=n}))}_restart(e){const{tasks:t}=this;if(!this.tasks[e]&&this.historyKeys[e])return this._addAllUploadProcess(this.historyKeys[e].fileOptions,e),this.tasks[e]&&(this.tasks[e].isRestart=!0),void this._run(e,this.historyKeys[e].startOptions);if(!t[e])return void console.warn(`${e} is not exit in object tasks`);const n=t[e].task;t[e].isRestart=!0;const r=t[e].currentTask||0;this.taskList[e].forEach(((t,i)=>{t.index===r&&(n.tasks=this.taskList[e].slice(i))})),n&&t[e].status!==xr.UPLOADING&&n.tasks.length&&(t[e].status=xr.UPLOADING,n.restart())}_removeTaskCache(e){var t;const{tasks:n}=this;if(!n[e])return void console.warn(`${e} is not exit in object tasks`);const{crc32Key:r}=n[e];r&&(this._removeCache(r),null==(t=this.uploadingStore)||t.remove(r))}_saveTask(e,t){var n;const{tasks:r}=this,i=r[e];if(!r||!i||i.isDirect||i.imagexEnableEncrypt||i.noCache||i.clientEncryptKey)return;const s=Object.assign({},i,t||{}),{crc32Key:o}=s;if(o)try{this._setCache(o,this.serializeCacheInfo(s)),null==(n=this.uploadingStore)||n.add(o)}catch(a){console.warn(a)}}serializeCacheInfo(e){const t={SessionKey:e.SessionKey,UploadHeader:e.UploadHeader,UploadID:e.UploadID,crc32Key:e.crc32Key,currentTask:e.currentTask,logicalPart:e.logicalPart,gatewayUpload:e.gatewayUpload,mergeRequest:e.mergeRequest,oid:e.oid,signature:e.signature,tosDomain:e.tosDomain,sliceCount:e.sliceCount,sliceSize:e.sliceSize,dynamicSliceRule:e.dynamicSliceRule,minSliceSize:e.minSliceSize,serviceId:e.serviceId,contentType:e.contentType,retryUseful03Time:e.retryUseful03Time,retryUsefulReqTime:e.retryUsefulReqTime,fileMergeTimeout:e.fileMergeTimeout,gatewayTimeout:e.gatewayTimeout,initUploadTimeout:e.initUploadTimeout,uploadTimeout:e.uploadTimeout,streamMode:e.streamMode};let n="";try{n=JSON.stringify(t)}catch(r){console.warn(r)}return n}_queueSuccess(e){const{tasks:t}=this;if(!t[e])return void console.warn(`${e} is not exit in object tasks`);const n=new Date;t[e].endTime=n.getTime(),t[e].time=t[e].endTime-t[e].startTime,t[e].status=0,this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.taskList[e],delete t[e],delete this.historyKeys[e]}_removeFile(e){delete this.tasks[e]}_batchAction(e,t){const{tasks:n}=this;Object.keys(n).forEach((n=>{e&&e(n,t)}))}_refreshSTSToken(e){const{tasks:t}=this;Object.keys(t).forEach((n=>{const r=t[n],i=Object.assign({},r,{proxyStsToken:e});r.proxyStsToken=e;const{crc32Key:s}=i;s&&(r.proxyStsToken=e,this._setCache(s,this.serializeCacheInfo(i)))}))}_setOption(e){this._mergeOptions(this.config,e),e.userId&&!this.config.noLog&&this.logger.setUserUniqueId(e.userId),e.appId&&!this.config.noLog&&this.logger.setLineAppId(e.appId)}_getOption(e){const t=Object.assign({},this.config);return Object.keys(t).forEach((e=>{(e.indexOf("Url")>-1||"replace"===e||"log"===e)&&delete t[e]})),e?t[e]:t}_userCancel(e){const{tasks:t}=this;e?(this._cancel(e),this.logger.send(Object.assign({},t[e],{extra:{message:"cancel upload"},type:"cancel"})),this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.tasks[e]):Object.keys(t).forEach((e=>{this._cancel(e),this.logger.send(Object.assign({},t[e],{extra:{message:"cancel upload"},type:"cancel"})),this.logger.send(Object.assign({},t[e],{type:"finish"})),delete this.tasks[e]}))}_cancel(e){const{tasks:t}=this;t[e]?(t[e].status=xr.CANCEL,t[e].task.cancel(),delete this.taskList[e],delete this.tasks[e]):console.warn(`${e} is not exit in object tasks`)}_userPause(e){const{tasks:t}=this;e?(this._pause(e),this.logger.send(Object.assign({},t[e],{extra:{message:"pause upload"},type:"pause"}))):Object.keys(t).forEach((e=>{this._pause(e),this.logger.send(Object.assign({},t[e],{extra:{message:"pause upload"},type:"pause"}))}))}_pause(e){const{tasks:t}=this;t[e]?(t[e].status=xr.PAUSE,t[e].task.cancel(!0),this._saveTask(e)):console.warn(`${e} is not exit in object tasks`)}_preUploadVod(e){const{stsToken:t,extraParams:n}=e;new eo({stsToken:t,extraParams:n,context:this},this.config).start()}_preUploadVodV2(e,t){const{stsToken:n,preUpload:r}=e,i={stsToken:n,selectRouteInfo:t,context:this};"object"==typeof r&&(i.extraParams=r.extraParams),new to(i,this.config).start()}_startRun(e){let t;this._selectRouteInfo&&(new Date).getTime()<this._selectRouteInfo.expiredTime&&(t={...this._selectRouteInfo,enableSelectRoute:!0}),e?this._run(e,t):this._batchAction(this._run.bind(this),t)}async _start(e,t={}){var n;null==(n=this.selectRouteTask)||n.abort(),t.selectRoute&&await this._selectRoute({...t,stsToken:this.lastStsToken}),this._startRun(e)}}class io extends ro{constructor(e){super(e)}use(e){this._use(e)}start(e,t={}){this._start(e,t)}addFile(e){if(!e||!Ms.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wr.STSTOKEN_FORMAT_ERROR,errorCode:Xr.STSTOKEN_FORMAT_ERROR}}),null;if(e.file&&this.config.clientEncrypt)return this._addAllUploadProcessClientEncrypt(e);if(e.file){const t=Bi.getUnique("file");return this.historyKeys[t]={fileOptions:e},this._addAllUploadProcess(e,t),t}return null}addImageFile(e){if(!e||!Ms.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wr.STSTOKEN_FORMAT_ERROR,errorCode:Xr.STSTOKEN_FORMAT_ERROR}}),null;if(e.file){e.type=e.type||wr.IMAGE;const t=Bi.getUnique("file");return this._addAllUploadProcess(e,t),t}return null}addStreamUploadTask(e){if(!e||!Ms.checkStsToken(e.stsToken))return this.emit("error",{extra:{message:Wr.STSTOKEN_FORMAT_ERROR,errorCode:Xr.STSTOKEN_FORMAT_ERROR}}),null;const t=Bi.getUnique("file");return this._addAllStreamUploadProcess(e,t),t}addStreamSlice({fileSlice:e,index:t}){this._addStreamSlice({fileSlice:e,index:t})}completeStreamUpload(){this._completeStreamUpload()}removeFile(e){e&&this._removeFile(e)}cancel(e){e?this._userCancel(e):this._batchAction(this._userCancel.bind(this))}pause(e){this._userPause(e)}restart(e){e?this._restart(e):this._batchAction(this._restart.bind(this))}refreshSTSToken(e){this._refreshSTSToken(e)}setOption(e){this._setOption(e)}getOption(e){return this._getOption(e)}preUpload(e){return this._preUploadVod(e)}selectRoute(e){this._selectRoute(e).then((t=>{e.preUpload&&!t.extra.aborted&&t.selectRouteInfo&&this._preUploadVodV2(e,t.selectRouteInfo)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}removeListener(e,t){return super.removeListener(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}}return io}()},93556:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(18571);const i="semi";var s=n(18751),o=n.n(s),a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const l=r.forwardRef(((e,t)=>{const{svg:n,spin:s=!1,rotate:l,style:c,className:u,prefixCls:d=i,type:h,size:p="default"}=e,f=a(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),g=o()(`${d}-icon`,{[`${d}-icon-extra-small`]:"extra-small"===p,[`${d}-icon-small`]:"small"===p,[`${d}-icon-default`]:"default"===p,[`${d}-icon-large`]:"large"===p,[`${d}-icon-extra-large`]:"extra-large"===p,[`${d}-icon-spinning`]:!0===s,[`${d}-icon-${h}`]:Boolean(h)},u),m={};return Number.isSafeInteger(l)&&(m.transform=`rotate(${l}deg)`),Object.assign(m,c),r.createElement("span",Object.assign({role:"img",ref:t,"aria-label":h,className:g,style:m},f),n)}));l.elementType="Icon";const c=(e,t)=>{const n=r.forwardRef(((n,i)=>r.createElement(l,Object.assign({svg:r.createElement(e),type:t,ref:i},n))));return n.elementType="Icon",n}},67411:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18571);const i=(0,n(93556).A)((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.22 4.22a10.97 10.97 0 0 1 15.56 0l-.7.7.7-.7a10.97 10.97 0 0 1 0 15.56 10.97 10.97 0 0 1-15.56 0l.7-.7-.7.7a10.97 10.97 0 0 1 0-15.56ZM12 3a8.97 8.97 0 0 0-9 9 8.97 8.97 0 0 0 9 9 8.97 8.97 0 0 0 9-9 8.97 8.97 0 0 0-9-9Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 9.31a4 4 0 1 1 5 3.88v1.12a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1 2 2 0 1 0-2-2 1 1 0 0 1-2 0Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 18.81a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z",fill:"currentColor"}))}),"help_circle_stroked")},91720:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(18571);const i=(0,n(93556).A)((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{d:"M9 17.07V6.93c0-.4.45-.63.78-.41l7.6 5.06c.3.2.3.64 0 .84l-7.6 5.06a.5.5 0 0 1-.78-.41Z",fill:"currentColor"}))}),"small_triangle_right")},69617:(e,t,n)=>{"use strict";n.d(t,{zx:()=>J,XZ:()=>Fe,Lt:()=>Ki,Form:()=>Cp,z8:()=>Rp,u_:()=>vi,Ex:()=>Xs,Y8:()=>yo,FX:()=>go,Ph:()=>ml,yC:()=>ll,Vp:()=>Xo,EG:()=>Sd,Kx:()=>cs,FN:()=>Fd,u:()=>kn,Q2:()=>zp});var r=n(18571),i=n(34073),s=n(95847),o=n(74529);const a=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var l=n(37721),c=n(17290);const u=function(e,t){return t.length<2?e:(0,l.Z)(e,(0,c.Z)(t,0,-1))};var d=n(337);const h=function(e,t){return t=(0,o.Z)(t,e),null==(e=u(e,t))||delete e[(0,d.Z)(a(t))]};var p=n(55348),f=n(14276),g=n(8039),m=n(11474),y=Function.prototype,b=Object.prototype,v=y.toString,_=b.hasOwnProperty,w=v.call(Object);const S=function(e){if(!(0,m.Z)(e)||"[object Object]"!=(0,f.Z)(e))return!1;var t=(0,g.Z)(e);if(null===t)return!0;var n=_.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&v.call(n)==w};const x=function(e){return S(e)?void 0:e};var E=n(69968),C=n(88198),k=(0,E.Z)((function(e,t){var n={};if(null==e)return n;var r=!1;t=(0,i.Z)(t,(function(t){return t=(0,o.Z)(t,e),r||(r=t.length>1),t})),(0,p.Z)(e,(0,C.Z)(e),n),r&&(n=(0,s.Z)(n,7,x));for(var a=t.length;a--;)h(n,t[a]);return n}));const O=k;var T=n(18751),I=n.n(T),z=n(61235),R=n.n(z);const D="semi",M={PREFIX:`${D}-button`},N={sizes:["default","small","large"],iconPositions:["left","right"],htmlTypes:["button","reset","submit"],btnTypes:["primary","secondary","tertiary","warning","danger"],themes:["solid","borderless","light"],DEFAULT_ICON_SIZE:"default",DEFAULT_ICON_POSITION:"left"};function j(){}var P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const A=N.sizes,{htmlTypes:L,btnTypes:F}=N;class U extends r.PureComponent{render(){const e=this.props,{children:t,block:n,htmlType:i,loading:s,circle:o,className:a,style:l,disabled:c,size:u,theme:d,type:h,prefixCls:p,iconPosition:f}=e,g=P(e,["children","block","htmlType","loading","circle","className","style","disabled","size","theme","type","prefixCls","iconPosition"]),m=Object.assign(Object.assign({disabled:c},O(g,["x-semi-children-alias"])),{className:I()(p,{[`${p}-${h}`]:!c&&h,[`${p}-disabled`]:c,[`${p}-size-large`]:"large"===u,[`${p}-size-small`]:"small"===u,[`${p}-light`]:"light"===d,[`${p}-block`]:n,[`${p}-circle`]:o,[`${p}-borderless`]:"borderless"===d,[`${p}-${h}-disabled`]:c&&h},a),type:i,"aria-disabled":c}),y={};return a&&a.includes("-with-icon")||(y["x-semi-prop"]=this.props["x-semi-children-alias"]||"children"),r.createElement("button",Object.assign({},m,{onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,style:l}),r.createElement("span",Object.assign({className:`${p}-content`,onClick:e=>c&&e.stopPropagation()},y),t))}}U.defaultProps={disabled:!1,size:"default",type:"primary",theme:"light",block:!1,htmlType:"button",onMouseDown:j,onClick:j,onMouseEnter:j,onMouseLeave:j,prefixCls:M.PREFIX},U.propTypes={children:R().node,disabled:R().bool,prefixCls:R().string,style:R().object,size:R().oneOf(A),type:R().oneOf(F),block:R().bool,onClick:R().func,onMouseDown:R().func,circle:R().bool,loading:R().bool,htmlType:R().oneOf(L),theme:R().oneOf(N.themes),className:R().string,onMouseEnter:R().func,onMouseLeave:R().func,"aria-label":R().string};const G=function(){};function B(e){return null==e}var Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};let K=-1;const X=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t,className:n}=e,i=Z(e,["id","className"]);let s=t;B(s)&&(K++,s=K);const o=`linearGradient-${s}`;return r.createElement("svg",Object.assign({},i,{className:n,width:"48",height:"48",viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,"data-icon":"spin"}),r.createElement("defs",null,r.createElement("linearGradient",{x1:"0%",y1:"100%",x2:"100%",y2:"100%",id:o},r.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"0%"}),r.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.50",offset:"39.9430698%"}),r.createElement("stop",{stopColor:"currentColor",offset:"100%"}))),r.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("rect",{fillOpacity:"0.01",fill:"none",x:"0",y:"0",width:"36",height:"36"}),r.createElement("path",{d:"M34,18 C34,9.163444 26.836556,2 18,2 C11.6597233,2 6.18078805,5.68784135 3.59122325,11.0354951",stroke:`url(#${o})`,strokeWidth:"4",strokeLinecap:"round"})))};var V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const W=["extra-small","small","default","large","extra-large","custom"];class H extends r.PureComponent{render(){const e=this.props,{children:t,iconPosition:n,iconSize:i,iconStyle:s,style:o,icon:a,noHorizontalPadding:l,theme:c,className:u,prefixCls:d,loading:h}=e,p=V(e,["children","iconPosition","iconSize","iconStyle","style","icon","noHorizontalPadding","theme","className","prefixCls","loading"]),f=Object.assign({},o);Array.isArray(l)?(l.includes("left")&&(f.paddingLeft=0),l.includes("right")&&(f.paddingRight=0)):!0===l?(f.paddingLeft=0,f.paddingRight=0):"string"==typeof l&&("left"===l&&(f.paddingLeft=0),"right"===l&&(f.paddingRight=0));let g=null,m=null;h&&!p.disabled?m=r.createElement(X,null):r.isValidElement(a)&&(m=a);const y=I()({[`${d}-content-left`]:"right"===n,[`${d}-content-right`]:"left"===n}),b=this.props["x-semi-children-alias"]||"children",v=null!=t?r.createElement("span",{className:y,"x-semi-prop":b},t):null;g="left"===n?r.createElement(r.Fragment,null,m,v):r.createElement(r.Fragment,null,v,m);const _=I()(u,`${d}-with-icon`,{[`${d}-with-icon-only`]:null==v||""===v,[`${d}-loading`]:h});return r.createElement(U,Object.assign({},p,{className:_,theme:c,style:f}),g)}}H.defaultProps={iconPosition:N.DEFAULT_ICON_POSITION,prefixCls:M.PREFIX,loading:!1,noHorizontalPadding:!1,onMouseEnter:G,onMouseLeave:G},H.elementType="IconButton",H.propTypes={iconStyle:R().object,style:R().object,loading:R().bool,prefixCls:R().string,icon:R().oneOfType([R().object,R().string,R().node]),iconSize:R().oneOf(W),noHorizontalPadding:R().oneOfType([R().bool,R().string,R().array]),children:R().node,theme:R().string,iconPosition:R().oneOf(N.iconPositions),className:R().string,onMouseEnter:R().func,onMouseLeave:R().func};const $=H;class Y extends r.PureComponent{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}render(){const e=Object.assign({},this.props),t=Boolean(e.icon),n=Boolean(e.loading),i=Boolean(e.disabled);return t||n&&!i?r.createElement($,Object.assign({},e)):r.createElement(U,Object.assign({},e))}}Y.propTypes=Object.assign(Object.assign({},U.propTypes),$.propTypes),Y.elementType="Button";const J=Y;const Q=function(e){return!0===e||!1===e||(0,m.Z)(e)&&"[object Boolean]"==(0,f.Z)(e)};const q=function(e){return void 0===e},ee={PREFIX:`${D}-checkbox`,INNER:`${D}-checkbox-inner`,TEXT:`${D}-checkbox-text`,INPUT:`${D}-checkbox-input`,CHECKED:`${D}-checkbox-checked`,DISABLED:`${D}-checkbox-disabled`,BUTTON:`${D}-checkbox-button`,WRAPPER:""},te={PREFIX:`${D}-checkboxGroup`,INNER:`${D}-checkboxGroup-inner`,TEXT:`${D}-checkboxGroup-text`,INPUT:`${D}-checkboxGroup-input`,CHECKED:`${D}-checkboxGroup-checked`,DISABLED:`${D}-checkboxGroup-disabled`},ne=["horizontal","vertical"],re="default",ie="card",se="pureCard",oe="vertical";const ae=function(e,t,n){var r=null==e?void 0:(0,l.Z)(e,t);return void 0===r?n:r},le=function(e){if("development"===ae(process,"env.NODE_ENV")){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(e,...n)}};class ce{static get cssClasses(){return{}}static get strings(){return{}}static get numbers(){return{}}static get defaultAdapter(){return{getProp:G,getProps:G,getState:G,getStates:G,setState:G,getContext:G,getContexts:G,getCache:G,setCache:G,getCaches:G,stopPropagation:G,persistEvent:G}}constructor(e){this._adapter=Object.assign(Object.assign({},ce.defaultAdapter),e)}getProp(e){return this._adapter.getProp(e)}getProps(){return this._adapter.getProps()}getState(e){return this._adapter.getState(e)}getStates(){return this._adapter.getStates()}setState(e,t){return this._adapter.setState(Object.assign({},e),t)}getContext(e){return this._adapter.getContext(e)}getContexts(){return this._adapter.getContexts()}getCaches(){return this._adapter.getCaches()}getCache(e){return this._adapter.getCache(e)}setCache(e,t){return e&&this._adapter.setCache(e,t)}stopPropagation(e){this._adapter.stopPropagation(e)}_isControlledComponent(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value")in this.getProps()}_isInProps(e){return e in this.getProps()}init(e){}destroy(){}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];le(e,...n)}_persistEvent(e){this._adapter.persistEvent(e)}}const ue=ce,de="Enter",he={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};const pe=function(e){return ae(e,"key")===de};function fe(e,t){e&&console.warn(`Warning: ${t}`)}const ge=class extends ue{constructor(e){super(Object.assign({},e)),this.clickState=!1,this.handleFocusVisible=e=>{const{target:t}=e;try{if(this.clickState)return void(this.clickState=!1);t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(n){fe(!0,"Warning: [Semi Checkbox] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this.clickState=!1,this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:n,addonId:r}=this.getProps();e&&!r&&this._adapter.setAddonId(),t&&!n&&this._adapter.setExtraId()}notifyChange(e,t){const n=this._adapter.generateEvent(e,t);this._adapter.notifyChange(n)}handleChange(e){if(this.getProp("disabled"))return;"click"===(null==e?void 0:e.type)&&(this.clickState=!0),this._adapter.focusCheckboxEntity();if(this._adapter.getIsInGroup()){return void(this._adapter.getGroupDisabled()||this.handleChangeInGroup(e))}const t=!this.getState("checked");this._isControlledComponent("checked")||this.setChecked(t),this.notifyChange(t,e)}handleChangeInGroup(e){const{value:t}=this.getProps(),n=!this._adapter.getGroupValue().includes(t),r=this._adapter.generateEvent(n,e);this._adapter.notifyChange(r),this._adapter.notifyGroupChange(r)}handleEnterPress(e){pe(e)&&this.handleChange(e)}setChecked(e){this._adapter.setNativeControlChecked(e)}destroy(){}},me=r.createContext({}),ye="semi";var be=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ve=r.forwardRef(((e,t)=>{const{svg:n,spin:i=!1,rotate:s,style:o,className:a,prefixCls:l=ye,type:c,size:u="default"}=e,d=be(e,["svg","spin","rotate","style","className","prefixCls","type","size"]),h=I()(`${l}-icon`,{[`${l}-icon-extra-small`]:"extra-small"===u,[`${l}-icon-small`]:"small"===u,[`${l}-icon-default`]:"default"===u,[`${l}-icon-large`]:"large"===u,[`${l}-icon-extra-large`]:"extra-large"===u,[`${l}-icon-spinning`]:!0===i,[`${l}-icon-${c}`]:Boolean(c)},a),p={};return Number.isSafeInteger(s)&&(p.transform=`rotate(${s}deg)`),Object.assign(p,o),r.createElement("span",Object.assign({role:"img",ref:t,"aria-label":c,className:h,style:p},d),n)}));ve.elementType="Icon";const _e=(e,t)=>{const n=r.forwardRef(((n,i)=>r.createElement(ve,Object.assign({svg:r.createElement(e),type:t,ref:i},n))));return n.elementType="Icon",n};const we=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.4111 7.30848C18.0692 7.81171 18.1947 8.75312 17.6915 9.41119L11.1915 17.9112C10.909 18.2806 10.4711 18.4981 10.0061 18.5C9.54105 18.5019 9.10143 18.288 8.81592 17.9209L5.31592 13.4209C4.80731 12.767 4.92512 11.8246 5.57904 11.316C6.23296 10.8074 7.17537 10.9252 7.68398 11.5791L9.98988 14.5438L15.3084 7.58884C15.8116 6.93077 16.7531 6.80525 17.4111 7.30848Z",fill:"currentColor"}))}),"checkbox_tick");const Se=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{d:"M5 12.5C5 11.6716 5.67157 11 6.5 11H17.5C18.3284 11 19 11.6716 19 12.5C19 13.3284 18.3284 14 17.5 14H6.5C5.67157 14 5 13.3284 5 12.5Z",fill:"currentColor"}))}),"checkbox_indeterminate");class xe extends r.PureComponent{blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}render(){const{indeterminate:e,checked:t,disabled:n,prefixCls:i,name:s,isPureCardType:o,addonId:a,extraId:l,focusInner:c,onInputFocus:u,onInputBlur:d}=this.props,h=i||ee.PREFIX,p=I()({[`${h}-inner`]:!0,[`${h}-inner-checked`]:Boolean(t),[`${h}-inner-pureCardType`]:o},ee.WRAPPER),f=I()({[`${h}-inner-display`]:!0,[`${h}-focus`]:c,[`${h}-focus-border`]:c&&!t}),g=t?r.createElement(we,null):e?r.createElement(Se,null):null,m={type:"checkbox","aria-label":this.props["aria-label"],"aria-disabled":n,"aria-checked":t,"aria-labelledby":a,"aria-describedby":l||this.props["aria-describedby"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-required":this.props["aria-required"],className:ee.INPUT,onChange:G,checked:t,disabled:n,onFocus:u,onBlur:d};return s&&(m.name=s),r.createElement("span",{className:p},r.createElement("input",Object.assign({},m,{ref:e=>{this.inputEntity=e}})),r.createElement("span",{className:f},g))}}xe.contextType=me,xe.propTypes={"aria-describedby":R().string,"aria-errormessage":R().string,"aria-invalid":R().bool,"aria-labelledby":R().string,"aria-required":R().bool,checked:R().bool,disabled:R().bool,onChange:R().func,children:R().node,grouped:R().bool,value:R().any,isPureCardType:R().bool,addonId:R().string,extraId:R().string,focusInner:R().bool,onInputFocus:R().func,onInputBlur:R().func,preventScroll:R().bool},xe.defaultProps={onChange:G};const Ee=xe;function Ce(e){return Object.keys(e).reduce(((t,n)=>("data-"===n.substr(0,5)&&(t[n]=e[n]),t)),{})}const{hasOwnProperty:ke}=Object.prototype;class Oe extends r.Component{constructor(e){super(e),this.isControlled=e=>Boolean(e&&this.props&&"object"==typeof this.props&&ke.call(this.props,e)),this.cache={},this.foundation=null}componentDidMount(){this.foundation&&"function"==typeof this.foundation.init&&this.foundation.init()}componentWillUnmount(){this.foundation&&"function"==typeof this.foundation.destroy&&this.foundation.destroy(),this.cache={}}get adapter(){return{getContext:e=>{if(this.context&&e)return this.context[e]},getContexts:()=>this.context,getProp:e=>this.props[e],getProps:()=>this.props,getState:e=>this.state[e],getStates:()=>this.state,setState:(e,t)=>this.setState(Object.assign({},e),t),getCache:e=>e&&this.cache[e],getCaches:()=>this.cache,setCache:(e,t)=>e&&(this.cache[e]=t),stopPropagation:e=>{try{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation()}catch(t){}},persistEvent:e=>{e&&e.persist&&"function"==typeof e.persist&&e.persist()}}}log(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return le(e,...n)}getDataAttr(e){return Ce(e)}}function Te(e){return`${e}-${(new Date).getTime()}-${Math.random()}`}function Ie(){var e,t;try{return null!==(t=null===(e=null===crypto||void 0===crypto?void 0:crypto.randomUUID)||void 0===e?void 0:e.call(crypto))&&void 0!==t?t:String(-99990013e3).replace(/[018]/g,(e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)))}catch(n){return Te("semi")}}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{prefix:t="",length:n=7}=e,r="0123456789abcdefghijklmnopqrstuvwxyz";let i="";for(let s=0;s<n;s++){const e=Math.floor(36*Math.random());i+=r.charAt(e)}return t?`${t}-${i}`:i}Oe.propTypes={},Oe.defaultProps={};class Re extends Oe{get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{const{onChange:t}=this.props;t&&t(e)},generateEvent:(e,t)=>{const{props:n}=this;return{target:Object.assign(Object.assign({},n),{checked:e}),stopPropagation:()=>{t.stopPropagation()},preventDefault:()=>{t.preventDefault()},nativeEvent:{stopImmediatePropagation:()=>{t.nativeEvent&&"function"==typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation()}}}},getIsInGroup:()=>this.isInGroup(),getGroupValue:()=>this.context&&this.context.checkboxGroup.value||[],notifyGroupChange:e=>{this.context.checkboxGroup.onChange(e)},getGroupDisabled:()=>this.context&&this.context.checkboxGroup.disabled,setAddonId:()=>{this.setState({addonId:ze({prefix:"addon"})})},setExtraId:()=>{this.setState({extraId:ze({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})},focusCheckboxEntity:()=>{this.focus()}})}constructor(e){super(e),this.handleChange=e=>this.foundation.handleChange(e),this.handleEnterPress=e=>this.foundation.handleEnterPress(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()};this.state={checked:e.checked||e.defaultChecked||!1,addonId:e.addonId,extraId:e.extraId,focusVisible:!1},this.checkboxEntity=null,this.foundation=new ge(this.adapter)}componentDidUpdate(e){this.props.checked!==e.checked&&(q(this.props.checked)?this.foundation.setChecked(!1):Q(this.props.checked)&&this.foundation.setChecked(this.props.checked))}isInGroup(){return Boolean(this.context&&this.context.checkboxGroup&&"value"in this.props)}focus(){this.checkboxEntity&&this.checkboxEntity.focus()}blur(){this.checkboxEntity&&this.checkboxEntity.blur()}render(){const{disabled:e,style:t,prefixCls:n,className:i,indeterminate:s,children:o,onMouseEnter:a,onMouseLeave:l,extra:c,value:u,role:d,tabIndex:h,id:p,type:f}=this.props,{checked:g,addonId:m,extraId:y,focusVisible:b}=this.state,v={checked:g,disabled:e},_=this.isInGroup();if(_){if(this.context.checkboxGroup.value){const e=(this.context.checkboxGroup.value||[]).includes(u);v.checked=e}this.context.checkboxGroup.disabled&&(v.disabled=this.context.checkboxGroup.disabled||this.props.disabled);const{isCardType:e,isPureCardType:t}=this.context.checkboxGroup;v.isCardType=e,v.isPureCardType=t,v.name=this.context.checkboxGroup.name}else v.isPureCardType=f===se,v.isCardType=f===ie||v.isPureCardType;const w=n||ee.PREFIX,S=v.isCardType||v.isPureCardType,x=I()(w,{[`${w}-disabled`]:v.disabled,[`${w}-indeterminate`]:s,[`${w}-checked`]:v.checked,[`${w}-unChecked`]:!v.checked,[`${w}-cardType`]:v.isCardType,[`${w}-cardType_disabled`]:v.disabled&&v.isCardType,[`${w}-cardType_unDisabled`]:!(v.disabled&&v.isCardType),[`${w}-cardType_checked`]:v.isCardType&&v.checked&&!v.disabled,[`${w}-cardType_checked_disabled`]:v.isCardType&&v.checked&&v.disabled,[i]:Boolean(i),[`${w}-focus`]:b&&S}),E=I()(`${w}-extra`,{[`${w}-cardType_extra_noChildren`]:v.isCardType&&!o}),C=(_&&this.context.checkboxGroup.name,this.props["x-semi-children-alias"]||"children");return r.createElement("span",Object.assign({role:d,tabIndex:h,style:t,className:x,id:p,onMouseEnter:a,onMouseLeave:l,onClick:this.handleChange,onKeyPress:this.handleEnterPress,"aria-labelledby":this.props["aria-labelledby"]},this.getDataAttr(this.props)),r.createElement(Ee,Object.assign({},this.props,v,{addonId:o&&m,extraId:c&&y,isPureCardType:v.isPureCardType,ref:e=>{this.checkboxEntity=e},focusInner:b&&!S,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),o||c?r.createElement("div",{className:`${w}-content`},o?r.createElement("span",{id:m,className:`${w}-addon`,"x-semi-prop":C},o):null,c?r.createElement("div",{id:y,className:E,"x-semi-prop":"extra"},c):null):null)}}Re.contextType=me,Re.propTypes={"aria-describedby":R().string,"aria-errormessage":R().string,"aria-invalid":R().bool,"aria-labelledby":R().string,"aria-required":R().bool,checked:R().bool,defaultChecked:R().bool,disabled:R().bool,indeterminate:R().bool,onChange:R().func,value:R().any,style:R().object,className:R().string,prefixCls:R().string,onMouseEnter:R().func,onMouseLeave:R().func,extra:R().node,index:R().number,"aria-label":R().string,tabIndex:R().number,preventScroll:R().bool,type:R().string},Re.defaultProps={defaultChecked:!1,indeterminate:!1,onChange:G,onMouseEnter:G,onMouseLeave:G,type:"default"},Re.elementType="Checkbox";const De=Re;var Me=n(65656);class Ne extends ue{static get checkboxGroupDefaultAdapter(){return{}}constructor(e){super(Object.assign(Object.assign({},Ne.checkboxGroupDefaultAdapter),e))}init(){const{defaultValue:e,value:t}=this.getProps();void 0===e||Array.isArray(e)||fe(!0,"Warning: [Semi CheckboxGroup] defaultValue should be an Array"),void 0===t||Array.isArray(t)||fe(!0,"Warning: [Semi CheckboxGroup] value should be an Array")}notifyChange(e){this._adapter.notifyChange(e)}handleChange(e){const t=this.getState("value");let n=[];Array.isArray(t)||(n=[t]),n=e.target.checked?[...t,e.target.value]:t.filter(((t,n)=>t!==e.target.value));"value"in this.getProps()||this._adapter.updateGroupValue(n),this.notifyChange(n)}getFormatName(){return this.getProp("name")||"default"}handlePropValueChange(e){Array.isArray(e)?this._adapter.updateGroupValue(e):(void 0===e&&this._adapter.updateGroupValue([]),fe(!0,"Warning: [Semi CheckboxGroup] value should be an Array"))}destroy(){}}const je=Ne;class Pe extends Oe{get adapter(){return Object.assign(Object.assign({},super.adapter),{updateGroupValue:e=>{this.setState({value:e})},notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}constructor(e){super(e),this.state={value:e.value||e.defaultValue},this.foundation=new je(this.adapter),this.onChange=this.onChange.bind(this)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){(0,Me.Z)(e.value,this.props.value)||this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}onChange(e){this.foundation.handleChange(e)}render(){const{children:e,options:t,prefixCls:n,direction:i,className:s,id:o,style:a,type:l,disabled:c}=this.props,u=l===se,d=l===ie||u,h=n||te.PREFIX,p=I()({[h]:!0,[`${h}-wrapper`]:!0,[`${h}-${i}`]:i,[`${h}-${i}-cardType`]:i&&d,[`${h}-${i}-pureCardType`]:i&&u},s),f=this.state.value.slice();let g;return t?g=(t||[]).map(((e,t)=>"string"==typeof e?r.createElement(De,{role:"listitem",key:t,disabled:this.props.disabled,value:e,prefixCls:n},e):r.createElement(De,{role:"listitem",key:t,disabled:e.disabled||this.props.disabled,value:e.value,prefixCls:n,extra:e.extra,className:e.className,style:e.style,onChange:e.onChange},e.label))):e&&(g=r.Children.toArray(e).map(((e,t)=>r.cloneElement(e,{key:t,role:"listitem"})))),r.createElement("div",Object.assign({id:o,role:"list","aria-label":this.props["aria-label"],className:p,style:a,"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"]},this.getDataAttr(this.props)),r.createElement(me.Provider,{value:{checkboxGroup:{onChange:this.onChange,value:f,disabled:this.props.disabled,name:this.foundation.getFormatName(),isCardType:d,isPureCardType:u}}},g))}}Pe.propTypes={"aria-describedby":R().string,"aria-errormessage":R().string,"aria-invalid":R().bool,"aria-labelledby":R().string,"aria-required":R().bool,defaultValue:R().array,disabled:R().bool,name:R().string,options:R().array,value:R().array,onChange:R().func,children:R().node,prefixCls:R().string,direction:R().oneOf(ne),className:R().string,type:R().oneOf([re,ie,se]),style:R().object},Pe.defaultProps={disabled:!1,onChange:()=>{},type:re,defaultValue:[],direction:oe};const Ae=Pe;class Le extends De{}Le.Group=Ae;const Fe=Le,Ue=`${D}-modal`,Ge=["small","medium","large","full-width"],Be=["ltr","rtl"];function Ze(e){return null!==(t=e)&&"object"==typeof t&&"function"==typeof e.then;var t}class Ke extends ue{constructor(e){super(Object.assign({},e)),this.toggleDisplayNone=(e,t)=>{this._adapter.toggleDisplayNone(e,t)}}destroy(){this.afterHide()}handleCancel(e){var t;const n=this._adapter.notifyCancel(e);Ze(n)&&(this._adapter.setState({onCancelReturnPromiseStatus:"pending"}),null===(t=null==n?void 0:n.then((()=>{this._adapter.setState({onCancelReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onCancelReturnPromiseStatus:"rejected"}),e})))}handleOk(e){var t;const n=this._adapter.notifyOk(e);Ze(n)&&(this._adapter.setState({onOKReturnPromiseStatus:"pending"}),null===(t=null==n?void 0:n.then((()=>{this._adapter.setState({onOKReturnPromiseStatus:"fulfilled"})})))||void 0===t||t.catch((e=>{throw this._adapter.setState({onOKReturnPromiseStatus:"rejected"}),e})))}beforeShow(){this._adapter.disabledBodyScroll()}afterHide(){this._adapter.enabledBodyScroll(),this._adapter.notifyClose()}}var Xe=n(48712);const Ve=r.createContext({}),We={PREFIX:`${D}-typography`},He={WEIGHT:["light","regular","medium","semibold","bold","default"],TYPE:["primary","secondary","danger","warning","success","tertiary","quaternary"],SIZE:["normal","small"],SPACING:["normal","extended"],HEADING:[1,2,3,4,5,6],RULE:["text","numbers","bytes-decimal","bytes-binary","percentages","exponential"],TRUNCATE:["ceil","floor","round"]};var $e=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ye=We.PREFIX;class Je extends r.PureComponent{render(){const e=this.props,{component:t,className:n,children:i,forwardRef:s}=e,o=$e(e,["component","className","children","forwardRef"]),a=t,l=I()(Ye,n);return r.createElement(a,Object.assign({className:l,ref:s},o),i)}}Je.defaultProps={component:"article",style:{},className:""},Je.propTypes={component:R().string,style:R().object,className:R().string};const Qe=Je;const qe=function(e){return null===e};var et=n(54618);const tt=function(e){return"string"==typeof e||!(0,et.Z)(e)&&(0,m.Z)(e)&&"[object String]"==(0,f.Z)(e)};var nt=n(74917),rt=n(31061),it=n(65136);const st=function(e,t,n){(void 0!==n&&!(0,it.Z)(e[t],n)||void 0===n&&!(t in e))&&(0,rt.Z)(e,t,n)};const ot=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}};const at=ot();var lt=n(48556),ct=n(12546),ut=n(40078),dt=n(88081),ht=n(68167),pt=n(63396);const ft=function(e){return(0,m.Z)(e)&&(0,pt.Z)(e)};var gt=n(95960),mt=n(7445),yt=n(32721);const bt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var vt=n(9268);const _t=function(e){return(0,p.Z)(e,(0,vt.Z)(e))};const wt=function(e,t,n,r,i,s,o){var a=bt(e,n),l=bt(t,n),c=o.get(l);if(c)st(e,n,c);else{var u=s?s(a,l,n+"",e,t,o):void 0,d=void 0===u;if(d){var h=(0,et.Z)(l),p=!h&&(0,gt.Z)(l),f=!h&&!p&&(0,yt.Z)(l);u=l,h||p||f?(0,et.Z)(a)?u=a:ft(a)?u=(0,ut.Z)(a):p?(d=!1,u=(0,lt.Z)(l,!0)):f?(d=!1,u=(0,ct.Z)(l,!0)):u=[]:S(l)||(0,ht.Z)(l)?(u=a,(0,ht.Z)(a)?u=_t(a):(0,mt.Z)(a)&&!(0,Xe.Z)(a)||(u=(0,dt.Z)(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),st(e,n,u)}};const St=function e(t,n,r,i,s){t!==n&&at(n,(function(o,a){if(s||(s=new nt.Z),(0,mt.Z)(o))wt(t,n,a,r,e,i,s);else{var l=i?i(bt(t,a),o,a+"",t,n,s):void 0;void 0===l&&(l=o),st(t,a,l)}}),vt.Z)};var xt=n(80058),Et=n(70802),Ct=n(41023);const kt=function(e,t){return(0,Ct.Z)((0,Et.Z)(e,t,xt.Z),e+"")};var Ot=n(97588);const Tt=function(e){return kt((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&(0,Ot.Z)(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,s)}return t}))};var It=Tt((function(e,t,n){St(e,t,n)}));const zt=It;var Rt=n(83904),Dt=n(80206),Mt=n(80578),Nt=Object.prototype.hasOwnProperty;const jt=function(e){if(null==e)return!0;if((0,pt.Z)(e)&&((0,et.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,gt.Z)(e)||(0,yt.Z)(e)||(0,ht.Z)(e)))return!e.length;var t=(0,Dt.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,Mt.Z)(e))return!(0,Rt.Z)(e).length;for(var n in e)if(Nt.call(e,n))return!1;return!0};var Pt=n(39756),At=n(21377);const Lt=function(e,t){return e&&at(e,t,At.Z)};const Ft=function(e,t){return function(n,r){if(null==n)return n;if(!(0,pt.Z)(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=Object(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}(Lt);const Ut=function(e){return"function"==typeof e?e:xt.Z};const Gt=function(e,t){return((0,et.Z)(e)?Pt.Z:Ft)(e,Ut(t))};var Bt=n(71412),Zt=n(95291);class Kt{constructor(){this._eventMap=new Map}on(e,t){return e&&"function"==typeof t&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var n=this;if(e&&"function"==typeof t){const r=function(){t(...arguments),n.off(e,r)};this.on(e,r)}}off(e,t){if(e)if("function"==typeof t){const n=this._eventMap.get(e);if(Array.isArray(n)&&n.length){let e=-1;for(;(e=n.findIndex((e=>e===t)))>-1;)n.splice(e,1)}}else B(t)&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!this._eventMap.has(e)&&(this._eventMap.get(e).forEach((e=>e(...n))),!0)}}function Xt(e){e.stopPropagation(),e.preventDefault()}function Vt(e,t){for(let n=0;n<e.length;n++)e[n]===t?(e[n].tabIndex=0,e[n].focus()):e[n].tabIndex=-1}const Wt={TOP:/top/i,RIGHT:/right/i,BOTTOM:/bottom/i,LEFT:/left/i},Ht={left:0,top:0,height:0,width:0,scrollLeft:0,scrollTop:0};class $t extends ue{constructor(e){var t;super(Object.assign({},e)),t=this,this.removePortal=()=>{this._adapter.removePortal()},this.setDisplayNone=(e,t)=>{this._adapter.setDisplayNone(e,t)},this.onResize=()=>{this.calcPosition()},this.delayShow=()=>{const e=this.getProp("mouseEnterDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout((()=>{this.show(),this.clearDelayTimer()}),e):this.show()},this.show=()=>{const e=this.getProp("content"),t=this.getProp("trigger"),n=this.getProp("clickTriggerToHide"),{visible:r,displayNone:i}=this.getStates();i&&this.setDisplayNone(!1),r||(this.clearDelayTimer(),this._adapter.on("portalInserted",(()=>{this.calcPosition()})),this._adapter.on("positionUpdated",(()=>{this._togglePortalVisible(!0)})),this._adapter.insertPortal(e,{left:-9999,top:-9999}),"custom"===t&&this._adapter.registerClickOutsideHandler((()=>{})),("click"===t||n||"contextMenu"===t)&&this._adapter.registerClickOutsideHandler(this.hide),this._bindScrollEvent(),this._bindResizeEvent())},this.calcPosition=function(e,n,r){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(jt(e)?t._adapter.getTriggerBounding():e)||Object.assign({},Ht),r=(jt(r)?t._adapter.getPopupContainerRect():r)||Object.assign({},Ht),n=(jt(n)?t._adapter.getWrapperBounding():n)||Object.assign({},Ht);let s=t.calcPosStyle({triggerRect:e,wrapperRect:n,containerRect:r}),o=t.getProp("position");if(t.getProp("autoAdjustOverflow")){const{position:i,isHeightOverFlow:a,isWidthOverFlow:l}=t.adjustPosIfNeed(o,s,e,n,r);(o!==i||a||l)&&(o=i,s=t.calcPosStyle({triggerRect:e,wrapperRect:n,containerRect:r,position:o,spacing:null,isOverFlow:[a,l]}))}return i&&t._mounted&&t._adapter.setPosition(Object.assign(Object.assign({},s),{position:o})),s},this.delayHide=()=>{const e=this.getProp("mouseLeaveDelay");this.clearDelayTimer(),e>0?this._timer=setTimeout((()=>{this.hide(),this.clearDelayTimer()}),e):this.hide()},this.hide=()=>{this.clearDelayTimer(),this._togglePortalVisible(!1),this._adapter.off("portalInserted"),this._adapter.off("positionUpdated")},this.handleContainerKeydown=e=>{const{guardFocus:t,closeOnEsc:n}=this.getProps();switch(e&&e.key){case"Escape":n&&this._handleEscKeyDown(e);break;case"Tab":if(t){const t=this._adapter.getContainer(),n=this._adapter.getFocusableElements(t);n.length&&(e.shiftKey?this._handleContainerShiftTabKeyDown(n,e):this._handleContainerTabKeyDown(n,e))}}},this._timer=null}init(){const{wrapperId:e}=this.getProps();this._mounted=!0,this._bindEvent(),this._shouldShow(),this._initContainerPosition(),e||this._adapter.setId()}destroy(){this._mounted=!1,this.unBindEvent()}_bindEvent(){const e=this.getProp("trigger"),{triggerEventSet:t,portalEventSet:n}=this._generateEvent(e);this._bindTriggerEvent(t),this._bindPortalEvent(n),this._bindResizeEvent()}unBindEvent(){this._adapter.unregisterClickOutsideHandler(),this.unBindResizeEvent(),this.unBindScrollEvent(),clearTimeout(this._timer)}_bindTriggerEvent(e){this._adapter.registerTriggerEvent(e)}_bindPortalEvent(e){this._adapter.registerPortalEvent(e)}_bindResizeEvent(){this._adapter.registerResizeHandler(this.onResize)}unBindResizeEvent(){this._adapter.unregisterResizeHandler(this.onResize)}_adjustPos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3?arguments[3]:void 0;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reverse"){case"reverse":default:return this._reversePos(e,t);case"expand":return this._expandPos(e,n);case"reduce":return this._reducePos(e)}}_reversePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){if(Wt.TOP.test(e))return e.replace("top","bottom").replace("Top","Bottom");if(Wt.BOTTOM.test(e))return e.replace("bottom","top").replace("Bottom","Top")}else{if(Wt.LEFT.test(e))return e.replace("left","right").replace("Left","Right");if(Wt.RIGHT.test(e))return e.replace("right","left").replace("Right","Left")}return e}_expandPos(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(e)}_reducePos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=["Top","Bottom","Left","Right"].find((t=>e.endsWith(t)));return t?e.replace(t,""):e}clearDelayTimer(){this._timer&&(clearTimeout(this._timer),this._timer=null)}_generateEvent(e){const t=this._adapter.getEventName(),n={[t.keydown]:e=>{this._handleTriggerKeydown(e)}};let r={};switch(e){case"focus":n[t.focus]=()=>{this.delayShow()},n[t.blur]=()=>{this.delayHide()},r=n;break;case"click":n[t.click]=()=>{this.show()},r={};break;case"hover":n[t.mouseEnter]=()=>{this.setCache("isClickToHide",!1),this.delayShow()},n[t.mouseLeave]=()=>{this.delayHide()},n[t.focus]=()=>{const{disableFocusListener:e}=this.getProps();!e&&this.delayShow()},n[t.blur]=()=>{const{disableFocusListener:e}=this.getProps();!e&&this.delayHide()},r=Object.assign({},n),this.getProp("clickToHide")&&(r[t.click]=()=>{this.setCache("isClickToHide",!0),this.hide()},r[t.mouseEnter]=()=>{this.getCache("isClickToHide")||this.delayShow()});break;case"custom":default:break;case"contextMenu":n[t.contextMenu]=e=>{e.preventDefault(),this.show()}}return{triggerEventSet:n,portalEventSet:r}}_shouldShow(){this.getProp("visible")&&this.show()}_togglePortalVisible(e){this.getState("visible")!==e&&this._adapter.togglePortalVisible(e,(()=>{e&&this._adapter.setInitialFocus(),this._adapter.notifyVisibleChange(e)}))}_roundPixel(e){return"number"==typeof e?Math.round(e):e}calcTransformOrigin(e,t,n,r){if(e&&t&&null!=n&&null!=r){if(this.getProp("transformFromCenter")){if(["topLeft","bottomLeft"].includes(e))return`${this._roundPixel(t.width/2)}px ${100*-r}%`;if(["topRight","bottomRight"].includes(e))return`calc(100% - ${this._roundPixel(t.width/2)}px) ${100*-r}%`;if(["leftTop","rightTop"].includes(e))return`${100*-n}% ${this._roundPixel(t.height/2)}px`;if(["leftBottom","rightBottom"].includes(e))return`${100*-n}% calc(100% - ${this._roundPixel(t.height/2)}px)`}return`${100*-n}% ${100*-r}%`}return null}calcPosStyle(e){const{spacing:t,isOverFlow:n}=e,{innerWidth:r}=window,i=(jt(e.triggerRect)?e.triggerRect:this._adapter.getTriggerBounding())||Object.assign({},Ht),s=(jt(e.containerRect)?e.containerRect:this._adapter.getPopupContainerRect())||Object.assign({},Ht),o=(jt(e.wrapperRect)?e.wrapperRect:this._adapter.getWrapperBounding())||Object.assign({},Ht),a=null!=e.position?e.position:this.getProp("position"),l=null!=t?t:this.getProp("spacing"),{arrowPointAtCenter:c,showArrow:u,arrowBounding:d}=this.getProps(),h=u&&c;let p=l,f=0;if("number"!=typeof l){const e=a.includes("top")||a.includes("bottom");p=e?l.y:l.x,f=e?l.x:l.y}const g=ae(d,"width",24),m=ae(d,"width",24),y=ae(d,"offsetY",0);let b,v,_=0,w=0;const S=i.left+i.width/2,x=i.top+i.height/2,E=6+g/2,C=6+m/2,k=o.height-s.height,O=o.width-s.width,T=k>0?k:0,I=O>0?O:0,z=n&&n[0],R=n&&n[1],D=S-s.left<s.right-S,M=x-s.top<s.bottom-x,N=o.width>r;switch(a){case"top":b=R?D?s.left+o.width/2:s.right-o.width/2+I:S+f,v=z?s.bottom+T:i.top-p,_=-.5,w=-1;break;case"topLeft":b=R?N?s.left:s.right-o.width:h?S-E+f:i.left+f,v=z?s.bottom+T:i.top-p,w=-1;break;case"topRight":b=R?s.right+I:h?S+E+f:i.right+f,v=z?s.bottom+T:i.top-p,w=-1,_=-1;break;case"left":b=R?s.right+I-p+E:i.left-p,v=z?M?s.top+o.height/2:s.bottom-o.height/2+T:x+f,_=-1,w=-.5;break;case"leftTop":b=R?s.right+I-p+E:i.left-p,v=z?s.top:h?x-C+f:i.top+f,_=-1;break;case"leftBottom":b=R?s.right+I-p+E:i.left-p,v=z?s.bottom+T:h?x+C+f:i.bottom+f,_=-1,w=-1;break;case"bottom":b=R?D?s.left+o.width/2:s.right-o.width/2+I:S+f,v=z?s.top+C-p:i.top+i.height+p,_=-.5;break;case"bottomLeft":b=R?N?s.left:s.right-o.width:h?S-E+f:i.left+f,v=z?s.top+C-p:i.top+i.height+p;break;case"bottomRight":b=R?s.right+I:h?S+E+f:i.right+f,v=z?s.top+C-p:i.top+i.height+p,_=-1;break;case"right":b=R?s.left-p+E:i.right+p,v=z?M?s.top+o.height/2:s.bottom-o.height/2+T:x+f,w=-.5;break;case"rightTop":b=R?s.left-p+E:i.right+p,v=z?s.top:h?x-C+f:i.top+f;break;case"rightBottom":b=R?s.left-p+E:i.right+p,v=z?s.bottom+T:h?x+C+f:i.bottom+f,w=-1;break;case"leftTopOver":b=i.left-p,v=i.top-p;break;case"rightTopOver":b=i.right+p,v=i.top-p,_=-1;break;case"leftBottomOver":b=i.left-p,v=i.bottom+p,w=-1;break;case"rightBottomOver":b=i.right+p,v=i.bottom+p,_=-1,w=-1}const j=this.calcTransformOrigin(a,i,_,w),P=this._adapter.containerIsBody();if(b-=s.left,v-=s.top,P&&!this._adapter.containerIsRelativeOrAbsolute()){const e=this._adapter.getDocumentElementBounding();b+=s.left-e.left,v+=s.top-e.top}b=P?b:b+s.scrollLeft,v=P?v:v+s.scrollTop;const A=i.height;if(this.getProp("showArrow")&&!c&&A<=2*(m/2+y)){const e=A/2-(y+m/2);!a.includes("Top")&&!a.includes("Bottom")||a.includes("Over")||(v=a.includes("Top")?v+e:v-e)}const L={left:this._roundPixel(b),top:this._roundPixel(v)};let F="";return null!=_&&(F+=`translateX(${100*_}%) `,Object.defineProperty(L,"translateX",{enumerable:!1,value:_})),null!=w&&(F+=`translateY(${100*w}%) `,Object.defineProperty(L,"translateY",{enumerable:!1,value:w})),null!=j&&(L.transformOrigin=j),F&&(L.transform=F),L}isLR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("left")||e.includes("right")}isTB(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("top")||e.includes("bottom")}isReverse(e,t,n){return e<n&&t>n}isOverFlow(e,t,n){return e<n&&t<n}isHalfOverFlow(e,t,n){return e<n||t<n}isHalfAllEnough(e,t,n){return e>=n||t>=n}getReverse(e,t,n,r){return e&&r||n}adjustPosIfNeed(e,t,n,r,i){const{innerWidth:s,innerHeight:o}=window,{margin:a}=this.getProps(),l="number"==typeof a?a:a.marginLeft,c="number"==typeof a?a:a.marginTop,u="number"==typeof a?a:a.marginRight,d="number"==typeof a?a:a.marginBottom;let h=!1,p=!1;const f=this.getProp("spacing");let g=f,m=0;if("number"!=typeof f){const t=e.includes("top")||e.includes("bottom");g=t?f.y:f.x,m=t?f.x:f.y}if(r.width>0&&r.height>0){const t=n.left,a=n.right,f=n.top,y=n.bottom,b=s-t,v=o-f,_=s-a,w=o-y,S=r.width>n.width,x=r.height>n.height,E=f-c<r.height+g&&w-d>r.height+g,C=t-l<r.width+g&&_-u>r.width+g,k=w-d<r.height+g&&f-c>r.height+g,O=_-u<r.width+g&&t-l>r.width+g,T=(v-d<r.height+g&&r.height,y-c<r.height+g&&r.height,v<r.height+m&&y>r.height+m),I=y<r.height+m&&v>r.height+m,z=b<r.width+m&&a>r.width+m,R=a<r.width+m&&b>r.width+m,D=v<r.height+g&&y>r.height+g,M=y<r.height+g&&v>r.height+g,N=b<r.width&&a>r.width,j=a<r.width&&b>r.width,P=f-i.top,A=t-i.left,L=P+n.height,F=A+n.width,U=i.bottom-y,G=i.right-a,B=U+n.height,Z=G+n.width,K=this.isReverse(P-c,U-d,r.height+g),X=this.isReverse(A-l,G-u,r.width+g),V=this.isReverse(U-d,P-c,r.height+g),W=this.isReverse(G-u,A-l,r.width+g),H=(this.isReverse(B-d,L-c,r.height+g),this.isReverse(L-c,B-d,r.height+g),this.isReverse(B,L,r.height+m)),$=this.isReverse(L,B,r.height+m),Y=this.isReverse(Z,F,r.width+m),J=this.isReverse(F,Z,r.width+m),Q=n.height/2,q=n.width/2,ee=this.isOverFlow(f-c,w-d,r.height+g),te=this.isOverFlow(t-l,_-u,r.width+g),ne=this.isOverFlow(y-c,v-d,r.height+g),re=this.isOverFlow(a-l,b-u,r.width+g),ie=this.isHalfOverFlow(y-Q,v-Q,(r.height+m)/2),se=this.isHalfOverFlow(a-q,b-q,(r.width+m)/2),oe=this.isHalfAllEnough(y-Q,v-Q,(r.height+m)/2),ae=this.isHalfAllEnough(a-q,b-q,(r.width+m)/2),le=this.isOverFlow(P-c,U-d,r.height+g),ce=this.isOverFlow(A-l,G-u,r.width+g),ue=this.isOverFlow(L-c,B-d,r.height+g),de=this.isOverFlow(F-l,Z-u,r.width+g),he=this.isHalfOverFlow(L-Q,B-Q,(r.height+m)/2),pe=this.isHalfOverFlow(F-q,Z-q,(r.width+m)/2),fe=this.isHalfAllEnough(L-Q,B-Q,(r.height+m)/2),ge=this.isHalfAllEnough(F-q,Z-q,(r.width+m)/2),me=this.getReverse(ee,le,E,K),ye=this.getReverse(te,ce,C,X),be=this.getReverse(ee,le,k,V),ve=this.getReverse(te,ce,O,W),_e=this.getReverse(ne,ue,T,H),we=this.getReverse(ne,ue,I,$),Se=this.getReverse(re,de,z,Y),xe=this.getReverse(re,de,R,J),Ee=ie&&he,Ce=se&&pe;switch(e){case"top":me&&(e=this._adjustPos(e,!0)),Ce&&(Se||xe)&&(e=this._adjustPos(e,!0,"expand",Se?"Right":"Left"));break;case"topLeft":me&&(e=this._adjustPos(e,!0)),Se&&S&&(e=this._adjustPos(e)),p&&(ae||ge)&&(e=this._adjustPos(e,!0,"reduce"));break;case"topRight":me&&(e=this._adjustPos(e,!0)),xe&&S&&(e=this._adjustPos(e)),p&&(ae||ge)&&(e=this._adjustPos(e,!0,"reduce"));break;case"left":ye&&(e=this._adjustPos(e)),Ee&&(_e||we)&&(e=this._adjustPos(e,!1,"expand",_e?"Bottom":"Top"));break;case"leftTop":ye&&(e=this._adjustPos(e)),_e&&x&&(e=this._adjustPos(e,!0)),h&&(oe||fe)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftBottom":ye&&(e=this._adjustPos(e)),we&&x&&(e=this._adjustPos(e,!0)),h&&(oe||fe)&&(e=this._adjustPos(e,!1,"reduce"));break;case"bottom":be&&(e=this._adjustPos(e,!0)),Ce&&(Se||xe)&&(e=this._adjustPos(e,!0,"expand",Se?"Right":"Left"));break;case"bottomLeft":be&&(e=this._adjustPos(e,!0)),Se&&S&&(e=this._adjustPos(e)),p&&(ae||ge)&&(e=this._adjustPos(e,!0,"reduce"));break;case"bottomRight":be&&(e=this._adjustPos(e,!0)),xe&&S&&(e=this._adjustPos(e)),p&&(ae||ge)&&(e=this._adjustPos(e,!0,"reduce"));break;case"right":ve&&(e=this._adjustPos(e)),Ee&&(_e||we)&&(e=this._adjustPos(e,!1,"expand",_e?"Bottom":"Top"));break;case"rightTop":ve&&(e=this._adjustPos(e)),_e&&x&&(e=this._adjustPos(e,!0)),h&&(oe||fe)&&(e=this._adjustPos(e,!1,"reduce"));break;case"rightBottom":ve&&(e=this._adjustPos(e)),we&&x&&(e=this._adjustPos(e,!0)),h&&(oe||fe)&&(e=this._adjustPos(e,!1,"reduce"));break;case"leftTopOver":D&&(e=this._adjustPos(e,!0)),N&&(e=this._adjustPos(e));break;case"leftBottomOver":M&&(e=this._adjustPos(e,!0)),N&&(e=this._adjustPos(e));break;case"rightTopOver":D&&(e=this._adjustPos(e,!0)),j&&(e=this._adjustPos(e));break;case"rightBottomOver":M&&(e=this._adjustPos(e,!0)),j&&(e=this._adjustPos(e))}this.isTB(e)&&(h=ee&&le,p="top"===e||"bottom"===e?se&&pe||a<0||_<0:re&&de||a<0||_<0),this.isLR(e)&&(p=te&&ce,h="left"===e||"right"===e?ie&&he||f<0||v<0:ne&&ue||f<0||v<0)}return{position:e,isHeightOverFlow:h,isWidthOverFlow:p}}_bindScrollEvent(){this._adapter.registerScrollHandler((()=>this.calcPosition()))}unBindScrollEvent(){this._adapter.unregisterScrollHandler()}_initContainerPosition(){this._adapter.updateContainerPosition()}_handleTriggerKeydown(e){const{closeOnEsc:t,disableArrowKeyDown:n}=this.getProps(),r=this._adapter.getContainer(),i=this._adapter.getFocusableElements(r),s=i.length;switch(e&&e.key){case"Escape":Xt(e),t&&this._handleEscKeyDown(e);break;case"ArrowUp":!n&&s&&this._handleTriggerArrowUpKeydown(i,e);break;case"ArrowDown":!n&&s&&this._handleTriggerArrowDownKeydown(i,e)}}focusTrigger(){const{trigger:e,returnFocusOnClose:t,preventScroll:n}=this.getProps();if(t&&"custom"!==e){const e=this._adapter.getTriggerNode();e&&"focus"in e&&e.focus({preventScroll:n})}}_handleEscKeyDown(e){const{trigger:t}=this.getProps();"custom"!==t&&(this.focusTrigger(),this.hide()),this._adapter.notifyEscKeydown(e)}_handleContainerTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),r=this._adapter.getActiveElement();e[e.length-1]===r&&(e[0].focus({preventScroll:n}),t.preventDefault())}_handleContainerShiftTabKeyDown(e,t){const{preventScroll:n}=this.getProps(),r=this._adapter.getActiveElement();e[0]===r&&(e[e.length-1].focus({preventScroll:n}),t.preventDefault())}_handleTriggerArrowDownKeydown(e,t){const{preventScroll:n}=this.getProps();e[0].focus({preventScroll:n}),t.preventDefault()}_handleTriggerArrowUpKeydown(e,t){const{preventScroll:n}=this.getProps();e[e.length-1].focus({preventScroll:n}),t.preventDefault()}}const Yt={PREFIX:`${D}-tooltip`},Jt={POSITION_SET:["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver","leftBottomOver","rightBottomOver"],TRIGGER_SET:["hover","focus","click","custom","contextMenu"],STATUS_DISABLED:"disabled",STATUS_LOADING:"loading"},Qt={ARROW_BOUNDING:{offsetX:0,offsetY:2,width:24,height:7},DEFAULT_Z_INDEX:1060,MOUSE_ENTER_DELAY:50,MOUSE_LEAVE_DELAY:50,SPACING:8,MARGIN:0};function qt(e){try{return e instanceof HTMLElement}catch(Mh){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}var en=n(8344);const tn=function(e,t,n){return null==e?e:(0,en.Z)(e,t,n)};const nn=function(e,t){return t="function"==typeof t?t:void 0,(0,s.Z)(e,5,t)},rn=e=>{let{autoEscape:t=!0,caseSensitive:n=!1,searchWords:r,sourceString:i}=e;tt(r)&&(r=[r]);const s=(e=>{let{autoEscape:t,caseSensitive:n,searchWords:r,sourceString:i}=e;return r.filter((e=>e)).reduce(((e,r)=>{t&&(r=(e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))(r));const s=new RegExp(r,n?"g":"gi");let o;for(;o=s.exec(i);){const t=o.index,n=s.lastIndex;n>t&&e.push({highlight:!1,start:t,end:n}),o.index===s.lastIndex&&s.lastIndex++}return e}),[])})({autoEscape:t,caseSensitive:n,searchWords:r,sourceString:i}),o=(e=>{let{chunks:t}=e;return t=t.sort(((e,t)=>e.start-t.start)).reduce(((e,t)=>{if(0===e.length)return[t];{const n=e.pop();if(t.start<=n.end){const r=Math.max(n.end,t.end);e.push({highlight:!1,start:n.start,end:r})}else e.push(n,t);return e}}),[]),t})({chunks:s}),a=(e=>{let{chunksToHighlight:t,totalLength:n}=e;const r=[],i=(e,t,n)=>{t-e>0&&r.push({start:e,end:t,highlight:n})};if(0===t.length)i(0,n,!1);else{let e=0;t.forEach((t=>{i(e,t.start,!1),i(t.start,t.end,!0),e=t.end})),i(e,n,!1)}return r})({chunksToHighlight:o,totalLength:i?i.length:0});return a};function sn(e,t){e&&"function"==typeof e.stopPropagation&&e.stopPropagation(),!t&&e.nativeEvent&&"function"==typeof e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()}function on(e,t){return nn(e,(e=>{if("function"==typeof t)return t(e);if("function"==typeof e||r.isValidElement(e))return e;if("[object Error]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e)&&0===e.length){const t=Object.keys(e);if(t.length){const n=[];t.forEach((t=>{tn(n,t,e[t])}));try{fe("production"!==ae(process,"env.NODE_ENV"),"[Semi] You may use an out-of-bounds array. In some cases, your program may not behave as expected.\n                    The maximum length of an array is 4294967295.\n                    Please check whether the array subscript in your data exceeds the maximum value of the JS array subscript")}catch(Mh){}return n}}else;}))}const an=e=>r.isValidElement(e)&&"Icon"===ae(e.type,"elementType");function ln(){return document?document.activeElement:null}function cn(e){if(!qt(e))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(t))}const un=()=>document.body;class dn extends r.PureComponent{constructor(e,t){var n;super(e),n=this,this.initContainer=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i;try{let t;if(!n.el||!(null===(r=n.state)||void 0===r?void 0:r.container)||!Array.from(n.state.container.childNodes).includes(n.el)){n.el=document.createElement("div");const r=(n.props.getPopupContainer||e.getPopupContainer||un)();return r.appendChild(n.el),n.addStyle(n.props.style),n.addClass(n.props.prefixCls,e,n.props.className),t=r,t}}catch(Mh){if(!t)throw Mh}return null===(i=n.state)||void 0===i?void 0:i.container},this.addStyle=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.el)for(const t of Object.keys(e))n.el.style[t]=e[t]},this.addClass=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.context;const{direction:r}=t;for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=I()(e,...s,{[`${e}-rtl`]:"rtl"===r});n.el&&(n.el.className=a)},this.state={container:this.initContainer(t,!0)}}componentDidMount(){const e=this.initContainer(this.context);e!==this.state.container&&this.setState({container:e})}componentDidUpdate(e){const{didUpdate:t}=this.props;t&&t(e)}componentWillUnmount(){const{container:e}=this.state;e&&e.removeChild(this.el)}render(){const{state:e,props:t}=this;return e.container?(0,Zt.createPortal)(t.children,this.el):null}}dn.contextType=Ve,dn.defaultProps={prefixCls:`${D}-portal`},dn.propTypes={children:R().node,prefixCls:R().string,getPopupContainer:R().func,className:R().string,didUpdate:R().func};const hn=dn;var pn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const fn=e=>{const{className:t,style:n}=e,i=pn(e,["className","style"]);return r.createElement("svg",Object.assign({"aria-hidden":!0,className:t,style:n},i,{width:"24",height:"7",viewBox:"0 0 24 7",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"}),r.createElement("path",{d:"M24 0V1C20 1 18.5 2 16.5 4C14.5 6 14 7 12 7C10 7 9.5 6 7.5 4C5.5 2 4 1 0 1V0H24Z"}))};var gn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const mn=e=>{const{className:t,style:n}=e,i=gn(e,["className","style"]);return r.createElement("svg",Object.assign({"aria-hidden":!0,className:t,style:n},i,{width:"7",height:"24",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}),r.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z"}))},yn=R().shape({offsetX:R().number,offsetY:R().number,width:R().number,height:R().number});class bn extends r.Component{constructor(e){super(e),this.handleAnimationStart=()=>{var e,t;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e)},this.handleAnimationEnd=()=>{this.setState({currentClassName:this.props.endClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!1},(()=>{var e,t;null===(t=(e=this.props).onAnimationEnd)||void 0===t||t.call(e,!1)}))},this.state={currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0}}componentDidMount(){var e,t,n,r;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e),this.props.motion||(null===(r=(n=this.props).onAnimationEnd)||void 0===r||r.call(n,!1),this.setState({isAnimating:!1}))}componentDidUpdate(e,t,n){const r=Object.keys(this.props).filter((t=>!(0,Me.Z)(this.props[t],e[t])));r.includes("animationState"),(r.includes("startClassName")||r.includes("replayKey")||r.includes("motion"))&&this.setState({currentClassName:this.props.startClassName,extraStyle:{animationFillMode:this.props.fillMode},isAnimating:!0},(()=>{var e,t,n,r;null===(t=(e=this.props).onAnimationStart)||void 0===t||t.call(e),this.props.motion||(null===(r=(n=this.props).onAnimationEnd)||void 0===r||r.call(n,this.state.isAnimating),this.setState({isAnimating:!1}))}))}render(){var e;return this.props.motion?this.props.children({animationClassName:null!==(e=this.state.currentClassName)&&void 0!==e?e:"",animationStyle:this.state.extraStyle,animationEventsNeedBind:{onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},isAnimating:this.state.isAnimating}):this.props.children({animationClassName:"",animationStyle:{},animationEventsNeedBind:{},isAnimating:this.state.isAnimating})}}bn.defaultProps={motion:!0,replayKey:""};const vn=bn;var _n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const wn=Yt.PREFIX,Sn=Jt.POSITION_SET,xn=Jt.TRIGGER_SET,En=["flex","block","table","flow-root","grid"],Cn=()=>document.body;class kn extends Oe{constructor(e){super(e),this.setContainerEl=e=>this.containerEl={current:e},this.isSpecial=e=>{if(qt(e))return Boolean(e.disabled);if((0,r.isValidElement)(e)){if(ae(e,"props.disabled"))return Jt.STATUS_DISABLED;const t=ae(e,"props.loading"),n=!(jt(e)||jt(e.type)||"Button"!==ae(e,"type.elementType")&&"IconButton"!==ae(e,"type.elementType"));if(t&&n)return Jt.STATUS_LOADING}return!1},this.didLeave=()=>{this.props.keepDOM?this.foundation.setDisplayNone(!0):this.foundation.removePortal(),this.foundation.unBindEvent()},this.renderIcon=()=>{const{placement:e}=this.state,{showArrow:t,prefixCls:n,style:i}=this.props;let s=null;const o=I()([`${n}-icon-arrow`]),a=ae(i,"backgroundColor"),l=e.includes("left")||e.includes("right")?r.createElement(mn,null):r.createElement(fn,null);return t&&(s=(0,r.isValidElement)(t)?t:r.cloneElement(l,{className:o,style:{color:a,fill:"currentColor"}})),s},this.handlePortalInnerClick=e=>{this.props.clickToHide&&this.foundation.hide(),this.props.stopPropagation&&sn(e)},this.handlePortalMouseDown=e=>{this.props.stopPropagation&&sn(e)},this.handlePortalFocus=e=>{this.props.stopPropagation&&sn(e)},this.handlePortalBlur=e=>{this.props.stopPropagation&&sn(e)},this.handlePortalInnerKeyDown=e=>{this.foundation.handleContainerKeydown(e)},this.renderContentNode=e=>{const t={initialFocusRef:this.initialFocusRef};return(0,Xe.Z)(e)?e(t):e},this.renderPortal=()=>{const{containerStyle:e={},visible:t,portalEventSet:n,placement:i,displayNone:s,transitionState:o,id:a,isPositionUpdated:l}=this.state,{prefixCls:c,content:u,showArrow:d,style:h,motion:p,role:f,zIndex:g}=this.props,m=this.renderContentNode(u),{className:y}=this.props,b=this.context.direction,v=I()(y,{[`${c}-wrapper`]:!0,[`${c}-wrapper-show`]:t,[`${c}-with-arrow`]:Boolean(d),[`${c}-rtl`]:"rtl"===b}),_=this.renderIcon(),w=O(e,p?["transformOrigin"]:void 0),S=ae(e,"transformOrigin"),x=ae(h,"opacity",null),E=x||1,C=r.createElement(vn,{fillMode:"forwards",animationState:o,motion:p&&l,startClassName:"enter"===o?`${wn}-animation-show`:`${wn}-animation-hide`,onAnimationEnd:()=>{var e,t;"leave"===o&&(this.didLeave(),null===(t=(e=this.props).afterClose)||void 0===t||t.call(e))}},(e=>{let{animationStyle:t,animationClassName:o,animationEventsNeedBind:c}=e;return r.createElement("div",Object.assign({className:I()(v,o),style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),s?{display:"none"}:{}),{transformOrigin:S}),h),x?{opacity:l?E:"0"}:{})},n,c,{role:f,"x-placement":i,id:a}),r.createElement("div",{className:`${wn}-content`},m),_)}));return r.createElement(hn,{getPopupContainer:this.props.getPopupContainer,style:{zIndex:g}},r.createElement("div",{tabIndex:-1,className:`${D}-portal-inner`,style:w,ref:this.setContainerEl,onClick:this.handlePortalInnerClick,onFocus:this.handlePortalFocus,onBlur:this.handlePortalBlur,onMouseDown:this.handlePortalMouseDown,onKeyDown:this.handlePortalInnerKeyDown},C))},this.wrapSpan=e=>{const{wrapperClassName:t}=this.props,n=ae(e,"props.style.display"),i=ae(e,"props.block"),s={};return"string"==typeof e||(s.display="inline-block"),(i||En.includes(n))&&(s.width="100%"),r.createElement("span",{className:t,style:s},e)},this.mergeEvents=(e,t)=>{const n={};return Gt(t,((t,r)=>{"function"==typeof t&&(n[r]=function(){t(...arguments),e&&"function"==typeof e[r]&&e[r](...arguments)})})),n},this.getPopupId=()=>this.state.id,this.state={visible:!1,transitionState:"",triggerEventSet:{},portalEventSet:{},containerStyle:{},isInsert:!1,placement:e.position||"top",transitionStyle:{},isPositionUpdated:!1,id:e.wrapperId,displayNone:!1},this.foundation=new $t(this.adapter),this.eventManager=new Kt,this.triggerEl=r.createRef(),this.containerEl=r.createRef(),this.initialFocusRef=r.createRef(),this.clickOutsideHandler=null,this.resizeHandler=null,this.isWrapped=!1,this.containerPosition=void 0}get adapter(){var e=this;return Object.assign(Object.assign({},super.adapter),{on:function(){return e.eventManager.on(...arguments)},off:function(){return e.eventManager.off(...arguments)},insertPortal:(e,t)=>{var{position:n}=t,r=_n(t,["position"]);this.setState({isInsert:!0,transitionState:"enter",containerStyle:Object.assign(Object.assign({},this.state.containerStyle),r)},(()=>{setTimeout((()=>{this.eventManager.emit("portalInserted")}),0)}))},removePortal:()=>{this.setState({isInsert:!1,isPositionUpdated:!1})},getEventName:()=>({mouseEnter:"onMouseEnter",mouseLeave:"onMouseLeave",mouseOut:"onMouseOut",mouseOver:"onMouseOver",click:"onClick",focus:"onFocus",blur:"onBlur",keydown:"onKeyDown",contextMenu:"onContextMenu"}),registerTriggerEvent:e=>{this.setState({triggerEventSet:e})},registerPortalEvent:e=>{this.setState({portalEventSet:e})},getTriggerBounding:()=>{const e=this.adapter.getTriggerNode();return this.triggerEl.current=e,e&&e.getBoundingClientRect()},getPopupContainerRect:()=>{const e=this.getPopupContainer();let t=null;if(e&&qt(e)){const n=function(e){if(e&&"object"==typeof e)return"function"==typeof e.toJSON?e.toJSON():["left","top","right","bottom","width","height"].reduce(((t,n)=>(t[n]=e[n],t)),{})}(e.getBoundingClientRect());t=Object.assign(Object.assign({},n),{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}return t},containerIsBody:()=>this.getPopupContainer()===document.body,containerIsRelative:()=>{const e=this.getPopupContainer();return"relative"===window.getComputedStyle(e).getPropertyValue("position")},containerIsRelativeOrAbsolute:()=>["relative","absolute"].includes(this.containerPosition),getWrapperBounding:()=>{const e=this.containerEl&&this.containerEl.current;return e&&e.getBoundingClientRect()},getDocumentElementBounding:()=>document.documentElement.getBoundingClientRect(),setPosition:e=>{var{position:t}=e,n=_n(e,["position"]);this.setState({containerStyle:Object.assign(Object.assign({},this.state.containerStyle),n),placement:t,isPositionUpdated:!0},(()=>{this.eventManager.emit("positionUpdated")}))},setDisplayNone:(e,t)=>{this.setState({displayNone:e},t)},updatePlacementAttr:e=>{this.setState({placement:e})},togglePortalVisible:(e,t)=>{const n={};n.transitionState=e?"enter":"leave",n.visible=e,this.mounted&&this.setState(n,(()=>{t()}))},registerClickOutsideHandler:e=>{this.clickOutsideHandler&&this.adapter.unregisterClickOutsideHandler(),this.clickOutsideHandler=t=>{if(!this.mounted)return!1;let n=this.triggerEl&&this.triggerEl.current,r=this.containerEl&&this.containerEl.current;n=Zt.findDOMNode(n),r=Zt.findDOMNode(r),(n&&!n.contains(t.target)&&r&&!r.contains(t.target)||this.props.clickTriggerToHide&&n&&n.contains(t.target))&&(this.props.onClickOutSide(t),e())},window.addEventListener("mousedown",this.clickOutsideHandler)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(window.removeEventListener("mousedown",this.clickOutsideHandler),this.clickOutsideHandler=null)},registerResizeHandler:e=>{this.resizeHandler&&this.adapter.unregisterResizeHandler(),this.resizeHandler=(0,Bt.Z)((t=>{if(!this.mounted)return!1;e(t)}),10),window.addEventListener("resize",this.resizeHandler,!1)},unregisterResizeHandler:()=>{this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler,!1),this.resizeHandler=null)},notifyVisibleChange:e=>{this.props.onVisibleChange(e)},registerScrollHandler:e=>{this.scrollHandler&&this.adapter.unregisterScrollHandler(),this.scrollHandler=(0,Bt.Z)((t=>{if(!this.mounted)return!1;const n=this.adapter.getTriggerNode();if(t.target.contains(n)){const n={x:t.target.scrollLeft,y:t.target.scrollTop};e(n)}}),10),window.addEventListener("scroll",this.scrollHandler,!0)},unregisterScrollHandler:()=>{this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler,!0),this.scrollHandler=null)},canMotion:()=>Boolean(this.props.motion),updateContainerPosition:()=>{const e=this.getPopupContainer();if(e&&qt(e)){const t=window.getComputedStyle(e).getPropertyValue("position");this.containerPosition=t}},getContainerPosition:()=>this.containerPosition,getContainer:()=>this.containerEl&&this.containerEl.current,getTriggerNode:()=>{let e=this.triggerEl.current;return qt(this.triggerEl.current)||(e=Zt.findDOMNode(this.triggerEl.current)),e},getFocusableElements:e=>cn(e),getActiveElement:()=>ln(),setInitialFocus:()=>{const{preventScroll:e}=this.props,t=ae(this,"initialFocusRef.current");t&&"focus"in t&&t.focus({preventScroll:e})},notifyEscKeydown:e=>{this.props.onEscKeyDown(e)},setId:()=>{this.setState({id:ze()})}})}componentDidMount(){this.mounted=!0,this.getPopupContainer=this.props.getPopupContainer||this.context.getPopupContainer||Cn,this.foundation.init()}componentWillUnmount(){this.mounted=!1,this.foundation.destroy()}focusTrigger(){this.foundation.focusTrigger()}rePosition(){return this.foundation.calcPosition()}componentDidUpdate(e,t){fe(this.props.mouseLeaveDelay<this.props.mouseEnterDelay,"[Semi Tooltip] 'mouseLeaveDelay' cannot be less than 'mouseEnterDelay', which may cause the dropdown layer to not be hidden."),e.visible!==this.props.visible&&(["hover","focus"].includes(this.props.trigger)?this.props.visible?this.foundation.delayShow():this.foundation.delayHide():this.props.visible?this.foundation.show():this.foundation.hide()),(0,Me.Z)(e.rePosKey,this.props.rePosKey)||this.rePosition()}render(){const{isInsert:e,triggerEventSet:t,visible:n,id:i}=this.state,{wrapWhenSpecial:s,role:o,trigger:a}=this.props;let{children:l}=this.props;const c=Object.assign({},ae(l,"props.style")),u={};if(s){const e=this.isSpecial(l);e?(c.pointerEvents="none",e===Jt.STATUS_DISABLED&&(u.cursor="not-allowed"),l=(0,r.cloneElement)(l,{style:c}),"custom"!==a&&(l=this.wrapSpan(l)),this.isWrapped=!0):(0,r.isValidElement)(l)||(l=this.wrapSpan(l),this.isWrapped=!0)}let d={};"dialog"===o?(d["aria-expanded"]=n?"true":"false",d["aria-haspopup"]="dialog",d["aria-controls"]=i):d["aria-describedby"]=i;const h=r.cloneElement(l,Object.assign(Object.assign(Object.assign(Object.assign({},d),l.props),this.mergeEvents(l.props,t)),{style:Object.assign(Object.assign({},ae(l,"props.style")),u),className:I()(ae(l,"props.className")),ref:e=>{this.triggerEl.current=e;const{ref:t}=l;"function"==typeof t?t(e):t&&"object"==typeof t&&(t.current=e)},tabIndex:l.props.tabIndex||0,"data-popupid":i}));return r.createElement(r.Fragment,null,e?this.renderPortal():null,h)}}kn.contextType=Ve,kn.propTypes={children:R().node,motion:R().bool,autoAdjustOverflow:R().bool,position:R().oneOf(Sn),getPopupContainer:R().func,mouseEnterDelay:R().number,mouseLeaveDelay:R().number,trigger:R().oneOf(xn).isRequired,className:R().string,wrapperClassName:R().string,clickToHide:R().bool,clickTriggerToHide:R().bool,visible:R().bool,style:R().object,content:R().oneOfType([R().node,R().func]),prefixCls:R().string,onVisibleChange:R().func,onClickOutSide:R().func,spacing:R().oneOfType([R().number,R().object]),margin:R().oneOfType([R().number,R().object]),showArrow:R().oneOfType([R().bool,R().node]),zIndex:R().number,rePosKey:R().oneOfType([R().string,R().number]),arrowBounding:yn,transformFromCenter:R().bool,arrowPointAtCenter:R().bool,stopPropagation:R().bool,role:R().string,wrapWhenSpecial:R().bool,guardFocus:R().bool,returnFocusOnClose:R().bool,preventScroll:R().bool,keepDOM:R().bool},kn.defaultProps={arrowBounding:Qt.ARROW_BOUNDING,autoAdjustOverflow:!0,arrowPointAtCenter:!0,trigger:"hover",transformFromCenter:!0,position:"top",prefixCls:wn,role:"tooltip",mouseEnterDelay:Qt.MOUSE_ENTER_DELAY,mouseLeaveDelay:Qt.MOUSE_LEAVE_DELAY,motion:!0,onVisibleChange:G,onClickOutSide:G,spacing:Qt.SPACING,margin:Qt.MARGIN,showArrow:!0,wrapWhenSpecial:!0,zIndex:Qt.DEFAULT_Z_INDEX,closeOnEsc:!1,guardFocus:!1,returnFocusOnClose:!1,onEscKeyDown:G,disableFocusListener:!1,disableArrowKeyDown:!1,keepDOM:!1};var On=n(42454),Tn=n.n(On);const In=r.createContext(null);var zn={lessThanXSeconds:{one:"\u4e0d\u5230 1 \u79d2",other:"\u4e0d\u5230 {{count}} \u79d2"},xSeconds:{one:"1 \u79d2",other:"{{count}} \u79d2"},halfAMinute:"\u534a\u5206\u949f",lessThanXMinutes:{one:"\u4e0d\u5230 1 \u5206\u949f",other:"\u4e0d\u5230 {{count}} \u5206\u949f"},xMinutes:{one:"1 \u5206\u949f",other:"{{count}} \u5206\u949f"},xHours:{one:"1 \u5c0f\u65f6",other:"{{count}} \u5c0f\u65f6"},aboutXHours:{one:"\u5927\u7ea6 1 \u5c0f\u65f6",other:"\u5927\u7ea6 {{count}} \u5c0f\u65f6"},xDays:{one:"1 \u5929",other:"{{count}} \u5929"},aboutXWeeks:{one:"\u5927\u7ea6 1 \u4e2a\u661f\u671f",other:"\u5927\u7ea6 {{count}} \u4e2a\u661f\u671f"},xWeeks:{one:"1 \u4e2a\u661f\u671f",other:"{{count}} \u4e2a\u661f\u671f"},aboutXMonths:{one:"\u5927\u7ea6 1 \u4e2a\u6708",other:"\u5927\u7ea6 {{count}} \u4e2a\u6708"},xMonths:{one:"1 \u4e2a\u6708",other:"{{count}} \u4e2a\u6708"},aboutXYears:{one:"\u5927\u7ea6 1 \u5e74",other:"\u5927\u7ea6 {{count}} \u5e74"},xYears:{one:"1 \u5e74",other:"{{count}} \u5e74"},overXYears:{one:"\u8d85\u8fc7 1 \u5e74",other:"\u8d85\u8fc7 {{count}} \u5e74"},almostXYears:{one:"\u5c06\u8fd1 1 \u5e74",other:"\u5c06\u8fd1 {{count}} \u5e74"}};const Rn=function(e,t,n){var r,i=zn[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?r+"\u5185":r+"\u524d":r};function Dn(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Mn={date:Dn({formats:{full:"y'\u5e74'M'\u6708'd'\u65e5' EEEE",long:"y'\u5e74'M'\u6708'd'\u65e5'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:Dn({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:Dn({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};function Nn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}var jn=n(587);var Pn={};function An(){return Pn}function Ln(e,t){var n,r,i,s,o,a,l,c;Nn(1,arguments);var u=An(),d=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null!==(r=null!==(i=null!==(s=null==t?void 0:t.weekStartsOn)&&void 0!==s?s:null==t||null===(o=t.locale)||void 0===o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=function(e){Nn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,jn.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}(e),p=h.getUTCDay(),f=(p<d?7:0)+p-d;return h.setUTCDate(h.getUTCDate()-f),h.setUTCHours(0,0,0,0),h}function Fn(e,t,n){var r="eeee p";return function(e,t,n){Nn(2,arguments);var r=Ln(e,n),i=Ln(t,n);return r.getTime()===i.getTime()}(e,t,n)?r:e.getTime()>t.getTime()?"'\u4e0b\u4e2a'"+r:"'\u4e0a\u4e2a'"+r}var Un={lastWeek:Fn,yesterday:"'\u6628\u5929' p",today:"'\u4eca\u5929' p",tomorrow:"'\u660e\u5929' p",nextWeek:Fn,other:"PP p"};const Gn=function(e,t,n,r){var i=Un[e];return"function"==typeof i?i(t,n,r):i};function Bn(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=null!=n&&n.width?String(n.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var o=e.defaultWidth,a=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var Zn={ordinalNumber:function(e,t){var n=Number(e);switch(null==t?void 0:t.unit){case"date":return n.toString()+"\u65e5";case"hour":return n.toString()+"\u65f6";case"minute":return n.toString()+"\u5206";case"second":return n.toString()+"\u79d2";default:return"\u7b2c "+n.toString()}},era:Bn({values:{narrow:["\u524d","\u516c\u5143"],abbreviated:["\u524d","\u516c\u5143"],wide:["\u516c\u5143\u524d","\u516c\u5143"]},defaultWidth:"wide"}),quarter:Bn({values:{narrow:["1","2","3","4"],abbreviated:["\u7b2c\u4e00\u5b63","\u7b2c\u4e8c\u5b63","\u7b2c\u4e09\u5b63","\u7b2c\u56db\u5b63"],wide:["\u7b2c\u4e00\u5b63\u5ea6","\u7b2c\u4e8c\u5b63\u5ea6","\u7b2c\u4e09\u5b63\u5ea6","\u7b2c\u56db\u5b63\u5ea6"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Bn({values:{narrow:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"],abbreviated:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],wide:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},defaultWidth:"wide"}),day:Bn({values:{narrow:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],short:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],abbreviated:["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],wide:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"]},defaultWidth:"wide"}),dayPeriod:Bn({values:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultWidth:"wide",formattingValues:{narrow:{am:"\u4e0a",pm:"\u4e0b",midnight:"\u51cc\u6668",noon:"\u5348",morning:"\u65e9",afternoon:"\u4e0b\u5348",evening:"\u665a",night:"\u591c"},abbreviated:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"},wide:{am:"\u4e0a\u5348",pm:"\u4e0b\u5348",midnight:"\u51cc\u6668",noon:"\u4e2d\u5348",morning:"\u65e9\u6668",afternoon:"\u4e2d\u5348",evening:"\u665a\u4e0a",night:"\u591c\u95f4"}},defaultFormattingWidth:"wide"})};const Kn=Zn;function Xn(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;var o,a=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(a)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(a)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(a.length)}}}var Vn,Wn={ordinalNumber:(Vn={matchPattern:/^(\u7b2c\s*)?\d+(\u65e5|\u65f6|\u5206|\u79d2)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Vn.matchPattern);if(!n)return null;var r=n[0],i=e.match(Vn.parsePattern);if(!i)return null;var s=Vn.valueCallback?Vn.valueCallback(i[0]):i[0];return{value:s=t.valueCallback?t.valueCallback(s):s,rest:e.slice(r.length)}}),era:Xn({matchPatterns:{narrow:/^(\u524d)/i,abbreviated:/^(\u524d)/i,wide:/^(\u516c\u5143\u524d|\u516c\u5143)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(\u524d)/i,/^(\u516c\u5143)/i]},defaultParseWidth:"any"}),quarter:Xn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b/i,wide:/^\u7b2c[\u4e00\u4e8c\u4e09\u56db]\u523b\u949f/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|\u4e00)/i,/(2|\u4e8c)/i,/(3|\u4e09)/i,/(4|\u56db)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Xn({matchPatterns:{narrow:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])/i,abbreviated:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00]|\d|1[12])\u6708/i,wide:/^(\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d|\u5341[\u4e8c\u4e00])\u6708/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^\u4e00/i,/^\u4e8c/i,/^\u4e09/i,/^\u56db/i,/^\u4e94/i,/^\u516d/i,/^\u4e03/i,/^\u516b/i,/^\u4e5d/i,/^\u5341(?!(\u4e00|\u4e8c))/i,/^\u5341\u4e00/i,/^\u5341\u4e8c/i],any:[/^\u4e00|1/i,/^\u4e8c|2/i,/^\u4e09|3/i,/^\u56db|4/i,/^\u4e94|5/i,/^\u516d|6/i,/^\u4e03|7/i,/^\u516b|8/i,/^\u4e5d|9/i,/^\u5341(?!(\u4e00|\u4e8c))|10/i,/^\u5341\u4e00|11/i,/^\u5341\u4e8c|12/i]},defaultParseWidth:"any"}),day:Xn({matchPatterns:{narrow:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,short:/^[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,abbreviated:/^\u5468[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i,wide:/^\u661f\u671f[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u65e5]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/\u65e5/i,/\u4e00/i,/\u4e8c/i,/\u4e09/i,/\u56db/i,/\u4e94/i,/\u516d/i]},defaultParseWidth:"any"}),dayPeriod:Xn({matchPatterns:{any:/^(\u4e0a\u5348?|\u4e0b\u5348?|\u5348\u591c|[\u4e2d\u6b63]\u5348|\u65e9\u4e0a?|\u4e0b\u5348|\u665a\u4e0a?|\u51cc\u6668|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^\u4e0a\u5348?/i,pm:/^\u4e0b\u5348?/i,midnight:/^\u5348\u591c/i,noon:/^[\u4e2d\u6b63]\u5348/i,morning:/^\u65e9\u4e0a/i,afternoon:/^\u4e0b\u5348/i,evening:/^\u665a\u4e0a?/i,night:/^\u51cc\u6668/i}},defaultParseWidth:"any"})};const Hn={code:"zh-CN",dateFnsLocale:{code:"zh-CN",formatDistance:Rn,formatLong:Mn,formatRelative:Gn,localize:Kn,match:Wn,options:{weekStartsOn:1,firstWeekContainsDate:4}},Pagination:{pageSize:"\u6bcf\u9875\u6761\u6570\uff1a${pageSize}",total:"\u603b\u9875\u6570\uff1a${total}",jumpTo:"\u8df3\u81f3",page:"\u9875"},Modal:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},TimePicker:{placeholder:{time:"\u8bf7\u9009\u62e9\u65f6\u95f4",timeRange:"\u8bf7\u9009\u62e9\u65f6\u95f4\u8303\u56f4"},begin:"\u5f00\u59cb\u65f6\u95f4",end:"\u7ed3\u675f\u65f6\u95f4",hour:"\u65f6",minute:"\u5206",second:"\u79d2",AM:"\u4e0a\u5348",PM:"\u4e0b\u5348"},DatePicker:{placeholder:{date:"\u8bf7\u9009\u62e9\u65e5\u671f",dateTime:"\u8bf7\u9009\u62e9\u65e5\u671f\u53ca\u65f6\u95f4",dateRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],dateTimeRange:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"],monthRange:["\u5f00\u59cb\u6708\u4efd","\u7ed3\u675f\u6708\u4efd"]},presets:"\u5feb\u6377\u9009\u62e9",footer:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},selectDate:"\u8fd4\u56de\u9009\u62e9\u65e5\u671f",selectTime:"\u9009\u62e9\u65f6\u95f4",year:"\u5e74",month:"\u6708",day:"\u65e5",monthText:"${year}\u5e74 ${month}",months:{1:"1\u6708",2:"2\u6708",3:"3\u6708",4:"4\u6708",5:"5\u6708",6:"6\u6708",7:"7\u6708",8:"8\u6708",9:"9\u6708",10:"10\u6708",11:"11\u6708",12:"12\u6708"},fullMonths:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},weeks:{Mon:"\u4e00",Tue:"\u4e8c",Wed:"\u4e09",Thu:"\u56db",Fri:"\u4e94",Sat:"\u516d",Sun:"\u65e5"},localeFormatToken:{FORMAT_SWITCH_DATE:"yyyy-MM-dd"}},Navigation:{collapseText:"\u6536\u8d77\u4fa7\u8fb9\u680f",expandText:"\u5c55\u5f00\u4fa7\u8fb9\u680f"},Popconfirm:{confirm:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},Table:{emptyText:"\u6682\u65e0\u6570\u636e",pageText:"\u663e\u793a\u7b2c ${currentStart} \u6761-\u7b2c ${currentEnd} \u6761\uff0c\u5171 ${total} \u6761"},Select:{emptyText:"\u6682\u65e0\u6570\u636e",createText:"\u521b\u5efa"},Cascader:{emptyText:"\u6682\u65e0\u6570\u636e"},Tree:{emptyText:"\u6682\u65e0\u6570\u636e",searchPlaceholder:"\u641c\u7d22"},List:{emptyText:"\u6682\u65e0\u6570\u636e"},Calendar:{allDay:"\u5168\u5929",AM:"\u4e0a\u5348${time}\u65f6",PM:"\u4e0b\u5348${time}\u65f6",datestring:"\u65e5",remaining:"\u8fd8\u6709${remained}\u9879"},Upload:{mainText:"\u70b9\u51fb\u4e0a\u4f20\u6587\u4ef6\u6216\u62d6\u62fd\u6587\u4ef6\u5230\u8fd9\u91cc",illegalTips:"\u4e0d\u652f\u6301\u6b64\u7c7b\u578b\u6587\u4ef6",legalTips:"\u677e\u624b\u5f00\u59cb\u4e0a\u4f20",retry:"\u91cd\u8bd5",replace:"\u66ff\u6362\u6587\u4ef6",clear:"\u6e05\u7a7a",selectedFiles:"\u5df2\u9009\u62e9\u6587\u4ef6",illegalSize:"\u6587\u4ef6\u5c3a\u5bf8\u4e0d\u5408\u6cd5",fail:"\u4e0a\u4f20\u5931\u8d25"},TreeSelect:{searchPlaceholder:"\u641c\u7d22"},Typography:{copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00",collapse:"\u6536\u8d77"},Transfer:{emptyLeft:"\u6682\u65e0\u6570\u636e",emptySearch:"\u65e0\u641c\u7d22\u7ed3\u679c",emptyRight:"\u6682\u65e0\u5185\u5bb9\uff0c\u53ef\u4ece\u5de6\u4fa7\u52fe\u9009",placeholder:"\u641c\u7d22",clear:"\u6e05\u7a7a",selectAll:"\u5168\u9009",clearSelectAll:"\u53d6\u6d88\u5168\u9009",total:"\u603b\u4e2a\u6570\uff1a${total}",selected:"\u5df2\u9009\u4e2a\u6570\uff1a${total}"},Form:{optional:"\uff08\u53ef\u9009\uff09"},Image:{preview:"\u9884\u89c8",loading:"\u52a0\u8f7d\u4e2d",loadError:"\u52a0\u8f7d\u5931\u8d25",prevTip:"\u4e0a\u4e00\u5f20",nextTip:"\u4e0b\u4e00\u5f20",zoomInTip:"\u653e\u5927",zoomOutTip:"\u7f29\u5c0f",rotateTip:"\u65cb\u8f6c",downloadTip:"\u4e0b\u8f7d",adaptiveTip:"\u9002\u5e94\u9875\u9762",originTip:"\u539f\u59cb\u5c3a\u5bf8"}};class $n extends r.Component{renderChildren(e,t){const{componentName:n}=this.props;let r=e;(null==e?void 0:e.code)||(r=Hn);const i=ae(Hn,"dateFnsLocale"),s=ae(r,"dateFnsLocale",i);return t(r[n],r.code,s)}render(){const{children:e}=this.props;return r.createElement(Ve.Consumer,null,(t=>{let{locale:n}=t;return r.createElement(In.Consumer,null,(t=>this.renderChildren(n||t,e)))}))}}$n.propTypes={componentName:R().string.isRequired,children:R().any},$n.defaultProps={componentName:""};const Yn=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}),"tick");const Jn=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{d:"M7 4C7 2.89543 7.89543 2 9 2H20C21.1046 2 22 2.89543 22 4V15C22 16.1046 21.1046 17 20 17H19V8C19 6 18 5 16 5H7V4Z",fill:"currentColor"}),r.createElement("path",{d:"M5 7C3.89543 7 3 7.89543 3 9V19C3 20.1046 3.89543 21 5 21H15C16.1046 21 17 20.1046 17 19V9C17 7.89543 16.1046 7 15 7H5Z",fill:"currentColor"}))}),"copy"),Qn=We.PREFIX;class qn extends r.PureComponent{constructor(e){super(e),this.copy=e=>{const{content:t,duration:n,onCopy:r}=this.props,i=Tn()(t);r&&r(e,t,i),this.setCopied(t,n)},this.setCopied=(e,t)=>{this.setState({copied:!0,item:e}),this._timeId=setTimeout((()=>{this.resetCopied()}),1e3*t)},this.resetCopied=()=>{this._timeId&&(clearTimeout(this._timeId),this._timeId=null,this.setState({copied:!1,item:""}))},this.renderSuccessTip=()=>{const{successTip:e}=this.props;return void 0!==e?e:r.createElement($n,{componentName:"Typography"},(e=>r.createElement("span",null,r.createElement(Yn,null),e.copied)))},this.renderCopyIcon=()=>{const{icon:e}=this.props,t={role:"button",tabIndex:0,onClick:this.copy,onKeyPress:e=>pe(e)&&this.copy(e)},n=r.createElement("a",{className:`${Qn}-action-copy-icon`},r.createElement(Jn,Object.assign({onClick:this.copy},t)));return r.isValidElement(e)?r.cloneElement(e,t):n},this.state={copied:!1,item:""}}componentWillUnmount(){this._timeId&&(clearTimeout(this._timeId),this._timeId=null)}render(){const{style:e,className:t,forwardRef:n,copyTip:i}=this.props,{copied:s}=this.state,o=I()(t,{[`${Qn}-action-copy`]:!s,[`${Qn}-action-copied`]:s});return r.createElement($n,{componentName:"Typography"},(t=>r.createElement("span",{style:Object.assign({marginLeft:"4px"},e),className:o,ref:n},s?this.renderSuccessTip():r.createElement(kn,{content:void 0!==i?i:t.copy},this.renderCopyIcon()))))}}qn.propTypes={content:R().string,onCopy:R().func,successTip:R().node,copyTip:R().node,duration:R().number,style:R().object,className:R().string,icon:R().node},qn.defaultProps={content:"",onCopy:j,duration:3,style:{},className:""};const er=qn,tr={PREFIX:`${D}-popover`,ARROW:`${D}-popover-icon-arrow`},nr=["top","topLeft","topRight","left","leftTop","leftBottom","right","rightTop","rightBottom","bottom","bottomLeft","bottomRight","leftTopOver","rightTopOver"],rr=["hover","focus","click","custom","contextMenu"],ir={borderOpacity:"1",backgroundColor:"var(--semi-color-bg-3)",borderColor:"var(--semi-color-border)"},sr={ARROW_BOUNDING:Object.assign(Object.assign({},Qt.ARROW_BOUNDING),{offsetY:6,offsetX:0,height:8}),SPACING:4,SPACING_WITH_ARROW:10,DEFAULT_Z_INDEX:1030};var or=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ar=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t="",className:n,arrowStyle:i,popStyle:s}=e,o=or(e,["position","className","arrowStyle","popStyle"]),a=0===t.indexOf("top")||0===t.indexOf("bottom"),l=I()(n,tr.ARROW),c=ae(i,"borderOpacity",ir.borderOpacity),u=ae(i,"backgroundColor",ae(s,"backgroundColor",ir.backgroundColor)),d=ae(i,"borderColor",ae(s,"borderColor",ir.borderColor)),h=Object.assign(Object.assign({},o),{width:sr.ARROW_BOUNDING.width,height:sr.ARROW_BOUNDING.height,xmlns:"http://www.w3.org/2000/svg",className:l});return a?r.createElement("svg",Object.assign({},h),r.createElement("path",{d:"M0 0.5L0 1.5C4 1.5, 5.5 3, 7.5 5S10,8 12,8S14.5 7, 16.5 5S20,1.5 24,1.5L24 0.5L0 0.5z",fill:d,opacity:c}),r.createElement("path",{d:"M0 0L0 1C4 1, 5.5 2, 7.5 4S10,7 12,7S14.5  6, 16.5 4S20,1 24,1L24 0L0 0z",fill:u})):r.createElement("svg",Object.assign({},h),r.createElement("path",{d:"M0.5 0L1.5 0C1.5 4, 3 5.5, 5 7.5S8,10 8,12S7 14.5, 5 16.5S1.5,20 1.5,24L0.5 24L0.5 0z",fill:d,opacity:c}),r.createElement("path",{d:"M0 0L1 0C1 4, 2 5.5, 4 7.5S7,10 7,12S6 14.5, 4 16.5S1,20 1,24L0 24L0 0z",fill:u}))};ar.propTypes={position:R().string,className:R().string,arrowStyle:R().object,popStyle:R().object};const lr=ar;var cr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ur=nr,dr=rr;class hr extends r.PureComponent{constructor(e){super(e),this.focusTrigger=()=>{var e;null===(e=this.tooltipRef.current)||void 0===e||e.focusTrigger()},this.renderPopCard=e=>{let{initialFocusRef:t}=e;const{content:n,contentClassName:i,prefixCls:s}=this.props,{direction:o}=this.context,a=I()(s,i,{[`${s}-rtl`]:"rtl"===o}),l=this.renderContentNode({initialFocusRef:t,content:n});return r.createElement("div",{className:a},r.createElement("div",{className:`${s}-content`},l))},this.renderContentNode=e=>{const{initialFocusRef:t,content:n}=e,r={initialFocusRef:t};return(0,Xe.Z)(n)?n(r):n},this.tooltipRef=r.createRef()}render(){const e=this.props,{children:t,prefixCls:n,showArrow:i,arrowStyle:s={},arrowBounding:o,position:a,style:l,trigger:c}=e,u=cr(e,["children","prefixCls","showArrow","arrowStyle","arrowBounding","position","style","trigger"]);let{spacing:d}=this.props;const h={position:a,className:"",popStyle:l,arrowStyle:s},p=!!i&&r.createElement(lr,Object.assign({},h));B(d)&&(d=i?sr.SPACING_WITH_ARROW:sr.SPACING);const f="click"===c||"custom"===c?"dialog":"tooltip";return r.createElement(kn,Object.assign({guardFocus:!0,ref:this.tooltipRef},u,{trigger:c,position:a,style:l,content:this.renderPopCard,prefixCls:n,spacing:d,showArrow:p,arrowBounding:o,role:f}),t)}}hr.contextType=Ve,hr.propTypes={children:R().node,content:R().oneOfType([R().node,R().func]),visible:R().bool,autoAdjustOverflow:R().bool,motion:R().bool,position:R().oneOf(ur),margin:R().oneOfType([R().number,R().object]),mouseEnterDelay:R().number,mouseLeaveDelay:R().number,trigger:R().oneOf(dr).isRequired,contentClassName:R().oneOfType([R().string,R().array]),onVisibleChange:R().func,onClickOutSide:R().func,style:R().object,spacing:R().oneOfType([R().number,R().object]),zIndex:R().number,showArrow:R().bool,arrowStyle:R().shape({borderColor:R().string,backgroundColor:R().string,borderOpacity:R().oneOfType([R().string,R().number])}),arrowPointAtCenter:R().bool,arrowBounding:R().object,prefixCls:R().string,guardFocus:R().bool,disableArrowKeyDown:R().bool},hr.defaultProps={arrowBounding:sr.ARROW_BOUNDING,showArrow:!1,autoAdjustOverflow:!0,zIndex:sr.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",cancelText:"No",okText:"Yes",position:"bottom",prefixCls:tr.PREFIX,onClickOutSide:G,onEscKeyDown:G,closeOnEsc:!0,returnFocusOnClose:!0,guardFocus:!0,disableFocusListener:!0};const pr=hr;let fr;function gr(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}const mr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;if(0===n.length)return"";fr||(fr=document.createElement("div"),fr.setAttribute("aria-hidden","true"),document.body.appendChild(fr));const l=window.getComputedStyle(e),c=(u=l,Array.prototype.slice.apply(u).map((e=>`${e}: ${u.getPropertyValue(e)};`)).join(""));var u;const d=gr(l.lineHeight),h=Math.round(d*(t+1)+gr(l.paddingTop)+gr(l.paddingBottom));function p(){const e=fr.scrollWidth<=fr.offsetWidth,n=fr.scrollHeight<h;return 1===t?e&&n:n}fr.setAttribute("style",c),fr.style.position="fixed",fr.style.left="0",fr.style.height="auto",fr.style.top="-999999px",fr.style.zIndex="-1000",fr.style.textOverflow="clip",fr.style.webkitLineClamp="none",Zt.render(r.createElement(r.Fragment,null),fr);const f=document.createElement("span"),g=document.createTextNode(n);if(f.appendChild(g),o.length>0){const e=document.createTextNode(o);f.appendChild(e)}function m(e,t){const n=e.length;return t?"end"===a?e.slice(0,t)+s:e.slice(0,t)+s+e.slice(n-t,n):s}fr.appendChild(f),Object.values(O(i,"expand")).map((e=>e&&fr.appendChild(e.cloneNode(!0))));let y=n;return p()||(fr.innerHTML="",fr.appendChild(f),Object.values(i).map((e=>e&&fr.appendChild(e.cloneNode(!0)))),y=function e(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.length,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const a=Math.floor((r+i)/2),l=m(n,a);if(t.textContent=l,r>=i-1&&i>0)for(let s=i;s>=r;s-=1){const e=m(n,s);if(t.textContent=e,p())return e}else if(0===i)return s;return p()?e(t,n,a,i,a):e(t,n,r,a,o)}(g,n,0,"middle"===a?Math.floor(n.length/2):n.length)),fr.innerHTML="",y};var yr=n(75107);class br extends Oe{constructor(e){super(e),this.getElement=()=>{try{return(0,Zt.findDOMNode)(this.childNode||this)}catch(e){return null}},this.mergeRef=(e,t)=>{this.childNode=t,"function"==typeof e?e(t):"object"==typeof e&&e&&"current"in e&&(e.current=t)},this.observer=new yr.Z(e.onResize)}componentDidMount(){this.observeElement()}componentDidUpdate(e){this.observeElement(this.props.observeParent!==e.observeParent)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null,this.element=null)}observeElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getElement();this.observer||(this.observer=new yr.Z(this.props.onResize)),t&&t instanceof Element?(t!==this.element||e)&&(this.observer.disconnect(),this.element=t,this.observer.observe(t),this.props.observeParent&&t.parentNode&&t.parentNode.ownerDocument&&t.parentNode.ownerDocument.defaultView&&t.parentNode instanceof t.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=t.parentNode,this.observer.observe(this._parentNode))):this.observer.disconnect()}render(){const e=r.Children.only(this.props.children),{ref:t}=e;return r.cloneElement(e,{ref:e=>this.mergeRef(t,e)})}}br.propTypes={onResize:R().func,observeParent:R().bool},br.defaultProps={onResize:()=>{},observeParent:!1};var vr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const _r=We.PREFIX;class wr extends r.Component{constructor(e){super(e),this.onResize=()=>{this.rafId&&window.cancelAnimationFrame(this.rafId),this.rafId=window.requestAnimationFrame(this.getEllipsisState.bind(this))},this.canUseCSSEllipsis=()=>{const{copyable:e}=this.props,{expandable:t,expandText:n,pos:r,suffix:i}=this.getEllipsisOpt();return!t&&q(n)&&!e&&"end"===r&&!i.length},this.shouldTruncated=e=>{if(!e||e<1)return!1;return e<=1?this.wrapperRef.current.scrollWidth>this.wrapperRef.current.offsetWidth:this.wrapperRef.current.scrollHeight>this.wrapperRef.current.offsetHeight},this.showTooltip=()=>{var e,t;const{isOverflowed:n,isTruncated:r,expanded:i}=this.state,{showTooltip:s,expandable:o,expandText:a}=this.getEllipsisOpt(),l=!i&&(n||r),c=!o&&q(a)&&l&&s;if(!c)return c;const u={type:"tooltip"};return"object"==typeof s?s.type&&"popover"===s.type.toLowerCase()?zt({opts:{showArrow:!0}},s,{opts:{className:I()({[`${_r}-ellipsis-popover`]:!0,[null===(e=null==s?void 0:s.opts)||void 0===e?void 0:e.className]:Boolean(null===(t=null==s?void 0:s.opts)||void 0===t?void 0:t.className)})}}):Object.assign(Object.assign({},u),s):u},this.toggleOverflow=e=>{const{onExpand:t,expandable:n,collapsible:r}=this.getEllipsisOpt(),{expanded:i}=this.state;t&&t(!i,e),(n&&!i||r&&i)&&this.setState({expanded:!i})},this.getEllipsisOpt=()=>{const{ellipsis:e}=this.props;if(!e)return{};return Object.assign({rows:1,expandable:!1,pos:"end",suffix:"",showTooltip:!1,collapsible:!1,expandText:e.expandable?this.expandStr:void 0,collapseText:e.collapsible?this.collapseStr:void 0},"object"==typeof e?e:null)},this.renderExpandable=()=>{const{expanded:e,isTruncated:t}=this.state;if(!t)return null;const{expandText:n,expandable:i,collapseText:s,collapsible:o}=this.getEllipsisOpt(),a=!i&&q(n),l=!o&&q(s);let c;return e||a?e&&!l&&(c=s):c=n,a&&l?null:r.createElement("a",{role:"button",tabIndex:0,className:`${_r}-ellipsis-expand`,key:"expand",ref:this.expandRef,"aria-label":c,onClick:this.toggleOverflow,onKeyPress:e=>pe(e)&&this.toggleOverflow(e)},c)},this.getEllipsisStyle=()=>{const{ellipsis:e,component:t}=this.props;if(!e)return{ellipsisCls:"",ellipsisStyle:{}};const{rows:n}=this.getEllipsisOpt(),{expanded:r}=this.state,i=!r&&this.canUseCSSEllipsis();return{ellipsisCls:I()({[`${_r}-ellipsis`]:!0,[`${_r}-ellipsis-single-line`]:1===n,[`${_r}-ellipsis-multiple-line`]:n>1,[`${_r}-ellipsis-multiple-line-text`]:n>1&&"span"===t,[`${_r}-ellipsis-overflow-ellipsis`]:1===n&&i,[`${_r}-ellipsis-overflow-ellipsis-text`]:1===n&&i&&"span"===t}),ellipsisStyle:i&&n>1?{WebkitLineClamp:n}:{}}},this.renderEllipsisText=e=>{const{suffix:t}=e,{children:n}=this.props,{isTruncated:i,expanded:s,ellipsisContent:o}=this.state;return s||!i?r.createElement(r.Fragment,null,n,t&&t.length?t:null):r.createElement("span",null,o,t)},this.state={editable:!1,copied:!1,isOverflowed:!0,ellipsisContent:e.children,expanded:!1,isTruncated:!0,prevChildren:null},this.wrapperRef=r.createRef(),this.expandRef=r.createRef(),this.copyRef=r.createRef()}componentDidMount(){this.props.ellipsis&&this.onResize()}static getDerivedStateFromProps(e,t){const{prevChildren:n}=t,r={};return r.prevChildren=e.children,e.ellipsis&&n!==e.children&&(r.isOverflowed=!0,r.ellipsisContent=e.children,r.expanded=!1,r.isTruncated=!0),r}componentDidUpdate(e){this.props.children!==e.children&&(this.forceUpdate(),this.props.ellipsis&&this.onResize())}componentWillUnmount(){this.rafId&&window.cancelAnimationFrame(this.rafId)}getEllipsisState(){const{rows:e,suffix:t,pos:n}=this.getEllipsisOpt(),{children:r}=this.props;if(!this.wrapperRef||!this.wrapperRef.current)return this.onResize(),!1;const{expanded:i}=this.state,s=this.canUseCSSEllipsis();if(qe(r))return void this.setState({isTruncated:!1,isOverflowed:!1});if(fe("children"in this.props&&"string"!=typeof r,"[Semi Typography] Only children with pure text could be used with ellipsis at this moment."),!e||e<0||i)return;if(s){const t=this.shouldTruncated(e);return void this.setState({isOverflowed:t,isTruncated:!1})}const o={expand:this.expandRef.current,copy:this.copyRef&&this.copyRef.current},a=mr(this.wrapperRef.current,e,String(r),o,"...",t,n);this.setState({isOverflowed:!1,ellipsisContent:a,isTruncated:r!==a})}renderOperations(){return r.createElement(r.Fragment,null,this.renderExpandable(),this.renderCopy())}renderCopy(){var e;const{copyable:t,children:n}=this.props;if(!t)return null;const i=null!==(e=null==t?void 0:t.content)&&void 0!==e?e:n;let s,o=!1;Array.isArray(i)?(s="",i.forEach((e=>{"object"==typeof e&&(o=!0),s+=String(e)}))):("object"!=typeof i||(o=!0),s=String(i)),fe(o,"Content to be copied in Typography is a object, it will case a [object Object] mistake when copy to clipboard.");const a=Object.assign({content:s,duration:3},"object"==typeof t?t:null);return r.createElement(er,Object.assign({},a,{forwardRef:this.copyRef}))}renderIcon(){const{icon:e,size:t}=this.props;if(!e)return null;const n="small"===t?"small":"default";return r.createElement("span",{className:`${_r}-icon`,"x-semi-prop":"icon"},an(e)?r.cloneElement(e,{size:n}):e)}renderContent(){const e=this.props,{component:t,children:n,className:i,type:s,spacing:o,disabled:a,style:l,ellipsis:c,icon:u,size:d,link:h,heading:p,weight:f}=e,g=vr(e,["component","children","className","type","spacing","disabled","style","ellipsis","icon","size","link","heading","weight"]),m=O(g,["strong","editable","mark","copyable","underline","code","delete"]),y=this.renderIcon(),b=this.getEllipsisOpt(),{ellipsisCls:v,ellipsisStyle:_}=this.getEllipsisStyle();let w=c?this.renderEllipsisText(b):n;const S=I()({[`${_r}-link-text`]:h,[`${_r}-link-underline`]:this.props.underline&&h});w=((e,t)=>{const{mark:n,code:i,underline:s,strong:o,link:a,disabled:l}=e;let c=t;const u=(e,t)=>{let n={};e&&("object"==typeof e&&(n=Object.assign({},e)),c=r.createElement(t,n,c))};return u(n,"mark"),u(i,"code"),u(s&&!a,"u"),u(o,"strong"),u(e.delete,"del"),u(a,l?"span":"a"),c})(this.props,r.createElement(r.Fragment,null,y,this.props.link?r.createElement("span",{className:S},w):w));const x=tt(p)&&/^h[1-6]$/.test(p),E=I()(i,v,{[`${_r}-${s}`]:s&&!h,[`${_r}-${d}`]:d,[`${_r}-link`]:h,[`${_r}-disabled`]:a,[`${_r}-${o}`]:o,[`${_r}-${p}`]:x,[`${_r}-${p}-weight-${f}`]:x&&f&&isNaN(Number(f))}),C=Object.assign(Object.assign({},isNaN(Number(f))?{}:{fontWeight:f}),l);return r.createElement(Qe,Object.assign({className:E,style:Object.assign(Object.assign({},C),_),component:t,forwardRef:this.wrapperRef},m),w,this.renderOperations())}renderTipWrapper(){const{children:e}=this.props,t=this.showTooltip(),n=this.renderContent();if(t){const{type:i,opts:s,renderTooltip:o}=t;return(0,Xe.Z)(o)?o(e,n):"popover"===i.toLowerCase()?r.createElement(pr,Object.assign({content:e,position:"top"},s),n):r.createElement(kn,Object.assign({content:e,position:"top"},s),n)}return n}render(){const e=r.createElement($n,{componentName:"Typography"},(e=>(this.expandStr=e.expand,this.collapseStr=e.collapse,this.renderTipWrapper())));return this.props.ellipsis?r.createElement(br,{onResize:this.onResize,observeParent:!0},e):e}}wr.propTypes={children:R().node,copyable:R().oneOfType([R().shape({text:R().string,onCopy:R().func,successTip:R().node,copyTip:R().node}),R().bool]),delete:R().bool,disabled:R().bool,ellipsis:R().oneOfType([R().shape({rows:R().number,expandable:R().bool,expandText:R().string,onExpand:R().func,suffix:R().string,showTooltip:R().oneOfType([R().shape({type:R().string,opts:R().object}),R().bool]),collapsible:R().bool,collapseText:R().string,pos:R().oneOf(["end","middle"])}),R().bool]),mark:R().bool,underline:R().bool,link:R().oneOfType([R().object,R().bool]),spacing:R().oneOf(He.SPACING),strong:R().bool,size:R().oneOf(He.SIZE),type:R().oneOf(He.TYPE),style:R().object,className:R().string,icon:R().oneOfType([R().node,R().string]),heading:R().string,component:R().string},wr.defaultProps={children:null,copyable:!1,delete:!1,disabled:!1,ellipsis:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",spacing:"normal",size:"normal",style:{},className:""};class Sr extends r.PureComponent{render(){return r.createElement(wr,Object.assign({component:"span"},this.props))}}Sr.propTypes={copyable:R().oneOfType([R().object,R().bool]),delete:R().bool,disabled:R().bool,icon:R().oneOfType([R().node,R().string]),ellipsis:R().oneOfType([R().object,R().bool]),mark:R().bool,underline:R().bool,link:R().oneOfType([R().object,R().bool]),strong:R().bool,type:R().oneOf(He.TYPE),size:R().oneOf(He.SIZE),style:R().object,className:R().string,code:R().bool,component:R().string},Sr.defaultProps={copyable:!1,delete:!1,disabled:!1,icon:"",ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};var xr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Er extends r.PureComponent{render(){const e=this.props,{heading:t}=e,n=xr(e,["heading"]),i=-1!==He.HEADING.indexOf(t)?`h${t}`:"h1";return r.createElement(wr,Object.assign({component:i,heading:i},n))}}Er.propTypes={copyable:R().oneOfType([R().object,R().bool]),delete:R().bool,disabled:R().bool,ellipsis:R().oneOfType([R().object,R().bool]),mark:R().bool,link:R().oneOfType([R().object,R().bool]),underline:R().bool,strong:R().bool,type:R().oneOf(He.TYPE),heading:R().oneOf(He.HEADING),style:R().object,className:R().string,component:R().string,weight:R().oneOfType([R().oneOf(He.WEIGHT),R().number])},Er.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",heading:1,style:{},className:""};const Cr=We.PREFIX;class kr extends r.PureComponent{render(){const{className:e}=this.props,t=I()(e,`${Cr}-paragraph`);return r.createElement(wr,Object.assign({component:"p"},this.props,{className:t}))}}kr.propTypes={copyable:R().oneOfType([R().object,R().bool]),delete:R().bool,disabled:R().bool,ellipsis:R().oneOfType([R().object,R().bool]),mark:R().bool,link:R().oneOfType([R().object,R().bool]),underline:R().bool,strong:R().bool,type:R().oneOf(He.TYPE),size:R().oneOf(He.SIZE),spacing:R().oneOf(He.SPACING),style:R().object,className:R().string,component:R().string},kr.defaultProps={copyable:!1,delete:!1,disabled:!1,ellipsis:!1,mark:!1,underline:!1,strong:!1,link:!1,type:"primary",size:"normal",spacing:"normal",style:{},className:""};class Or{constructor(e,t,n,r,i){this.ruleMethods={"bytes-decimal":e=>{let t=0;for(;e>=1e3;)e/=1e3,t++;return`${this.truncatePrecision(e)} ${["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`},"bytes-binary":e=>{let t=0;for(;e>=1024;)e/=1024,t++;return`${this.truncatePrecision(e)} ${["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][t]}`},percentages:e=>`${this.truncatePrecision(100*e)}%`,exponential:e=>{const t=e.toExponential(this.precision+2).split("e");return`${this.truncatePrecision(Number(t[0]))}e${t[1]}`}},this.truncateMethods={ceil:Math.ceil,floor:Math.floor,round:Math.round},this.isDiyParser=void 0!==i,this.content=e,this.rule=t,this.precision=n,this.truncate=r,this.parser=i}format(){return this.isDiyParser?this.parser(this.content):"text"===this.rule?Tr(this.content).map((e=>Ir(e)?this.truncatePrecision(e):e)).join(""):"numbers"===this.rule?Tr(this.content).filter((e=>Ir(e))).map((e=>this.truncatePrecision(e))).join(","):Tr(this.content).map((e=>Ir(e)?this.ruleMethods[this.rule](Number(e)):e)).join("")}truncatePrecision(e){const t=this.truncateMethods[this.truncate](Number(e)*Math.pow(10,this.precision))/Math.pow(10,this.precision),n=t.toString().split(".");if(1===n.length)return t.toFixed(this.precision);const r=n[1].length;return r<this.precision?`${n[0]}.${n[1]}${"0".repeat(this.precision-r)}`:t.toString()}}function Tr(e){return e.match(/(-?[0-9]*\.?[0-9]+([eE]-?[0-9]+)?)|([^-\d\.]+)/g)||[]}function Ir(e){return!(isNaN(Number(e))||""===e.replace(/\s+/g,""))}class zr extends r.PureComponent{formatNodeDFS(e){return Array.isArray(e)||(e=[e]),1===(e=e.map((e=>"string"==typeof e||"number"==typeof e?new Or(String(e),this.props.rule,this.props.precision,this.props.truncate,this.props.parser).format():"function"==typeof e?this.formatNodeDFS(e()):"object"==typeof e&&"children"in e.props?Object.assign(Object.assign({},e),{props:Object.assign(Object.assign({},e.props),{children:this.formatNodeDFS(e.props.children)})}):e))).length?e[0]:e}render(){const e=Object.assign({},this.props);return delete e.rule,delete e.parser,e.children=this.formatNodeDFS(this.props.children),r.createElement(wr,Object.assign({component:"span"},e))}}zr.propTypes={rule:R().oneOf(He.RULE),precision:R().number,truncate:R().oneOf(He.TRUNCATE),parser:R().func,copyable:R().oneOfType([R().object,R().bool]),delete:R().bool,disabled:R().bool,icon:R().oneOfType([R().node,R().string]),mark:R().bool,underline:R().bool,link:R().oneOfType([R().object,R().bool]),strong:R().bool,type:R().oneOf(He.TYPE),size:R().oneOf(He.SIZE),style:R().object,className:R().string,code:R().bool,component:R().string},zr.defaultProps={rule:"text",precision:0,truncate:"round",parser:void 0,copyable:!1,delete:!1,icon:"",mark:!1,underline:!1,strong:!1,link:!1,type:"primary",style:{},size:"normal",className:""};const Rr=Qe;Rr.Text=Sr,Rr.Title=Er,Rr.Paragraph=kr,Rr.Numeral=zr;const Dr=Rr;class Mr extends ue{constructor(e){super(Object.assign(Object.assign({},Mr.defaultAdapter),e)),this.handleKeyDown=e=>{const{closeOnEsc:t}=this.getProps();if(t&&e.keyCode===he.ESC)return e.stopPropagation(),void this.close(e)}}destroy(){this.handleKeyDownEventListenerUnmount(),this.modalDialogBlur(),this.prevFocusElementReFocus()}handleDialogMouseDown(){this._adapter.notifyDialogMouseDown()}handleMaskMouseUp(){this._adapter.notifyDialogMouseUp()}handleKeyDownEventListenerMount(){this._adapter.addKeyDownEventListener()}handleKeyDownEventListenerUnmount(){this._adapter.removeKeyDownEventListener()}getMouseState(){this._adapter.getMouseState()}handleMaskClick(e){const{dialogMouseDown:t}=this.getStates();e.target!==e.currentTarget||t||this.close(e)}close(e){this._adapter.notifyClose(e)}modalDialogFocus(){this._adapter.modalDialogFocus()}modalDialogBlur(){this._adapter.modalDialogBlur()}prevFocusElementReFocus(){this._adapter.prevFocusElementReFocus()}}const Nr=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}),"close");var jr=n(13589);const Pr=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1};const Ar=function(e){return e!=e};const Lr=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const Fr=function(e,t,n){return t==t?Lr(e,t,n):Pr(e,Ar,n)};const Ur=function(e,t){return!!(null==e?0:e.length)&&Fr(e,t,0)>-1};const Gr=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var Br=n(51211),Zr=n(76208);const Kr=function(e,t,n,r){var s=-1,o=Ur,a=!0,l=e.length,c=[],u=t.length;if(!l)return c;n&&(t=(0,i.Z)(t,(0,Br.Z)(n))),r?(o=Gr,a=!1):t.length>=200&&(o=Zr.Z,a=!1,t=new jr.Z(t));e:for(;++s<l;){var d=e[s],h=null==n?d:n(d);if(d=r||0!==d?d:0,a&&h==h){for(var p=u;p--;)if(t[p]===h)continue e;c.push(d)}else o(t,h,r)||c.push(d)}return c};var Xr=kt((function(e,t){return ft(e)?Kr(e,t):[]}));const Vr=Xr;class Wr{constructor(e,t){var n;this.addFocusRedirectListener=e=>(this.focusRedirectListenerList.push(e),()=>this.removeFocusRedirectListener(e)),this.removeFocusRedirectListener=e=>{this.focusRedirectListenerList=Vr(this.focusRedirectListenerList,e)},this.destroy=()=>{var e;null===(e=this.container)||void 0===e||e.removeEventListener("keydown",this.onKeyPress)},this.shouldFocusRedirect=e=>{if(!this.enable)return!1;for(const t of this.focusRedirectListenerList){if(!t(e))return!1}return!0},this.focusElement=(e,t)=>{const{preventScroll:n}=this.options;null==e||e.focus({preventScroll:n}),t.preventDefault()},this.onKeyPress=e=>{if(e&&"Tab"===e.key){const t=Wr.getFocusableElements(this.container);t.length&&(e.shiftKey?this.handleContainerShiftTabKeyDown(t,e):this.handleContainerTabKeyDown(t,e))}},this.handleContainerTabKeyDown=(e,t)=>{const n=Wr.getActiveElement(),r=e[e.length-1]===n,i=e[0];r&&this.shouldFocusRedirect(i)&&this.focusElement(i,t)},this.handleContainerShiftTabKeyDown=(e,t)=>{const n=Wr.getActiveElement(),r=e[0]===n,i=e[e.length-1];r&&this.shouldFocusRedirect(i)&&this.focusElement(i,t)},Object.freeze(t),this.container=e,this.options=t,this.enable=null===(n=null==t?void 0:t.enable)||void 0===n||n,this.focusRedirectListenerList=(null==t?void 0:t.onFocusRedirectListener)?Array.isArray(t.onFocusRedirectListener)?[...t.onFocusRedirectListener]:[t.onFocusRedirectListener]:[],this.container.addEventListener("keydown",this.onKeyPress)}get enable(){return this._enable}set enable(e){this._enable=e}static getFocusableElements(e){if(!qt(e))return[];const t=["input:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","a[href]:not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","area[href]:not([tabindex='-1'])","iframe:not([tabindex='-1'])","object:not([tabindex='-1'])","*[tabindex]:not([tabindex='-1'])","*[contenteditable]:not([tabindex='-1'])"].join(",");return Array.from(e.querySelectorAll(t))}static getActiveElement(){return document?document.activeElement:null}}const Hr=Wr;var $r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};let Yr=0;class Jr extends Oe{constructor(e){super(e),this.onKeyDown=e=>{this.foundation.handleKeyDown(e)},this.onDialogMouseDown=()=>{this.foundation.handleDialogMouseDown()},this.onMaskMouseUp=()=>{this.foundation.handleMaskMouseUp()},this.onMaskClick=e=>{this.foundation.handleMaskClick(e)},this.close=e=>{this.foundation.close(e)},this.getMaskElement=()=>{const e=$r(this.props,[]),{mask:t,maskClassName:n}=e;if(t){const t=I()(`${Ue}-mask`,{});return r.createElement("div",Object.assign({key:"mask"},this.props.maskExtraProps,{className:I()(t,n),style:e.maskStyle}))}return null},this.renderCloseBtn=()=>{const{closable:e,closeIcon:t}=this.props;let n;if(e){const e=t||r.createElement(Nr,{"x-semi-prop":"closeIcon"});n=r.createElement($,{"aria-label":"close",className:`${Ue}-close`,key:"close-btn",onClick:this.close,type:"tertiary",icon:e,theme:"borderless",size:"small"})}return n},this.renderIcon=()=>{const{icon:e}=this.props;return e?r.createElement("span",{className:`${Ue}-icon-wrapper`,"x-semi-prop":"icon"},e):null},this.renderHeader=()=>{if("header"in this.props)return this.props.header;const{title:e}=this.props,t=this.renderCloseBtn(),n=this.renderIcon();return null==e?null:r.createElement("div",{className:`${Ue}-header`},n,r.createElement(Dr.Title,{heading:5,className:`${Ue}-title`,id:`${Ue}-title`,"x-semi-prop":"title"},e),t)},this.renderBody=()=>{const{bodyStyle:e,children:t,title:n}=this.props,i=I()(`${Ue}-body`,{[`${Ue}-withIcon`]:this.props.icon}),s=this.renderCloseBtn(),o=this.renderIcon();return null!=n||"header"in this.props?r.createElement("div",{className:i,id:`${Ue}-body`,style:e,"x-semi-prop":"children"},t):r.createElement("div",{className:`${Ue}-body-wrapper`},o,r.createElement("div",{className:i,style:e,"x-semi-prop":"children"},t),s)},this.getDialogElement=()=>{const e=$r(this.props,[]),t={},n=I()(`${Ue}`,{[`${Ue}-centered`]:e.centered,[`${Ue}-${e.size}`]:e.size});e.width&&(t.width=e.width),e.height&&(t.height=e.height),e.isFullScreen&&(t.width="100%",t.height="100%",t.margin="unset");const i=this.renderBody(),s=this.renderHeader(),o=e.footer?r.createElement("div",{className:`${Ue}-footer`,"x-semi-prop":"footer"},e.footer):null;return r.createElement("div",{key:"dialog-element",className:n,onMouseDown:this.onDialogMouseDown,style:Object.assign(Object.assign({},e.style),t),id:this.dialogId},r.createElement("div",{role:"dialog",ref:this.modalDialogRef,"aria-modal":"true","aria-labelledby":`${Ue}-title`,"aria-describedby":`${Ue}-body`,onAnimationEnd:e.onAnimationEnd,className:I()([`${Ue}-content`,e.contentClassName,{[`${Ue}-content-fullScreen`]:e.isFullScreen}])},s,i,o))},this.state={dialogMouseDown:!1,prevFocusElement:Hr.getActiveElement()},this.foundation=new Mr(this.adapter),this.dialogId="dialog-"+Yr++,this.modalDialogRef=r.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyClose:e=>{this.props.onClose(e)},notifyDialogMouseDown:()=>{this.setState({dialogMouseDown:!0})},notifyDialogMouseUp:()=>{this.state.dialogMouseDown&&(this.timeoutId=setTimeout((()=>{this.setState({dialogMouseDown:!1})}),0))},addKeyDownEventListener:()=>{this.props.closeOnEsc&&document.addEventListener("keydown",this.foundation.handleKeyDown)},removeKeyDownEventListener:()=>{this.props.closeOnEsc&&document.removeEventListener("keydown",this.foundation.handleKeyDown)},getMouseState:()=>this.state.dialogMouseDown,modalDialogFocus:()=>{var e,t,n;const{preventScroll:r}=this.props;let i;if(this.modalDialogRef){const t=Hr.getActiveElement();i=this.modalDialogRef.current.contains(t),null===(e=this.focusTrapHandle)||void 0===e||e.destroy(),this.focusTrapHandle=new Hr(this.modalDialogRef.current,{preventScroll:r})}i||null===(n=null===(t=this.modalDialogRef)||void 0===t?void 0:t.current)||void 0===n||n.focus({preventScroll:r})},modalDialogBlur:()=>{var e,t;null===(e=this.modalDialogRef)||void 0===e||e.current.blur(),null===(t=this.focusTrapHandle)||void 0===t||t.destroy()},prevFocusElementReFocus:()=>{const{prevFocusElement:e}=this.state,{preventScroll:t}=this.props,n=ae(e,"focus");(0,Xe.Z)(n)&&e.focus({preventScroll:t})}})}componentDidMount(){var e;this.foundation.handleKeyDownEventListenerMount(),this.foundation.modalDialogFocus();const t=Hr.getFocusableElements(this.modalDialogRef.current);this.modalDialogRef.current.contains(document.activeElement)||null===(e=t[0])||void 0===e||e.focus()}componentWillUnmount(){clearTimeout(this.timeoutId),this.foundation.destroy()}render(){const e=this.props,{maskClosable:t,className:n,getPopupContainer:i,maskFixed:s,getContainerContext:o}=e,a=$r(e,["maskClosable","className","getPopupContainer","maskFixed","getContainerContext"]),{direction:l}=this.context,c=I()(n,{[`${Ue}-popup`]:i&&!s,[`${Ue}-fixed`]:s,[`${Ue}-rtl`]:"rtl"===l}),u=o(),d=this.getDataAttr(a),h=r.createElement("div",Object.assign({className:c},d),this.getMaskElement(),r.createElement("div",Object.assign({role:"none",className:I()({[`${Ue}-wrap`]:!0,[`${Ue}-wrap-center`]:this.props.centered}),onClick:t?this.onMaskClick:null,onMouseUp:t?this.onMaskMouseUp:null},this.props.contentExtraProps),this.getDialogElement()));return u&&u.Provider?r.createElement(u.Provider,{value:u.value},h):h}}Jr.contextType=Ve,Jr.propTypes={close:R().func,getContainerContext:R().func,contentClassName:R().string,maskClassName:R().string,onAnimationEnd:R().func,preventScroll:R().bool},Jr.defaultProps={close:G,getContainerContext:G,contentClassName:"",maskClassName:""};var Qr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const qr=e=>{const[t,n]=(0,r.useState)(!0),[i,s]=(0,r.useState)(),[o,a]=(0,r.useState)(),{direction:l}=e,{title:c,content:u,icon:d,type:h,onCancel:p,onOk:f,className:g}=e,m=Qr(e,["title","content","icon","type","onCancel","onOk","className"]),y=(0,r.useCallback)((e=>{const t=f&&f(e);t&&t.then?(s(!0),t.then((function(){n(!1),s(!1)}),(e=>{s(!1)}))):n(!1)}),[f]),b=(0,r.useCallback)((e=>{const t=p&&p(e);t&&t.then?(a(!0),t.then((function(){n(!1),a(!1)}),(e=>{a(!1)}))):n(!1)}),[p]),v=`${Ue}-confirm`,_=I()(g,v,{[`${v}-rtl`]:"rtl"===l}),w=I()(`${Ue}-${h}`),S=an(d)?r.cloneElement(d,{className:`${v}-icon ${w}-icon`,size:"extra-large"}):d,x=null==c?null:r.createElement("span",{className:`${v}-title-text`},c),E=I()(`${v}-content`,{[`${v}-content-withIcon`]:e.icon});return r.createElement(bi,Object.assign({className:_,title:x,confirmLoading:i,cancelLoading:o,onOk:y,onCancel:b,icon:S,visible:t},m),r.createElement("div",{className:E,"x-semi-prop":"content"},u))};const ei=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM9 10.75C9 10.3358 9.33579 10 9.75 10H12.5C13.0523 10 13.5 10.4477 13.5 11V16.5H14.25C14.6642 16.5 15 16.8358 15 17.25C15 17.6642 14.6642 18 14.25 18H9.75C9.33579 18 9 17.6642 9 17.25C9 16.8358 9.33579 16.5 9.75 16.5H10.5V11.5H9.75C9.33579 11.5 9 11.1642 9 10.75Z",fill:"currentColor"}))}),"info_circle");const ti=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.8831 9.82235L11.6854 17.4112C11.4029 17.7806 10.965 17.9981 10.5 18C10.035 18.0019 9.59533 17.788 9.30982 17.421L5.81604 13.4209C5.30744 12.767 5.42524 11.8246 6.07916 11.316C6.73308 10.8074 7.67549 10.9252 8.1841 11.5791L10.4838 14.0439L15.5 8C16.0032 7.34193 16.9446 7.21641 17.6027 7.71964C18.2608 8.22287 18.3863 9.16428 17.8831 9.82235Z",fill:"currentColor"}))}),"tick_circle");const ni=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2268 2.3986L1.52616 19.0749C0.831449 20.4064 1.79747 22 3.29933 22H20.7007C22.2025 22 23.1686 20.4064 22.4739 19.0749L13.7732 2.3986C13.0254 0.965441 10.9746 0.965442 10.2268 2.3986ZM13.1415 14.0101C13.0603 14.5781 12.5739 15 12.0001 15C11.4263 15 10.9398 14.5781 10.8586 14.0101L10.2829 9.97992C10.1336 8.93495 10.9445 8.00002 12.0001 8.00002C13.0556 8.00002 13.8665 8.93495 13.7172 9.97992L13.1415 14.0101ZM13.5001 18.5C13.5001 19.3284 12.8285 20 12.0001 20C11.1716 20 10.5001 19.3284 10.5001 18.5C10.5001 17.6716 11.1716 17 12.0001 17C12.8285 17 13.5001 17.6716 13.5001 18.5Z",fill:"currentColor"}))}),"alert_triangle");const ri=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12ZM13.5 17.5C13.5 16.6716 12.8284 16 12 16C11.1716 16 10.5 16.6716 10.5 17.5C10.5 18.3284 11.1716 19 12 19C12.8284 19 13.5 18.3284 13.5 17.5ZM12 5C10.9138 5 10.0507 5.91244 10.1109 6.99692L10.4168 12.5023C10.4635 13.3426 11.1584 14 12 14C12.8416 14 13.5365 13.3426 13.5832 12.5023L13.8891 6.99692C13.9493 5.91244 13.0862 5 12 5Z",fill:"currentColor"}))}),"alert_circle");const ii=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM11.8281 14.6094C10.9688 14.6094 10.5391 14.0723 10.5391 13.3691C10.5391 12.3242 11.0566 11.6504 12.2676 10.7324C12.2894 10.7158 12.3111 10.6993 12.3326 10.6829C13.1573 10.0555 13.7324 9.61807 13.7324 8.82812C13.7324 7.93945 12.9023 7.42188 11.9746 7.42188C11.2129 7.42188 10.627 7.70508 10.168 8.30078C9.83594 8.64258 9.57227 8.82812 9.12305 8.82812C8.38086 8.82812 8 8.31055 8 7.71484C8 7.10938 8.3418 6.49414 8.87891 6.02539C9.60156 5.40039 10.7539 5 12.2773 5C14.9922 5 16.8965 6.33789 16.8965 8.64258C16.8965 10.3223 15.8906 11.1328 14.709 11.9531C13.9082 12.5391 13.5273 12.8809 13.2246 13.5742L13.2238 13.5756C12.8922 14.1609 12.638 14.6094 11.8281 14.6094ZM11.8086 18.7695C10.8711 18.7695 10.0996 18.1641 10.0996 17.2266C10.0996 16.2891 10.8711 15.6836 11.8086 15.6836C12.7461 15.6836 13.5078 16.2891 13.5078 17.2266C13.5078 18.1641 12.7461 18.7695 11.8086 18.7695Z",fill:"currentColor"}))}),"help_circle");function si(e){const t=document.createElement("div");document.body.appendChild(t);let n=Object.assign({},e);function i(n){const{afterClose:i}=n;Zt.render(r.createElement(qr,Object.assign({},n,{afterClose:function(){null==i||i(...arguments),(()=>{Zt.unmountComponentAtNode(t)&&t.parentNode&&t.parentNode.removeChild(t);for(let e=0;e<mi.length;e++)if(mi[e]===s){mi.splice(e,1);break}})()},motion:e.motion})),t)}function s(){n=Object.assign(Object.assign({},n),{visible:!1}),i(n)}return i(n),mi.push(s),{destroy:s,update:function(e){n=Object.assign(Object.assign({},n),e),i(n)}}}function oi(e){return Object.assign({type:"info",icon:r.createElement(ei,null)},e)}function ai(e){return Object.assign({type:"success",icon:r.createElement(ti,null)},e)}function li(e){return Object.assign({type:"warning",icon:r.createElement(ni,null)},e)}function ci(e){return Object.assign({type:"error",icon:r.createElement(ri,null),okButtonProps:Object.assign({type:"danger"},e.okButtonProps)},O(e,["okButtonProps"]))}function ui(e){return Object.assign({type:"confirm",icon:r.createElement(ii,null)},e)}var di=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const hi=(e,t)=>{var{afterClose:n,config:i}=e;di(e,["afterClose","config"]);const[s,o]=r.useState(i);r.useImperativeHandle(t,(()=>({destroy:()=>{o((e=>Object.assign(Object.assign({},e),{visible:!1})))},update:e=>{o((t=>Object.assign(Object.assign({},t),e)))}})));return r.createElement(qr,Object.assign({},s,{afterClose:()=>{var e;null===(e=null==i?void 0:i.afterClose)||void 0===e||e.call(i),n()}}))},pi=r.forwardRef(hi);let fi=0;var gi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const mi=[];class yi extends Oe{constructor(e){super(e),this.handleCancel=e=>{this.foundation.handleCancel(e)},this.handleOk=e=>{this.foundation.handleOk(e)},this.updateState=()=>{const{visible:e}=this.props;this.foundation.toggleDisplayNone(!e)},this.renderFooter=()=>{const{okText:e,okType:t,cancelText:n,confirmLoading:i,cancelLoading:s,hasCancel:o}=this.props,a=e=>o?r.createElement(J,Object.assign({"aria-label":"cancel",onClick:this.handleCancel,loading:void 0===s?"pending"===this.state.onCancelReturnPromiseStatus:s,type:"tertiary",autoFocus:!0},this.props.cancelButtonProps,{"x-semi-children-alias":"cancelText"}),n||e.cancel):null;return r.createElement($n,{componentName:"Modal"},((n,s)=>r.createElement("div",null,a(n),r.createElement(J,Object.assign({"aria-label":"confirm",type:t,theme:"solid",loading:void 0===i?"pending"===this.state.onOKReturnPromiseStatus:i,onClick:this.handleOk},this.props.okButtonProps,{"x-semi-children-alias":"okText"}),e||n.confirm))))},this.renderDialog=()=>{let e=this.props,{footer:t,className:n,motion:i,maskStyle:s,keepDOM:o,style:a,zIndex:l,getPopupContainer:c,visible:u}=e,d=gi(e,["footer","className","motion","maskStyle","keepDOM","style","zIndex","getPopupContainer","visible"]),h=a;const p=s,f="footer"in this.props?t:this.renderFooter();let g={zIndex:l};c&&(g={zIndex:l,position:"static"});const m=I()(n,{[`${Ue}-displayNone`]:o&&this.state.displayNone}),y=this.props.visible||this.props.keepDOM&&(!this.props.lazyRender||this._haveRendered)||this.props.motion&&!this.state.displayNone;return y&&(this._haveRendered=!0),r.createElement(vn,{motion:this.props.motion,animationState:u?"enter":"leave",startClassName:u?`${Ue}-content-animate-show`:`${Ue}-content-animate-hide`,onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:t,animationEventsNeedBind:n}=e;return r.createElement(vn,{motion:this.props.motion,animationState:u?"enter":"leave",startClassName:u?`${Ue}-mask-animate-show`:`${Ue}-mask-animate-hide`,onAnimationEnd:()=>{this.updateState()}},(e=>{let{animationClassName:i,animationEventsNeedBind:s}=e;return y?r.createElement(hn,{style:g,getPopupContainer:c}," ",r.createElement(Jr,Object.assign({},d,{contentExtraProps:n,maskExtraProps:s,isFullScreen:this.state.isFullScreen,contentClassName:t,maskClassName:i,className:m,getPopupContainer:c,maskStyle:p,style:h,ref:this.modalRef,footer:f,onClose:this.handleCancel}))):r.createElement(r.Fragment,null)}))}))},this.state={displayNone:!e.visible,isFullScreen:e.fullScreen},this.foundation=new Ke(this.adapter),this.modalRef=r.createRef(),this.bodyOverflow="",this.scrollBarWidth=0,this.originBodyWidth="100%"}get adapter(){return Object.assign(Object.assign({},super.adapter),{getProps:()=>this.props,disabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;this.bodyOverflow=document.body.style.overflow||"",e||"hidden"===this.bodyOverflow||(document.body.style.overflow="hidden",document.body.style.width=`calc(${this.originBodyWidth||"100%"} - ${this.scrollBarWidth}px)`)},enabledBodyScroll:()=>{const{getPopupContainer:e}=this.props;e||"hidden"===this.bodyOverflow||(document.body.style.overflow=this.bodyOverflow,document.body.style.width=this.originBodyWidth)},notifyCancel:e=>this.props.onCancel(e),notifyOk:e=>this.props.onOk(e),notifyClose:()=>{this.props.afterClose()},toggleDisplayNone:(e,t)=>{e!==this.state.displayNone&&this.setState({displayNone:e},t||G)},notifyFullScreen:e=>{e!==this.state.isFullScreen&&this.setState({isFullScreen:e})}})}static getDerivedStateFromProps(e,t){const n={};return e.fullScreen!==t.isFullScreen&&(n.isFullScreen=e.fullScreen),e.visible&&t.displayNone&&(n.displayNone=!1),n}componentDidMount(){this.scrollBarWidth=globalThis&&"[object Window]"===Object.prototype.toString.call(globalThis)?window.innerWidth-document.documentElement.clientWidth:0,this.originBodyWidth=document.body.style.width,this.props.visible&&this.foundation.beforeShow()}componentDidUpdate(e,t,n){!e.visible&&this.props.visible&&this.foundation.beforeShow(),!t.displayNone&&this.state.displayNone&&this.foundation.afterHide()}componentWillUnmount(){this.props.visible&&this.foundation.destroy()}render(){const{visible:e,keepDOM:t,lazyRender:n}=this.props;return this.renderDialog()}}yi.propTypes={mask:R().bool,closable:R().bool,centered:R().bool,visible:R().bool,width:R().oneOfType([R().string,R().number]),height:R().oneOfType([R().string,R().number]),confirmLoading:R().bool,cancelLoading:R().bool,okText:R().string,okType:R().string,cancelText:R().string,maskClosable:R().bool,onCancel:R().func,onOk:R().func,afterClose:R().func,okButtonProps:R().object,cancelButtonProps:R().object,style:R().object,className:R().string,maskStyle:R().object,bodyStyle:R().object,zIndex:R().number,title:R().node,icon:R().node,header:R().node,footer:R().node,hasCancel:R().bool,motion:R().bool,children:R().node,getPopupContainer:R().func,getContainerContext:R().func,maskFixed:R().bool,closeIcon:R().node,closeOnEsc:R().bool,size:R().oneOf(Ge),keepDOM:R().bool,lazyRender:R().bool,direction:R().oneOf(Be),fullScreen:R().bool},yi.defaultProps={zIndex:1e3,motion:!0,mask:!0,centered:!1,closable:!0,visible:!1,okType:"primary",maskClosable:!0,hasCancel:!0,onCancel:G,onOk:G,afterClose:G,maskFixed:!1,closeOnEsc:!0,size:"small",keepDOM:!1,lazyRender:!0,fullScreen:!1},yi.useModal=function(){const[e,t]=function(){const[e,t]=r.useState([]);return[e,function(e){return t((t=>[...t,e])),()=>{t((t=>t.filter((t=>t!==e))))}}]}();function n(e){return function(n){fi+=1;const i=r.createRef();let s;const o=r.createElement(pi,{key:`semi-modal-${fi}`,config:e(n),ref:i,afterClose:()=>{s()}});return s=t(o),{destroy:()=>{i.current&&i.current.destroy()},update:e=>{i.current&&i.current.update(e)}}}}return[{info:n(oi),success:n(ai),error:n(ci),warning:n(li),confirm:n(ui)},r.createElement(r.Fragment,null,e)]},yi.info=function(e){return si(oi(e))},yi.success=function(e){return si(ai(e))},yi.error=function(e){return si(ci(e))},yi.warning=function(e){return si(li(e))},yi.confirm=function(e){return si(ui(e))},yi.destroyAll=function(){for(;mi.length;){const e=mi.pop();e&&e()}};const bi=yi,vi=bi,_i={PREFIX:`${D}-dropdown`,SELECTED:`${D}-dropdown-item-selected`,DISABLED:`${D}-dropdown-item-disabled`},wi={POSITION_SET:Jt.POSITION_SET,TRIGGER_SET:["hover","focus","click","custom","contextMenu"],DEFAULT_LEAVE_DELAY:100,ITEM_TYPE:["primary","secondary","tertiary","warning","danger"]},Si=4,xi=2;class Ei extends ue{handleVisibleChange(e){this._adapter.setPopVisible(e),this._adapter.notifyVisibleChange(e);const{trigger:t}=this.getProps();if(e&&"click"===t){const e=this._adapter.getPopupId();this.setFocusToFirstMenuItem(e)}}getMenuItemNodes(e){const t=document.getElementById(e);return t?Array.from(t.getElementsByTagName("li")).filter((e=>"false"===e.ariaDisabled)):null}setFocusToFirstMenuItem(e){const t=this.getMenuItemNodes(e);var n;t&&((n=t).length>0&&Vt(n,n[0]))}setFocusToLastMenuItem(e){const t=this.getMenuItemNodes(e);var n;t&&((n=t).length>0&&Vt(n,n[n.length-1]))}handleKeyDown(e){var t,n;const r=null===(n=null===(t=e.target)||void 0===t?void 0:t.attributes["data-popupid"])||void 0===n?void 0:n.value,{visible:i}=this._adapter.getStates();switch(e.key){case" ":case"Enter":e.target.click();break;case"ArrowDown":this.setFocusToFirstMenuItem(r),i&&Xt(e);break;case"ArrowUp":this.setFocusToLastMenuItem(r),i&&Xt(e)}}}class Ci extends ue{constructor(){super(...arguments),this.menuItemNodes=null,this.firstChars=[]}handleEscape(e){if("custom"===this._adapter.getContext("trigger")){const t=e&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n].attributes["data-popupid"];if(r&&r.value===t)return e[n]}return null}(document.querySelectorAll("[data-popupid]"),e.id);t.focus()}}setFocusByFirstCharacter(e,t){const n=function(e,t,n,r){let i,s;return!e||!n||!r||r.length>1?-1:(r=r.toLowerCase(),i=e.indexOf(t)+1,i>=e.length&&(i=0),s=n.indexOf(r,i),-1===s&&(s=n.indexOf(r,0)),s>=0?s:-1)}(this.menuItemNodes,e,this.firstChars,t);n>=0&&Vt(this.menuItemNodes,this.menuItemNodes[n])}onMenuKeydown(e){const t=function(e,t){if(!e)return null;for(;e.parentElement&&ae(e.parentElement,"attributes.role.value","")!==t;)e=e.parentElement;return e.parentElement}(e.target,"tooltip");this.menuItemNodes||(this.menuItemNodes=[...e.target.parentNode.getElementsByTagName("li")].filter((e=>"true"!==e.ariaDisabled))),0===this.firstChars.length&&this.menuItemNodes.forEach((e=>{var t;this.firstChars.push(null===(t=e.textContent.trim()[0])||void 0===t?void 0:t.toLowerCase())}));const n=this.menuItemNodes.find((e=>0===e.tabIndex));switch(e.key){case" ":case"Enter":e.target.click();break;case"Escape":this.handleEscape(t);break;case"ArrowUp":!function(e,t){let n,r;e.length>0&&(t===e[0]?n=e[e.length-1]:(r=e.indexOf(t),n=e[r-1]),Vt(e,n))}(this.menuItemNodes,n),Xt(e);break;case"ArrowDown":!function(e,t){let n,r;e.length>0&&(t===e[e.length-1]?n=e[0]:(r=e.indexOf(t),n=e[r+1]),Vt(e,n))}(this.menuItemNodes,n),Xt(e);break;default:(function(e){return 1===e.length&&e.match(/\S/)})(e.key)&&this.setFocusByFirstCharacter(n,e.key)}}}const ki=r.createContext({level:0});var Oi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ti=_i.PREFIX;class Ii extends Oe{constructor(e){super(e),this.foundation=new Ci(this.adapter)}get adapter(){return Object.assign({},super.adapter)}render(){const e=this.props,{children:t,className:n,style:i}=e,s=Oi(e,["children","className","style"]);return r.createElement("ul",Object.assign({role:"menu","aria-orientation":"vertical"},s,{className:I()(`${Ti}-menu`,n),style:i,onKeyDown:e=>this.foundation.onMenuKeydown(e)}),t)}}Ii.propTypes={children:R().node,className:R().string,style:R().object},Ii.contextType=ki;const zi=Ii,Ri=_i.PREFIX;class Di extends Oe{render(){const{children:e,disabled:t,className:n,forwardRef:i,style:s,type:o,active:a,icon:l,onKeyDown:c,showTick:u,hover:d}=this.props,{showTick:h}=this.context,p=null!=h?h:u,f=I()(n,{[`${Ri}-item`]:!0,[`${Ri}-item-disabled`]:t,[`${Ri}-item-hover`]:d,[`${Ri}-item-withTick`]:p,[`${Ri}-item-${o}`]:o,[`${Ri}-item-active`]:a}),g={};t||["onClick","onMouseEnter","onMouseLeave","onContextMenu"].forEach((e=>{"onClick"===e?g.onMouseDown=t=>{var n,r;0===t.button&&(null===(r=(n=this.props)[e])||void 0===r||r.call(n,t))}:g[e]=this.props[e]}));let m=null;switch(!0){case p&&a:m=r.createElement(Yn,null);break;case p&&!a:m=r.createElement(Yn,{style:{color:"transparent"}});break;default:m=null}let y=null;return l&&(y=r.createElement("div",{className:`${Ri}-item-icon`},l)),r.createElement("li",Object.assign({role:"menuitem",tabIndex:-1,"aria-disabled":t},g,{onKeyDown:c,ref:e=>i(e),className:f,style:s}),m,y,e)}}Di.propTypes={children:R().oneOfType([R().string,R().node]),name:R().string,disabled:R().bool,selected:R().bool,onClick:R().func,onMouseEnter:R().func,onMouseLeave:R().func,onContextMenu:R().func,className:R().string,style:R().object,forwardRef:R().func,type:R().oneOf(wi.ITEM_TYPE),active:R().bool,icon:R().node},Di.contextType=ki,Di.defaultProps={disabled:!1,divided:!1,selected:!1,onMouseEnter:G,onMouseLeave:G,forwardRef:G},Di.elementType="Dropdown.Item";const Mi=Di,Ni=_i.PREFIX,ji=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{style:t,className:n}=e;return r.createElement("div",{className:I()(`${Ni}-divider`,n),style:t})};ji.propTypes={style:R().object,className:R().string};const Pi=ji,Ai=_i.PREFIX;class Li extends r.PureComponent{render(){const{className:e,style:t,children:n}=this.props,{showTick:i}=this.context,s=I()({[`${Ai}-title`]:!0,[`${Ai}-title-withTick`]:i},e);return r.createElement("div",{className:s,style:t},n)}}Li.propTypes={children:R().node,className:R().string,style:R().object},Li.contextType=ki;const Fi=Li;var Ui=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Gi=wi.POSITION_SET,Bi=wi.TRIGGER_SET;class Zi extends Oe{constructor(e){super(e),this.handleVisibleChange=e=>this.foundation.handleVisibleChange(e),this.state={popVisible:e.visible},this.foundation=new Ei(this.adapter),this.tooltipRef=r.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setPopVisible:e=>this.setState({popVisible:e}),notifyVisibleChange:e=>this.props.onVisibleChange(e),getPopupId:()=>this.tooltipRef.current.getPopupId()})}renderContent(){const{render:e,menu:t,contentClassName:n,style:i,showTick:s,prefixCls:o,trigger:a}=this.props,l=I()(o,n),{level:c=0}=this.context,u={showTick:s,level:c+1,trigger:a};let d=null;return r.isValidElement(e)?d=e:Array.isArray(t)&&(d=this.renderMenu()),r.createElement(ki.Provider,{value:u},r.createElement("div",{className:l,style:i},r.createElement("div",{className:`${o}-content`,"x-semi-prop":"render"},d)))}renderMenu(){const{menu:e}=this.props,t=e.map(((e,t)=>{switch(e.node){case"title":{const{name:n,node:i}=e,s=Ui(e,["name","node"]);return r.createElement(Zi.Title,Object.assign({},s,{key:i+n+t}),n)}case"item":{const{node:n,name:i}=e,s=Ui(e,["node","name"]);return r.createElement(Zi.Item,Object.assign({},s,{key:n+i+t}),i)}case"divider":return r.createElement(Zi.Divider,{key:e.node+t});default:return null}}));return r.createElement(Zi.Menu,null,t)}renderPopCard(){const{render:e,contentClassName:t,style:n,showTick:i,prefixCls:s}=this.props,o=I()(s,t),{level:a=0}=this.context,l={showTick:i,level:a+1};return r.createElement(ki.Provider,{value:l},r.createElement("div",{className:o,style:n},r.createElement("div",{className:`${s}-content`},e)))}render(){const e=this.props,{children:t,position:n,trigger:i,onVisibleChange:s,zIndex:o,className:a,motion:l,margin:c,style:u,prefixCls:d}=e,h=Ui(e,["children","position","trigger","onVisibleChange","zIndex","className","motion","margin","style","prefixCls"]);let{spacing:p}=this.props;const{level:f}=this.context,{popVisible:g}=this.state,m=this.renderContent();return f>0?p="number"==typeof p?p:xi:null==p&&(p=Si),r.createElement(kn,Object.assign({zIndex:o,motion:l,margin:c,content:m,className:a,prefixCls:d,spacing:p,position:n,trigger:i,onVisibleChange:this.handleVisibleChange,showArrow:!1,returnFocusOnClose:!0,ref:this.tooltipRef},h),r.isValidElement(t)?r.cloneElement(t,{className:I()(ae(t,"props.className"),{[`${d}-showing`]:g}),"aria-haspopup":!0,"aria-expanded":g,onKeyDown:e=>{this.foundation.handleKeyDown(e);const n=ae(t,"props.onKeyDown");n&&n(e)}}):t)}}Zi.Menu=zi,Zi.Item=Mi,Zi.Divider=Pi,Zi.Title=Fi,Zi.contextType=ki,Zi.propTypes={children:R().node,contentClassName:R().oneOfType([R().string,R().array]),className:R().string,getPopupContainer:R().func,margin:R().oneOfType([R().number,R().object]),mouseEnterDelay:R().number,mouseLeaveDelay:R().number,menu:R().array,motion:R().oneOfType([R().bool,R().func,R().object]),onVisibleChange:R().func,prefixCls:R().string,position:R().oneOf(Gi),rePosKey:R().oneOfType([R().string,R().number]),render:R().node,spacing:R().oneOfType([R().number,R().object]),showTick:R().bool,style:R().object,trigger:R().oneOf(Bi),visible:R().bool,zIndex:R().number},Zi.defaultProps={onVisibleChange:G,prefixCls:_i.PREFIX,zIndex:Qt.DEFAULT_Z_INDEX,motion:!0,trigger:"hover",position:"bottom",mouseLeaveDelay:wi.DEFAULT_LEAVE_DELAY,showTick:!1,closeOnEsc:!0,onEscKeyDown:G};const Ki=Zi;const Xi=function(e){return"number"==typeof e||(0,m.Z)(e)&&"[object Number]"==(0,f.Z)(e)};let Vi=null;const Wi={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Hi=e=>{Object.keys(Wi).forEach((t=>{e.style.setProperty(t,Wi[t],"important")}))},$i=(e,t)=>{const n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize};var Yi=n(56366);const Ji=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],Qi=e=>{const t=window.getComputedStyle(e);if(null===t)return null;const n=(0,Yi.Z)(t,Ji),{boxSizing:r}=n;if(""===r)return null;return{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)}};class qi extends ue{static get textAreaDefaultAdapter(){return{notifyChange:G,setValue:G,toggleFocusing:G,toggleHovering:G,notifyFocus:G,notifyBlur:G,notifyKeyDown:G,notifyEnterPress:G}}constructor(e){super(Object.assign(Object.assign({},qi.textAreaDefaultAdapter),e)),this.resizeTextarea=e=>{var t;const{height:n}=this.getStates(),{rows:r,autosize:i}=this.getProps(),s=this._adapter.getRef(),o=Qi(s);if(!o)return void(e&&e());const[a,l]=null!==i&&"object"==typeof i?[null!==(t=null==i?void 0:i.minRows)&&void 0!==t?t:r,null==i?void 0:i.maxRows]:[r],c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;Vi||(Vi=document.createElement("textarea"),Vi.setAttribute("tab-index","-1"),Vi.setAttribute("aria-hidden","true"),Hi(Vi)),null===Vi.parentNode&&document.body.appendChild(Vi);const{paddingSize:i,borderSize:s,sizingStyle:o}=e,{boxSizing:a}=o;Object.keys(o).forEach((e=>{Vi.style[e]=o[e]})),Hi(Vi),Vi.value=t;let l=$i(Vi,e);Vi.value="x";const c=$i(Vi,e)-i-s;let u=c*n;"border-box"===a&&(u=u+i+s),l=Math.max(u,l);let d=c*r;return"border-box"===a&&(d=d+i+s),l=Math.min(d,l),l}(o,s.value||s.placeholder||"x",a,l);if(n!==c)return this._adapter.notifyHeightUpdate(c),void(s.style.height=`${c}px`);e&&e()}}init(){this.setInitValue()}destroy(){}setInitValue(){const{defaultValue:e,value:t}=this.getProps();let n=e;this._isControlledComponent()&&(n=t),this._adapter.setValue(n)}handleValueChange(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:n,minLength:r,getValueLength:i}=this._adapter.getProps();let s=e;n&&(0,Xe.Z)(i)&&(s=this.handleVisibleMaxLength(e)),r&&(0,Xe.Z)(i)&&this.handleVisibleMinLength(s),this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:r}=this._adapter.getStates();if(Xi(t)&&t>=0&&(0,Xe.Z)(n)&&tt(e)){const i=n(e);if(i<t){const n=e.length+(t-i);n!==r&&this._adapter.setMinLength(n)}else r!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();if(Xi(t)&&t>=0&&(0,Xe.Z)(n)&&tt(e)){if(n(e)>t){console.warn("[Semi TextArea] The input character is truncated because the input length exceeds the maximum length limit");return this.handleTruncateValue(e,t)}return e}}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();if((0,Xe.Z)(n)){let r="";for(let i=1,s=e.length;i<=s;i++){const s=e.slice(0,i);if(n(s)>t)return r;r=s}return r}return e.slice(0,t)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleKeyDown(e){this._adapter.notifyKeyDown(e),13===e.keyCode&&this._adapter.notifyPressEnter(e)}handleMouseEnter(e){this._adapter.toggleHovering(!0)}handleMouseLeave(e){this._adapter.toggleHovering(!1)}isAllowClear(){const{value:e,isFocus:t,isHover:n}=this._adapter.getStates(),{showClear:r,disabled:i,readonly:s}=this._adapter.getProps();return e&&r&&!i&&(t||n)&&!s}handleClear(e){const{isFocus:t}=this.getStates();this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&this._adapter.notifyBlur("",e),this._adapter.notifyChange("",e),this._adapter.notifyClear(e),this.stopPropagation(e)}}const es={PREFIX:`${D}-input`},ts=["small","large","default"],ns=["default","error","warning","success"],rs="__fromClearBtn",is=["password"];const ss=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23ZM17.0352 16.8626C16.4597 17.4585 15.5101 17.4751 14.9142 16.8996L12.0368 14.121L9.25822 16.9984C8.68274 17.5943 7.73314 17.6109 7.13722 17.0354C6.5413 16.4599 6.52472 15.5103 7.1002 14.9144L9.87883 12.037L7.00147 9.2584C6.40555 8.68293 6.38897 7.73332 6.96445 7.1374C7.53992 6.54148 8.48953 6.52491 9.08545 7.10038L11.9628 9.87901L14.7414 7.00165C15.3169 6.40573 16.2665 6.38916 16.8624 6.96463C17.4584 7.54011 17.4749 8.48971 16.8995 9.08563L14.1208 11.963L16.9982 14.7416C17.5941 15.3171 17.6107 16.2667 17.0352 16.8626Z",fill:"currentColor"}))}),"clear");var os=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const as=es.PREFIX;class ls extends Oe{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.setRef=e=>{this.libRef.current=e;const{forwardRef:t}=this.props;"function"==typeof t?t(e):t&&"object"==typeof t&&(t.current=e)},this.state={value:"",isFocus:!1,isHover:!1,height:0,minLength:e.minLength},this.focusing=!1,this.foundation=new qi(this.adapter),this.libRef=r.createRef(),this._resizeLock=!1}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e},(()=>{this.props.autosize&&this.foundation.resizeTextarea()})),getRef:()=>this.libRef.current,toggleFocusing:e=>this.setState({isFocus:e}),toggleHovering:e=>this.setState({isHover:e}),notifyChange:(e,t)=>{this.props.onChange(e,t)},notifyClear:e=>this.props.onClear(e),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyKeyDown:e=>{this.props.onKeyDown(e)},notifyHeightUpdate:e=>{this.setState({height:e}),this.props.onResize({height:e})},notifyPressEnter:e=>{this.props.onEnterPress&&this.props.onEnterPress(e)},setMinLength:e=>this.setState({minLength:e})})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentDidMount(){this.foundation.init(),this._resizeListener=null,this.props.autosize&&(this._resizeListener=()=>{this._resizeLock||(this._resizeLock=!0,this.foundation.resizeTextarea((()=>{this._resizeLock=!1})))},window.addEventListener("resize",this._resizeListener))}componentWillUnmount(){this.foundation.destroy(),this._resizeListener&&window.removeEventListener("resize",this._resizeListener)}componentDidUpdate(e,t){this.props.value===e.value&&this.props.placeholder===e.placeholder||!this.props.autosize||this.foundation.resizeTextarea()}renderClearBtn(){const{showClear:e}=this.props,t=this.foundation.isAllowClear(),n=I()(`${as}-clearbtn`,{[`${as}-clearbtn-hidden`]:!t});return e?r.createElement("div",{className:n,onClick:this.handleClear},r.createElement(ss,null)):null}renderCounter(){let e,t,n,i;const{showCounter:s,maxCount:o,getValueLength:a}=this.props;if(s||o){const{value:s}=this.state;t=s?(0,Xe.Z)(a)?a(s):s.length:0,n=o||null,i=I()(`${as}-textarea-counter`,{[`${as}-textarea-counter-exceed`]:t>n}),e=r.createElement("div",{className:i},t,n?"/":null,n)}else e=null;return e}render(){const e=this.props,{autosize:t,placeholder:n,onEnterPress:i,onResize:s,disabled:o,readonly:a,className:l,showCounter:c,validateStatus:u,maxCount:d,defaultValue:h,style:p,forwardRef:f,getValueLength:g,maxLength:m,minLength:y,showClear:b,borderless:v,autoFocus:_}=e,w=os(e,["autosize","placeholder","onEnterPress","onResize","disabled","readonly","className","showCounter","validateStatus","maxCount","defaultValue","style","forwardRef","getValueLength","maxLength","minLength","showClear","borderless","autoFocus"]),{isFocus:S,value:x,minLength:E}=this.state,C=I()(l,`${as}-textarea-wrapper`,{[`${as}-textarea-borderless`]:v,[`${as}-textarea-wrapper-disabled`]:o,[`${as}-textarea-wrapper-readonly`]:a,[`${as}-textarea-wrapper-${u}`]:Boolean(u),[`${as}-textarea-wrapper-focus`]:S}),k=I()(`${as}-textarea`,{[`${as}-textarea-disabled`]:o,[`${as}-textarea-readonly`]:a,[`${as}-textarea-autosize`]:(0,mt.Z)(t)?q(null==t?void 0:t.maxRows):t,[`${as}-textarea-showClear`]:b}),T=Object.assign(Object.assign({},O(w,"insetLabel","insetLabelId","getValueLength","onClear","showClear")),{autoFocus:_||this.props.autofocus,className:k,disabled:o,readOnly:a,placeholder:n||null,onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e.nativeEvent),onKeyDown:e=>this.foundation.handleKeyDown(e),value:null==x?"":x});return(0,Xe.Z)(g)||(T.maxLength=m),E&&(T.minLength=E),r.createElement("div",{className:C,style:p,onMouseEnter:e=>this.foundation.handleMouseEnter(e),onMouseLeave:e=>this.foundation.handleMouseLeave(e)},r.createElement("textarea",Object.assign({},T,{ref:this.setRef})),this.renderClearBtn(),this.renderCounter())}}ls.propTypes={autosize:R().oneOfType([R().bool,R().object]),borderless:R().bool,placeholder:R().string,value:R().string,rows:R().number,cols:R().number,maxCount:R().number,onEnterPress:R().func,validateStatus:R().string,className:R().string,style:R().object,showClear:R().bool,onClear:R().func,onResize:R().func,getValueLength:R().func},ls.defaultProps={autosize:!1,borderless:!1,rows:4,cols:20,showCounter:!1,showClear:!1,onEnterPress:G,onChange:G,onBlur:G,onFocus:G,onKeyDown:G,onResize:G,onClear:G};const cs=r.forwardRef(((e,t)=>r.createElement(ls,Object.assign({},e,{forwardRef:t})))),us={PREFIX:`${D}-progress`},ds=["line","circle"],hs="line",ps="var(--semi-color-success)",fs=["square","round"],gs="round",ms=["default","small","large"],ys="default",bs=["vertical","horizontal"],vs="horizontal";var _s=n(45806),ws=n.n(_s);function Ss(e,t,n){return Math.min(Math.max(e,t),n)}function xs(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;const t=Ss(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,1,10),n=Ss(e,.1,2);return e=>0===e||1===e?e:-t*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/n)}const Es=(()=>{const e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],t={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],xs],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],(e,t)=>n=>1-xs(e,t)(1-n)],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],(e,t)=>n=>n<.5?xs(e,t)(2*n)/2:1-xs(e,t)(-2*n+2)/2]},n={linear:[.25,.25,.75,.75]};for(const r of Object.keys(t))t[r].forEach(((t,i)=>{n["ease"+r+e[i]]=t}));return n})();function Cs(e){if("function"==typeof e)return e;let t=(e=e&&"string"==typeof e?e.trim():"linear").split("(")[0];const n=function(e){const t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((e=>parseFloat(e))):[]}(e);let r;return"cubic-bezier"===t||"cubicBezier"===t?ws()(...n.length?n:Es.linear):((!t||"string"!=typeof t||"string"==typeof t&&null==Es[t])&&(t="linear"),r=Es[t],"function"==typeof r?r(...n):n.length?ws()(...n):ws()(...r))}class ks{constructor(){this._eventMap=new Map}on(e,t){return e&&"function"==typeof t&&(this._eventMap.has(e)||this._eventMap.set(e,[]),this._eventMap.get(e).push(t)),this}once(e,t){var n=this;if(e&&"function"==typeof t){const r=function(){t(...arguments),n.off(e,r)};this.on(e,r)}}off(e,t){if(e)if("function"==typeof t){const n=this._eventMap.get(e);if(Array.isArray(n)&&n.length){let e=-1;for(;(e=n.findIndex((e=>e===t)))>-1;)n.splice(e,1)}}else null==t&&this._eventMap.delete(e);return this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!this._eventMap.has(e)&&(this._eventMap.get(e).forEach((e=>e(...n))),!0)}}function Os(e){return Boolean(e&&"object"==typeof e&&(e.duration>0||"string"==typeof e.easing||"function"==typeof e.easing))}function Ts(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}const Is=[0,0];function zs(e,t,n,r,i,s,o){const a=n+(-i*(t-r)+-s*n)*e,l=t+a*e;return Math.abs(a)<o&&Math.abs(l-r)<o?(Is[0]=r,Is[1]=0,Is):(Is[0]=l,Is[1]=a,Is)}const Rs=Object.assign(Object.assign({},{tension:170,friction:26}),{precision:.01});function Ds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Os(t)){const e=Cs(t.easing),n="number"==typeof t.duration&&t.duration>0?t.duration:1e3;t=Object.assign(Object.assign({},t),{easing:e,duration:n})}let n=Object.assign(Object.assign(Object.assign({},Rs),t),{done:!1});if(e&&"object"==typeof e&&"val"in e){if(Os(e)){const n=Cs(e.easing),r="number"==typeof e.duration&&e.duration>0?e.duration:parseInt(t.duration)||1e3;e=Object.assign(Object.assign({},e),{easing:n,duration:r})}n=Object.assign(Object.assign({},n),e)}else n=Object.assign(Object.assign({},n),{val:e});return n}const Ms=()=>Date.now(),Ns=1e3/60;class js extends ks{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._props=Object.assign({},e),this._config=Object.assign({},t),this.initStates()}_wrapConfig(e,t){t=t&&"object"==typeof t?t:this._config;const n={};for(const r of Object.keys(e))n[r]=Ds(e[r],t);return n}initStates(e,t){e=e&&"object"==typeof e?e:this._props,t=t&&"object"==typeof t?t:this._config;const{from:n,to:r}=e;if(this._from={},n)for(const o of Object.keys(n))this._from[o]="object"==typeof n[o]&&n[o].val?n[o].val:n[o];this._to=this._wrapConfig(r,t),this._delay=parseInt(t.delay)||0;const i=this._from&&Ts(this._from)||Ts(this._to),s=function(e){const t={},n=e&&Object.keys(e)||[];for(const r of n)t[r]=0;return t}(i);this._currentStyle=Object.assign({},i),this._currentVelocity=Object.assign({},s),this._lastIdealStyle=Object.assign({},i),this._lastIdealVelocity=Object.assign({},s),this.resetPlayStates(),this._frameCount=0,this._prevTime=0}animate(){null==this._timer&&(this._timer=requestAnimationFrame((e=>{const t=Ms();if(function(e,t,n,r,i){for(const s of Object.keys(t)){const o=t[s],a="number"==typeof o?o:o.val;if("object"!=typeof o||!o.done){if(Os(o)&&r&&i&&o.duration){if(o.duration+r<=i||a!==e[s])return!1}else if("number"==typeof n[s]&&0!==n[s])return!1;if(e[s]!==a)return!1}}return!0}(this._currentStyle,this._to,this._currentVelocity,this._startedTime||t,t)||this._ended||this._stopped)return!this._wasAnimating||this._ended||this._stopped||(this._timer=setTimeout((()=>{clearTimeout(this._timer),this._timer=null,this._ended=!0,this.emit("rest",this.getCurrentStates())}),Ns)),void this.resetPlayStates();this._started||(this._started=!0,this.emit("start",this.getCurrentStates())),this._stopped=!1,this._paused=!1,this._wasAnimating=!0,0===this._startedTime&&(this._startedTime=t);const n=t,r=n-this._prevTime;this._prevTime=n,n-this._startedTime<this._delay&&(this._timer=null,this.animate());const i={},s={},o={},a={},l=this._to&&Object.keys(this._to)||[];for(const c of l){const e=this._to[c];this._accumulatedTime[c]="number"!=typeof this._accumulatedTime[c]?r:this._accumulatedTime[c]+r;const t=null!=this._from[c]&&"object"==typeof this._from[c]?this._from[c].val:this._from[c],l=e.val;if("number"==typeof e)o[c]=e,a[c]=0,i[c]=e,s[c]=0;else{let r=this._lastIdealStyle[c],u=this._lastIdealVelocity[c];if(Os(this._config)||Os(e)){const{easing:s,duration:a}=e;r=t+s((n-this._startedTime)/a)*(l-t),n>=this._startedTime+a&&(r=l,e.done=!0),i[c]=r,o[c]=r}else if(null!=l&&l===this._currentStyle[c])o[c]=l,a[c]=0,i[c]=l,s[c]=0;else{const t=(this._accumulatedTime[c]-Math.floor(this._accumulatedTime[c]/Ns)*Ns)/Ns,n=Math.floor(this._accumulatedTime[c]/Ns);for(let i=0;i<n;i++)[r,u]=zs(Ns/1e3,r,u,e.val,e.tension,e.friction,e.precision);const[l,d]=zs(Ns/1e3,r,u,e.val,e.tension,e.friction,e.precision);o[c]=r+(l-r)*t,a[c]=u+(d-u)*t,i[c]=r,s[c]=u,this._accumulatedTime[c]-=n*Ns}}}this._timer=null,this._currentStyle=Object.assign({},o),this._currentVelocity=Object.assign({},a),this._lastIdealStyle=Object.assign({},i),this._lastIdealVelocity=Object.assign({},s),this._destroyed||(this.emit("frame",this.getCurrentStates()),this.animate())})))}start(){this._prevTime=Ms(),this._startedTime=Ms(),this.animate()}end(){this._ended||(this._ended=!0,this._currentStyle=this.getFinalStates(),this.emit("frame",this.getFinalStates()),this.emit("rest",this.getFinalStates())),this.destroy()}pause(){this._paused||(this._pausedTime=Ms(),this._paused=!0,this.emit("pause",this.getCurrentStates()),this.destroy(),this._destroyed=!1)}resume(){if(this._started&&this._paused){const e=Ms()-this._pausedTime;this._paused=!1,this._startedTime+=e,this._prevTime+=e,this._pausedTime=0,this.emit("resume",this.getCurrentStates()),this.animate()}}stop(){this.destroy(),this._stopped||(this._stopped=!0,this.emit("stop",this.getInitialStates()),this.initStates())}destroy(){cancelAnimationFrame(this._timer),clearTimeout(this._timer),this._timer=null,this._destroyed=!0}resetPlayStates(){this._started=!1,this._stopped=!1,this._ended=!1,this._paused=!1,this._destroyed=!1,this._timer=null,this._wasAnimating=!1,this._accumulatedTime={},this._startedTime=0,this._pausedTime=0}reset(){this.destroy(),this.initStates()}reverse(){this.destroy();const e=Object.assign({},this._props),[t,n]=[e.to,e.from];e.from=t,e.to=n,this._props=Object.assign({},e),this.initStates()}getCurrentStates(){return Object.assign({},this._currentStyle)}getInitialStates(){return Object.assign({},Ts(this._props.from))}getFinalStates(){return Object.assign({},Ts(this._props.to))}}function Ps(e,t,n){try{const r=function(e,t,n){if(e.sort(((e,t)=>e.percent-t.percent)),e[0].percent>t)return ps;const r=e[e.length-1];if(r.percent<t)return Ls(r.color);for(const[i,s]of e.entries()){if(s.percent===t)return Ls(s.color);if(t>s.percent)continue;const r=e[i-1];return n?As({startColor:Ls(r.color),endColor:Ls(s.color),size:s.percent-r.percent-1},t-r.percent-1):Ls(r.color)}return}(e,t,n);if(0!==r.length)return r}catch(Mh){return}}function As(e,t){const{startColor:n,endColor:r,size:i}=e,s=n.split(""),o=r.split(""),a=[parseInt(`${s[1]}${s[2]}`,16),parseInt(`${o[1]}${o[2]}`,16)],l=[parseInt(`${s[3]}${s[4]}`,16),parseInt(`${o[3]}${o[4]}`,16)],c=[parseInt(`${s[5]}${s[6]}`,16),parseInt(`${o[5]}${o[6]}`,16)],u=[parseInt(`${s[7]}${s[8]}`,16),parseInt(`${o[7]}${o[8]}`,16)],d=(a[0]-a[1])/(i+1),h=(l[0]-l[1])/(i+1),p=(c[0]-c[1])/(i+1),f=(u[0]-u[1])/(i+1);function g(e){const t=Math.round(a[0]-d*(e+1)).toString(16),n=Math.round(l[0]-h*(e+1)).toString(16),r=Math.round(c[0]-p*(e+1)).toString(16),i=`${m(t)}${m(n)}${m(r)}`,s=Math.floor(f*(e+1)+u[1]).toString(16);return Fs.Hex(`#${i}`,s)}function m(e){return 1===e.length?`0${e}`:0===e.length?"00":e}if(void 0===t){const e=[n];for(let t=0;t<i;t+=1)e.push(g(t));return e}return g(t)}function Ls(e){return e=e.trim().toLowerCase(),Us.hex.test(e)?Fs.Hex(e,void 0):Us.hslA.test(e)?Fs.Hex(Fs.HslA(e),void 0):Us.rgbA.test(e)?Fs.Hex(Fs.RgbA(e),void 0):Us.semiDesignTokens.test(e)?-1!==Gs.ALONG.indexOf(e)?Fs.SemiDesignToken(e):-1!==Gs.SEQUENCE.indexOf(e)?Fs.SemiDesignToken(`${e}-5`):Fs.SemiDesignToken(`${e}`):void 0}const Fs={Hex:(e,t)=>8===(e=e.replace("#","")).length?`#${e}`:(6===e.length||3===e.length&&(e=e.split("").map((e=>e+e)).join("")),`#${e}${t||"ff"}`),SemiDesignToken(e){if("undefined"==typeof window)return;const t=getComputedStyle(document.body).getPropertyValue(`--semi-${e}`);if(""===t)return;const n=`rgba(${t}, 1)`;return Fs.RgbA(n)},HslA(e){const t=Us.hslA.exec(e),n=parseInt(t[2]),r=parseInt(t[3])/100,i=parseInt(t[4])/100,s=t[5],o=(1-Math.abs(2*i-1))*r,a=o*(1-Math.abs(n/60%2-1)),l=i-o/2;let c=0,u=0,d=0;return 0<=n&&n<60?(c=o,u=a,d=0):60<=n&&n<120?(c=a,u=o,d=0):120<=n&&n<180?(c=0,u=o,d=a):180<=n&&n<240?(c=0,u=a,d=o):240<=n&&n<300?(c=a,u=0,d=o):300<=n&&n<360&&(c=o,u=0,d=a),c=Math.round(255*(c+l)).toString(16),u=Math.round(255*(u+l)).toString(16),d=Math.round(255*(d+l)).toString(16),Fs.utils.pAL(c,u,d,s)},RgbA(e){const t=Us.rgbA.exec(e),n=parseInt(t[2],10).toString(16),r=parseInt(t[3],10).toString(16),i=parseInt(t[4],10).toString(16),s=t[5];return Fs.utils.pAL(n,r,i,s)},utils:{pAL:(e,t,n,r)=>(1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),void 0!==r?(1==(r=Math.round(255*parseInt(r)).toString(16)).length&&(r="0"+r),"#"+e+t+n+r):"#"+e+t+n)}},Us={hex:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,hslA:/(hsl)a?\(\s*?(\d+),?\s*?(\d+)%,?\s*?(\d+)%,?\s*?\/?(\s*?[\d.]+)?\s*?\)/,rgbA:/(rgb)a?\(\s*?(\d+),?\s*?(\d+),?\s*?(\d+),?\s*?\/?(\s*?[\d.]+)?\s*?\)/,semiDesignTokens:/(\w+)?-?(\w+)-?(\d)?/},Gs={ALONG:["black","white"],SEQUENCE:["amber","blue","cyan","green","grey","indigo","light-blue","light-green","lime","orange","pink","purple","red","teal","violet","yellow"]};var Bs=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Zs=us.PREFIX;class Ks extends r.Component{constructor(e){super(e),this._mounted=!0,this._mounted=!0,this.state={percentNumber:this.props.percent}}componentDidUpdate(e){if(isNaN(this.props.percent)||isNaN(e.percent))throw new Error("[Semi Progress]:percent can not be NaN");if(e.percent!==this.props.percent){if(!this.props.motion)return void this.setState({percentNumber:this.props.percent});this.animation&&this.animation.destroy&&this.animation.destroy(),this.animation=new js({from:{value:e.percent},to:{value:this.props.percent}},{easing:"linear",duration:300}),this.animation.on("frame",(e=>{if(!1===this._mounted)return;const t=parseInt(e.value);this.setState({percentNumber:t})})),this.animation.on("rest",(()=>{!1!==this._mounted&&this.setState({percentNumber:this.props.percent})})),this.animation.start()}}componentWillUnmount(){this.animation&&this.animation.destroy(),this._mounted=!1}renderCircleProgress(){const e=this.props,{strokeLinecap:t,style:n,className:i,strokeWidth:s,format:o,size:a,stroke:l,strokeGradient:c,showInfo:u,percent:d,orbitStroke:h,id:p}=e,f=Bs(e,["strokeLinecap","style","className","strokeWidth","format","size","stroke","strokeGradient","showInfo","percent","orbitStroke","id"]),g=this.props["aria-label"],m=this.props["aria-labelledby"],y=this.props["aria-valuetext"],{percentNumber:b}=this.state,v={wrapper:I()(`${Zs}-circle`,i),svg:I()(`${Zs}-circle-ring`),circle:I()(`${Zs}-circle-ring-inner`)},_=this.calcPercent(d),w=this.calcPercent(b);let S;S=this.props.width?this.props.width:a===ys?72:24;const x=this.selectStroke(l,d,c),E=S/2,C=S/2,k=(S-s)/2,O=2*k*Math.PI,T=(1-_/100)*O,z=`${O} ${O}`,R=o(w);return r.createElement("div",Object.assign({id:p,className:v.wrapper,style:n,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":w,"aria-labelledby":m,"aria-label":g,"aria-valuetext":y},Ce(f)),r.createElement("svg",{key:a,className:v.svg,height:S,width:S,"aria-hidden":!0},r.createElement("circle",{strokeDashoffset:0,strokeWidth:s,strokeDasharray:z,strokeLinecap:t,fill:"transparent",stroke:h,r:k,cx:C,cy:E,"aria-hidden":!0}),r.createElement("circle",{className:v.circle,strokeDashoffset:T,strokeWidth:s,strokeDasharray:z,strokeLinecap:t,fill:"transparent",stroke:x,r:k,cx:C,cy:E,"aria-hidden":!0})),u&&"small"!==a?r.createElement("span",{className:`${Zs}-circle-text`},R):null)}calcPercent(e){let t;return t=e>100?100:e<0?0:e,t}selectStroke(e,t,n){if("string"==typeof e)return e;const r=Ps(e,t,n);return void 0!==r?r:ps}renderLineProgress(){const e=this.props,{className:t,style:n,stroke:i,strokeGradient:s,direction:o,format:a,showInfo:l,size:c,percent:u,orbitStroke:d,id:h}=e,p=Bs(e,["className","style","stroke","strokeGradient","direction","format","showInfo","size","percent","orbitStroke","id"]),f=this.props["aria-label"],g=this.props["aria-labelledby"],m=this.props["aria-valuetext"],{percentNumber:y}=this.state,b=I()(Zs,t,{[`${Zs}-horizontal`]:o===vs,[`${Zs}-vertical`]:o!==vs,[`${Zs}-large`]:"large"===c}),v=I()({[`${Zs}-track`]:!0}),_=I()(`${Zs}-track-inner`),w=this.calcPercent(u),S=this.calcPercent(y),x={background:this.selectStroke(i,u,s)};o===vs?x.width=`${w}%`:x.height=`${w}%`;const E=a(S);return r.createElement("div",Object.assign({id:h,className:b,style:n,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":w,"aria-labelledby":g,"aria-label":f,"aria-valuetext":m},Ce(p)),r.createElement("div",{className:v,style:d?{backgroundColor:d}:{},"aria-hidden":!0},r.createElement("div",{className:_,style:x,"aria-hidden":!0})),l?r.createElement("div",{className:`${Zs}-line-text`},E):null)}render(){const{type:e}=this.props;return"line"===e?this.renderLineProgress():this.renderCircleProgress()}}Ks.propTypes={"aria-label":R().string,"aria-labelledby":R().string,"aria-valuetext":R().string,className:R().string,direction:R().oneOf(bs),format:R().oneOfType([R().func,R().node]),id:R().string,motion:R().oneOfType([R().bool,R().func,R().object]),orbitStroke:R().string,percent:R().number,scale:R().number,showInfo:R().bool,size:R().oneOf(ms),stroke:R().oneOfType([R().string,R().arrayOf(R().shape({percent:R().number,color:R().string}))]),strokeGradient:R().bool,strokeLinecap:R().oneOf(fs),strokeWidth:R().number,style:R().object,type:R().oneOf(ds),width:R().number},Ks.defaultProps={className:"",direction:vs,format:e=>`${e}%`,motion:!0,orbitStroke:"var(--semi-color-fill-0)",percent:0,showInfo:!1,size:ys,stroke:ps,strokeGradient:!1,strokeLinecap:gs,strokeWidth:4,style:{},type:hs};const Xs=Ks,Vs={PREFIX:`${D}-radio`,INNER:`${D}-radio-inner`,TEXT:`${D}-radio-text`,INPUT:`${D}-radio-input`,CHECKED:`${D}-radio-checked`,DISABLED:`${D}-radio-disabled`,BUTTON:`${D}-radio-button`},Ws={PREFIX:`${D}-radioGroup`,INNER:`${D}-radioGroup-inner`,TEXT:`${D}-radioGroup-text`,INPUT:`${D}-radioGroup-input`,CHECKED:`${D}-radioGroup-checked`,DISABLED:`${D}-radioGroup-disabled`},Hs=["horizontal","vertical"],$s="horizontal",Ys=["advanced",""],Js="default",Qs="button",qs="card",eo="pureCard",to=["middle","small","large"];class no extends ue{constructor(e){super(Object.assign({},e))}init(){const e=this._getDisplayValue();this._setValue(e)}_getDisplayValue(){const{value:e,defaultValue:t}=this.getProps();let n;return"value"in this.getProps()?n=e:"defaultValue"in this.getProps()&&(n=t),n}handleChange(e){const t=this.getProp("mode"),n=this.getState("value"),{checked:r,value:i}=e.target,s=this._adapter.isInProps("value"),o=Object.assign(Object.assign({},e),{target:Object.assign(Object.assign({},e.target),{value:i})});"advanced"!==t||r||(o.target.value=void 0),s||("advanced"!==t||r?this._setValue(i):this._setValue(void 0)),"advanced"!==t&&n===i||this._adapter.notifyChange(o)}handlePropValueChange(e){this._setValue(e)}_setValue(e){this._adapter.setValue(e)}destroy(){}}class ro extends ue{constructor(){super(...arguments),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(n){fe(!0,"Warning: [Semi Radio] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)}}init(){const{children:e,extra:t,extraId:n,addonId:r}=this._adapter.getProps();e&&!r&&this._adapter.setAddonId(),t&&!n&&this._adapter.setExtraId()}setHover(e){this._adapter.setHover(e)}setChecked(e){this._adapter.setChecked(e)}}class io extends ue{constructor(e){super(Object.assign({},e))}init(){const e=this._adapter.getProp("checked"),t=this._adapter.getProp("defaultChecked");this.setChecked(e||t)}setChecked(e){this._adapter.setNativeControlChecked(e)}getChecked(){return this._adapter.getProp("checked")}handleChange(e){const t="checked"in this.getProps(),{checked:n}=e.target,r={target:Object.assign(Object.assign({},this.getProps()),{checked:n}),stopPropagation:()=>{e.stopPropagation()},preventDefault:()=>{e.preventDefault()}};t||this.setChecked(n),this._adapter.notifyChange(r)}destroy(){}}const so=r.createContext(null);const oo=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("circle",{cx:12,cy:12,r:5,fill:"currentColor"}))}),"radio");class ao extends Oe{constructor(e){super(e),this.state={checked:!1},this.foundation=new io(this.adapter),this.onChange=this.onChange.bind(this)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setNativeControlChecked:e=>{this.setState({checked:e})},notifyChange:e=>{this.props.onChange(e)}})}componentDidMount(){this.foundation.init()}componentDidUpdate(e){e.checked!==this.props.checked&&this.foundation.setChecked(this.props.checked)}componentWillUnmount(){this.foundation.destroy()}blur(){this.inputEntity.blur()}focus(){const{preventScroll:e}=this.props;this.inputEntity.focus({preventScroll:e})}onChange(e){this.foundation.handleChange(e)}render(){const{disabled:e,mode:t,autoFocus:n,name:i,isButtonRadio:s,isPureCardRadioGroup:o,addonId:a,extraId:l,"aria-label":c,focusInner:u,onInputFocus:d,onInputBlur:h}=this.props,{checked:p}=this.state,f=this.props.prefixCls||Vs.PREFIX,g=I()({[`${f}-inner`]:!0,[`${f}-inner-checked`]:Boolean(p),[`${f}-inner-buttonRadio`]:s,[`${f}-inner-pureCardRadio`]:o}),m=I()({[`${f}-focus`]:u,[`${f}-focus-border`]:u&&!p,[`${f}-inner-display`]:!s});return r.createElement("span",{className:g},r.createElement("input",{ref:e=>{this.inputEntity=e},autoFocus:n,type:"advanced"===t?"checkbox":"radio",checked:Boolean(p),disabled:e,onChange:this.onChange,name:i,"aria-label":c,"aria-labelledby":a,"aria-describedby":l,onFocus:d,onBlur:h}),r.createElement("span",{className:m},p?r.createElement(oo,null):null))}}ao.contextType=so,ao.propTypes={checked:R().bool,disabled:R().bool,isButtonRadio:R().bool,onChange:R().func,mode:R().oneOf(["advanced",""]),"aria-label":R().string,focusInner:R().bool,onInputFocus:R().func,onInputBlur:R().func,preventScroll:R().bool},ao.defaultProps={onChange:G,isButtonRadio:!1};const lo=ao;var co=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class uo extends Oe{constructor(e){super(e),this.onChange=e=>{const{onChange:t}=this.props;if(this.isInGroup()){const{radioGroup:t}=this.context;t.onChange&&t.onChange(e)}!("checked"in this.props)&&this.foundation.setChecked(e.target.checked),t&&t(e)},this.handleMouseEnter=e=>{this.props.onMouseEnter(e),this.foundation.setHover(!0)},this.handleMouseLeave=e=>{this.props.onMouseLeave(e),this.foundation.setHover(!1)},this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.state={hover:!1,addonId:e.addonId,extraId:e.extraId,checked:e.checked||e.defaultChecked||!1},this.foundation=new ro(this.adapter),this.radioEntity=null}componentDidUpdate(e){this.props.checked!==e.checked&&(q(this.props.checked)?this.foundation.setChecked(!1):Q(this.props.checked)&&this.foundation.setChecked(this.props.checked))}get adapter(){return Object.assign(Object.assign({},super.adapter),{setHover:e=>{this.setState({hover:e})},setAddonId:()=>{this.setState({addonId:ze({prefix:"addon"})})},setChecked:e=>{this.setState({checked:e})},setExtraId:()=>{this.setState({extraId:ze({prefix:"extra"})})},setFocusVisible:e=>{this.setState({focusVisible:e})}})}isInGroup(){return this.context&&this.context.radioGroup}focus(){this.radioEntity.focus()}blur(){this.radioEntity.blur()}render(){const e=this.props,{addonClassName:t,addonStyle:n,disabled:i,style:s,className:o,prefixCls:a,displayMode:l,children:c,extra:u,mode:d,type:h,value:p,name:f}=e,g=co(e,["addonClassName","addonStyle","disabled","style","className","prefixCls","displayMode","children","extra","mode","type","value","name"]);let m,y,b,v,_,w,S,x,E;const{hover:C,addonId:k,extraId:O,focusVisible:T,checked:z}=this.state,R={checked:z,disabled:i};this.isInGroup()?(m=this.context.radioGroup.value===p,y=i||this.context.radioGroup.disabled,b=this.context.mode,v=this.context.radioGroup.isButtonRadio,_=this.context.radioGroup.isCardRadio,w=this.context.radioGroup.isPureCardRadio,x=this.context.radioGroup.buttonSize,E=a||this.context.radioGroup.prefixCls,R.checked=m,R.disabled=y):(m=z,y=i,b=d,S="button"===h,E=a,v=h===Qs,w=h===eo,_=h===qs||w);const D=void 0===v?S:v,M=E||Vs.PREFIX,N=_||w||D,j=I()(M,{[`${M}-disabled`]:y,[`${M}-checked`]:m,[`${M}-${l}`]:Boolean(l),[`${M}-buttonRadioComponent`]:S,[`${M}-buttonRadioGroup`]:v,[`${M}-buttonRadioGroup-${x}`]:v&&x,[`${M}-cardRadioGroup`]:_,[`${M}-cardRadioGroup_disabled`]:y&&_,[`${M}-cardRadioGroup_checked`]:_&&m&&!y,[`${M}-cardRadioGroup_checked_disabled`]:_&&m&&y,[`${M}-cardRadioGroup_hover`]:_&&!m&&C&&!y,[o]:Boolean(o),[`${M}-focus`]:T&&(_||w)}),P=this.isInGroup()&&this.context.radioGroup.name,A=I()({[`${M}-addon`]:!D,[`${M}-addon-buttonRadio`]:D,[`${M}-addon-buttonRadio-checked`]:D&&m,[`${M}-addon-buttonRadio-disabled`]:D&&y,[`${M}-addon-buttonRadio-hover`]:D&&!m&&!y&&C,[`${M}-addon-buttonRadio-${x}`]:D&&x,[`${M}-focus`]:T&&D},t);return r.createElement("label",Object.assign({style:s,className:j,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.getDataAttr(g)),r.createElement(lo,Object.assign({},this.props,R,{mode:b,name:null!=f?f:P,isButtonRadio:D,isPureCardRadioGroup:w,onChange:this.onChange,ref:e=>{this.radioEntity=e},addonId:c&&k,extraId:u&&O,focusInner:T&&!N,onInputFocus:this.handleFocusVisible,onInputBlur:this.handleBlur})),c||u?r.createElement("div",{className:I()([`${M}-content`,{[`${M}-isCardRadioGroup_content`]:_}])},c?r.createElement("span",{className:A,style:n,id:k,"x-semi-prop":"children"},c):null,u&&!D?r.createElement("div",{className:`${M}-extra`,id:O,"x-semi-prop":"extra"},u):null):null)}}uo.contextType=so,uo.propTypes={autoFocus:R().bool,checked:R().bool,defaultChecked:R().bool,value:R().any,style:R().object,className:R().string,disabled:R().bool,prefixCls:R().string,displayMode:R().oneOf(["vertical",""]),onChange:R().func,onMouseEnter:R().func,onMouseLeave:R().func,mode:R().oneOf(Ys),extra:R().node,addonStyle:R().object,addonClassName:R().string,type:R().oneOf([Js,Qs,qs,eo]),"aria-label":R().string,preventScroll:R().bool},uo.defaultProps={autoFocus:!1,defaultChecked:!1,value:void 0,style:void 0,onMouseEnter:G,onMouseLeave:G,mode:"",type:"default"},uo.elementType="Radio";const ho=uo;var po=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class fo extends Oe{constructor(e){super(e),this.onChange=e=>{this.foundation.handleChange(e)},this.getFormatName=()=>this.props.name||"default",this.state={value:e.value||e.defaultValue},this.foundation=new no(this.adapter)}componentDidMount(){this.foundation.init()}componentDidUpdate(e){"number"==typeof e.value&&isNaN(e.value)&&"number"==typeof this.props.value&&isNaN(this.props.value)||e.value!==this.props.value&&this.foundation.handlePropValueChange(this.props.value)}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>{this.setState({value:e})},getProps:()=>this.props,isInProps:e=>Boolean(e in this.props),notifyChange:e=>{this.props.onChange&&this.props.onChange(e)}})}render(){const e=this.props,{children:t,options:n,mode:i,prefixCls:s,className:o,style:a,direction:l,type:c,buttonSize:u,id:d}=e,h=po(e,["children","options","mode","prefixCls","className","style","direction","type","buttonSize","id"]),p=c===Qs,f=c===eo,g=c===qs||f,m=c===Js,y=s||Ws.PREFIX,b=I()(o,{[y]:!0,[`${y}-wrapper`]:!0,[`${y}-${l}`]:l&&!p,[`${y}-${l}-default`]:l&&m,[`${y}-${l}-card`]:l&&g,[`${y}-buttonRadio`]:p}),v=this.state.value;let _;return n?_=(n||[]).map(((e,t)=>"string"==typeof e?r.createElement(ho,{key:t,disabled:this.props.disabled,value:e},e):r.createElement(ho,{key:t,disabled:e.disabled||this.props.disabled,value:e.value,extra:e.extra,className:e.className,style:e.style},e.label))):t&&(_=r.Children.map(t,((e,t)=>r.isValidElement(e)?r.cloneElement(e,{key:t}):null))),r.createElement("div",Object.assign({className:b,style:a,id:d,"aria-label":this.props["aria-label"],"aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"]},this.getDataAttr(h)),r.createElement(so.Provider,{value:{radioGroup:{onChange:this.onChange,value:v,disabled:this.props.disabled,name:this.getFormatName(),isButtonRadio:p,isCardRadio:g,isPureCardRadio:f,buttonSize:u,prefixCls:s},mode:i}},_))}}fo.propTypes={defaultValue:R().any,disabled:R().bool,name:R().string,options:R().array,buttonSize:R().oneOf(to),type:R().oneOf([Js,Qs,qs,eo]),value:R().any,onChange:R().func,children:R().node,prefixCls:R().string,className:R().string,style:R().object,direction:R().oneOf(Hs),mode:R().oneOf(Ys),"aria-label":R().string,"aria-describedby":R().string,"aria-errormessage":R().string,"aria-invalid":R().bool,"aria-labelledby":R().string,"aria-required":R().bool,id:R().string},fo.defaultProps={disabled:!1,onChange:G,direction:$s,mode:"",type:Js,buttonSize:"middle"};const go=fo;class mo extends ho{}mo.Group=go;const yo=mo;var bo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class vo extends ue{constructor(e){super(Object.assign({},e)),this._keydownHandler=null}init(){this._setDropdownWidth();const e=this.getProp("defaultOpen"),t=this.getProp("open"),n=this._collectOptions();this._setDefaultSelection(n),(e||t)&&this.open(void 0,n);this.getProp("autoFocus")&&this.focus()}focus(){const e=this._isFilterable(),t=this._isMultiple();this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1),e&&t?this.focusInput():e&&!t?this.toggle2SearchInput(!0):this._focusTrigger()}_focusTrigger(){this._adapter.focusTrigger()}destroy(){this._adapter.unregisterClickOutsideHandler()}_setDropdownWidth(){const{style:e,dropdownMatchSelectWidth:t}=this.getProps();let n;t&&(n=e&&Xi(e.width)||e&&tt(e.width)&&!e.width.includes("%")?e.width:this._adapter.getTriggerWidth(),this._adapter.setOptionWrapperWidth(n))}_collectOptions(){const e=this._adapter.getOptionsFromChildren();return this._adapter.updateOptions(e),this._adapter.rePositionDropdown(),e}_setDefaultSelection(e){let{value:t}=this.getProps();const{defaultValue:n}=this.getProps();this._isControlledComponent()||(t=n),this._update(t,e)}handleOptionListChange(){const e=this._collectOptions(),{selections:t}=this.getStates();this.updateOptionsActiveStatus(t,e);const{defaultActiveFirstOption:n}=this.getProps();n&&this._adapter.updateFocusIndex(0)}handleOptionListChangeHadDefaultValue(){const e=this.getState("selections");let t;const{onChangeWithObject:n}=this.getProps(),r=this._isMultiple();switch(!0){case r&&Boolean(e.size):try{t=[...e].map((e=>n?e[1]:e[1].value))}catch(s){t=[]}break;case r&&!e.size:t=[];break;case!r&&Boolean(e.size):try{t=n?[...e][0][1]:[...e][0][1].value}catch(s){}case!r&&!e.size:}const i=this._adapter.getOptionsFromChildren();this._update(t,i)}handleValueChange(e){const{allowCreate:t,autoClearSearchValue:n,remote:r}=this.getProps(),{inputValue:i}=this.getStates();let s;t&&this._isControlledComponent()?(s=this.getState("options"),s.forEach((e=>e._show=!0))):s=this._adapter.getOptionsFromChildren(),this._adapter.rePositionDropdown(),this._isFilterable()&&!n&&i&&!r&&(s=this._filterOption(s,i)),this._update(e,s)}_update(e,t){let n;this._isMultiple()?(n=this._updateMultiple(e,t),this.updateOverflowItemCount(n.size)):n=this._updateSingle(e,t),this._adapter.updateSelection(n),this.updateOptionsActiveStatus(n,t)}_updateSingle(e,t){const n=new Map,{onChangeWithObject:r}=this.getProps(),i=r&&void 0!==e?e.value:e,s=t.filter((e=>e.value===i)),o=!s.length&&null!=i;if(s.length){const e=s[0],t=Object.assign({},e);n.set(t.label,t)}else if(o){let t={value:e,label:e,_notExist:!0,_scrollIndex:-1};r&&(t=Object.assign(Object.assign({},e),{_notExist:!0,_scrollIndex:-1})),n.set(t.label,t)}return n}_updateMultiple(e,t){const n=this.getState("selections");let r=[];const i=Array.isArray(e);this.checkMultipleProps(),n.size&&(r=[...n].map((e=>e[1])));const s=new Map;let o=e;const{onChangeWithObject:a}=this.getProps();return a&&i&&(o=e.map((e=>e.value))),i&&o.length&&o.forEach(((n,i)=>{const o=t.findIndex((e=>e.value===n));if(-1!==o)s.set(t[o].label,t[o]);else{const t=r.findIndex((e=>e.value===n));if(-1!==t){const e=r[t];s.set(e.label,e)}else{let t={value:n,label:n,_notExist:!0};a&&(t=Object.assign(Object.assign({},e[i]),{_notExist:!0})),s.set(t.label,Object.assign(Object.assign({},t),{_scrollIndex:-1}))}}})),s}_isMultiple(){return this.getProp("multiple")}_isDisabled(){return this.getProp("disabled")}_isFilterable(){return Boolean(this.getProp("filter"))}handleClick(e){const{clickToHide:t}=this.getProps(),{isOpen:n}=this.getStates();this._isDisabled()||(n?n&&t?this.close(e):n&&!t&&this.focusInput():(this.open(),this._notifyFocus(e)))}open(e,t){const n=this._isFilterable(),r=t||this.getState("options");if(n){const e="",t=this._filterOption(r,e).filter((e=>!e._inputCreateOnly));this._adapter.updateOptions(t),this.toggle2SearchInput(!0)}else this._adapter.updateFocusState(!0);this._adapter.openMenu(),this._setDropdownWidth(),this._adapter.notifyDropdownVisibleChange(!0),this.bindKeyBoardEvent(),this._adapter.registerClickOutsideHandler((e=>{this.close(e),this._notifyBlur(e),this._adapter.updateFocusState(!1)}))}toggle2SearchInput(e){e?this._adapter.toggleInputShow(e,(()=>this.focusInput())):this._adapter.toggleInputShow(e,(()=>{}))}close(e,t){this._adapter.closeMenu(),this._adapter.notifyDropdownVisibleChange(!1),this._adapter.setIsFocusInContainer(!1),this._adapter.unregisterClickOutsideHandler();const n=this._isFilterable();n&&this.toggle2SearchInput(!1),this._adapter.once("popoverClose",(()=>{n&&this.clearInput(e),t&&t()}))}onSelect(e,t,n){if(this._isDisabled())return;e._inputCreateOnly&&this._adapter.notifyCreate(e);this._isMultiple()?this._handleMultipleSelect(e,n):(this._handleSingleSelect(e,n),this._focusTrigger()),this._adapter.updateFocusIndex(t)}_handleSingleSelect(e,t){var{value:n,label:r}=e,i=bo(e,["value","label"]);const s=(new Map).set(r,Object.assign({value:n,label:r},i));this._notifySelect(n,Object.assign({value:n,label:r},i)),this._isControlledComponent()?this.close(t,(()=>{this._notifyChange(s)})):(this._adapter.updateSelection(s),this._notifyChange(s),this.close(t,(()=>{this.updateOptionsActiveStatus(s)})))}_handleMultipleSelect(e,t){var{value:n,label:r}=e,i=bo(e,["value","label"]);const s=this._adapter.getMaxLimit(),o=this._adapter.getSelections(),{autoClearSearchValue:a}=this.getProps();if(o.has(r))this._notifyDeselect(n,Object.assign({value:n,label:r},i)),o.delete(r);else{if(s&&o.size===s)return void this._adapter.notifyMaxLimit(Object.assign({value:n,label:r},O(i,"_scrollIndex")));this._notifySelect(n,Object.assign({value:n,label:r},i)),o.set(r,Object.assign({value:n,label:r},i))}if(this._isControlledComponent())this._notifyChange(o),this._isFilterable()&&(a&&this.clearInput(t),this.focusInput());else{this._adapter.updateSelection(o),this.updateOverflowItemCount(o.size),this._adapter.rePositionDropdown();let{options:e}=this.getStates();if(this._isFilterable()){if(a){this.clearInput(t);const n="";e=this._filterOption(e,n)}this.focusInput()}this.updateOptionsActiveStatus(o,e),this._notifyChange(o)}}clearSelected(){const e=new Map;this._isControlledComponent()?(this._notifyChange(e),this._adapter.notifyClear()):(this._adapter.updateSelection(e),this.updateOptionsActiveStatus(e),this._notifyChange(e),this._adapter.notifyClear());const{isOpen:t}=this.getStates();t&&this._adapter.rePositionDropdown()}updateOptionsActiveStatus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getState("options");const{allowCreate:n}=this.getProps(),r=t.map((t=>(e.has(t.label)?(t._selected=!0,n&&delete t._inputCreateOnly):(t._inputCreateOnly&&(t._show=!1),t._selected=!1),t)));this._adapter.updateOptions(r)}removeTag(e){const t=this._adapter.getSelections();t.delete(e.label),this._isControlledComponent()?(this._notifyDeselect(e.value,e),this._notifyChange(t)):(this._notifyDeselect(e.value,e),this._adapter.updateSelection(t),this.updateOverflowItemCount(t.size),this.updateOptionsActiveStatus(t),this._adapter.rePositionDropdown(),this._notifyChange(t))}clearInput(e){const{inputValue:t}=this.getStates();if(""!==t){this._adapter.updateInputValue(""),this._adapter.notifySearch("",e);const{options:t}=this.getStates(),{remote:n}=this.getProps();let r=t;n||(r=this._filterOption(t,"")),this._adapter.updateOptions(r)}}focusInput(){this._adapter.focusInput(),this._adapter.updateFocusState(!0),this._adapter.setIsFocusInContainer(!1)}handleInputChange(e,t){this._adapter.updateInputValue(e);const{options:n,isOpen:r}=this.getStates(),{allowCreate:i,remote:s}=this.getProps();let o=n;s||(o=this._filterOption(n,e)),o=this._createOptionByInput(i,o,e),this._adapter.updateOptions(o),this._adapter.notifySearch(e,t),this._isMultiple()&&this._adapter.rePositionDropdown()}_filterOption(e,t){const n=this.getProp("filter");if(!n)return e;if("boolean"==typeof n&&n){const n=t.toLowerCase();return e.map((e=>{const t=e.label.toString().toLowerCase(),r=e._parentGroup&&e._parentGroup.label,i=t.includes(n),s=tt(r)&&r.toLowerCase().includes(n);return e._show=!(!i&&!s),e}))}return"function"==typeof n?e.map((e=>(n(t,e)?e._show=!0:e._show=!1,e))):void 0}_createOptionByInput(e,t,n){if(e)if(n){const e={_show:!0,_selected:!1,value:n,label:n,_inputCreateOnly:!0};let r=-1,i=-1;t.forEach(((e,t)=>{(e._show||e._inputCreateOnly)&&(e.label===n&&(i=t),e._inputCreateOnly&&(r=t,e.value=n,e.label=n,e._show=!0))})),-1===r&&-1===i&&t.push(e),-1!==i&&(t=t.filter((e=>!e._inputCreateOnly)))}else t=t.filter((e=>!e._inputCreateOnly));return t}bindKeyBoardEvent(){this._keydownHandler=e=>{this._handleKeyDown(e)},this._adapter.registerKeyDown(this._keydownHandler)}unBindKeyBoardEvent(){this._keydownHandler&&this._adapter.unregisterKeyDown()}_handleKeyDown(e){const t=e.keyCode,{loading:n,filter:r,multiple:i,disabled:s}=this.getProps(),{isOpen:o}=this.getStates();if(!n&&!s)switch(t){case he.UP:e.preventDefault(),this._handleArrowKeyDown(-1);break;case he.DOWN:e.preventDefault(),this._handleArrowKeyDown(1);break;case he.BACKSPACE:this._handleBackspaceKeyDown();break;case he.ENTER:Xt(e),this._handleEnterKeyDown(e);break;case he.ESC:o&&this.close(e),r&&!i&&this._focusTrigger();break;case he.TAB:this._handleTabKeyDown(e)}}handleContainerKeyDown(e){const t=e.keyCode,{isOpen:n}=this.getStates();if(t===he.TAB)n&&this._handleTabKeyDown(e)}_getEnableFocusIndex(e){const{focusIndex:t,options:n}=this.getStates(),r=n.filter((e=>e._show)),i=r.length;let s=t+e;if(s<0&&(s=i-1),s>=i&&(s=0),e>0){let e=-1;for(let t=0;t<r.length;t++){if(!r[t].disabled&&(e=t),e>=s)break}s=e}else{let e=r.length;for(let t=i-1;t>=0;t--){if(!r[t].disabled&&(e=t),e<=s)break}s=e}this._adapter.updateFocusIndex(s),this._adapter.updateScrollTop(s)}_handleArrowKeyDown(e){const{isOpen:t}=this.getStates();t?this._getEnableFocusIndex(e):this.open()}_handleTabKeyDown(e){const{isOpen:t}=this.getStates();if(this._adapter.updateFocusState(!1),t){const t=this._adapter.getContainer(),n=this._adapter.getFocusableElements(t);n.length>0?e.shiftKey?this._handlePanelOpenShiftTabKeyDown(n,e):this._handlePanelOpenTabKeyDown(n,e):(this.close(e),this._notifyBlur(e))}else this._notifyBlur(e)}_handlePanelOpenTabKeyDown(e,t){const n=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?n===e[e.length-1]&&(this._focusTrigger(),this.close(t),Xt(t)):(e[0].focus(),this._adapter.setIsFocusInContainer(!0),Xt(t))}_handlePanelOpenShiftTabKeyDown(e,t){const n=this._adapter.getActiveElement();this._adapter.getIsFocusInContainer()?n===e[0]&&(this._focusTrigger(),this._adapter.setIsFocusInContainer(!1),Xt(t)):(this.close(t),this._notifyBlur(t))}_handleEnterKeyDown(e){const{isOpen:t,options:n,focusIndex:r}=this.getStates();if(t)if(-1!==r){const t=n.filter((e=>e._show)),{length:i}=t;if(i<=r)return;if(t&&i){const n=t[r];if(n.disabled)return;this.onSelect(n,r,e)}}else this.close(e);else this.open()}_handleBackspaceKeyDown(){if(this._isMultiple()){const e=this._adapter.getSelections(),{inputValue:t}=this.getStates(),n=e.size;if(n&&!t){const t=[...e.keys()];let r=n-1,i=t[r],s=e.get(i),o=!1;if(s.disabled&&0===r)return;for(;s.disabled&&0!==r;)r-=1,i=t[r],s=e.get(i),0==r&&s.disabled&&(o=!0);o||this.removeTag(s)}}}_notifyChange(e){const{onChangeWithObject:t}=this.getProps(),n=this.getState("selections");let r;const i=[...e.values()],s=this._isMultiple();if(this._diffSelections(e,n,s))switch(!0){case t:this._notifyChangeWithObject(e);break;case!t&&!s:r=i.length?i[0].value:void 0,this._adapter.notifyChange(r);break;case!t&&s:r=i.length?i.map((e=>e.value)):[],this._adapter.notifyChange(r)}}_removeInternalKey(e){let t=Object.assign({},e);return delete t._parentGroup,delete t._show,delete t._selected,delete t._scrollIndex,delete t._keyInJsx,"_keyInOptionList"in t&&(t.key=t._keyInOptionList,delete t._keyInOptionList),t}_notifySelect(e,t){const n=this._removeInternalKey(t);this._adapter.notifySelect(e,n)}_notifyDeselect(e,t){const n=this._removeInternalKey(t);this._adapter.notifyDeselect(e,n)}_diffSelections(e,t,n){let r=!0;if(!n){const n=[...e.values()],i=[...t.values()],s=n[0]?n[0].label:n[0],o=i[0]?i[0].label:i[0];r=!(0,Me.Z)(s,o)}return r}_notifyChangeWithObject(e){this.getState("selections");const t=[];for(const n of e.entries()){let e=Object.assign({label:n[0]},n[1]);e=this._removeInternalKey(e),t.push(e)}this._isMultiple()?this._adapter.notifyChange(t):this._adapter.notifyChange(t[0])}_notifyBlur(e){this._adapter.notifyBlur(e)}_notifyFocus(e){this._adapter.notifyFocus(e)}handleMouseEnter(e){this._adapter.updateHovering(!0),this._adapter.notifyMouseEnter(e)}handleMouseLeave(e){this._adapter.updateHovering(!1),this._adapter.notifyMouseLeave(e)}handleClearClick(e){const{filter:t}=this.getProps();t&&this.clearInput(e),this.clearSelected(),e.stopPropagation()}handleKeyPress(e){e&&e.key===de&&this.handleClick(e)}handleClearBtnEnterPress(e){pe(e)&&this.handleClearClick(e)}handleOptionMouseEnter(e){this._adapter.updateFocusIndex(e)}handleListScroll(e){this._adapter.notifyListScroll(e)}handleTriggerFocus(e){this.bindKeyBoardEvent(),this._adapter.setIsFocusInContainer(!1)}handleTriggerBlur(e){const{filter:t,autoFocus:n}=this.getProps(),{isOpen:r,isFocus:i}=this.getStates();i&&!r&&(this._notifyBlur(e),this._adapter.updateFocusState(!1))}handleInputBlur(e){const{filter:t,autoFocus:n}=this.getProps(),r=this._isMultiple();n&&t&&!r&&this.toggle2SearchInput(!1)}selectAll(){const{options:e}=this.getStates(),{onChangeWithObject:t}=this.getProps();let n=[];this._isMultiple()?(n=t?e:e.map((e=>e.value)),this.handleValueChange(n),this._adapter.notifyChange(n)):console.warn("[Semi Select]: It seems that you have called the selectAll method in the single-selection Select.\n                Please note that this is not a legal way to use it")}checkMultipleProps(e){if(this._isMultiple()){const t=e||this.getProps(),{defaultValue:n,value:r}=t,i=r||n;B(i)||Array.isArray(i)||fe(!0,"[Semi Select] defaultValue/value should be array type in multiple mode")}}updateScrollTop(){this._adapter.updateScrollTop()}updateOverflowItemCount(e,t){const{maxTagCount:n,ellipsisTrigger:r}=this.getProps();r&&(t?this._adapter.updateOverflowItemCount(t):"number"==typeof n&&(e-n>0?this._adapter.updateOverflowItemCount(e-n):this._adapter.updateOverflowItemCount(0)))}updateIsFullTags(){const{isFullTags:e}=this.getStates();e||this._adapter.setState({isFullTags:!0})}handlePopoverClose(){this._adapter.emit("popoverClose")}handleSlotMouseEnter(){this._adapter.updateFocusIndex(-1)}}const _o={PREFIX:`${D}-select`,PREFIX_OPTION:`${D}-select-option`,PREFIX_GROUP:`${D}-select-group`},wo={SIZE_SET:["small","large","default"],POSITION_SET:Jt.POSITION_SET,MODE_SELECT:"select",MODE_AUTOCOMPLETE:"autoComplete",STATUS:["default","error","warning","success"]},So=270,xo={PREFIX:`${D}-tag`},Eo=["default","small","large"],Co=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"],ko=["light","solid","ghost"],Oo=["square","circle"],To={PREFIX:`${D}-avatar`},Io=["circle","square"],zo=["extra-extra-small","extra-small","small","default","medium","large","extra-large"],Ro=["grey","red","pink","purple","violet","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","white"];class Do extends ue{constructor(e){super(Object.assign({},e)),this.handleFocusVisible=e=>{const{target:t}=e;try{t.matches(":focus-visible")&&this._adapter.setFocusVisible(!0)}catch(n){fe(!0,"Warning: [Semi Avatar] The current browser does not support the focus-visible")}},this.handleBlur=()=>{this._adapter.setFocusVisible(!1)},this.changeScale=()=>{const{gap:e}=this.getProps(),t=this._adapter.getAvatarNode(),n=null==t?void 0:t.firstChild,[r,i]=[(null==t?void 0:t.offsetWidth)||0,(null==n?void 0:n.offsetWidth)||0];if(0!==r&&0!==i&&2*e<r){const t=r-2*e>i?1:(r-2*e)/i;this._adapter.setScale(t)}}}init(){const{children:e}=this.getProps();"string"==typeof e&&this.changeScale()}destroy(){}handleImgLoadError(){const{onError:e}=this.getProps();!1!==(e?e():void 0)&&this._adapter.notifyImgState(!1)}handleEnter(e){this._adapter.notifyEnter(e)}handleLeave(e){this._adapter.notifyLeave(e)}}var Mo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const No=zo,jo=Io,Po=Ro,Ao=To.PREFIX;class Lo extends Oe{constructor(e){super(e),this.handleFocusVisible=e=>{this.foundation.handleFocusVisible(e)},this.handleBlur=e=>{this.foundation.handleBlur()},this.getContent=()=>{const{children:e,onClick:t,imgAttr:n,src:i,srcSet:s,alt:o}=this.props,{isImgExist:a}=this.state;let l=e;const c=t!==j,u=i&&a,d={tabIndex:0,onKeyDown:this.handleKeyDown,onFocus:this.handleFocusVisible,onBlur:this.handleBlur};if(u){const e=c?`clickable Avatar: ${o}`:o,t=Object.assign(Object.assign({src:i,srcSet:s,onError:this.handleError},n),{className:I()({[`${Ao}-no-focus-visible`]:c})}),a=c?Object.assign(Object.assign({},t),d):t;l=r.createElement("img",Object.assign({alt:e},a))}else if("string"==typeof e){const t=null!=o?o:e,n={role:"img","aria-label":c?`clickable Avatar: ${t}`:t,className:I()(`${Ao}-label`,{[`${Ao}-no-focus-visible`]:c})},i=c?Object.assign(Object.assign({},n),d):n,s={transform:`scale(${this.state.scale})`};l=r.createElement("span",{className:`${Ao}-content`,style:s},r.createElement("span",Object.assign({},i,{"x-semi-prop":"children"}),e))}return l},this.state={isImgExist:!0,hoverContent:"",focusVisible:!1,scale:1},this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.handleError=this.handleError.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.getContent=this.getContent.bind(this),this.avatarRef=r.createRef()}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyImgState:e=>{this.setState({isImgExist:e})},notifyEnter:e=>{const{hoverMask:t}=this.props,n=t;this.setState({hoverContent:n},(()=>{const{onMouseEnter:t}=this.props;t&&t(e)}))},notifyLeave:e=>{this.setState({hoverContent:""},(()=>{const{onMouseLeave:t}=this.props;t&&t(e)}))},setFocusVisible:e=>{this.setState({focusVisible:e})},setScale:e=>{this.setState({scale:e})},getAvatarNode:()=>{var e;return null===(e=this.avatarRef)||void 0===e?void 0:e.current}})}componentDidMount(){this.foundation=new Do(this.adapter),this.foundation.init()}componentDidUpdate(e){if(this.props.src&&this.props.src!==e.src){const e=new Image(0,0);e.src=this.props.src,e.onload=()=>{this.setState({isImgExist:!0})},e.onerror=()=>{this.setState({isImgExist:!1})},e.onabort=()=>{this.setState({isImgExist:!1})}}"string"==typeof this.props.children&&this.props.children!==e.children&&this.foundation.changeScale()}componentWillUnmount(){this.foundation.destroy()}onEnter(e){this.foundation.handleEnter(e)}onLeave(e){this.foundation.handleLeave(e)}handleError(){this.foundation.handleImgLoadError()}handleKeyDown(e){const{onClick:t}=this.props;switch(e.key){case"Enter":t(e),Xt(e);break;case"Escape":e.target.blur()}}render(){const e=this.props,{shape:t,children:n,size:i,color:s,className:o,hoverMask:a,onClick:l,imgAttr:c,src:u,srcSet:d,style:h,alt:p,gap:f}=e,g=Mo(e,["shape","children","size","color","className","hoverMask","onClick","imgAttr","src","srcSet","style","alt","gap"]),{isImgExist:m,hoverContent:y,focusVisible:b}=this.state,v=u&&m,_=I()(Ao,{[`${Ao}-${t}`]:t,[`${Ao}-${i}`]:i,[`${Ao}-${s}`]:s&&!v,[`${Ao}-img`]:v,[`${Ao}-focus`]:b},o),w=y?r.createElement("div",{className:`${Ao}-hover`,"x-semi-prop":"hoverContent"},y):null;return r.createElement("span",Object.assign({},g,{style:h,className:_,onClick:l,onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,role:"listitem",ref:this.avatarRef}),this.getContent(),w)}}Lo.defaultProps={size:"medium",color:"grey",shape:"circle",gap:3,onClick:j,onMouseEnter:j,onMouseLeave:j},Lo.propTypes={children:R().node,color:R().oneOf(Po),shape:R().oneOf(jo),size:R().oneOf(No),hoverMask:R().node,className:R().string,style:R().object,gap:R().number,imgAttr:R().object,src:R().string,srcSet:R().string,alt:R().string,onError:R().func,onClick:R().func,onMouseEnter:R().func,onMouseLeave:R().func},Lo.elementType="Avatar";var Fo=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Uo=xo.PREFIX,Go=Co,Bo=Eo,Zo=ko,Ko=Oo;class Xo extends r.Component{constructor(e){super(e),this.state={visible:!0},this.close=this.close.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}static getDerivedStateFromProps(e){return"visible"in e?{visible:e.visible}:null}setVisible(e){"visible"in this.props||this.setState({visible:e})}close(e,t,n){const{onClose:r}=this.props;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),r&&r(t,e,n),e.defaultPrevented||this.setVisible(!1)}handleKeyDown(e){const{closable:t,onClick:n,onKeyDown:r}=this.props;switch(e.key){case"Backspace":case"Delete":t&&this.close(e,this.props.children,this.props.tagKey),Xt(e);break;case"Enter":n(e),Xt(e);break;case"Escape":e.target.blur()}r&&r(e)}renderAvatar(){const{avatarShape:e,avatarSrc:t}=this.props;return r.createElement(Lo,{src:t,shape:e})}render(){const e=this.props,{tagKey:t,children:n,size:i,color:s,closable:o,visible:a,onClose:l,onClick:c,className:u,type:d,shape:h,avatarSrc:p,avatarShape:f,tabIndex:g,prefixIcon:m,suffixIcon:y}=e,b=Fo(e,["tagKey","children","size","color","closable","visible","onClose","onClick","className","type","shape","avatarSrc","avatarShape","tabIndex","prefixIcon","suffixIcon"]),{visible:v}=this.state,_=c!==Xo.defaultProps.onClick||o,w={role:"button",tabIndex:g||0,onKeyDown:this.handleKeyDown},S=Object.assign(Object.assign({},b),{onClick:c,tabIndex:g,className:I()(Uo,{[`${Uo}-default`]:"default"===i,[`${Uo}-small`]:"small"===i,[`${Uo}-large`]:"large"===i,[`${Uo}-square`]:"square"===h,[`${Uo}-circle`]:"circle"===h,[`${Uo}-${d}`]:d,[`${Uo}-${s}-${d}`]:s&&d,[`${Uo}-closable`]:o,[`${Uo}-invisible`]:!v,[`${Uo}-avatar-${f}`]:p},u)}),x=_?Object.assign(Object.assign({},S),w):S,E=o?r.createElement("div",{className:`${Uo}-close`,onClick:e=>this.close(e,n,t)},r.createElement(Nr,{size:"small"})):null,C=tt(n),k=I()(`${Uo}-content`,`${Uo}-content-${C?"ellipsis":"center"}`);return r.createElement("div",Object.assign({"aria-label":this.props["aria-label"]||C?`${o?"Closable ":""}Tag: ${n}`:""},x),m?r.createElement("div",{className:`${Uo}-prefix-icon`},m):null,p?this.renderAvatar():null,r.createElement("div",{className:k},n),y?r.createElement("div",{className:`${Uo}-suffix-icon`},y):null,E)}}Xo.defaultProps={size:Bo[0],color:Go[0],closable:!1,type:Zo[0],onClose:()=>{},onClick:()=>{},onMouseEnter:()=>{},style:{},className:"",shape:"square",avatarShape:"square",prefixIcon:null,suffixIcon:null},Xo.propTypes={children:R().node,tagKey:R().oneOfType([R().string,R().number]),size:R().oneOf(Bo),color:R().oneOf(Go),type:R().oneOf(Zo),closable:R().bool,visible:R().bool,onClose:R().func,onClick:R().func,prefixIcon:R().node,suffixIcon:R().node,style:R().object,className:R().string,avatarSrc:R().string,avatarShape:R().oneOf(Ko),"aria-label":R().string};const Vo=xo.PREFIX,Wo=Eo,Ho=Oo;class $o extends r.PureComponent{renderNTag(e,t){const{size:n,showPopover:i,popoverProps:s,onPlusNMouseEnter:o}=this.props;let a=r.createElement(Xo,{closable:!1,size:n,color:"grey",style:{backgroundColor:"transparent"},key:"_+n",onMouseEnter:o},"+",e);return i&&(a=r.createElement(pr,Object.assign({showArrow:!0,content:t,trigger:"hover",position:"top",autoAdjustOverflow:!0,className:`${Vo}-rest-group-popover`},s,{key:"_+n_Popover"}),a)),a}renderMergeTags(e){const{maxTagCount:t,tagList:n,restCount:r}=this.props,i=r||n.length-t;let s=e;const o=e.slice(0,t),a=e.slice(t);let l=null;return i>0&&(l=this.renderNTag(i,a),o.push(l),s=o),s}renderAllTags(){const{tagList:e,size:t,mode:n,avatarShape:i,onTagClose:s}=this.props,o=e.map((e=>{if("custom"===n)return e;const o=Object.assign({},e);return o.size||(o.size=t),o.avatarShape||(o.avatarShape=i),o.tagKey||("string"==typeof o.children||"number"==typeof o.children?o.tagKey=o.children:o.tagKey=Math.random()),r.createElement(Xo,Object.assign({},o,{key:o.tagKey,onClose:(e,t,n)=>{o.onClose&&o.onClose(e,t,n),s&&s(e,t,n)}}))}));return o}render(){const{style:e,className:t,maxTagCount:n,size:i}=this.props,s=I()({[`${Vo}-group`]:!0,[`${Vo}-group-max`]:n,[`${Vo}-group-small`]:"small"===i,[`${Vo}-group-large`]:"large"===i},t),o=this.renderAllTags(),a=void 0===n?o:this.renderMergeTags(o);return r.createElement("div",{style:e,className:s},a)}}$o.defaultProps={style:{},className:"",size:Wo[0],avatarShape:"square",onTagClose:()=>{},onPlusNMouseEnter:()=>{}},$o.propTypes={children:R().node,style:R().object,className:R().string,maxTagCount:R().number,restCount:R().number,tagList:R().array,size:R().oneOf(Wo),mode:R().string,onTagClose:R().func,showPopover:R().bool,popoverProps:R().object,avatarShape:R().oneOf(Ho)};const Yo={PREFIX:D+"-overflow-list"},Jo={COLLAPSE:"collapse",SCROLL:"scroll"},Qo={START:"start",END:"end"},qo={BOUNDARY_SET:Object.values(Qo),POSITION_SET:["vertical","horizontal"],MODE_SET:Object.values(Jo),MODE_MAP:Jo,BOUNDARY_MAP:Qo,OVERFLOW_DIR:{NONE:0,GROW:1,SHRINK:2}},ea=4;class ta extends r.PureComponent{componentDidMount(){const{items:e}=this.props;this.cachedKeys=Object.keys(e);const{root:t,threshold:n,rootMargin:r,option:i,onIntersect:s}=this.props;this.observer=new IntersectionObserver(s,Object.assign({root:t,threshold:n,rootMargin:r},i)),this.observeElement()}componentDidUpdate(){const{items:e}=this.props,t=Object.keys(e);(0,Me.Z)(this.cachedKeys,t)||(this.observeElement(!0),this.cachedKeys=t)}componentWillUnmount(){this.observer&&(this.observer.disconnect(),this.observer=null)}observeElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{items:t}=this.props;jt(t)?this.observer.disconnect():(e&&this.observer.disconnect(),Object.keys(t).forEach((e=>{const n=t[e];n&&qt(n)&&this.observer.observe(n)})))}render(){const{children:e}=this.props;return e}}ta.propTypes={onIntersect:R().func,option:R().object,root:R().any,threshold:R().number,rootMargin:R().string,items:R().object},ta.defaultProps={onIntersect:()=>{},threshold:.75,rootMargin:"0px",option:{},items:{}};var na=n(48163);const ra=qo.BOUNDARY_MAP;const ia=class extends ue{constructor(e){super(Object.assign({},e)),this.previousY=void 0,this.isScrollMode=()=>{const{renderMode:e}=this.getProps();return"scroll"===e},this.getReversedItems=()=>{const{items:e}=this.getProps();return(0,na.Z)(e).reverse()}}getOverflowItem(){const{items:e}=this.getProps(),{visibleState:t,overflow:n}=this.getStates();if(!this.isScrollMode())return n;const r=e.map((e=>{let{key:n}=e;return Boolean(t.get(n))})),i=r.indexOf(!0),s=r.lastIndexOf(!0),o=[];return o[0]=i>=0?e.slice(0,i):[],o[1]=s>=0?e.slice(s+1,e.length):e,o}handleIntersect(e){const t=(0,na.Z)(this.getState("visibleState")),n={};e.forEach((e=>{const r=ae(e,"target.dataset.scrollkey"),i=e.isIntersecting;n[r]=e,t.set(r,i)}));let r=!1;for(const a of t.values())if(a){r=!0;break}const i=r,[s]=e,o=s.boundingClientRect.y;i||void 0===this.previousY||o===this.previousY?(this.previousY=o,this._adapter.updateVisibleState(t),this._adapter.notifyIntersect(n)):this.previousY=o}handleCollapseOverflow(){const{minVisibleItems:e,collapseFrom:t}=this.getProps(),{overflowWidth:n,containerWidth:r,pivot:i,overflowStatus:s}=this.getStates(),{items:o,onOverflow:a}=this.getProps();let l=n,c=0,u=!1;for(const d of this._adapter.getItemSizeMap().values()){if(l+=d,l>r){u=!0;break}if(c===o.length-1){this._adapter.updateStates({overflowStatus:"normal",pivot:o.length-1,visible:o,overflow:[]});break}c++}if(u){const n=Math.max(e,c),r=t===ra.START,s=r?this.getReversedItems().slice(0,n).reverse():o.slice(0,n),l=r?this.getReversedItems().slice(n).reverse():o.slice(n);return this._adapter.updateStates({overflowStatus:"overflowed",pivot:n,visible:s,overflow:l}),void(i!==n&&a(l))}}},sa=Yo.PREFIX,oa=qo.BOUNDARY_MAP,aa=qo.OVERFLOW_DIR,la=qo.MODE_MAP;class ca extends Oe{constructor(e){var t;super(e),t=this,this.scroller=null,this.spacer=null,this.isScrollMode=()=>{const{renderMode:e}=this.props;return e===la.SCROLL},this.resize=function(){var e;const n=null===(e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0])||void 0===e?void 0:e.target.clientWidth;t.setState({containerWidth:n,overflowStatus:"calculating"})},this.reintersect=e=>{this.foundation.handleIntersect(e)},this.mergeRef=(e,t,n)=>{this.itemRefs[n]=t,"function"==typeof e?e(t):"object"==typeof e&&e&&"current"in e&&(e.current=t)},this.renderOverflow=()=>{const e=this.foundation.getOverflowItem();return this.props.overflowRenderer(e)},this.getItemKey=(e,t)=>{const{itemKey:n}=this.props;return(0,Xe.Z)(n)?n(e):ae(e,n||"key",t)},this.renderItemList=()=>{const{className:e,wrapperClassName:t,wrapperStyle:n,style:i,visibleItemRenderer:s,renderMode:o,collapseFrom:a}=this.props,{visible:l,overflowStatus:c}=this.state;let u=this.renderOverflow();if(!this.isScrollMode()&&(Array.isArray(u)&&(u=r.createElement(r.Fragment,null,u)),r.isValidElement(u))){const e=r.cloneElement(u);u=r.createElement(br,{onResize:e=>{let[t]=e;this.setState({overflowWidth:t.target.clientWidth,overflowStatus:"calculating"})}},r.createElement("div",{className:`${sa}-overflow`},e))}const d=o===la.SCROLL?[u[0],r.createElement("div",{className:I()(t,`${sa}-scroll-wrapper`),ref:e=>{this.scroller=e},style:Object.assign({},n),key:`${sa}-scroll-wrapper`},l.map(s).map((e=>{const{forwardRef:t,key:n}=e;return r.cloneElement(e,{ref:e=>this.mergeRef(t,e,n),"data-scrollkey":`${n}`,key:n})}))),u[1]]:[a===oa.START?u:null,l.map(((e,t)=>{const{key:n}=e,i=s(e,t),o=r.cloneElement(i);return r.createElement(br,{key:null!=n?n:t,onResize:n=>{let[r]=n;return this.onItemResize(r,e,t)}},r.createElement("div",{key:null!=n?n:t,className:`${sa}-item`},o))})),a===oa.END?u:null];return r.createElement("div",{className:I()(`${sa}`,e),style:Object.assign(Object.assign({},i),o===la.COLLAPSE?{maxWidth:"100%",visibility:"calculating"===c?"hidden":"visible"}:null)},...d)},this.onItemResize=(e,t,n)=>{const r=this.getItemKey(t,n),i=this.itemSizeMap.get(r);i?i!==e.target.clientWidth&&(this.itemSizeMap.set(r,e.target.clientWidth),this.setState({overflowStatus:"calculating"})):this.itemSizeMap.set(r,e.target.clientWidth);const{maxCount:s}=this.state;this.itemSizeMap.size===s&&this.setState({overflowStatus:"calculating"})},this.state={direction:aa.GROW,lastOverflowCount:0,overflow:[],visible:[],containerWidth:0,visibleState:new Map,itemSizeMap:new Map,overflowStatus:"calculating",pivot:-1,overflowWidth:0,maxCount:0},this.foundation=new ia(this.adapter),this.previousWidths=new Map,this.itemRefs={},this.itemSizeMap=new Map}static getDerivedStateFromProps(e,t){const{prevProps:n}=t,r={};r.prevProps=e;const i=t=>!n&&t in e||n&&!(0,Me.Z)(n[t],e[t]);if(i("items")||i("style")){if(r.direction=aa.GROW,r.lastOverflowCount=0,r.maxCount=0,e.renderMode===la.SCROLL)r.visible=e.items,r.overflow=[];else{let n=e.items.length;0!==Math.floor(t.containerWidth/ea)&&(n=Math.min(n,Math.floor(t.containerWidth/ea)));const i=e.collapseFrom===oa.START,s=i?on(e.items).reverse().slice(0,n):e.items.slice(0,n),o=i?on(e.items).reverse().slice(n):e.items.slice(n);r.visible=s,r.overflow=o,r.maxCount=n}r.pivot=-1,r.overflowStatus="calculating"}return r}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateVisibleState:e=>{this.setState({visibleState:e})},updateStates:e=>{this.setState(Object.assign({},e))},notifyIntersect:e=>{this.props.onIntersect&&this.props.onIntersect(e)},getItemSizeMap:()=>this.itemSizeMap})}componentDidUpdate(e,t){const n=e.items.map((e=>e.key)),r=this.props.items.map((e=>e.key));(0,Me.Z)(n,r)||(this.itemRefs={},this.setState({visibleState:new Map}));const{overflow:i,containerWidth:s,visible:o,overflowStatus:a}=this.state;this.isScrollMode()||"calculating"!==a||this.foundation.handleCollapseOverflow()}render(){const e=this.renderItemList(),{renderMode:t}=this.props;return t===la.SCROLL?r.createElement(ta,{onIntersect:this.reintersect,root:this.scroller,threshold:this.props.threshold,items:this.itemRefs},e):r.createElement(br,{onResize:this.resize},e)}}ca.defaultProps={collapseFrom:"end",minVisibleItems:0,overflowRenderer:()=>null,renderMode:"collapse",threshold:.75,visibleItemRenderer:()=>null,onOverflow:()=>null},ca.propTypes={className:R().string,collapseFrom:R().oneOf(qo.BOUNDARY_SET),direction:R().oneOf(qo.POSITION_SET),items:R().array,minVisibleItems:R().number,onIntersect:R().func,onOverflow:R().func,overflowRenderer:R().func,renderMode:R().oneOf(qo.MODE_SET),style:R().object,threshold:R().number,visibleItemRenderer:R().func,wrapperClassName:R().string,wrapperStyle:R().object};const ua=ca,da=["start","end","center","baseline"],ha="loose",pa="medium",fa="tight",ga=e=>{let t=[];return r.Children.forEach(e,(e=>{null!=e&&(Array.isArray(e)?t=t.concat(ga(e)):(0,r.isValidElement)(e)&&e.type&&"Symbol(react.fragment)"===e.type.toString()&&e.props?t=t.concat(ga(e.props.children)):t.push(e))})),t},ma={PREFIX:`${D}-space`}.PREFIX;class ya extends r.PureComponent{render(){const{children:e=null,style:t,className:n,spacing:i,wrap:s,align:o,vertical:a}=this.props,l=(!s||!a)&&s,c=Object.assign({},t);let u="",d="";tt(i)?(u=i,d=i):Xi(i)?(c.rowGap=i,c.columnGap=i):(0,et.Z)(i)&&(tt(i[0])?u=i[0]:Xi(i[0])&&(c.columnGap=`${i[0]}px`),tt(i[1])?d=i[1]:Xi(i[1])&&(c.rowGap=`${i[1]}px`));const h=I()(ma,n,{[`${ma}-align-${o}`]:o,[`${ma}-vertical`]:a,[`${ma}-horizontal`]:!a,[`${ma}-wrap`]:l,[`${ma}-tight-horizontal`]:u===fa,[`${ma}-tight-vertical`]:d===fa,[`${ma}-medium-horizontal`]:u===pa,[`${ma}-medium-vertical`]:d===pa,[`${ma}-loose-horizontal`]:u===ha,[`${ma}-loose-vertical`]:d===ha}),p=ga(e),f=Ce(this.props);return r.createElement("div",Object.assign({},f,{className:h,style:c,"x-semi-prop":"children"}),p)}}ya.propTypes={wrap:R().bool,align:R().oneOf(da),vertical:R().bool,spacing:R().oneOfType([R().string,R().number,R().array]),children:R().node,style:R().object,className:R().string},ya.defaultProps={vertical:!1,wrap:!1,spacing:"tight",align:"center"};const ba=ya;var va=n(54123),_a=n(5583),wa=n(68632),Sa=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function xa(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||Sa(r)&&Sa(i)))return!1;var r,i;return!0}const Ea=function(e,t){var n;void 0===t&&(t=xa);var r,i=[],s=!1;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return s&&n===this&&t(o,i)||(r=e.apply(this,o),s=!0,n=this,i=o),r}};var Ca="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function ka(e){cancelAnimationFrame(e.id)}function Oa(e,t){var n=Ca();var r={id:requestAnimationFrame((function i(){Ca()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))};return r}var Ta=-1;function Ia(e){if(void 0===e&&(e=!1),-1===Ta||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),Ta=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ta}var za=null;function Ra(e){if(void 0===e&&(e=!1),null===za||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?za="positive-descending":(t.scrollLeft=1,za=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),za}return za}var Da=function(e,t){return e};function Ma(e){var t,n=e.getItemOffset,i=e.getEstimatedTotalSize,s=e.getItemSize,o=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,u=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return t=function(e){function t(t){var r;return(r=e.call(this,t)||this)._instanceProps=c(r.props,(0,_a.Z)(r)),r._outerRef=void 0,r._resetIsScrollingTimeoutId=null,r.state={instance:(0,_a.Z)(r),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof r.props.initialScrollOffset?r.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},r._callOnItemsRendered=void 0,r._callOnItemsRendered=Ea((function(e,t,n,i){return r.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),r._callOnScroll=void 0,r._callOnScroll=Ea((function(e,t,n){return r.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),r._getItemStyle=void 0,r._getItemStyle=function(e){var t,i=r.props,o=i.direction,a=i.itemSize,l=i.layout,c=r._getItemStyleCache(u&&a,u&&l,u&&o);if(c.hasOwnProperty(e))t=c[e];else{var d=n(r.props,e,r._instanceProps),h=s(r.props,e,r._instanceProps),p="horizontal"===o||"horizontal"===l,f="rtl"===o,g=p?d:0;c[e]=t={position:"absolute",left:f?void 0:g,right:f?g:void 0,top:p?0:d,height:p?"100%":h,width:p?h:"100%"}}return t},r._getItemStyleCache=void 0,r._getItemStyleCache=Ea((function(e,t,n){return{}})),r._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,i=t.scrollLeft,s=t.scrollWidth;r.setState((function(e){if(e.scrollOffset===i)return null;var t=r.props.direction,o=i;if("rtl"===t)switch(Ra()){case"negative":o=-i;break;case"positive-descending":o=s-n-i}return o=Math.max(0,Math.min(o,s-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<o?"forward":"backward",scrollOffset:o,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.scrollHeight,s=t.scrollTop;r.setState((function(e){if(e.scrollOffset===s)return null;var t=Math.max(0,Math.min(s,i-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){null!==r._resetIsScrollingTimeoutId&&ka(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=Oa(r._resetIsScrolling,150)},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},(function(){r._getItemStyleCache(-1,null)}))},r}(0,wa.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return Na(e,t),d(e),null};var h=t.prototype;return h.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},h.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props,r=n.itemCount,i=n.layout,s=this.state.scrollOffset;e=Math.max(0,Math.min(e,r-1));var a=0;if(this._outerRef){var l=this._outerRef;a="vertical"===i?l.scrollWidth>l.clientWidth?Ia():0:l.scrollHeight>l.clientHeight?Ia():0}this.scrollTo(o(this.props,e,t,s,this._instanceProps,a))},h.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},h.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(Ra()){case"negative":s.scrollLeft=-i;break;case"positive-ascending":s.scrollLeft=i;break;default:var o=s.clientWidth,a=s.scrollWidth;s.scrollLeft=a-o-i}else s.scrollLeft=i;else s.scrollTop=i}this._callPropsCallbacks()},h.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&ka(this._resetIsScrollingTimeoutId)},h.render=function(){var e=this.props,t=e.children,n=e.className,s=e.direction,o=e.height,a=e.innerRef,l=e.innerElementType,c=e.innerTagName,u=e.itemCount,d=e.itemData,h=e.itemKey,p=void 0===h?Da:h,f=e.layout,g=e.outerElementType,m=e.outerTagName,y=e.style,b=e.useIsScrolling,v=e.width,_=this.state.isScrolling,w="horizontal"===s||"horizontal"===f,S=w?this._onScrollHorizontal:this._onScrollVertical,x=this._getRangeToRender(),E=x[0],C=x[1],k=[];if(u>0)for(var O=E;O<=C;O++)k.push((0,r.createElement)(t,{data:d,key:p(O,d),index:O,isScrolling:b?_:void 0,style:this._getItemStyle(O)}));var T=i(this.props,this._instanceProps);return(0,r.createElement)(g||m||"div",{className:n,onScroll:S,ref:this._outerRefSetter,style:(0,va.Z)({position:"relative",height:o,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:s},y)},(0,r.createElement)(l||c||"div",{children:k,ref:a,style:{height:w?"100%":T,pointerEvents:_?"none":void 0,width:w?T:"100%"}}))},h._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var s=this.state,o=s.scrollDirection,a=s.scrollOffset,l=s.scrollUpdateWasRequested;this._callOnScroll(o,a,l)}},h._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,s=r.scrollDirection,o=r.scrollOffset;if(0===t)return[0,0,0,0];var c=a(this.props,o,this._instanceProps),u=l(this.props,c,o,this._instanceProps),d=i&&"backward"!==s?1:Math.max(1,n),h=i&&"forward"!==s?1:Math.max(1,n);return[Math.max(0,c-d),Math.max(0,Math.min(t-1,u+h)),c,u]},t}(r.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Na=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},ja=Ma({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,n,r,i,s){var o=e.direction,a=e.height,l=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,h="horizontal"===o||"horizontal"===u?d:a,p=Math.max(0,l*c-h),f=Math.min(p,t*c),g=Math.max(0,t*c-h+c+s);switch("smart"===n&&(n=r>=g-h&&r<=f+h?"auto":"center"),n){case"start":return f;case"end":return g;case"center":var m=Math.round(g+(f-g)/2);return m<Math.ceil(h/2)?0:m>p+Math.floor(h/2)?p:m;default:return r>=g&&r<=f?r:r<g?g:f}},getStartIndexForOffset:function(e,t){var n=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,n){var r=e.direction,i=e.height,s=e.itemCount,o=e.itemSize,a=e.layout,l=e.width,c=t*o,u="horizontal"===r||"horizontal"===a?l:i,d=Math.ceil((u+n-c)/o);return Math.max(0,Math.min(s-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});var Pa=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Aa=(e,t,n,r)=>{const i=e.props;if(!e||!i)return null;const s=Object.assign(Object.assign({value:i.value,label:i.label||i.children||i.value,_show:!0,_selected:!1,_scrollIndex:n},i),{_parentGroup:t});return s._keyInJsx=r||e.key,s},La=e=>{let{index:t,data:n,style:r}=e;const{visibleOptions:i,renderOption:s}=n;return s(i[t],t,r)};class Fa extends ue{static get inputDefaultAdapter(){return{notifyChange:G,setValue:G}}constructor(e){super(Object.assign(Object.assign({},Fa.inputDefaultAdapter),e))}init(){this._setInitValue()}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}setDisable(){}_setInitValue(){const{defaultValue:e,value:t}=this.getProps();let n=e;this._isControlledComponent()&&(n=t),this._adapter.setValue(n)}setValue(e){this._adapter.setValue(e)}handleChange(e,t){const{maxLength:n,minLength:r,getValueLength:i}=this._adapter.getProps();let s=e;n&&(0,Xe.Z)(i)&&(s=this.handleVisibleMaxLength(e)),r&&(0,Xe.Z)(i)&&this.handleVisibleMinLength(s),this._isControlledComponent()||this._adapter.setValue(s),this._adapter.notifyChange(s,t)}handleVisibleMinLength(e){const{minLength:t,getValueLength:n}=this._adapter.getProps(),{minLength:r}=this._adapter.getStates();if(Xi(t)&&t>=0&&(0,Xe.Z)(n)&&tt(e)){const i=n(e);if(i<t){const n=e.length+(t-i);n!==r&&this._adapter.setMinLength(n)}else r!==t&&this._adapter.setMinLength(t)}}handleVisibleMaxLength(e){const{maxLength:t,getValueLength:n}=this._adapter.getProps();if(Xi(t)&&t>=0&&(0,Xe.Z)(n)&&tt(e)){if(n(e)>t){console.warn("[Semi Input] The input character is truncated because the input length exceeds the maximum length limit");return this.handleTruncateValue(e,t)}return e}}handleTruncateValue(e,t){const{getValueLength:n}=this._adapter.getProps();if((0,Xe.Z)(n)){let r="";for(let i=1,s=e.length;i<=s;i++){const s=e.slice(0,i);if(n(s)>t)return r;r=s}return r}return e.slice(0,t)}handleClear(e){let t=e;this._isControlledComponent("value")?this._adapter.setState({isFocus:!1}):this._adapter.setState({value:"",isFocus:!1}),t&&"object"==typeof t||(t={}),tn(t,rs,!0),this._adapter.notifyChange("",t),this._adapter.notifyClear(t),t&&this.stopPropagation(t)}handleClick(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||this._adapter.isEventTarget(e)&&(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handleModeChange(e){"password"===e?this._adapter.setEyeClosed(!0):this._adapter.setEyeClosed(!1)}handleClickEye(e){const t=this._adapter.getState("eyeClosed");this._adapter.focusInput(),this._adapter.toggleFocusing(!0),this._adapter.setEyeClosed(!t)}handleInputType(e){const t=this._adapter.getProp("mode"),n=this._adapter.getState("eyeClosed");return"password"===t?n?"password":"text":e}handleMouseDown(e){e.preventDefault()}handleMouseUp(e){e.preventDefault()}handleBlur(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!1),this._adapter.notifyBlur(t,e)}handleFocus(e){const{value:t}=this.getStates();this._adapter.toggleFocusing(!0),this._adapter.notifyFocus(t,e)}handleInput(e){this._adapter.notifyInput(e)}handleKeyDown(e){this._adapter.notifyKeyDown(e)}handleKeyUp(e){this._adapter.notifyKeyUp(e)}handleKeyPress(e){this._adapter.notifyKeyPress(e),e.key===de&&this._adapter.notifyEnterPress(e)}isAllowClear(){const{value:e,isFocus:t,isHovering:n}=this._adapter.getStates(),{showClear:r,disabled:i,showClearIgnoreDisabled:s}=this._adapter.getProps();return e&&r&&(!i||s)&&(t||n)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||(this._adapter.focusInput(),this._adapter.toggleFocusing(!0))}handlePreventMouseDown(e){e&&(0,Xe.Z)(e.preventDefault)&&e.preventDefault()}handleModeEnterPress(e){["Enter"," "].includes(null==e?void 0:e.key)&&(this.handlePreventMouseDown(e),this.handleClickEye(e))}}const Ua=Fa;const Ga=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.7071 3.70711C22.0976 3.31658 22.0976 2.68342 21.7071 2.29289C21.3166 1.90237 20.6834 1.90237 20.2929 2.29289L17.3135 5.27233C15.8114 4.50566 14.0321 4 12 4C5 4 1 10 1 12C1 13.1757 2.38219 15.7335 4.94345 17.6423L2.29289 20.2929C1.90237 20.6834 1.90237 21.3166 2.29289 21.7071C2.68342 22.0976 3.31658 22.0976 3.70711 21.7071L21.7071 3.70711ZM7.8284 14.7574L9.29237 13.2934C9.10495 12.9018 9 12.4631 9 12C9 10.3431 10.3431 9 12 9C12.4631 9 12.9018 9.10495 13.2934 9.29237L14.7574 7.8284C13.967 7.30488 13.0191 7 12 7C9.23858 7 7 9.23858 7 12C7 13.0191 7.30488 13.967 7.8284 14.7574Z",fill:"currentColor"}),r.createElement("path",{d:"M12 20C10.7789 20 9.64914 19.8174 8.61594 19.5054L11.1871 16.9342C11.4516 16.9775 11.7232 17 12 17C14.7614 17 17 14.7614 17 12C17 11.7232 16.9775 11.4516 16.9342 11.1871L20.5032 7.61808C22.1342 9.27317 23 11.0695 23 12C23 14 19 20 12 20Z",fill:"currentColor"}))}),"eye_closed_solid");const Ba=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C5 4 1 10 1 12C1 14 5 20 12 20C19 20 23 14 23 12C23 10 19 4 12 4ZM17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12ZM12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",fill:"currentColor"}))}),"eye_opened");var Za=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Ka=es.PREFIX,Xa=ts,Va=ns,Wa=is;class Ha extends Oe{constructor(e){super(e),this.handleClear=e=>{this.foundation.handleClear(e)},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleMouseOver=e=>{this.setState({isHovering:!0})},this.handleMouseLeave=e=>{this.setState({isHovering:!1})},this.handleModeChange=e=>{this.foundation.handleModeChange(e)},this.handleClickEye=e=>{this.foundation.handleClickEye(e)},this.handleMouseDown=e=>{this.foundation.handleMouseDown(e)},this.handleMouseUp=e=>{this.foundation.handleMouseUp(e)},this.handleModeEnterPress=e=>{this.foundation.handleModeEnterPress(e)},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.state={value:"",cachedValue:null,disabled:!1,props:{},isFocus:!1,isHovering:!1,eyeClosed:"password"===e.mode,minLength:e.minLength},this.inputRef=r.createRef(),this.prefixRef=r.createRef(),this.suffixRef=r.createRef(),this.foundation=new Ua(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{setValue:e=>this.setState({value:e}),setEyeClosed:e=>this.setState({eyeClosed:e}),toggleFocusing:e=>{this.setState({isFocus:e})},focusInput:()=>{const{preventScroll:e}=this.props,t=this.inputRef&&this.inputRef.current;t&&t.focus({preventScroll:e})},toggleHovering:e=>this.setState({isHovering:e}),getIfFocusing:()=>this.state.isFocus,notifyChange:(e,t)=>this.props.onChange(e,t),notifyBlur:(e,t)=>this.props.onBlur(t),notifyFocus:(e,t)=>this.props.onFocus(t),notifyInput:e=>this.props.onInput(e),notifyKeyPress:e=>this.props.onKeyPress(e),notifyKeyDown:e=>this.props.onKeyDown(e),notifyKeyUp:e=>this.props.onKeyUp(e),notifyEnterPress:e=>this.props.onEnterPress(e),notifyClear:e=>this.props.onClear(e),setMinLength:e=>this.setState({minLength:e}),isEventTarget:e=>e&&e.target===e.currentTarget})}static getDerivedStateFromProps(e,t){const n={};return e.value!==t.cachedValue&&(n.value=e.value,n.cachedValue=e.value),n}componentDidUpdate(e){const{mode:t}=this.props;e.mode!==t&&this.handleModeChange(t)}componentDidMount(){this.foundation.init();const{disabled:e,autoFocus:t,preventScroll:n}=this.props;e||!t&&!this.props.autofocus||this.inputRef.current.focus({preventScroll:n})}renderPrepend(){const{addonBefore:e}=this.props;if(e){const t=I()({[`${Ka}-prepend`]:!0,[`${Ka}-prepend-text`]:e&&tt(e),[`${Ka}-prepend-icon`]:an(e)});return r.createElement("div",{className:t,"x-semi-prop":"addonBefore"},e)}return null}renderAppend(){const{addonAfter:e}=this.props;if(e){const t=I()({[`${Ka}-append`]:!0,[`${Ka}-append-text`]:e&&tt(e),[`${Ka}-append-icon`]:an(e)});return r.createElement("div",{className:t,"x-semi-prop":"addonAfter"},e)}return null}renderClearBtn(){const e=I()(`${Ka}-clearbtn`),{clearIcon:t}=this.props;return this.foundation.isAllowClear()?r.createElement("div",{className:e,onMouseDown:this.handleClear},t||r.createElement(ss,null)):null}renderModeBtn(){const{eyeClosed:e}=this.state,{mode:t,disabled:n}=this.props,i=I()(`${Ka}-modebtn`),s=e?r.createElement(Ga,null):r.createElement(Ba,null),o=e?"Show password":"Hidden password";return"password"===t&&!n?r.createElement("div",{role:"button",tabIndex:0,"aria-label":o,className:i,onClick:this.handleClickEye,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyPress:this.handleModeEnterPress},s):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,i=e||t;if(!i)return null;const s=I()({[`${Ka}-prefix`]:!0,[`${Ka}-inset-label`]:t,[`${Ka}-prefix-text`]:i&&tt(i),[`${Ka}-prefix-icon`]:an(i)});return r.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:n,"x-semi-prop":"prefix,insetLabel"},i)}renderSuffix(e){const{suffix:t,hideSuffix:n}=this.props;if(!t)return null;const i=I()({[`${Ka}-suffix`]:!0,[`${Ka}-suffix-text`]:t&&tt(t),[`${Ka}-suffix-icon`]:an(t),[`${Ka}-suffix-hidden`]:e&&Boolean(n)});return r.createElement("div",{className:i,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},t)}getInputRef(){const{forwardRef:e}=this.props;if(!q(e)){if("function"==typeof e)return t=>{e(t),this.inputRef={current:t}};if("[object Object]"===Object.prototype.toString.call(e))return this.inputRef=e,e}return this.inputRef}render(){const e=this.props,{addonAfter:t,addonBefore:n,autoFocus:i,clearIcon:s,className:o,disabled:a,defaultValue:l,placeholder:c,prefix:u,mode:d,insetLabel:h,insetLabelId:p,validateStatus:f,type:g,readonly:m,size:y,suffix:b,style:v,showClear:_,onEnterPress:w,onClear:S,hideSuffix:x,inputStyle:E,forwardRef:C,maxLength:k,getValueLength:O,preventScroll:T,borderless:z,showClearIgnoreDisabled:R}=e,D=Za(e,["addonAfter","addonBefore","autoFocus","clearIcon","className","disabled","defaultValue","placeholder","prefix","mode","insetLabel","insetLabelId","validateStatus","type","readonly","size","suffix","style","showClear","onEnterPress","onClear","hideSuffix","inputStyle","forwardRef","maxLength","getValueLength","preventScroll","borderless","showClearIgnoreDisabled"]),{value:M,isFocus:N,minLength:j}=this.state,P=this.foundation.isAllowClear(),A=an(b),L=this.getInputRef(),F=`${Ka}-wrapper`,U=I()(F,o,{[`${Ka}-wrapper__with-prefix`]:u||h,[`${Ka}-wrapper__with-suffix`]:b,[`${Ka}-wrapper__with-suffix-hidden`]:P&&Boolean(x),[`${Ka}-wrapper__with-suffix-icon`]:A,[`${Ka}-wrapper__with-append`]:n,[`${Ka}-wrapper__with-prepend`]:t,[`${Ka}-wrapper__with-append-only`]:n&&!t,[`${Ka}-wrapper__with-prepend-only`]:!n&&t,[`${F}-readonly`]:m,[`${F}-disabled`]:a,[`${F}-warning`]:"warning"===f,[`${F}-error`]:"error"===f,[`${F}-focus`]:N,[`${F}-clearable`]:_,[`${F}-modebtn`]:"password"===d,[`${F}-hidden`]:"hidden"===g,[`${F}-${y}`]:y,[`${Ka}-borderless`]:z}),G=I()(Ka,{[`${Ka}-${y}`]:y,[`${Ka}-disabled`]:a,[`${Ka}-sibling-clearbtn`]:this.foundation.isAllowClear(),[`${Ka}-sibling-modebtn`]:"password"===d}),B=null==M?"":M,Z=Object.assign(Object.assign({},D),{style:E,className:G,disabled:a,readOnly:m,type:this.foundation.handleInputType(g),placeholder:c,onInput:e=>this.foundation.handleInput(e),onChange:e=>this.foundation.handleChange(e.target.value,e),onFocus:e=>this.foundation.handleFocus(e),onBlur:e=>this.foundation.handleBlur(e),onKeyUp:e=>this.foundation.handleKeyUp(e),onKeyDown:e=>this.foundation.handleKeyDown(e),onKeyPress:e=>this.foundation.handleKeyPress(e),value:B});return(0,Xe.Z)(O)||(Z.maxLength=k),j&&(Z.minLength=j),"error"===f&&(Z["aria-invalid"]="true"),r.createElement("div",{className:U,style:v,onMouseEnter:e=>this.handleMouseOver(e),onMouseLeave:e=>this.handleMouseLeave(e),onClick:e=>this.handleClick(e)},this.renderPrepend(),this.renderPrefix(),r.createElement("input",Object.assign({},Z,{ref:L})),this.renderClearBtn(),this.renderSuffix(P),this.renderModeBtn(),this.renderAppend())}}Ha.propTypes={"aria-label":R().string,"aria-labelledby":R().string,"aria-invalid":R().bool,"aria-errormessage":R().string,"aria-describedby":R().string,"aria-required":R().bool,addonBefore:R().node,addonAfter:R().node,clearIcon:R().node,prefix:R().node,suffix:R().node,mode:R().oneOf(Wa),value:R().any,defaultValue:R().any,disabled:R().bool,readonly:R().bool,autoFocus:R().bool,type:R().string,showClear:R().bool,hideSuffix:R().bool,placeholder:R().any,size:R().oneOf(Xa),className:R().string,style:R().object,validateStatus:R().oneOf(Va),onClear:R().func,onChange:R().func,onBlur:R().func,onFocus:R().func,onInput:R().func,onKeyDown:R().func,onKeyUp:R().func,onKeyPress:R().func,onEnterPress:R().func,insetLabel:R().node,insetLabelId:R().string,inputStyle:R().object,getValueLength:R().func,preventScroll:R().bool,borderless:R().bool},Ha.defaultProps={addonBefore:"",addonAfter:"",prefix:"",suffix:"",readonly:!1,type:"text",showClear:!1,hideSuffix:!1,placeholder:"",size:"default",className:"",onClear:G,onChange:G,onBlur:G,onFocus:G,onInput:G,onKeyDown:G,onKeyUp:G,onKeyPress:G,onEnterPress:G,validateStatus:"default",borderless:!1};const $a=r.forwardRef(((e,t)=>r.createElement(Ha,Object.assign({},e,{forwardRef:t}))));var Ya=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Ja extends r.PureComponent{onClick(e,t){var{value:n,label:r,children:i}=e,s=Ya(e,["value","label","children"]);const{props:o}=this;o.disabled||o.onSelect(Object.assign(Object.assign({},s),{value:n,label:r||i}),t)}renderOptionContent(e){let{config:t,children:n,inputValue:i,prefixCls:s}=e;return tt(n)&&i?(e=>{let{sourceString:t="",searchWords:n=[],option:i={autoEscape:!0,caseSensitive:!1}}=e;const s=rn(Object.assign({sourceString:t,searchWords:n},i)),o=i.highlightTag||"mark",a=i.highlightClassName||"",l=i.highlightStyle||{};return s.map(((e,n)=>{const{end:i,start:s,highlight:c}=e,u=t.substr(s,i-s);return c?r.createElement(o,{style:l,className:a,key:u+n},u):u}))})(t):n}render(){const e=this.props,{children:t,disabled:n,value:i,selected:s,label:o,empty:a,emptyContent:l,onSelect:c,focused:u,showTick:d,className:h,style:p,onMouseEnter:f,prefixCls:g,renderOptionItem:m,inputValue:y,semiOptionId:b}=e,v=Ya(e,["children","disabled","value","selected","label","empty","emptyContent","onSelect","focused","showTick","className","style","onMouseEnter","prefixCls","renderOptionItem","inputValue","semiOptionId"]),_=I()(g,{[`${g}-disabled`]:n,[`${g}-selected`]:s,[`${g}-focused`]:u,[`${g}-empty`]:a,[h]:h}),w=I()([`${g}-icon`]);if(a)return null===l?null:r.createElement($n,{componentName:"Select"},(e=>r.createElement("div",{className:_,"x-semi-prop":"emptyContent"},l||e.emptyText)));if("function"==typeof m)return m(Object.assign({disabled:n,focused:u,selected:s,style:p,label:o,value:i,inputValue:y,onMouseEnter:e=>f(e),onClick:e=>this.onClick(Object.assign({value:i,label:o,children:t},v),e)},v));const S={searchWords:y,sourceString:t,option:{highlightClassName:`${g}-keyword`}};return r.createElement("div",{className:_,onClick:e=>{this.onClick(Object.assign({value:i,label:o,children:t},v),e)},onMouseEnter:e=>f&&f(e),role:"option",id:b,"aria-selected":s?"true":"false","aria-disabled":n?"true":"false",style:p},d?r.createElement("div",{className:w},r.createElement(Yn,null)):null,tt(t)?r.createElement("div",{className:`${g}-text`},this.renderOptionContent({children:t,config:S,inputValue:y,prefixCls:g})):t)}}Ja.isSelectOption=!0,Ja.propTypes={children:R().node,disabled:R().bool,value:R().oneOfType([R().string,R().number]),selected:R().bool,label:R().node,empty:R().bool,emptyContent:R().node,onSelect:R().func,focused:R().bool,showTick:R().bool,className:R().string,style:R().object,onMouseEnter:R().func,prefixCls:R().string,renderOptionItem:R().func,inputValue:R().string},Ja.defaultProps={prefixCls:_o.PREFIX_OPTION};const Qa=Ja,qa=_o.PREFIX_GROUP;class el extends Oe{render(){const{label:e,className:t,style:n}=this.props,i=I()(t,{[qa]:!0});return e||"number"==typeof e?r.createElement("div",{className:i,style:n},e):null}}el.isSelectOptionGroup=!0,el.propTypes={children:R().oneOfType([R().array,R().node]),label:R().node,className:R().string,style:R().object};const tl=el,nl={PREFIX:`${D}-spin`};class rl extends ue{static get spinDefaultAdapter(){return{getProp:()=>{},setLoading:e=>{}}}constructor(e){super(Object.assign(Object.assign({},rl.spinDefaultAdapter),e))}updateLoadingIfNeedDelay(){const{spinning:e,delay:t}=this._adapter.getProps(),{delay:n}=this._adapter.getStates();if(n){const n=this;this._timer=setTimeout((()=>{n._adapter.setState({loading:e,delay:0})}),t)}}destroy(){this._timer&&(clearTimeout(this._timer),this._timer=null)}}const il=rl;var sl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ol=nl.PREFIX;class al extends Oe{constructor(e){super(e),this.foundation=new il(this.adapter),this.state={delay:e.delay,loading:!0}}static getDerivedStateFromProps(e){return e.delay?!1===e.spinning?{delay:0,loading:!1}:{delay:e.delay}:{loading:e.spinning}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setLoading:e=>{this.setState({loading:e})}})}componentWillUnmount(){this.foundation.destroy()}renderSpin(){const{indicator:e,tip:t}=this.props,{loading:n}=this.state;return n?r.createElement("div",{className:`${ol}-wrapper`},e?r.createElement("div",{className:`${ol}-animate`,"x-semi-prop":"indicator"},e):r.createElement(X,null),t?r.createElement("div",{"x-semi-prop":"tip"},t):null):null}render(){this.foundation.updateLoadingIfNeedDelay();const e=this.props,{children:t,style:n,wrapperClassName:i,childStyle:s,size:o}=e,a=sl(e,["children","style","wrapperClassName","childStyle","size"]),{loading:l}=this.state,c=I()(ol,i,{[`${ol}-${o}`]:o,[`${ol}-block`]:t,[`${ol}-hidden`]:!l});return r.createElement("div",Object.assign({className:c,style:n},this.getDataAttr(a)),this.renderSpin(),r.createElement("div",{className:`${ol}-children`,style:s,"x-semi-prop":"children"},t))}}al.propTypes={size:R().oneOf(["small","middle","large"]),spinning:R().bool,children:R().node,indicator:R().node,delay:R().number,tip:R().node,wrapperClassName:R().string,childStyle:R().object,style:R().object},al.defaultProps={size:"middle",spinning:!0,children:null,indicator:null,delay:0};const ll=al;var cl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class ul extends r.PureComponent{render(){const e=this.props,{triggerRender:t,componentName:n}=e,r=cl(e,["triggerRender","componentName"]);return t(Object.assign({},r))}}ul.propTypes={triggerRender:R().func.isRequired,componentName:R().string,componentProps:R().object,value:R().any,inputValue:R().string,placeholder:R().oneOfType([R().string,R().array]),className:R().string,style:R().object};const dl=ul;const hl=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.08045 7.59809C4.66624 7.01231 5.61599 7.01231 6.20177 7.59809L11.8586 13.2549L17.5155 7.59809C18.1013 7.01231 19.051 7.01231 19.6368 7.59809C20.2226 8.18388 20.2226 9.13363 19.6368 9.71941L12.9193 16.4369C12.3335 17.0227 11.3838 17.0227 10.798 16.4369L4.08045 9.71941C3.49467 9.13363 3.49467 8.18388 4.08045 7.59809Z",fill:"currentColor"}))}),"chevron_down");var pl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const fl=_o.PREFIX;class gl extends Oe{constructor(e){super(e),this.setOptionContainerEl=e=>this.optionContainerEl={current:e},this.handleInputChange=(e,t)=>this.foundation.handleInputChange(e,t),this.getTagItem=(e,t,n)=>{const{size:i,disabled:s}=this.props,o=e[0],{value:a}=e[1],l=e[1].disabled||s,c=(e,t)=>{t&&"function"==typeof t.preventDefault&&t.preventDefault(),this.foundation.removeTag({label:o,value:a})},{content:u,isRenderInTag:d}=n(e[1],{index:t,disabled:l,onClose:c}),h={disabled:l,closable:!l,onClose:c};return d?r.createElement(Xo,Object.assign({},h,{color:"white",size:i||"large",key:a,tabIndex:-1}),u):r.createElement(r.Fragment,{key:a},u)},this.state={isOpen:!1,isFocus:!1,options:[],selections:new Map,dropdownMinWidth:null,optionKey:0,inputValue:"",showInput:!1,focusIndex:e.defaultActiveFirstOption?0:-1,keyboardEventSet:{},optionGroups:[],isHovering:!1,isFocusInContainer:!1,isFullTags:!1,overflowItemCount:0},this.selectOptionListID="",this.selectID="",this.virtualizeListRef=r.createRef(),this.inputRef=r.createRef(),this.triggerRef=r.createRef(),this.optionsRef=r.createRef(),this.optionContainerEl=r.createRef(),this.clickOutsideHandler=null,this.onSelect=this.onSelect.bind(this),this.onClear=this.onClear.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.renderOption=this.renderOption.bind(this),this.onKeyPress=this.onKeyPress.bind(this),this.eventManager=new Kt,this.foundation=new vo(this.adapter)}get adapter(){var e=this;const t={registerKeyDown:e=>{const t={onKeyDown:e};this.setState({keyboardEventSet:t})},unregisterKeyDown:()=>{this.setState({keyboardEventSet:{}})},updateFocusIndex:e=>{this.setState({focusIndex:e})},scrollToFocusOption:()=>{}},n={updateInputValue:e=>{this.setState({inputValue:e})},toggleInputShow:(e,t)=>{this.setState({showInput:e},(()=>{t()}))},focusInput:()=>{const{preventScroll:e}=this.props;this.inputRef&&this.inputRef.current&&this.inputRef.current.focus({preventScroll:e})}},i={notifyMaxLimit:e=>this.props.onExceed(e),getMaxLimit:()=>this.props.max,registerClickOutsideHandler:e=>{const t=t=>{const n=this.optionsRef&&this.optionsRef.current,r=this.triggerRef&&this.triggerRef.current,i=Zt.findDOMNode(n);i&&!i.contains(t.target)&&r&&!r.contains(t.target)&&e(t)};this.clickOutsideHandler=t,document.addEventListener("mousedown",t,!1)},unregisterClickOutsideHandler:()=>{this.clickOutsideHandler&&(document.removeEventListener("mousedown",this.clickOutsideHandler,!1),this.clickOutsideHandler=null)},rePositionDropdown:()=>{let{optionKey:e}=this.state;e+=1,this.setState({optionKey:e})},notifyDeselect:(e,t)=>{delete t._parentGroup,this.props.onDeselect(e,t)}};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},super.adapter),t),n),i),{on:(e,t)=>this.eventManager.on(e,t),off:e=>this.eventManager.off(e),once:(e,t)=>this.eventManager.once(e,t),emit:e=>this.eventManager.emit(e),getOptionsFromChildren:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.children,n=[],i=[];const{optionList:s}=e.props;if(s&&s.length)i=s.map(((e,t)=>Object.assign({_show:!0,_selected:!1,_scrollIndex:t},e))),n[0]={children:i,label:""};else{const e=(e=>{let t=[],n=[];const i={label:"",children:[],_show:!1};let s=r.Children.toArray(e);s=s.filter((e=>e&&e.props));let o="",a=-1;return s.forEach((e=>{if(e.type.isSelectOption){o="option",a++;const t=Aa(e,void 0,a);i.children.push(t),n.push(t)}else if(e.type.isSelectOptionGroup){o="group";let i=e.props,{children:s}=i,l=Pa(i,["children"]),c=[];Array.isArray(s)?c=s.map((e=>e.key)):c.push(s.key),s=r.Children.toArray(s);const u=s.map(((t,n)=>{let r=t.key;return null===c[n]&&(r=e.key+""+t.key),a++,Aa(t,l,a,r)})),d=Object.assign(Object.assign({},e.props),{children:u,key:e.key});t.push(d),n=n.concat(u)}else fe(!0,"[Semi Select] The children of `Select` should be `Select.Option` or `Select.OptionGroup`")})),"option"===o&&(t=[i]),{optionGroups:t,options:n}})(t);n=e.optionGroups,i=e.options}return e.setState({optionGroups:n}),i},updateOptions:e=>{this.setState({options:e})},openMenu:()=>{this.setState({isOpen:!0})},closeMenu:()=>{this.setState({isOpen:!1})},getTriggerWidth:()=>{const e=this.triggerRef.current;return e&&e.getBoundingClientRect().width},setOptionWrapperWidth:e=>{this.setState({dropdownMinWidth:e})},updateSelection:e=>{this.setState({selections:e})},getSelections:()=>new Map(this.state.selections),notifyChange:e=>{this.props.onChange(e)},notifySelect:(e,t)=>{delete t._parentGroup,this.props.onSelect(e,t)},notifyDropdownVisibleChange:e=>{this.props.onDropdownVisibleChange(e)},notifySearch:(e,t)=>{this.props.onSearch(e,t)},notifyCreate:e=>{this.props.onCreate(e)},notifyMouseEnter:e=>{this.props.onMouseEnter(e)},notifyMouseLeave:e=>{this.props.onMouseLeave(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyBlur:e=>{this.props.onBlur(e)},notifyClear:()=>{this.props.onClear()},notifyListScroll:e=>{this.props.onListScroll(e)},updateHovering:e=>{this.setState({isHovering:e})},updateFocusState:e=>{this.setState({isFocus:e})},updateOverflowItemCount:e=>{this.setState({overflowItemCount:e})},focusTrigger:()=>{try{const{preventScroll:e}=this.props;this.triggerRef.current.focus({preventScroll:e})}catch(e){}},getContainer:()=>this.optionContainerEl&&this.optionContainerEl.current,getFocusableElements:e=>cn(e),getActiveElement:()=>ln(),setIsFocusInContainer:e=>{this.setState({isFocusInContainer:e})},getIsFocusInContainer:()=>this.state.isFocusInContainer,updateScrollTop:e=>{let t=`.${fl}-option-selected`;void 0!==e&&(t=`.${fl}-option:nth-child(${e})`);let n=document.querySelector(`#${fl}-${this.selectOptionListID} ${t}`);if(Array.isArray(n)&&(n=n[0]),n){const e=n.parentNode;e.scrollTop=n.offsetTop-e.offsetTop-e.clientHeight/2+n.clientHeight/2}}})}componentDidMount(){this.foundation.init(),this.selectOptionListID=ze(),this.selectID=this.props.id||ze()}componentWillUnmount(){this.foundation.destroy()}componentDidUpdate(e,t){const n=r.Children.toArray(e.children).map((e=>e.key)),i=r.Children.toArray(this.props.children).map((e=>e.key));let s=!1;(0,Me.Z)(n,i)&&(0,Me.Z)(e.optionList,this.props.optionList)||(s=!0,this.foundation.handleOptionListChange()),(0,Me.Z)(this.props.value,e.value)&&!s||("value"in this.props?this.foundation.handleValueChange(this.props.value):this.foundation.handleOptionListChangeHadDefaultValue())}renderInput(){const{size:e,multiple:t,disabled:n,inputProps:i,filter:s}=this.props,o=ae(i,"className"),a=I()(`${fl}-input`,{[`${fl}-input-single`]:!t,[`${fl}-input-multiple`]:t},o),{inputValue:l,focusIndex:c}=this.state,u=Object.assign({value:l,disabled:n,className:a,onChange:this.handleInputChange},i);let d={};return t&&(d={width:l?16*l.length+"px":"2px"},u.style=d),r.createElement($a,Object.assign({ref:this.inputRef,size:e,"aria-activedescendant":-1!==c?`${this.selectID}-option-${c}`:"",onFocus:e=>{t&&Boolean(s)&&this.setState({isFocus:!0}),e.stopPropagation()},onBlur:e=>this.foundation.handleInputBlur(e)},u))}close(){this.foundation.close()}open(){this.foundation.open()}clearInput(){this.foundation.clearInput()}selectAll(){this.foundation.selectAll()}deselectAll(){this.foundation.clearSelected()}focus(){this.foundation.focus()}onSelect(e,t,n){this.foundation.onSelect(e,t,n)}onClear(e){e.nativeEvent.stopImmediatePropagation(),this.foundation.handleClearClick(e)}search(e,t){this.handleInputChange(e,t)}renderEmpty(){return r.createElement(Qa,{empty:!0,emptyContent:this.props.emptyContent})}renderLoading(){const e=`${fl}-loading-wrapper`;return r.createElement("div",{className:e},r.createElement(ll,null))}renderOption(e,t,n){const{focusIndex:i,inputValue:s}=this.state,{renderOptionItem:o}=this.props;let a;const l=t===i;let c=n||{};return e.style&&(c=Object.assign(Object.assign({},c),e.style)),e._inputCreateOnly?a=this.renderCreateOption(e,l,t,n):("key"in e&&(e._keyInOptionList=e.key),a=r.createElement(Qa,Object.assign({showTick:!0},e,{selected:e._selected,onSelect:(e,n)=>this.onSelect(e,t,n),focused:l,onMouseEnter:()=>this.onOptionHover(t),style:c,key:e._keyInOptionList||e._keyInJsx||e.label+e.value+t,renderOptionItem:o,inputValue:s,semiOptionId:`${this.selectID}-option-${t}`}),e.label)),a}renderCreateOption(e,t,n,i){const{renderCreateItem:s}=this.props;if(void 0===s){const s=r.createElement(Qa,Object.assign({key:e.key||e.label+e.value,onSelect:(e,t)=>this.onSelect(e,n,t),onMouseEnter:()=>this.onOptionHover(n),showTick:!0},e,{focused:t,style:i}),r.createElement($n,{componentName:"Select"},(t=>r.createElement(r.Fragment,null,r.createElement("span",{className:`${fl}-create-tips`},t.createText),e.value))));return s}const o=s(e.value,t,i);return r.createElement("div",{role:"button","aria-label":"Use the input box to create an optional item",onClick:t=>this.onSelect(e,n,t),key:e.key||e.label},o)}onOptionHover(e){this.foundation.handleOptionMouseEnter(e)}renderWithGroup(e){const t=[],n=new Map;return e.forEach(((e,i)=>{const s=e._parentGroup,o=this.renderOption(e,i);if(s&&!n.has(s.label)){const e=r.createElement(tl,Object.assign({},s,{key:s.label}));n.set(s.label,!0),t.push(e)}t.push(o)})),t}renderVirtualizeList(e){const{virtualize:t}=this.props,{direction:n}=this.context,{height:i,width:s,itemSize:o}=t;return r.createElement(ja,{ref:this.virtualizeListRef,height:i||So,itemCount:e.length,itemSize:o,itemData:{visibleOptions:e,renderOption:this.renderOption},width:s||"100%",style:{direction:n}},La)}renderOptions(e){const{dropdownMinWidth:t,options:n,selections:i}=this.state,{maxHeight:s,dropdownClassName:o,dropdownStyle:a,outerTopSlot:l,innerTopSlot:c,outerBottomSlot:u,innerBottomSlot:d,loading:h,virtualize:p,multiple:f,emptyContent:g}=this.props,m=n.filter((e=>e._show));let y=this.renderWithGroup(m);p&&(y=this.renderVirtualizeList(m));const b=Object.assign({minWidth:t},a),v=I()({[`${fl}-option-list`]:!0,[`${fl}-option-list-chosen`]:i.size}),_=!n.length||!n.some((e=>e._show));return r.createElement("div",{id:`${fl}-${this.selectOptionListID}`,className:I()({[`${fl}-option-list-wrapper`]:!(_&&null===g)},o),style:b,ref:this.setOptionContainerEl,onKeyDown:e=>this.foundation.handleContainerKeyDown(e)},l?r.createElement("div",{className:`${fl}-option-list-outer-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},l):null,r.createElement("div",{style:{maxHeight:`${s}px`},className:v,role:"listbox","aria-multiselectable":f,onScroll:e=>this.foundation.handleListScroll(e)},c?r.createElement("div",{className:`${fl}-option-list-inner-top-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},c):null,h?this.renderLoading():_?this.renderEmpty():y,d?r.createElement("div",{className:`${fl}-option-list-inner-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},d):null),u?r.createElement("div",{className:`${fl}-option-list-outer-bottom-slot`,onMouseEnter:()=>this.foundation.handleSlotMouseEnter()},u):null)}renderSingleSelection(e,t){let{renderSelectedItem:n}=this.props;const{placeholder:i}=this.props,{showInput:s,inputValue:o}=this.state;let a="";const l=[...e];if(void 0===n&&(n=e=>e.label),l.length){a=n(l[0][1])}const c=I()({[`${fl}-selection-text`]:!0,[`${fl}-selection-placeholder`]:!a&&0!==a,[`${fl}-selection-text-hide`]:o&&s,[`${fl}-selection-text-inactive`]:!o&&s}),u=`${fl}-content-wrapper`;return r.createElement(r.Fragment,null,r.createElement("div",{className:u},r.createElement("span",{className:c,"x-semi-prop":"placeholder"},a||0===a?a:i),t&&s?this.renderInput():null))}renderTag(e,t,n){const{size:i,disabled:s}=this.props;let{renderSelectedItem:o}=this.props;const a=e[0],{value:l}=e[1],c=e[1].disabled||s,u=(e,t)=>{t&&"function"==typeof t.preventDefault&&t.preventDefault(),this.foundation.removeTag({label:a,value:l})};void 0===o&&(o=e=>({isRenderInTag:!0,content:e.label}));const{content:d,isRenderInTag:h}=o(e[1],{index:t,disabled:c,onClose:u}),p={disabled:c,closable:!c,onClose:u},f=n&&!(0,Xe.Z)(this.props.renderSelectedItem)?r.createElement(Sr,{size:"small",ellipsis:{rows:1,showTooltip:{type:"popover",opts:{style:{width:"auto",fontSize:12}}}}},d):d;return h?r.createElement(Xo,Object.assign({},p,{color:"white",size:i||"large",key:l,style:{maxWidth:"100%"}}),f):r.createElement(r.Fragment,{key:l},f)}renderNTag(e,t){const{size:n,showRestTagsPopover:i,restTagsPopoverProps:s}=this.props;let o=r.createElement(Xo,{closable:!1,size:n||"large",color:"grey",className:`${fl}-content-wrapper-collapse-tag`,key:`_+${e}`,style:{marginRight:0,flexShrink:0}},"+",e);return i&&(o=r.createElement(pr,Object.assign({showArrow:!0,content:r.createElement(ba,{spacing:2,wrap:!0,style:{maxWidth:"400px"}},t.map(((e,t)=>this.renderTag(e,t)))),trigger:"hover",position:"top",autoAdjustOverflow:!0},s,{key:`_+${e}_Popover`}),o)),o}renderOverflow(e,t){return e.length&&e[0]?this.renderTag(e[0],t,!0):null}handleOverflow(e){const{overflowItemCount:t,selections:n}=this.state,{maxTagCount:r}=this.props,i=n.size-r>0?n.size-r+e.length-1:e.length-1;t!==i&&this.foundation.updateOverflowItemCount(n.size,i)}renderCollapsedTags(e,t){const{overflowItemCount:n}=this.state,i="number"==typeof t?e.slice(0,t):e;return r.createElement("div",{className:`${fl}-content-wrapper-collapse`},r.createElement(ua,{items:i,key:String(e.length),overflowRenderer:e=>this.renderOverflow(e,t-1),onOverflow:e=>this.handleOverflow(e),visibleItemRenderer:(e,t)=>this.renderTag(e,t)}),n>0&&this.renderNTag(n,e.slice(e.length-n)))}renderOneLineTags(e,t){let{renderSelectedItem:n}=this.props;const{showRestTagsPopover:i,restTagsPopoverProps:s,maxTagCount:o}=this.props,{isFullTags:a}=this.state;let l;if(void 0===n&&(n=e=>({isRenderInTag:!0,content:e.label})),i){const c=(a?e:e.slice(0,o)).map(((e,t)=>this.getTagItem(e,t,n)));l=r.createElement($o,{tagList:c,maxTagCount:t,restCount:a?void 0:e.length-o,size:"large",mode:"custom",showPopover:i,popoverProps:s,onPlusNMouseEnter:()=>{this.foundation.updateIsFullTags()}})}else{const i=e.slice(0,o).map(((e,t)=>this.getTagItem(e,t,n)));l=r.createElement($o,{tagList:i,maxTagCount:t,restCount:e.length-o,size:"large",mode:"custom"})}return l}renderMultipleSelection(e,t){let{renderSelectedItem:n}=this.props;const{placeholder:i,maxTagCount:s,expandRestTagsOnClick:o,ellipsisTrigger:a}=this.props,{inputValue:l,isOpen:c}=this.state,u=[...e];void 0===n&&(n=e=>({isRenderInTag:!0,content:e.label}));const d=I()({[`${fl}-content-wrapper`]:!0,[`${fl}-content-wrapper-one-line`]:s&&!c,[`${fl}-content-wrapper-empty`]:!u.length}),h=I()({[`${fl}-selection-text`]:!0,[`${fl}-selection-placeholder`]:!u.length,[`${fl}-selection-text-hide`]:u&&u.length}),p=i&&!l?r.createElement("span",{className:h},i):null,f=u.length>s?s:void 0,g=!s,m=a?this.renderCollapsedTags(u,f):this.renderOneLineTags(u,f),y=g||o&&c?u.map(((e,t)=>this.renderTag(e,t))):m;return r.createElement(r.Fragment,null,r.createElement("div",{className:d},u&&u.length?y:p,t?this.renderInput():null))}onMouseEnter(e){this.foundation.handleMouseEnter(e)}onMouseLeave(e){this.foundation.handleMouseLeave(e)}onKeyPress(e){this.foundation.handleKeyPress(e)}handlePopoverVisibleChange(e){const{virtualize:t}=this.props,{selections:n}=this.state;if(e)if(t){let e=-1;if(n.forEach((t=>{const n=ae(t,"_scrollIndex");Xi(n)&&n>=0&&(e=-1!==e&&e<n?e:n)})),-1!==e)try{this.virtualizeListRef.current.scrollToItem(e,"center")}catch(r){}}else this.foundation.updateScrollTop()}renderSuffix(){const{suffix:e}=this.props,t=I()({[`${fl}-suffix`]:!0,[`${fl}-suffix-text`]:e&&tt(e),[`${fl}-suffix-icon`]:an(e)});return r.createElement("div",{className:t,"x-semi-prop":"suffix"},e)}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,i=e||t,s=I()({[`${fl}-prefix`]:!0,[`${fl}-inset-label`]:t,[`${fl}-prefix-text`]:i&&tt(i),[`${fl}-prefix-icon`]:an(i)});return r.createElement("div",{className:s,id:n,"x-semi-prop":"prefix,insetLabel"},i)}renderSelection(){const e=this.props,{disabled:t,multiple:n,filter:i,style:s,id:o,size:a,className:l,validateStatus:c,showArrow:u,suffix:d,prefix:h,insetLabel:p,placeholder:f,triggerRender:g,arrowIcon:m,clearIcon:y,borderless:b}=e,v=pl(e,["disabled","multiple","filter","style","id","size","className","validateStatus","showArrow","suffix","prefix","insetLabel","placeholder","triggerRender","arrowIcon","clearIcon","borderless"]),{selections:_,isOpen:w,keyboardEventSet:S,inputValue:x,isHovering:E,isFocus:C,showInput:k,focusIndex:O}=this.state,T="function"==typeof g,z=Boolean(i),R=T?I()(l):I()(fl,l,{[`${fl}-borderless`]:b,[`${fl}-open`]:w,[`${fl}-focus`]:C,[`${fl}-disabled`]:t,[`${fl}-single`]:!n,[`${fl}-multiple`]:n,[`${fl}-filterable`]:z,[`${fl}-small`]:"small"===a,[`${fl}-large`]:"large"===a,[`${fl}-error`]:"error"===c,[`${fl}-warning`]:"warning"===c,[`${fl}-no-arrow`]:!u,[`${fl}-with-prefix`]:h||p,[`${fl}-with-suffix`]:d}),D=this.props.showClear&&(_.size||x)&&!t&&(E||w),M=u?r.createElement("div",{className:`${fl}-arrow`,"x-semi-prop":"arrowIcon"},m):r.createElement("div",{className:`${fl}-arrow-empty`}),N=y||r.createElement(ss,null),j=T?r.createElement(dl,{value:Array.from(_.values()),inputValue:x,onChange:this.handleInputChange,onSearch:this.handleInputChange,onRemove:e=>this.foundation.removeTag(e),onClear:this.onClear,disabled:t,triggerRender:g,placeholder:f,componentName:"Select",componentProps:Object.assign({},this.props)}):[r.createElement(r.Fragment,{key:"prefix"},h||p?this.renderPrefix():null),r.createElement(r.Fragment,{key:"selection"},r.createElement("div",{className:I()(`${fl}-selection`)},n?this.renderMultipleSelection(_,z):this.renderSingleSelection(_,z))),r.createElement(r.Fragment,{key:"clearicon"},D?r.createElement("div",{className:I()(`${fl}-clear`),onClick:this.onClear},N):M),r.createElement(r.Fragment,{key:"suffix"},d?this.renderSuffix():null)],P=t||z&&k||z&&n?-1:0;return r.createElement("div",Object.assign({role:"combobox","aria-disabled":t,"aria-expanded":w,"aria-controls":`${fl}-${this.selectOptionListID}`,"aria-haspopup":"listbox","aria-label":_.size?"selected":"","aria-invalid":this.props["aria-invalid"],"aria-errormessage":this.props["aria-errormessage"],"aria-labelledby":this.props["aria-labelledby"],"aria-describedby":this.props["aria-describedby"],"aria-required":this.props["aria-required"],className:R,ref:e=>this.triggerRef.current=e,onClick:e=>this.foundation.handleClick(e),style:s,id:this.selectID,tabIndex:P,"aria-activedescendant":-1!==O?`${this.selectID}-option-${O}`:"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:e=>this.foundation.handleTriggerFocus(e),onBlur:e=>this.foundation.handleTriggerBlur(e),onKeyPress:this.onKeyPress},S,this.getDataAttr(v)),j)}render(){const{direction:e}=this.context,t="rtl"===e?"bottomRight":"bottomLeft",{children:n,position:i=t,zIndex:s,getPopupContainer:o,motion:a,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:u,spacing:d,stopPropagation:h,dropdownMargin:p}=this.props,{isOpen:f,optionKey:g}=this.state,m=this.renderOptions(n),y=this.renderSelection();return r.createElement(pr,{getPopupContainer:o,motion:a,margin:p,autoAdjustOverflow:l,mouseLeaveDelay:c,mouseEnterDelay:u,zIndex:s,ref:this.optionsRef,content:m,visible:f,trigger:"custom",rePosKey:g,position:i,spacing:d,stopPropagation:h,disableArrowKeyDown:!0,onVisibleChange:e=>this.handlePopoverVisibleChange(e),afterClose:()=>this.foundation.handlePopoverClose()},y)}}gl.contextType=Ve,gl.Option=Qa,gl.OptGroup=tl,gl.propTypes={"aria-describedby":R().string,"aria-errormessage":R().string,"aria-invalid":R().bool,"aria-labelledby":R().string,"aria-required":R().bool,autoFocus:R().bool,autoClearSearchValue:R().bool,borderless:R().bool,children:R().node,clearIcon:R().node,defaultValue:R().oneOfType([R().string,R().number,R().array,R().object]),ellipsisTrigger:R().bool,value:R().oneOfType([R().string,R().number,R().array,R().object]),placeholder:R().node,onChange:R().func,multiple:R().bool,filter:R().oneOfType([R().func,R().bool]),max:R().number,maxTagCount:R().number,maxHeight:R().oneOfType([R().string,R().number]),style:R().object,className:R().string,size:R().oneOf(wo.SIZE_SET),disabled:R().bool,emptyContent:R().node,expandRestTagsOnClick:R().bool,onDropdownVisibleChange:R().func,zIndex:R().number,position:R().oneOf(wo.POSITION_SET),onSearch:R().func,getPopupContainer:R().func,dropdownClassName:R().string,dropdownStyle:R().object,dropdownMargin:R().oneOfType([R().number,R().object]),outerTopSlot:R().node,innerTopSlot:R().node,inputProps:R().object,outerBottomSlot:R().node,innerBottomSlot:R().node,optionList:R().array,dropdownMatchSelectWidth:R().bool,loading:R().bool,defaultOpen:R().bool,validateStatus:R().oneOf(wo.STATUS),defaultActiveFirstOption:R().bool,triggerRender:R().func,stopPropagation:R().bool,motion:R().bool,onChangeWithObject:R().bool,suffix:R().node,prefix:R().node,insetLabel:R().node,insetLabelId:R().string,showClear:R().bool,showArrow:R().bool,renderSelectedItem:R().func,allowCreate:R().bool,renderCreateItem:R().func,onMouseEnter:R().func,onMouseLeave:R().func,clickToHide:R().bool,onExceed:R().func,onCreate:R().func,remote:R().bool,onDeselect:R().func,onSelect:R().func,autoAdjustOverflow:R().bool,mouseEnterDelay:R().number,mouseLeaveDelay:R().number,spacing:R().oneOfType([R().number,R().object]),onBlur:R().func,onFocus:R().func,onClear:R().func,virtualize:R().object,renderOptionItem:R().func,onListScroll:R().func,arrowIcon:R().node,preventScroll:R().bool},gl.defaultProps={stopPropagation:!0,motion:!0,borderless:!1,zIndex:sr.DEFAULT_Z_INDEX,filter:!1,multiple:!1,disabled:!1,defaultOpen:!1,allowCreate:!1,placeholder:"",onDropdownVisibleChange:G,onChangeWithObject:!1,onChange:G,onSearch:G,onMouseEnter:G,onMouseLeave:G,onDeselect:G,onSelect:G,onCreate:G,onExceed:G,onFocus:G,onBlur:G,onClear:G,onListScroll:G,maxHeight:So,dropdownMatchSelectWidth:!0,defaultActiveFirstOption:!0,showArrow:!0,showClear:!1,remote:!1,autoAdjustOverflow:!0,autoClearSearchValue:!0,arrowIcon:r.createElement(hl,{"aria-label":""}),showRestTagsPopover:!1,restTagsPopoverProps:{},expandRestTagsOnClick:!1,ellipsisTrigger:!1};const ml=gl,yl={PREFIX:`${D}-tagInput`},bl=["large","default","small"],vl=["success","default","error","warning"],_l=(e,t)=>{let n=[];if(tt(t)||Xi(t))n=e.split(t);else if((0,et.Z)(t)){const r=t[0];n=e;for(let e=1;e<t.length;e++)n=n.split(t[e]).join(r);n=n.split(r)}else n.push(e);return n};const wl=class extends ue{constructor(e){super(Object.assign({},e)),this.handleInputChange=e=>{const{value:t}=e.target,{entering:n}=this.getStates();(n||this._checkInputChangeValid(t))&&this._onInputChange(t,e)},this.handleInputCompositionStart=e=>{const{maxLength:t}=this.getProps();Xi(t)&&this._adapter.setEntering(!0)},this.handleInputCompositionEnd=e=>{const{value:t}=e.target,{maxLength:n,onInputExceed:r,separator:i}=this.getProps();if(!Xi(n))return;this._adapter.setEntering(!1);let s=!0;const o=_l(t,i);let a=0;for(;a<o.length;a++)if(o[a].length>n){s=!1,(0,Xe.Z)(r)&&r(t);break}if(s)this._adapter.setInputValue(t);else{const e=o.slice(0,a);a<o.length&&e.push(o[a].slice(0,n)),this._adapter.setInputValue(e.join(i))}},this._checkInputChangeValid=e=>{const{maxLength:t,onInputExceed:n,separator:r}=this._adapter.getProps(),{inputValue:i}=this._adapter.getStates();let s=!0;if(Xi(t)){const o=_l(e,r),a=_l(i,r),l=Math.max(o.length,a.length);for(let r=0;r<l;r++)if(!q(o[r])&&(q(a[r])||o[r].length>a[r].length)&&o[r].length>t){s=!1,(0,Xe.Z)(n)&&n(e);break}}return s},this.handleKeyDown=e=>{const{inputValue:t,tagsArray:n}=this._adapter.getStates(),r=e.keyCode;r===he.ENTER&&(e.preventDefault(),""!==t&&this._handleAddTags(e));const{length:i}=n;if(r===he.BACKSPACE&&""===t&&i>0){const e=n.slice(0,i-1),t=n[i-1];this._onRemove(e,t,i-1)}this._adapter.notifyKeyDown(e)}}_handleAddTags(e){const{separator:t,max:n,onExceed:r,allowDuplicates:i}=this._adapter.getProps(),{inputValue:s,tagsArray:o}=this._adapter.getStates();let a=_l(s,t);a=a.filter(((e,t)=>!(!i&&(o.includes(e)||a.indexOf(e)!==t))&&(tt(e)&&""!==e.trim())));let l=o.concat(a);Xi(n)&&l.length>n&&((0,Xe.Z)(r)&&r(l),l=l.slice(0,n),a=a.slice(0,n-o.length)),a.length>0&&this._onAdd(l,a),this._onInputChange("",e)}handleInputBlur(e){const{addOnBlur:t}=this._adapter.getProps();!0===t&&this._handleAddTags(e),this._adapter.setFocusing(!1),this._adapter.notifyBlur(e)}handleInputFocus(e){this._adapter.setFocusing(!0),this._adapter.notifyFocus(e)}handleClearEnterPress(e){pe(e)&&this.handleClearBtn(e)}handleClearBtn(e){const{inputValue:t,tagsArray:n}=this._adapter.getStates();n.length>0&&(this._adapter.setTagsArray([]),this._adapter.notifyTagChange([])),t.length>0&&this._onInputChange("",e),e.stopPropagation()}handleTagClose(e){const{tagsArray:t}=this._adapter.getStates(),n=[...t];n.splice(e,1);const r=t[e];this._onRemove(n,r,e)}handleInputMouseEnter(){this._adapter.setHovering(!0)}handleInputMouseLeave(){this._adapter.setHovering(!1)}handleClick(e){const{disabled:t}=this.getProps();if(t)return;this._adapter.getClickOutsideHandler()||(this._adapter.setActive(!0),this._adapter.registerClickOutsideHandler((e=>this.clickOutsideCallBack())))}clickOutsideCallBack(){this._adapter.unregisterClickOutsideHandler(),this._adapter.setActive(!1)}handleClickPrefixOrSuffix(e){const{disabled:t}=this._adapter.getProps(),{isFocus:n}=this._adapter.getStates();t||n||this._adapter.toggleFocusing(!0)}handlePreventMouseDown(e){e&&(0,Xe.Z)(e.preventDefault)&&e.preventDefault()}_onRemove(e,t,n){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagRemove(t,n)}_onAdd(e,t){this._isControlledComponent()||this._adapter.setTagsArray(e),this._adapter.notifyTagChange(e),this._adapter.notifyTagAdd(t)}_onInputChange(e,t){this._adapter.setInputValue(e),this._adapter.notifyInputChange(e,t)}handleSortEnd(e){const{oldIndex:t,newIndex:n}=e,{tagsArray:r}=this.getStates(),i=function(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}(r,t,n);this._isControlledComponent()||this._adapter.setTagsArray(i),this._adapter.notifyTagChange(i)}};const Sl=_e((function(e){return r.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),r.createElement("path",{d:"M9 7C10.1046 7 11 6.10457 11 5C11 3.89543 10.1046 3 9 3C7.89543 3 7 3.89543 7 5C7 6.10457 7.89543 7 9 7Z",fill:"currentColor"}),r.createElement("path",{d:"M9 14C10.1046 14 11 13.1046 11 12C11 10.8954 10.1046 10 9 10C7.89543 10 7 10.8954 7 12C7 13.1046 7.89543 14 9 14Z",fill:"currentColor"}),r.createElement("path",{d:"M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z",fill:"currentColor"}),r.createElement("path",{d:"M15 7C16.1046 7 17 6.10457 17 5C17 3.89543 16.1046 3 15 3C13.8954 3 13 3.89543 13 5C13 6.10457 13.8954 7 15 7Z",fill:"currentColor"}),r.createElement("path",{d:"M17 12C17 13.1046 16.1046 14 15 14C13.8954 14 13 13.1046 13 12C13 10.8954 13.8954 10 15 10C16.1046 10 17 10.8954 17 12Z",fill:"currentColor"}),r.createElement("path",{d:"M15 21C16.1046 21 17 20.1046 17 19C17 17.8954 16.1046 17 15 17C13.8954 17 13 17.8954 13 19C13 20.1046 13.8954 21 15 21Z",fill:"currentColor"}))}),"handle");const xl="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function El(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function Cl(e){return"nodeType"in e}function kl(e){var t,n;return e?El(e)?e:Cl(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function Ol(e){const{Document:t}=kl(e);return e instanceof t}function Tl(e){return!El(e)&&e instanceof kl(e).HTMLElement}function Il(e){return e instanceof kl(e).SVGElement}function zl(e){return e?El(e)?e.document:Cl(e)?Ol(e)?e:Tl(e)||Il(e)?e.ownerDocument:document:document:document}const Rl=xl?r.useLayoutEffect:r.useEffect;function Dl(e){const t=(0,r.useRef)(e);return Rl((()=>{t.current=e})),(0,r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function Ml(e,t){void 0===t&&(t=[e]);const n=(0,r.useRef)(e);return Rl((()=>{n.current!==e&&(n.current=e)}),t),n}function Nl(e,t){const n=(0,r.useRef)();return(0,r.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function jl(e){const t=Dl(e),n=(0,r.useRef)(null),i=(0,r.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,i]}function Pl(e){const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}let Al={};function Ll(e,t){return(0,r.useMemo)((()=>{if(t)return t;const n=null==Al[e]?0:Al[e]+1;return Al[e]=n,e+"-"+n}),[e,t])}function Fl(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[i,s]of r){const n=t[i];null!=n&&(t[i]=n+e*s)}return t}),{...t})}}const Ul=Fl(1),Gl=Fl(-1);function Bl(e){if(!e)return!1;const{KeyboardEvent:t}=kl(e.target);return t&&e instanceof t}function Zl(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=kl(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Kl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Kl.Translate.toString(e),Kl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Xl="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Vl(e){return e.matches(Xl)?e:e.querySelector(Xl)}const Wl={display:"none"};function Hl(e){let{id:t,value:n}=e;return r.createElement("div",{id:t,style:Wl},n)}function $l(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;return r.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},n)}const Yl=(0,r.createContext)(null);const Jl={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Ql={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ql(e){let{announcements:t=Ql,container:n,hiddenTextDescribedById:i,screenReaderInstructions:s=Jl}=e;const{announce:o,announcement:a}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=Ll("DndLiveRegion"),[c,u]=(0,r.useState)(!1);if((0,r.useEffect)((()=>{u(!0)}),[]),function(e){const t=(0,r.useContext)(Yl);(0,r.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,r.useMemo)((()=>({onDragStart(e){let{active:n}=e;o(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&o(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;o(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;o(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;o(t.onDragCancel({active:n,over:r}))}})),[o,t])),!c)return null;const d=r.createElement(r.Fragment,null,r.createElement(Hl,{id:i,value:s.draggable}),r.createElement($l,{id:l,announcement:a}));return n?(0,Zt.createPortal)(d,n):d}var ec;function tc(){}function nc(e,t){return(0,r.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(ec||(ec={}));const rc=Object.freeze({x:0,y:0});function ic(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function sc(e,t){const n=Zl(e);if(!n)return"0 0";return(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%"}function oc(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ac(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function lc(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function cc(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function uc(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const dc=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=uc(t,t.left,t.top),s=[];for(const o of r){const{id:e}=o,t=n.get(e);if(t){const n=ic(uc(t),i);s.push({id:e,data:{droppableContainer:o,value:n}})}}return s.sort(oc)};function hc(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=i-r,a=s-n;if(r<i&&n<s){const n=t.width*t.height,r=e.width*e.height,i=o*a;return Number((i/(n+r-i)).toFixed(4))}return 0}const pc=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=hc(r,t);n>0&&i.push({id:e,data:{droppableContainer:s,value:n}})}}return i.sort(ac)};function fc(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:rc}function gc(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const mc=gc(1);function yc(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const bc={ignoreTransform:!1};function vc(e,t){void 0===t&&(t=bc);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=kl(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=yc(t);if(!r)return e;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=e.left-o-(1-i)*parseFloat(n),c=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(n,t,r))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function _c(e){return vc(e,{ignoreTransform:!0})}function wc(e,t){const n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(Ol(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Tl(i)||Il(i))return n;if(n.includes(i))return n;const s=kl(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=kl(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(i,s)&&n.push(i),function(e,t){return void 0===t&&(t=kl(e).getComputedStyle(e)),"fixed"===t.position}(i,s)?n:r(i.parentNode)}(e):n}function Sc(e){const[t]=wc(e,1);return null!=t?t:null}function xc(e){return xl&&e?El(e)?e:Cl(e)?Ol(e)||e===zl(e).scrollingElement?window:Tl(e)?e:null:null:null}function Ec(e){return El(e)?e.scrollX:e.scrollLeft}function Cc(e){return El(e)?e.scrollY:e.scrollTop}function kc(e){return{x:Ec(e),y:Cc(e)}}var Oc;function Tc(e){return!(!xl||!e)&&e===document.scrollingElement}function Ic(e){const t={x:0,y:0},n=Tc(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Oc||(Oc={}));const zc={x:.2,y:.2};function Rc(e,t,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;void 0===r&&(r=10),void 0===i&&(i=zc);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=Ic(e),p={x:0,y:0},f={x:0,y:0},g=t.height*i.y,m=t.width*i.x;return!c&&s<=t.top+g?(p.y=Oc.Backward,f.y=r*Math.abs((t.top+g-s)/g)):!u&&l>=t.bottom-g&&(p.y=Oc.Forward,f.y=r*Math.abs((t.bottom-g-l)/g)),!h&&a>=t.right-m?(p.x=Oc.Forward,f.x=r*Math.abs((t.right-m-a)/m)):!d&&o<=t.left+m&&(p.x=Oc.Backward,f.x=r*Math.abs((t.left+m-o)/m)),{direction:p,speed:f}}function Dc(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Mc(e){return e.reduce(((e,t)=>Ul(e,kc(t))),rc)}function Nc(e,t){if(void 0===t&&(t=vc),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);Sc(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jc=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Ec(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Cc(t)),0)}]];class Pc{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=wc(t),r=Mc(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,o]of jc)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=o(n),s=r[i]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ac{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Lc(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Fc,Uc;function Gc(e){e.preventDefault()}function Bc(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Fc||(Fc={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(Uc||(Uc={}));const Zc={start:[Uc.Space,Uc.Enter],cancel:[Uc.Esc],end:[Uc.Space,Uc.Enter]},Kc=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Uc.Right:return{...n,x:n.x+25};case Uc.Left:return{...n,x:n.x-25};case Uc.Down:return{...n,y:n.y+25};case Uc.Up:return{...n,y:n.y-25}}};class Xc{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Ac(zl(t)),this.windowListeners=new Ac(kl(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fc.Resize,this.handleCancel),this.windowListeners.add(Fc.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Fc.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Nc(n),t(rc)}handleKeyDown(e){if(Bl(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:i=Zc,coordinateGetter:s=Kc,scrollBehavior:o="smooth"}=r,{code:a}=e;if(i.end.includes(a))return void this.handleEnd(e);if(i.cancel.includes(a))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:rc;this.referenceCoordinates||(this.referenceCoordinates=c);const u=s(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=Gl(u,c),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(const n of i){const i=e.code,{isTop:s,isRight:a,isLeft:l,isBottom:c,maxScroll:d,minScroll:h}=Ic(n),p=Dc(n),f={x:Math.min(i===Uc.Right?p.right-p.width/2:p.right,Math.max(i===Uc.Right?p.left:p.left+p.width/2,u.x)),y:Math.min(i===Uc.Down?p.bottom-p.height/2:p.bottom,Math.max(i===Uc.Down?p.top:p.top+p.height/2,u.y))},g=i===Uc.Right&&!a||i===Uc.Left&&!l,m=i===Uc.Down&&!c||i===Uc.Up&&!s;if(g&&f.x!==u.x){const e=n.scrollLeft+t.x,s=i===Uc.Right&&e<=d.x||i===Uc.Left&&e>=h.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:o});r.x=s?n.scrollLeft-e:i===Uc.Right?n.scrollLeft-d.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:o});break}if(m&&f.y!==u.y){const e=n.scrollTop+t.y,s=i===Uc.Down&&e<=d.y||i===Uc.Up&&e>=h.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:o});r.y=s?n.scrollTop-e:i===Uc.Down?n.scrollTop-d.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:o});break}}this.handleMove(e,Ul(Gl(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Vc(e){return Boolean(e&&"distance"in e)}function Wc(e){return Boolean(e&&"delay"in e)}Xc.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Zc,onActivation:i}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class Hc{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=kl(e);return e instanceof t?e:zl(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:s}=i;this.props=e,this.events=t,this.document=zl(s),this.documentListeners=new Ac(this.document),this.listeners=new Ac(n),this.windowListeners=new Ac(kl(s)),this.initialCoordinates=null!=(r=Zl(i))?r:rc,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(Fc.Resize,this.handleCancel),this.windowListeners.add(Fc.DragStart,Gc),this.windowListeners.add(Fc.VisibilityChange,this.handleCancel),this.windowListeners.add(Fc.ContextMenu,Gc),this.documentListeners.add(Fc.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Wc(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(Vc(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Fc.Click,Bc,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fc.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!r)return;const a=null!=(t=Zl(e))?t:rc,l=Gl(r,a);if(!n&&o){if(Vc(o)){if(null!=o.tolerance&&Lc(l,o.tolerance))return this.handleCancel();if(Lc(l,o.distance))return this.handleStart()}return Wc(o)&&Lc(l,o.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===Uc.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const $c={move:{name:"pointermove"},end:{name:"pointerup"}};class Yc extends Hc{constructor(e){const{event:t}=e,n=zl(t.target);super(e,$c,n)}}Yc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Jc={move:{name:"mousemove"},end:{name:"mouseup"}};var Qc;!function(e){e[e.RightClick=2]="RightClick"}(Qc||(Qc={}));class qc extends Hc{constructor(e){super(e,Jc,zl(e.event.target))}}qc.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Qc.RightClick&&(null==r||r({event:n}),!0)}}];const eu={move:{name:"touchmove"},end:{name:"touchend"}};class tu extends Hc{constructor(e){super(e,eu)}static setup(){return window.addEventListener(eu.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eu.move.name,e)};function e(){}}}var nu,ru;function iu(e){let{acceleration:t,activator:n=nu.Pointer,canScroll:i,draggingRect:s,enabled:o,interval:a=5,order:l=ru.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const f=function(e){let{delta:t,disabled:n}=e;const r=Pl(t);return Nl((e=>{if(n||!r||!e)return su;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Oc.Backward]:e.x[Oc.Backward]||-1===i.x,[Oc.Forward]:e.x[Oc.Forward]||1===i.x},y:{[Oc.Backward]:e.y[Oc.Backward]||-1===i.y,[Oc.Forward]:e.y[Oc.Forward]||1===i.y}}}),[n,t,r])}({delta:h,disabled:!o}),[g,m]=function(){const e=(0,r.useRef)(null);return[(0,r.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,r.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),y=(0,r.useRef)({x:0,y:0}),b=(0,r.useRef)({x:0,y:0}),v=(0,r.useMemo)((()=>{switch(n){case nu.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case nu.DraggableRect:return s}}),[n,s,c]),_=(0,r.useRef)(null),w=(0,r.useCallback)((()=>{const e=_.current;if(!e)return;const t=y.current.x*b.current.x,n=y.current.y*b.current.y;e.scrollBy(t,n)}),[]),S=(0,r.useMemo)((()=>l===ru.TreeOrder?[...u].reverse():u),[l,u]);(0,r.useEffect)((()=>{if(o&&u.length&&v){for(const e of S){if(!1===(null==i?void 0:i(e)))continue;const n=u.indexOf(e),r=d[n];if(!r)continue;const{direction:s,speed:o}=Rc(e,r,v,t,p);for(const e of["x","y"])f[e][s[e]]||(o[e]=0,s[e]=0);if(o.x>0||o.y>0)return m(),_.current=e,g(w,a),y.current=o,void(b.current=s)}y.current={x:0,y:0},b.current={x:0,y:0},m()}else m()}),[t,w,i,m,o,a,JSON.stringify(v),JSON.stringify(f),g,u,S,d,JSON.stringify(p)])}tu.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(nu||(nu={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(ru||(ru={}));const su={x:{[Oc.Backward]:!1,[Oc.Forward]:!1},y:{[Oc.Backward]:!1,[Oc.Forward]:!1}};var ou,au;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(ou||(ou={})),function(e){e.Optimized="optimized"}(au||(au={}));const lu=new Map;function cu(e,t){return Nl((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function uu(e){let{callback:t,disabled:n}=e;const i=Dl(t),s=(0,r.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(i)}),[n]);return(0,r.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}function du(e){return new Pc(vc(e),e)}function hu(e,t,n){void 0===t&&(t=du);const[i,s]=(0,r.useReducer)((function(r){if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;const s=t(e);if(JSON.stringify(r)===JSON.stringify(s))return r;return s}),null),o=function(e){let{callback:t,disabled:n}=e;const i=Dl(t),s=(0,r.useMemo)((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(i)}),[i,n]);return(0,r.useEffect)((()=>()=>null==s?void 0:s.disconnect()),[s]),s}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){s();break}}}}),a=uu({callback:s});return Rl((()=>{s(),e?(null==a||a.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==o||o.disconnect())}),[e]),i}const pu=[];function fu(e,t){void 0===t&&(t=[]);const n=(0,r.useRef)(null);return(0,r.useEffect)((()=>{n.current=null}),t),(0,r.useEffect)((()=>{const t=e!==rc;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?Gl(e,n.current):rc}function gu(e){return(0,r.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const mu=[];function yu(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Tl(t)?t:e}const bu=[{sensor:Yc,options:{}},{sensor:Xc,options:{}}],vu={current:{}},_u={draggable:{measure:_c},droppable:{measure:_c,strategy:ou.WhileDragging,frequency:au.Optimized},dragOverlay:{measure:vc}};class wu extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Su={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:tc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_u,measureDroppableContainers:tc,windowRect:null,measuringScheduled:!1},xu={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:tc,draggableNodes:new Map,over:null,measureDroppableContainers:tc},Eu=(0,r.createContext)(xu),Cu=(0,r.createContext)(Su);function ku(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wu}}}function Ou(e,t){switch(t.type){case ec.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ec.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case ec.DragEnd:case ec.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ec.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new wu(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case ec.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new wu(e.droppable.containers);return o.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case ec.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new wu(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Tu(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:s}=(0,r.useContext)(Eu),o=Pl(i),a=Pl(null==n?void 0:n.id);return(0,r.useEffect)((()=>{if(!t&&!i&&o&&null!=a){if(!Bl(o))return;if(document.activeElement===o.target)return;const e=s.get(a);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Vl(e);if(t){t.focus();break}}}))}}),[i,t,s,a,o]),null}function Iu(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const zu=(0,r.createContext)({...rc,scaleX:1,scaleY:1});var Ru;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Ru||(Ru={}));const Du=(0,r.memo)((function(e){var t,n,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=bu,collisionDetection:d=pc,measuring:h,modifiers:p,...f}=e;const g=(0,r.useReducer)(Ou,void 0,ku),[m,y]=g,[b,v]=function(){const[e]=(0,r.useState)((()=>new Set)),t=(0,r.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]),n=(0,r.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]);return[n,t]}(),[_,w]=(0,r.useState)(Ru.Uninitialized),S=_===Ru.Initialized,{draggable:{active:x,nodes:E,translate:C},droppable:{containers:k}}=m,O=x?E.get(x):null,T=(0,r.useRef)({initial:null,translated:null}),I=(0,r.useMemo)((()=>{var e;return null!=x?{id:x,data:null!=(e=null==O?void 0:O.data)?e:vu,rect:T}:null}),[x,O]),z=(0,r.useRef)(null),[R,D]=(0,r.useState)(null),[M,N]=(0,r.useState)(null),j=Ml(f,Object.values(f)),P=Ll("DndDescribedBy",o),A=(0,r.useMemo)((()=>k.getEnabled()),[k]),L=(F=h,(0,r.useMemo)((()=>({draggable:{..._u.draggable,...null==F?void 0:F.draggable},droppable:{..._u.droppable,...null==F?void 0:F.droppable},dragOverlay:{..._u.dragOverlay,...null==F?void 0:F.dragOverlay}})),[null==F?void 0:F.draggable,null==F?void 0:F.droppable,null==F?void 0:F.dragOverlay]));var F;const{droppableRects:U,measureDroppableContainers:G,measuringScheduled:B}=function(e,t){let{dragging:n,dependencies:i,config:s}=t;const[o,a]=(0,r.useState)(null),{frequency:l,measure:c,strategy:u}=s,d=(0,r.useRef)(e),h=function(){switch(u){case ou.Always:return!1;case ou.BeforeDragging:return n;default:return!n}}(),p=Ml(h),f=(0,r.useCallback)((function(e){void 0===e&&(e=[]),p.current||a((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),g=(0,r.useRef)(null),m=Nl((t=>{if(h&&!n)return lu;if(!t||t===lu||d.current!==e||null!=o){const t=new Map;for(let n of e){if(!n)continue;if(o&&o.length>0&&!o.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Pc(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,o,n,h,c]);return(0,r.useEffect)((()=>{d.current=e}),[e]),(0,r.useEffect)((()=>{h||f()}),[n,h]),(0,r.useEffect)((()=>{o&&o.length>0&&a(null)}),[JSON.stringify(o)]),(0,r.useEffect)((()=>{h||"number"!=typeof l||null!==g.current||(g.current=setTimeout((()=>{f(),g.current=null}),l))}),[l,h,f,...i]),{droppableRects:m,measureDroppableContainers:f,measuringScheduled:null!=o}}(A,{dragging:S,dependencies:[C.x,C.y],config:L.droppable}),Z=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return Nl((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(E,x),K=(0,r.useMemo)((()=>M?Zl(M):null),[M]),X=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,n=S&&!e&&!t;if("object"==typeof l)return{...l,enabled:n};return{enabled:n}}(),V=function(e,t){return cu(e,t)}(Z,L.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:i,config:s=!0}=e;const o=(0,r.useRef)(!1),{x:a,y:l}="boolean"==typeof s?{x:s,y:s}:s;Rl((()=>{if(!a&&!l||!t)return void(o.current=!1);if(o.current||!i)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=fc(n(e),i);if(a||(r.x=0),l||(r.y=0),o.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=Sc(e);t&&t.scrollBy({top:r.y,left:r.x})}}),[t,a,l,i,n])}({activeNode:x?E.get(x):null,config:X.layoutShiftCompensation,initialRect:V,measure:L.draggable.measure});const W=hu(Z,L.draggable.measure,V),H=hu(Z?Z.parentElement:null),$=(0,r.useRef)({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=k.getNodeFor(null==(t=$.current.over)?void 0:t.id),J=function(e){let{measure:t}=e;const[n,i]=(0,r.useState)(null),s=uu({callback:(0,r.useCallback)((e=>{for(const{target:n}of e)if(Tl(n)){i((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),o=(0,r.useCallback)((e=>{const n=yu(e);null==s||s.disconnect(),n&&(null==s||s.observe(n)),i(n?t(n):null)}),[t,s]),[a,l]=jl(o);return(0,r.useMemo)((()=>({nodeRef:a,rect:n,setRef:l})),[n,a,l])}({measure:L.dragOverlay.measure}),Q=null!=(n=J.nodeRef.current)?n:Z,q=S?null!=(i=J.rect)?i:W:null,ee=Boolean(J.nodeRef.current&&J.rect),te=fc(ne=ee?null:W,cu(ne));var ne;const re=gu(Q?kl(Q):null),ie=function(e){const t=(0,r.useRef)(e),n=Nl((n=>e?n&&n!==pu&&e&&t.current&&e.parentNode===t.current.parentNode?n:wc(e):pu),[e]);return(0,r.useEffect)((()=>{t.current=e}),[e]),n}(S?null!=Y?Y:Z:null),se=function(e,t){void 0===t&&(t=vc);const[n]=e,i=gu(n?kl(n):null),[s,o]=(0,r.useReducer)((function(){return e.length?e.map((e=>Tc(e)?i:new Pc(t(e),e))):mu}),mu),a=uu({callback:o});return e.length>0&&s===mu&&o(),Rl((()=>{e.length?e.forEach((e=>null==a?void 0:a.observe(e))):(null==a||a.disconnect(),o())}),[e]),s}(ie),oe=Iu(p,{transform:{x:C.x-te.x,y:C.y-te.y,scaleX:1,scaleY:1},activatorEvent:M,active:I,activeNodeRect:W,containerNodeRect:H,draggingNodeRect:q,over:$.current.over,overlayNodeRect:J.rect,scrollableAncestors:ie,scrollableAncestorRects:se,windowRect:re}),ae=K?Ul(K,C):null,le=function(e){const[t,n]=(0,r.useState)(null),i=(0,r.useRef)(e),s=(0,r.useCallback)((e=>{const t=xc(e.target);t&&n((e=>e?(e.set(t,kc(t)),new Map(e)):null))}),[]);return(0,r.useEffect)((()=>{const t=i.current;if(e!==t){r(t);const o=e.map((e=>{const t=xc(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,kc(t)]):null})).filter((e=>null!=e));n(o.length?new Map(o):null),i.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=xc(e);null==t||t.removeEventListener("scroll",s)}))}}),[s,e]),(0,r.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>Ul(e,t)),rc):Mc(e):rc),[e,t])}(ie),ce=fu(le),ue=fu(le,[W]),de=Ul(oe,ce),he=q?mc(q,oe):null,pe=I&&he?d({active:I,collisionRect:he,droppableRects:U,droppableContainers:A,pointerCoordinates:ae}):null,fe=cc(pe,"id"),[ge,me]=(0,r.useState)(null),ye=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(ee?oe:Ul(oe,ue),null!=(s=null==ge?void 0:ge.rect)?s:null,W),be=(0,r.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==z.current)return;const i=E.get(z.current);if(!i)return;const s=e.nativeEvent,o=new n({active:z.current,activeNode:i,event:s,options:r,context:$,onStart(e){const t=z.current;if(null==t)return;const n=E.get(t);if(!n)return;const{onDragStart:r}=j.current,i={active:{id:t,data:n.data,rect:T}};(0,Zt.unstable_batchedUpdates)((()=>{null==r||r(i),w(Ru.Initializing),y({type:ec.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:i})}))},onMove(e){y({type:ec.DragMove,coordinates:e})},onEnd:a(ec.DragEnd),onCancel:a(ec.DragCancel)});function a(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=$.current;let o=null;if(t&&i){const{cancelDrop:a}=j.current;if(o={activatorEvent:s,active:t,collisions:n,delta:i,over:r},e===ec.DragEnd&&"function"==typeof a){await Promise.resolve(a(o))&&(e=ec.DragCancel)}}z.current=null,(0,Zt.unstable_batchedUpdates)((()=>{y({type:e}),w(Ru.Uninitialized),me(null),D(null),N(null);const t=e===ec.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=j.current[t];null==e||e(o),b({type:t,event:o})}}))}}(0,Zt.unstable_batchedUpdates)((()=>{D(o),N(e.nativeEvent)}))}),[E]),ve=(0,r.useCallback)(((e,t)=>(n,r)=>{const i=n.nativeEvent,s=E.get(r);if(null!==z.current||!s||i.dndKit||i.defaultPrevented)return;const o={active:s};!0===e(n,t.options,o)&&(i.dndKit={capturedBy:t.sensor},z.current=r,be(n,t))}),[E,be]),_e=function(e,t){return(0,r.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(u,ve);!function(e){(0,r.useEffect)((()=>{if(!xl)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),Rl((()=>{W&&_===Ru.Initializing&&w(Ru.Initialized)}),[W,_]),(0,r.useEffect)((()=>{const{onDragMove:e}=j.current,{active:t,activatorEvent:n,collisions:r,over:i}=$.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:de.x,y:de.y},over:i};(0,Zt.unstable_batchedUpdates)((()=>{null==e||e(s),b({type:"onDragMove",event:s})}))}),[de.x,de.y]),(0,r.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=$.current;if(!e||null==z.current||!t||!i)return;const{onDragOver:s}=j.current,o=r.get(fe),a=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:a};(0,Zt.unstable_batchedUpdates)((()=>{me(a),null==s||s(l),b({type:"onDragOver",event:l})}))}),[fe]),Rl((()=>{$.current={activatorEvent:M,active:I,activeNode:Z,collisionRect:he,collisions:pe,droppableRects:U,draggableNodes:E,draggingNode:Q,draggingNodeRect:q,droppableContainers:k,over:ge,scrollableAncestors:ie,scrollAdjustedTranslate:de},T.current={initial:q,translated:he}}),[I,Z,pe,he,E,Q,q,U,k,ge,ie,de]),iu({...X,delta:C,draggingRect:he,pointerCoordinates:ae,scrollableAncestors:ie,scrollableAncestorRects:se});const we=(0,r.useMemo)((()=>({active:I,activeNode:Z,activeNodeRect:W,activatorEvent:M,collisions:pe,containerNodeRect:H,dragOverlay:J,draggableNodes:E,droppableContainers:k,droppableRects:U,over:ge,measureDroppableContainers:G,scrollableAncestors:ie,scrollableAncestorRects:se,measuringConfiguration:L,measuringScheduled:B,windowRect:re})),[I,Z,W,M,pe,H,J,E,k,U,ge,G,ie,se,L,B,re]),Se=(0,r.useMemo)((()=>({activatorEvent:M,activators:_e,active:I,activeNodeRect:W,ariaDescribedById:{draggable:P},dispatch:y,draggableNodes:E,over:ge,measureDroppableContainers:G})),[M,_e,I,W,y,P,E,ge,G]);return r.createElement(Yl.Provider,{value:v},r.createElement(Eu.Provider,{value:Se},r.createElement(Cu.Provider,{value:we},r.createElement(zu.Provider,{value:ye},c)),r.createElement(Tu,{disabled:!1===(null==a?void 0:a.restoreFocus)})),r.createElement(ql,{...a,hiddenTextDescribedById:P}))})),Mu=(0,r.createContext)(null),Nu="button";function ju(e){let{id:t,data:n,disabled:i=!1,attributes:s}=e;const o=Ll("Droppable"),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=(0,r.useContext)(Eu),{role:f=Nu,roleDescription:g="draggable",tabIndex:m=0}=null!=s?s:{},y=(null==c?void 0:c.id)===t,b=(0,r.useContext)(y?zu:Mu),[v,_]=jl(),[w,S]=jl(),x=function(e,t){return(0,r.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e}),{})),[e,t])}(a,t),E=Ml(n);Rl((()=>(h.set(t,{id:t,key:o,node:v,activatorNode:w,data:E}),()=>{const e=h.get(t);e&&e.key===o&&h.delete(t)})),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,r.useMemo)((()=>({role:f,tabIndex:m,"aria-disabled":i,"aria-pressed":!(!y||f!==Nu)||void 0,"aria-roledescription":g,"aria-describedby":d.draggable})),[i,f,m,y,g,d.draggable]),isDragging:y,listeners:i?void 0:x,node:v,over:p,setNodeRef:_,setActivatorNodeRef:S,transform:b}}function Pu(){return(0,r.useContext)(Cu)}const Au={timeout:25};function Lu(e){let{animation:t,children:n}=e;const[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(null),l=Pl(n);return n||i||!l||s(l),Rl((()=>{if(!o)return;const e=null==i?void 0:i.key,n=null==i?void 0:i.props.id;null!=e&&null!=n?Promise.resolve(t(n,o)).then((()=>{s(null)})):s(null)}),[t,i,o]),r.createElement(r.Fragment,null,n,i?(0,r.cloneElement)(i,{ref:a}):null)}const Fu={x:0,y:0,scaleX:1,scaleY:1};function Uu(e){let{children:t}=e;return r.createElement(Eu.Provider,{value:xu},r.createElement(zu.Provider,{value:Fu},t))}const Gu={position:"fixed",touchAction:"none"},Bu=e=>Bl(e)?"transform 250ms ease":void 0,Zu=(0,r.forwardRef)(((e,t)=>{let{as:n,activatorEvent:i,adjustScale:s,children:o,className:a,rect:l,style:c,transform:u,transition:d=Bu}=e;if(!l)return null;const h=s?u:{...u,scaleX:1,scaleY:1},p={...Gu,width:l.width,height:l.height,top:l.top,left:l.left,transform:Kl.Transform.toString(h),transformOrigin:s&&i?sc(i,l):void 0,transition:"function"==typeof d?d(i):d,...c};return r.createElement(n,{className:a,style:p,ref:t},o)})),Ku=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:s,className:o}=e;if(null!=s&&s.active)for(const[e,a]of Object.entries(s.active))void 0!==a&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,a));if(null!=s&&s.dragOverlay)for(const[e,a]of Object.entries(s.dragOverlay))void 0!==a&&r.node.style.setProperty(e,a);return null!=o&&o.active&&n.node.classList.add(o.active),null!=o&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[e,t]of Object.entries(i))n.node.style.setProperty(e,t);null!=o&&o.active&&n.node.classList.remove(o.active)}},Xu={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Kl.Transform.toString(t)},{transform:Kl.Transform.toString(n)}]},sideEffects:Ku({styles:{active:{opacity:"0"}}})};function Vu(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return Dl(((e,s)=>{if(null===t)return;const o=n.get(e);if(!o)return;const a=o.node.current;if(!a)return;const l=yu(s);if(!l)return;const{transform:c}=kl(s).getComputedStyle(s),u=yc(c);if(!u)return;const d="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...Xu,...e};return e=>{let{active:s,dragOverlay:o,transform:a,...l}=e;if(!t)return;const c={x:o.rect.left-s.rect.left,y:o.rect.top-s.rect.top},u={scaleX:1!==a.scaleX?s.rect.width*a.scaleX/o.rect.width:1,scaleY:1!==a.scaleY?s.rect.height*a.scaleY/o.rect.height:1},d={x:a.x-c.x,y:a.y-c.y,...u},h=i({...l,active:s,dragOverlay:o,transform:{initial:a,final:d}}),[p]=h,f=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(f))return;const g=null==r?void 0:r({active:s,dragOverlay:o,...l}),m=o.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise((e=>{m.onfinish=()=>{null==g||g(),e()}}))}}(t);return Nc(a,i.draggable.measure),d({active:{id:e,data:o.data,node:a,rect:i.draggable.measure(a)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(l)},droppableContainers:r,measuringConfiguration:i,transform:u})}))}let Wu=0;const Hu=r.memo((e=>{let{adjustScale:t=!1,children:n,dropAnimation:i,style:s,transition:o,modifiers:a,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:h,activeNodeRect:p,containerNodeRect:f,draggableNodes:g,droppableContainers:m,dragOverlay:y,over:b,measuringConfiguration:v,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:S}=Pu(),x=(0,r.useContext)(zu),E=(C=null==h?void 0:h.id,(0,r.useMemo)((()=>{if(null!=C)return Wu++,Wu}),[C]));var C;const k=Iu(a,{activatorEvent:d,active:h,activeNodeRect:p,containerNodeRect:f,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:x,windowRect:S}),O=cu(p),T=Vu({config:i,draggableNodes:g,droppableContainers:m,measuringConfiguration:v}),I=O?y.setRef:void 0;return r.createElement(Uu,null,r.createElement(Lu,{animation:T},h&&E?r.createElement(Zu,{key:E,id:h.id,ref:I,as:l,activatorEvent:d,adjustScale:t,className:c,transition:o,rect:O,style:{zIndex:u,...s},transform:k},n):null))}));function $u(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Yu(e,t){return e.reduce(((e,n,r)=>{const i=t.get(n);return i&&(e[r]=i),e}),Array(e.length))}function Ju(e){return null!==e&&e>=0}const Qu=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=$u(t,r,n),o=t[i],a=s[i];return a&&o?{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}:null};const qu="Sortable",ed=r.createContext({activeIndex:-1,containerId:qu,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qu,disabled:{draggable:!1,droppable:!1}});function td(e){let{children:t,id:n,items:i,strategy:s=Qu,disabled:o=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=Pu(),h=Ll(qu,n),p=Boolean(null!==l.rect),f=(0,r.useMemo)((()=>i.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[i]),g=null!=a,m=a?f.indexOf(a.id):-1,y=u?f.indexOf(u.id):-1,b=(0,r.useRef)(f),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(f,b.current),_=-1!==y&&-1===m||v,w=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);Rl((()=>{v&&g&&d(f)}),[v,f,g,d]),(0,r.useEffect)((()=>{b.current=f}),[f]);const S=(0,r.useMemo)((()=>({activeIndex:m,containerId:h,disabled:w,disableTransforms:_,items:f,overIndex:y,useDragOverlay:p,sortedRects:Yu(f,c),strategy:s})),[m,h,w.draggable,w.droppable,_,f,y,c,p,s]);return r.createElement(ed.Provider,{value:S},t)}const nd=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return $u(n,r,i).indexOf(t)},rd=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((a===s||i!==o)&&(!!n||o!==i&&t===l))},id={duration:200,easing:"ease"},sd="transform",od=Kl.Transition.toString({property:sd,duration:0,easing:"linear"}),ad={roleDescription:"sortable"};function ld(e){let{animateLayoutChanges:t=rd,attributes:n,disabled:i,data:s,getNewIndex:o=nd,id:a,strategy:l,resizeObserverConfig:c,transition:u=id}=e;const{items:d,containerId:h,activeIndex:p,disabled:f,disableTransforms:g,sortedRects:m,overIndex:y,useDragOverlay:b,strategy:v}=(0,r.useContext)(ed),_=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(i,f),w=d.indexOf(a),S=(0,r.useMemo)((()=>({sortable:{containerId:h,index:w,items:d},...s})),[h,s,w,d]),x=(0,r.useMemo)((()=>d.slice(d.indexOf(a))),[d,a]),{rect:E,node:C,isOver:k,setNodeRef:O}=function(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:s}=e;const o=Ll("Droppable"),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=(0,r.useContext)(Eu),d=(0,r.useRef)({disabled:n}),h=(0,r.useRef)(!1),p=(0,r.useRef)(null),f=(0,r.useRef)(null),{disabled:g,updateMeasurementsFor:m,timeout:y}={...Au,...s},b=Ml(null!=m?m:i),v=uu({callback:(0,r.useCallback)((()=>{h.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{u(Array.isArray(b.current)?b.current:[b.current]),f.current=null}),y)):h.current=!0}),[y]),disabled:g||!a}),_=(0,r.useCallback)(((e,t)=>{v&&(t&&(v.unobserve(t),h.current=!1),e&&v.observe(e))}),[v]),[w,S]=jl(_),x=Ml(t);return(0,r.useEffect)((()=>{v&&w.current&&(v.disconnect(),h.current=!1,v.observe(w.current))}),[w,v]),Rl((()=>(l({type:ec.RegisterDroppable,element:{id:i,key:o,disabled:n,node:w,rect:p,data:x}}),()=>l({type:ec.UnregisterDroppable,key:o,id:i}))),[i]),(0,r.useEffect)((()=>{n!==d.current.disabled&&(l({type:ec.SetDroppableDisabled,id:i,key:o,disabled:n}),d.current.disabled=n)}),[i,o,n,l]),{active:a,rect:p,isOver:(null==c?void 0:c.id)===i,node:w,over:c,setNodeRef:S}}({id:a,data:S,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:x,...c}}),{active:T,activatorEvent:I,activeNodeRect:z,attributes:R,setNodeRef:D,listeners:M,isDragging:N,over:j,setActivatorNodeRef:P,transform:A}=ju({id:a,data:S,attributes:{...ad,...n},disabled:_.draggable}),L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(O,D),F=Boolean(T),U=F&&!g&&Ju(p)&&Ju(y),G=!b&&N,B=G&&U?A:null,Z=U?null!=B?B:(null!=l?l:v)({rects:m,activeNodeRect:z,activeIndex:p,overIndex:y,index:w}):null,K=Ju(p)&&Ju(y)?o({id:a,items:d,activeIndex:p,overIndex:y}):w,X=null==T?void 0:T.id,V=(0,r.useRef)({activeId:X,items:d,newIndex:K,containerId:h}),W=d!==V.current.items,H=t({active:T,containerId:h,isDragging:N,isSorting:F,id:a,index:w,items:d,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:u,wasDragging:null!=V.current.activeId}),$=function(e){let{disabled:t,index:n,node:i,rect:s}=e;const[o,a]=(0,r.useState)(null),l=(0,r.useRef)(n);return Rl((()=>{if(!t&&n!==l.current&&i.current){const e=s.current;if(e){const t=vc(i.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&a(n)}}n!==l.current&&(l.current=n)}),[t,n,i,s]),(0,r.useEffect)((()=>{o&&a(null)}),[o]),o}({disabled:!H,index:w,node:C,rect:E});return(0,r.useEffect)((()=>{F&&V.current.newIndex!==K&&(V.current.newIndex=K),h!==V.current.containerId&&(V.current.containerId=h),d!==V.current.items&&(V.current.items=d)}),[F,K,h,d]),(0,r.useEffect)((()=>{if(X===V.current.activeId)return;if(X&&!V.current.activeId)return void(V.current.activeId=X);const e=setTimeout((()=>{V.current.activeId=X}),50);return()=>clearTimeout(e)}),[X]),{active:T,activeIndex:p,attributes:R,data:S,rect:E,index:w,newIndex:K,items:d,isOver:k,isSorting:F,isDragging:N,listeners:M,node:C,overIndex:y,over:j,setNodeRef:L,setActivatorNodeRef:P,setDroppableNodeRef:O,setDraggableNodeRef:D,transform:null!=$?$:Z,transition:function(){if($||W&&V.current.newIndex===w)return od;if(G&&!Bl(I)||!u)return;if(F||H)return Kl.Transition.toString({...u,property:sd});return}()}}function cd(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const ud=[Uc.Down,Uc.Right,Uc.Up,Uc.Left],dd=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=t;if(ud.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const s=i.get(n.id);if(s)switch(e.code){case Uc.Down:r.top<s.top&&t.push(n);break;case Uc.Up:r.top>s.top&&t.push(n);break;case Uc.Left:r.left>s.left&&t.push(n);break;case Uc.Right:r.left<s.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=lc(t),s=[];for(const o of r){const{id:e}=o,t=n.get(e);if(t){const n=lc(t),r=i.reduce(((e,t,r)=>e+ic(n[r],t)),0),a=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:o,value:a}})}}return s.sort(oc)})({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null});let c=cc(l,"id");if(c===(null==o?void 0:o.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(n.id),t=s.get(c),o=t?i.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&o&&e&&t){const n=wc(l).some(((e,t)=>a[t]!==e)),i=hd(e,t),s=function(e,t){if(!cd(e)||!cd(t))return!1;if(!hd(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!i?{x:0,y:0}:{x:s?r.width-o.width:0,y:s?r.height-o.height:0},u={x:o.left,y:o.top};return c.x&&c.y?u:Gl(u,c)}}}};function hd(e,t){return!(!cd(e)||!cd(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const pd="semi-sortable",fd={delay:150,tolerance:5};function gd(e){return r.createElement("div",Object.assign({style:{overflow:"auto"}},e))}function md(e){let{items:t,onSortEnd:n,adjustScale:i,renderItem:s,transition:o,activationConstraint:a=fd,collisionDetection:l=dc,strategy:c=Qu,useDragOverlay:u=!0,dragOverlayCls:d,container:h=gd,prefix:p=pd}=e;const[f,g]=(0,r.useState)(null),m=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(nc(qc,{activationConstraint:a}),nc(tu,{activationConstraint:a}),nc(Xc,{coordinateGetter:dd})),y=(0,r.useCallback)((e=>t.indexOf(e)),[t]),b=(0,r.useMemo)((()=>f?y(f):-1),[y,f]),v=(0,r.useCallback)((e=>{let{active:t}=e;t&&g(t.id)}),[]),_=(0,r.useCallback)((e=>{let{over:t}=e;if(g(null),t){const e=y(t.id);b!==e&&n({oldIndex:b,newIndex:e})}}),[b,y,n]),w=(0,r.useCallback)((()=>{g(null)}),[]);return r.createElement(Du,{sensors:m,collisionDetection:l,onDragStart:v,onDragEnd:_,onDragCancel:w,autoScroll:{order:ru.ReversedTreeOrder}},r.createElement(td,{items:t,strategy:c},r.createElement(h,null,t.map(((e,t)=>r.createElement(yd,{key:e,id:e,index:t,renderItem:s,useDragOverlay:u,prefix:p,transition:o}))))),u?(0,Zt.createPortal)(r.createElement(Hu,{adjustScale:i,style:{zIndex:void 0},className:d},f?s({id:f,sortableHandle:e=>e}):null),document.body):null)}function yd(e){let{animateLayoutChanges:t,id:n,renderItem:i,prefix:s,transition:o}=e;const{listeners:a,setNodeRef:l,transform:c,transition:u,active:d,isOver:h,attributes:p}=ld({id:n,animateLayoutChanges:t,transition:o}),f=(0,r.useCallback)((e=>()=>r.createElement("span",Object.assign({},a,{style:{lineHeight:0},onMouseDown:e=>{a.onMouseDown(e),e.preventDefault(),e.stopPropagation()}}),r.createElement(e,null))),[a]),g=I()(`${s}-sortable-item`,{[`${s}-sortable-item-over`]:h,[`${s}-sortable-item-active`]:(null==d?void 0:d.id)===n}),m=qe(o)?void 0:{transform:Kl.Transform.toString(Object.assign(Object.assign({},c),{scaleX:1,scaleY:1})),transition:u};return r.createElement("div",Object.assign({ref:l,style:m,className:g},p),i({id:n,sortableHandle:f}))}var bd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const vd=yl.PREFIX;function _d(e){return r.createElement("div",Object.assign({className:`${vd}-sortable-list`},e))}class wd extends Oe{constructor(e){super(e),this.handleInputChange=e=>{this.foundation.handleInputChange(e)},this.handleKeyDown=e=>{this.foundation.handleKeyDown(e)},this.handleInputFocus=e=>{this.foundation.handleInputFocus(e)},this.handleInputBlur=e=>{this.foundation.handleInputBlur(e)},this.handleClearBtn=e=>{this.foundation.handleClearBtn(e)},this.handleClearEnterPress=e=>{this.foundation.handleClearEnterPress(e)},this.handleTagClose=e=>{this.foundation.handleTagClose(e)},this.handleInputMouseLeave=e=>{this.foundation.handleInputMouseLeave()},this.handleClick=e=>{this.foundation.handleClick(e)},this.handleInputMouseEnter=e=>{this.foundation.handleInputMouseEnter()},this.handleClickPrefixOrSuffix=e=>{this.foundation.handleClickPrefixOrSuffix(e)},this.handlePreventMouseDown=e=>{this.foundation.handlePreventMouseDown(e)},this.getAllTags=()=>{const{tagsArray:e}=this.state;return e.map(((e,t)=>this.renderTag(e,t)))},this.renderTag=(e,t,n)=>{const{size:i,disabled:s,renderTagItem:o,showContentTooltip:a,draggable:l}=this.props,{active:c}=this.state,u=c&&l,d=I()(`${vd}-wrapper-tag`,{[`${vd}-wrapper-tag-size-${i}`]:i,[`${vd}-wrapper-tag-icon`]:u}),h=I()(`${vd}-wrapper-typo`,{[`${vd}-wrapper-typo-disabled`]:s}),p=I()({[`${vd}-drag-item`]:u,[`${vd}-wrapper-tag-icon`]:u}),f=n&&n((()=>r.createElement(Sl,{className:`${vd}-drag-handler`}))),g=u?e:`${t}${e}`,m=()=>{!s&&this.handleTagClose(t)};return(0,Xe.Z)(o)?r.createElement("div",{className:p,key:g},u&&n?r.createElement(f,null):null,o(e,t,m)):r.createElement(Xo,{className:d,color:"white",size:"small"===i?"small":"large",type:"light",onClose:m,closable:!s,key:g,visible:!0,"aria-label":`${s?"":"Closable "}Tag: ${e}`},u&&n?r.createElement(f,null):null,r.createElement(kr,{className:h,ellipsis:{showTooltip:a,rows:1}},e))},this.renderSortTag=e=>{const{id:t,sortableHandle:n}=e,{tagsArray:r}=this.state,i=r.indexOf(t);return this.renderTag(t,i,n)},this.onSortEnd=e=>{this.foundation.handleSortEnd(e)},this.handleInputCompositionStart=e=>{this.foundation.handleInputCompositionStart(e)},this.handleInputCompositionEnd=e=>{this.foundation.handleInputCompositionEnd(e)},this.foundation=new wl(this.adapter),this.state={tagsArray:e.defaultValue||[],inputValue:"",focusing:!1,hovering:!1,active:!1,entering:!1},this.inputRef=r.createRef(),this.tagInputRef=r.createRef(),this.clickOutsideHandler=null}static getDerivedStateFromProps(e,t){const{value:n,inputValue:r}=e,{tagsArray:i}=t;let s;return s=(0,et.Z)(n)?n:"value"in e&&!n?[]:i,{tagsArray:s,inputValue:tt(r)?r:t.inputValue}}get adapter(){return Object.assign(Object.assign({},super.adapter),{setInputValue:e=>{this.setState({inputValue:e})},setTagsArray:e=>{this.setState({tagsArray:e})},setFocusing:e=>{this.setState({focusing:e})},toggleFocusing:e=>{const{preventScroll:t}=this.props,n=this.inputRef&&this.inputRef.current;e?n&&n.focus({preventScroll:t}):n&&n.blur(),this.setState({focusing:e})},setHovering:e=>{this.setState({hovering:e})},setActive:e=>{this.setState({active:e})},setEntering:e=>{this.setState({entering:e})},getClickOutsideHandler:()=>this.clickOutsideHandler,notifyBlur:e=>{this.props.onBlur(e)},notifyFocus:e=>{this.props.onFocus(e)},notifyInputChange:(e,t)=>{this.props.onInputChange(e,t)},notifyTagChange:e=>{this.props.onChange(e)},notifyTagAdd:e=>{this.props.onAdd(e)},notifyTagRemove:(e,t)=>{this.props.onRemove(e,t)},notifyKeyDown:e=>{this.props.onKeyDown(e)},registerClickOutsideHandler:e=>{const t=t=>{const n=this.tagInputRef&&this.tagInputRef.current,r=t.target;n&&!n.contains(r)&&e(t)};this.clickOutsideHandler=t,document.addEventListener("click",t,!1)},unregisterClickOutsideHandler:()=>{document.removeEventListener("click",this.clickOutsideHandler,!1),this.clickOutsideHandler=null}})}componentDidMount(){const{disabled:e,autoFocus:t,preventScroll:n}=this.props;!e&&t&&(this.inputRef.current.focus({preventScroll:n}),this.foundation.handleClick()),this.foundation.init()}renderClearBtn(){const{hovering:e,tagsArray:t,inputValue:n}=this.state,{showClear:i,disabled:s,clearIcon:o}=this.props,a=I()(`${vd}-clearBtn`,{[`${vd}-clearBtn-invisible`]:!e||""===n&&0===t.length||s});return i?r.createElement("div",{role:"button",tabIndex:0,"aria-label":"Clear TagInput value",className:a,onClick:e=>this.handleClearBtn(e),onKeyPress:e=>this.handleClearEnterPress(e)},o||r.createElement(ss,null)):null}renderPrefix(){const{prefix:e,insetLabel:t,insetLabelId:n}=this.props,i=e||t;if(qe(i)||q(i))return null;const s=I()(`${vd}-prefix`,{[`${vd}-inset-label`]:t,[`${vd}-prefix-text`]:i&&tt(i),[`${vd}-prefix-icon`]:an(i)});return r.createElement("div",{className:s,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,id:n,"x-semi-prop":"prefix"},i)}renderSuffix(){const{suffix:e}=this.props;if(qe(e)||q(e))return null;const t=I()(`${vd}-suffix`,{[`${vd}-suffix-text`]:e&&tt(e),[`${vd}-suffix-icon`]:an(e)});return r.createElement("div",{className:t,onMouseDown:this.handlePreventMouseDown,onClick:this.handleClickPrefixOrSuffix,"x-semi-prop":"suffix"},e)}renderTags(){const{disabled:e,maxTagCount:t,showRestTagsPopover:n,restTagsPopoverProps:i={},draggable:s,expandRestTagsOnClick:o}=this.props,{tagsArray:a,active:l}=this.state,c=I()(`${vd}-wrapper-n`,{[`${vd}-wrapper-n-disabled`]:e}),u=this.getAllTags();let d=[],h=[...u];(!l||!o)&&t&&t<u.length&&(h=u.slice(0,t),d=u.slice(t));const p=r.createElement("span",{className:c},"+",a.length-t),f=u.map(((e,t)=>({item:e,key:a[t]})));return l&&s&&f.length>0?r.createElement(md,{items:a,onSortEnd:this.onSortEnd,renderItem:this.renderSortTag,container:_d,prefix:vd,transition:null,dragOverlayCls:`${vd}-right-item-drag-item-move`}):r.createElement(r.Fragment,null,h,d.length>0&&(n?r.createElement(pr,Object.assign({content:d,showArrow:!0,trigger:"hover",position:"top",autoAdjustOverflow:!0},i),p):p))}blur(){this.inputRef.current.blur(),this.foundation.clickOutsideCallBack()}focus(){const{preventScroll:e,disabled:t}=this.props;this.inputRef.current.focus({preventScroll:e}),t||this.foundation.handleClick()}render(){const e=this.props,{size:t,style:n,className:i,disabled:s,placeholder:o,validateStatus:a}=e,l=bd(e,["size","style","className","disabled","placeholder","validateStatus"]),{focusing:c,hovering:u,tagsArray:d,inputValue:h,active:p}=this.state,f=I()(vd,i,{[`${vd}-focus`]:c||p,[`${vd}-disabled`]:s,[`${vd}-hover`]:u&&!s,[`${vd}-error`]:"error"===a,[`${vd}-warning`]:"warning"===a,[`${vd}-small`]:"small"===t,[`${vd}-large`]:"large"===t}),g=I()(`${vd}-wrapper-input`,`${vd}-wrapper-input-${t}`),m=I()(`${vd}-wrapper`);return r.createElement("div",Object.assign({ref:this.tagInputRef,style:n,className:f,"aria-disabled":s,"aria-label":this.props["aria-label"],"aria-invalid":"error"===a,onMouseEnter:e=>{this.handleInputMouseEnter(e)},onMouseLeave:e=>{this.handleInputMouseLeave(e)},onClick:e=>{this.handleClick(e)}},this.getDataAttr(l)),this.renderPrefix(),r.createElement("div",{className:m},this.renderTags(),r.createElement($a,{"aria-label":"input value",ref:this.inputRef,className:g,disabled:s,value:h,size:t,placeholder:0===d.length?o:"",onKeyDown:e=>{this.handleKeyDown(e)},onChange:(e,t)=>{this.handleInputChange(t)},onBlur:e=>{this.handleInputBlur(e)},onFocus:e=>{this.handleInputFocus(e)},onCompositionStart:this.handleInputCompositionStart,onCompositionEnd:this.handleInputCompositionEnd})),this.renderClearBtn(),this.renderSuffix())}}wd.propTypes={children:R().node,clearIcon:R().node,style:R().object,className:R().string,disabled:R().bool,allowDuplicates:R().bool,max:R().number,maxTagCount:R().number,maxLength:R().number,showRestTagsPopover:R().bool,restTagsPopoverProps:R().object,showContentTooltip:R().oneOfType([R().shape({type:R().string,opts:R().object}),R().bool]),defaultValue:R().array,value:R().array,inputValue:R().string,placeholder:R().string,separator:R().oneOfType([R().string,R().array]),showClear:R().bool,addOnBlur:R().bool,draggable:R().bool,expandRestTagsOnClick:R().bool,autoFocus:R().bool,renderTagItem:R().func,onBlur:R().func,onFocus:R().func,onChange:R().func,onInputChange:R().func,onExceed:R().func,onInputExceed:R().func,onAdd:R().func,onRemove:R().func,onKeyDown:R().func,size:R().oneOf(bl),validateStatus:R().oneOf(vl),prefix:R().oneOfType([R().string,R().node]),suffix:R().oneOfType([R().string,R().node]),"aria-label":R().string,preventScroll:R().bool},wd.defaultProps={showClear:!1,addOnBlur:!1,allowDuplicates:!0,showRestTagsPopover:!0,autoFocus:!1,draggable:!1,expandRestTagsOnClick:!0,showContentTooltip:!0,separator:",",size:"default",validateStatus:"default",onBlur:G,onFocus:G,onChange:G,onInputChange:G,onExceed:G,onInputExceed:G,onAdd:G,onRemove:G,onKeyDown:G};const Sd=wd;class xd extends ue{constructor(e){super(Object.assign(Object.assign({},xd.defaultAdapter),e)),this.handleMouseInSideChange=e=>{this._adapter.handleMouseInSideChange(e)},this.getInputWrapperRect=()=>this._adapter.getInputWrapperRect()}hasToast(e){return this._adapter.getState("list").map((e=>{let{id:t}=e;return t})).includes(e)}addToast(e){const t=this._adapter.getState("list");t.push(e),this._adapter.updateToast(t,[],[])}updateToast(e,t){let n=this._adapter.getState("list");n=n.map((n=>n.id===e?Object.assign(Object.assign({},n),t):n));const r=n.filter((t=>t.id===e));this._adapter.updateToast(n,[],r)}removeToast(e){let t=this._adapter.getState("list");const n=[];t=t.filter((t=>t.id!==e||(n.push(t),!1))),this._adapter.updateToast(t,n,[])}destroyAll(){const e=this._adapter.getState("list");e.length>0&&this._adapter.updateToast([],e,[])}}const Ed=`${D}-toast`,Cd={PREFIX:Ed,WRAPPER:`${Ed}-wrapper`,LIST:`${Ed}-list`},kd=["warning","success","info","error","default"],Od=["normal","light"],Td=["ltr","rtl"];class Id extends ue{constructor(e){super(Object.assign(Object.assign({},Id.defaultAdapter),e)),this._timer=null,this._id=null}init(){this.startCloseTimer_(),this._id=this._adapter.getProp("id")}destroy(){this.clearCloseTimer_()}startCloseTimer_(){const e=this._adapter.getProp("duration");e&&Xi(e)&&(this._timer=setTimeout((()=>{this.close()}),1e3*e))}close(e){e&&e.stopPropagation(),this._adapter.notifyWrapperToRemove(this._id),this._adapter.notifyClose()}clearCloseTimer_(){this._timer&&(clearTimeout(this._timer),this._timer=null)}restartCloseTimer(){this.clearCloseTimer_(),this.startCloseTimer_()}}const zd=Cd.PREFIX;class Rd extends Oe{constructor(e){super(e),this.toastEle=r.createRef(),this.clearCloseTimer=()=>{this.foundation.clearCloseTimer_()},this.startCloseTimer=()=>{this.foundation.startCloseTimer_()},this.restartCloseTimer=()=>{this.foundation.restartCloseTimer()},this.state={},this.foundation=new Id(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{notifyWrapperToRemove:e=>{this.props.close(e)},notifyClose:()=>{this.props.onClose()}})}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}close(e){this.foundation.close(e)}renderIcon(){const{type:e,icon:t}=this.props,n={warning:r.createElement(ni,null),success:r.createElement(ti,null),info:r.createElement(ei,null),error:r.createElement(ri,null)}[e],i="large",s=I()(`${zd}-icon`,`${zd}-icon-${e}`);return t?an(t)?r.cloneElement(t,{size:i,className:`${zd}-icon`}):t:e&&n?r.cloneElement(n,{size:i,className:s}):null}render(){const{content:e,type:t,theme:n,showClose:i,textMaxWidth:s,className:o,style:a}=this.props,l=this.props.direction||this.context.direction,c=I()(zd,o,{[`${zd}-${t}`]:!0,[`${zd}-${n}`]:"light"===n,[`${zd}-rtl`]:"rtl"===l}),u={};u.maxWidth=s;const d=this.props.positionInList?this.props.positionInList.length-this.props.positionInList.index-1:0,h=r.createElement("div",{ref:this.toastEle,role:"alert","aria-label":`${t||"default"} type`,className:c,style:Object.assign(Object.assign({},a),{transform:`translate3d(0,0,${-10*d}px)`}),onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onAnimationStart:this.props.onAnimationStart,onAnimationEnd:this.props.onAnimationEnd},r.createElement("div",{className:`${zd}-content`},this.renderIcon(),r.createElement("span",{className:`${zd}-content-text`,style:u,"x-semi-prop":"content"},e),i&&r.createElement("div",{className:`${zd}-close-button`},r.createElement($,{onClick:e=>this.close(e),type:"tertiary",icon:r.createElement(Nr,{"x-semi-prop":"icon"}),theme:"borderless",size:"small"}))));if(this.props.stack){const e=this.props.stackExpanded&&this.toastEle.current&&getComputedStyle(this.toastEle.current).height||0;return r.createElement("div",{className:`${zd}-zero-height-wrapper`,style:{height:e}},h)}return h}}Rd.contextType=Ve,Rd.propTypes={onClose:R().func,content:R().node,close:R().func,duration:R().number,theme:R().oneOf(Od),type:R().oneOf(kd),textMaxWidth:R().oneOfType([R().string,R().number]),style:R().object,className:R().string,showClose:R().bool,stack:R().bool,stackExpanded:R().bool,icon:R().node,direction:R().oneOf(Td)},Rd.defaultProps={onClose:G,content:"",close:G,duration:3,textMaxWidth:450,showClose:!0,stack:!1,stackExpanded:!1,theme:"normal"};const Dd=Rd;var Md=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Nd=(e,t)=>{var{afterClose:n}=e,i=Md(e,["afterClose"]);const[s,o]=(0,r.useState)(!0);return r.useImperativeHandle(t,(()=>({close:()=>{o(!1)}}))),(0,r.useEffect)((()=>{s||n(i.id)}),[s]),s?r.createElement(Dd,Object.assign({},i,{close:()=>{o(!1)}})):null},jd=r.forwardRef(Nd),Pd={motion:!0,zIndex:1010,duration:3};function Ad(){const[e,t]=function(){const[e,t]=r.useState([]);return[e,function(e,n){return t((t=>[{element:e,config:n},...t])),e=>{t((t=>t.filter((t=>{let{config:n}=t;return n.id!==e}))))}}]}(),n=(0,r.useRef)(new Map),i=e=>{const i=Te("semi_toast_"),s=Object.assign(Object.assign({},e),{id:i});let o;const a=r.createElement(jd,Object.assign({},s,{key:i,afterClose:e=>o(e),ref:e=>{var t;n.current.set(i,{close:null!==(t=null==e?void 0:e.close)&&void 0!==t?t:G})}}));return o=t(a,Object.assign({},s)),i};return[{success:e=>i(Object.assign(Object.assign(Object.assign({},Pd),e),{type:"success"})),info:e=>i(Object.assign(Object.assign(Object.assign({},Pd),e),{type:"info"})),error:e=>i(Object.assign(Object.assign(Object.assign({},Pd),e),{type:"error"})),warning:e=>i(Object.assign(Object.assign(Object.assign({},Pd),e),{type:"warning"})),open:e=>i(Object.assign(Object.assign(Object.assign({},Pd),e),{type:"default"})),close:e=>(e=>{var t;const{close:r}=null!==(t=n.current.get(e))&&void 0!==t?t:{};null==r||r()})(e)},r.createElement(r.Fragment,null,Array.isArray(e)&&e.length?r.createElement(r.Fragment,null,e.map((e=>e.element))):null)]}const Ld=()=>{var e;return e=class e extends Oe{constructor(e){super(e),this.stack=!1,this.innerWrapperRef=r.createRef(),this.handleMouseEnter=e=>{this.stack&&this.foundation.handleMouseInSideChange(!0)},this.handleMouseLeave=e=>{var t;if(this.stack){(null===(t=this.foundation.getInputWrapperRect())||void 0===t?void 0:t.height)&&this.foundation.handleMouseInSideChange(!1)}},this.state={list:[],removedItems:[],updatedItems:[],mouseInSide:!1},this.foundation=new xd(this.adapter)}get adapter(){return Object.assign(Object.assign({},super.adapter),{updateToast:(e,t,n)=>{this.setState({list:e,removedItems:t,updatedItems:n})},handleMouseInSideChange:e=>{this.setState({mouseInSide:e})},getInputWrapperRect:()=>{var e;return null===(e=this.innerWrapperRef.current)||void 0===e?void 0:e.getBoundingClientRect()}})}static create(t){var n;const i=null!==(n=t.id)&&void 0!==n?n:Te("toast");if(e.ref){const n=document.querySelector(`#${this.wrapperId}`);["top","left","bottom","right"].map((e=>{e in t&&(n.style[e]="number"==typeof t[e]?`${t[e]}px`:t[e])})),Boolean(t.stack)!==e.ref.stack&&(e.ref.stack=Boolean(t.stack)),e.ref.has(i)?e.ref.update(i,Object.assign(Object.assign({},t),{id:i})):e.ref.add(Object.assign(Object.assign({},t),{id:i}))}else{const n=document.createElement("div");if(this.wrapperId||(this.wrapperId=Te("toast-wrapper").slice(0,26)),n.className=Cd.WRAPPER,n.id=this.wrapperId,n.style.zIndex=String("number"==typeof t.zIndex?t.zIndex:e.defaultOpts.zIndex),["top","left","bottom","right"].map((r=>{if(r in e.defaultOpts||r in t){const i=t[r]?t[r]:e.defaultOpts[r];n.style[r]="number"==typeof i?`${i}px`:i}})),e.defaultOpts.getPopupContainer){e.defaultOpts.getPopupContainer().appendChild(n)}else document.body.appendChild(n);Zt.render(r.createElement(e,{ref:t=>e.ref=t}),n,(()=>{e.ref.add(Object.assign(Object.assign({},t),{id:i})),e.ref.stack=Boolean(t.stack)}))}return i}static close(t){e.ref&&e.ref.remove(t)}static destroyAll(){if(e.ref){e.ref.destroyAll();const t=document.querySelector(`#${this.wrapperId}`);Zt.unmountComponentAtNode(t),t&&t.parentNode.removeChild(t),e.ref=null,this.wrapperId=null}}static getWrapperId(){return this.wrapperId}static info(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"info"}))}static warning(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"warning"}))}static error(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"error"}))}static success(t){return"string"==typeof t&&(t={content:t}),this.create(Object.assign(Object.assign(Object.assign({},e.defaultOpts),t),{type:"success"}))}static config(t){["top","left","bottom","right"].forEach((n=>{n in t&&(e.defaultOpts[n]=t[n])})),"number"==typeof t.zIndex&&(e.defaultOpts.zIndex=t.zIndex),"number"==typeof t.duration&&(e.defaultOpts.duration=t.duration),"function"==typeof t.getPopupContainer&&(e.defaultOpts.getPopupContainer=t.getPopupContainer)}has(e){return this.foundation.hasToast(e)}add(e){return this.foundation.addToast(e)}update(e,t){return this.foundation.updateToast(e,t)}remove(e){return this.foundation.removeToast(e)}destroyAll(){return this.foundation.destroyAll()}render(){let{list:e}=this.state;const{removedItems:t,updatedItems:n}=this.state;e=Array.from(new Set([...e,...t]));const i=n.map((e=>{let{id:t}=e;return t})),s=e=>{var t;(null===(t=null==e?void 0:e.foundation)||void 0===t?void 0:t._id)&&i.includes(e.foundation._id)&&e.foundation.restartCloseTimer()};return r.createElement(r.Fragment,null,r.createElement("div",{className:I()({[`${Cd.PREFIX}-innerWrapper`]:!0,[`${Cd.PREFIX}-innerWrapper-hover`]:this.state.mouseInSide}),ref:this.innerWrapperRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},e.map(((n,i)=>{const o=void 0!==t.find((e=>e.id===n.id));return r.createElement(vn,{key:n.id,motion:n.motion,animationState:o?"leave":"enter",startClassName:o?`${Cd.PREFIX}-animation-hide`:`${Cd.PREFIX}-animation-show`},(t=>{let{animationClassName:a,animationEventsNeedBind:l,isAnimating:c}=t;return o&&!c?null:r.createElement(Dd,Object.assign({},n,{stack:this.stack,stackExpanded:this.state.mouseInSide,positionInList:{length:e.length,index:i},className:I()({[n.className]:Boolean(n.className),[a]:!0})},l,{style:Object.assign({},n.style),close:e=>this.remove(e),ref:s}))}))}))))}},e.defaultOpts={motion:!0,zIndex:1010,content:""},e.propTypes={content:R().node,duration:R().number,onClose:R().func,icon:R().node,direction:R().oneOf(Td),stack:R().bool},e.defaultProps={},e};const Fd=class{static create(e){const t=Ld();return t.useToast=Ad,e&&t.config(e),t}}.create();var Ud=n(31674),Gd=n(89614),Bd=n(98435);const Zd=function(e){return(0,et.Z)(e)?(0,i.Z)(e,d.Z):(0,Ud.Z)(e)?[e]:(0,ut.Z)((0,Gd.Z)((0,Bd.Z)(e)))};const Kd=function(e,t){return(0,i.Z)(t,(function(t){return e[t]}))};const Xd=function(e){return null==e?[]:Kd(e,(0,At.Z)(e))};const Vd=function(e,t){return null==e||h(e,t)},Wd=e=>{const t=Zd(e);return!(Xi(e)&&1===t.length)&&Number.isInteger(+t[t.length-1])};function Hd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length)return;const r=ae(e,t);(Array.isArray(r)&&r.every((e=>null==e))||function(e){if((0,mt.Z)(e)){const t=Xd(e);return!t.length||t.every((e=>void 0===e))}return!1}(r))&&Vd(e,t),Hd(e,t.slice(0,t.length-1),n)}function $d(e,t){return ae(e,t)}function Yd(e,t){Vd(e,t);let n=Zd(t);n=n.slice(0,n.length-1),Hd(e,n,!1)}function Jd(e,t,n,r){if(r)return tn(e,t,n);if(void 0!==n)return tn(e,t,n);if(Wd(t)&&void 0!==$d(e,t)){tn(e,t,void 0);let n=Zd(t);n=n.slice(0,n.length-1),Hd(e,n,!1)}else Wd(t)||void 0===$d(e,t)||Yd(e,t)}function Qd(){return Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qd.apply(this,arguments)}function qd(e){return qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qd(e)}function eh(e,t){return eh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},eh(e,t)}function th(e,t,n){return th=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Mh){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&eh(i,n.prototype),i},th.apply(null,arguments)}function nh(e){var t="function"==typeof Map?new Map:void 0;return nh=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return th(e,arguments,qd(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),eh(r,e)},nh(e)}var rh=/%[sdj%]/g;function ih(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function sh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,i=t[0],s=t.length;return"function"==typeof i?i.apply(null,t.slice(1)):"string"==typeof i?String(i).replace(rh,(function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(n){return"[Circular]"}break;default:return e}})):i}function oh(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function ah(e,t,n){var r=0,i=e.length;!function s(o){if(o&&o.length)n(o);else{var a=r;r+=1,a<i?t(e[a],s):n([])}}([])}"undefined"!=typeof process&&process.env;var lh=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,eh(t,n),r}(nh(Error));function ch(e,t,n,r){if(t.first){var i=new Promise((function(t,i){var s=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);ah(s,n,(function(e){return r(e),e.length?i(new lh(e,ih(e))):t()}))}));return i.catch((function(e){return e})),i}var s=t.firstFields||[];!0===s&&(s=Object.keys(e));var o=Object.keys(e),a=o.length,l=0,c=[],u=new Promise((function(t,i){var u=function(e){if(c.push.apply(c,e),++l===a)return r(c),c.length?i(new lh(c,ih(c))):t()};o.length||(r(c),t()),o.forEach((function(t){var r=e[t];-1!==s.indexOf(t)?ah(r,n,u):function(e,t,n){var r=[],i=0,s=e.length;function o(e){r.push.apply(r,e),++i===s&&n(r)}e.forEach((function(e){t(e,o)}))}(r,n,u)}))}));return u.catch((function(e){return e})),u}function uh(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function dh(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"==typeof r&&"object"==typeof e[n]?e[n]=Qd({},e[n],r):e[n]=r}return e}function hh(e,t,n,r,i,s){!e.required||n.hasOwnProperty(e.field)&&!oh(t,s||e.type)||r.push(sh(i.messages.required,e.fullField))}var ph={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},fh={integer:function(e){return fh.number(e)&&parseInt(e,10)===e},float:function(e){return fh.number(e)&&!fh.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(Mh){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"==typeof e&&!fh.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(ph.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(ph.url)},hex:function(e){return"string"==typeof e&&!!e.match(ph.hex)}};var gh="enum";var mh={required:hh,whitespace:function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(sh(i.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)hh(e,t,n,r,i);else{var s=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(s)>-1?fh[s](t)||r.push(sh(i.messages.types[s],e.fullField,e.type)):s&&typeof t!==e.type&&r.push(sh(i.messages.types[s],e.fullField,e.type))}},range:function(e,t,n,r,i){var s="number"==typeof e.len,o="number"==typeof e.min,a="number"==typeof e.max,l=t,c=null,u="number"==typeof t,d="string"==typeof t,h=Array.isArray(t);if(u?c="number":d?c="string":h&&(c="array"),!c)return!1;h&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),s?l!==e.len&&r.push(sh(i.messages[c].len,e.fullField,e.len)):o&&!a&&l<e.min?r.push(sh(i.messages[c].min,e.fullField,e.min)):a&&!o&&l>e.max?r.push(sh(i.messages[c].max,e.fullField,e.max)):o&&a&&(l<e.min||l>e.max)&&r.push(sh(i.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,i){e[gh]=Array.isArray(e[gh])?e[gh]:[],-1===e[gh].indexOf(t)&&r.push(sh(i.messages[gh],e.fullField,e[gh].join(", ")))},pattern:function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(sh(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(sh(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function yh(e,t,n,r,i){var s=e.type,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t,s)&&!e.required)return n();mh.required(e,t,r,o,i,s),oh(t,s)||mh.type(e,t,r,o,i)}n(o)}var bh={string:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t,"string")&&!e.required)return n();mh.required(e,t,r,s,i,"string"),oh(t,"string")||(mh.type(e,t,r,s,i),mh.range(e,t,r,s,i),mh.pattern(e,t,r,s,i),!0===e.whitespace&&mh.whitespace(e,t,r,s,i))}n(s)},method:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&mh.type(e,t,r,s,i)}n(s)},number:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&(mh.type(e,t,r,s,i),mh.range(e,t,r,s,i))}n(s)},boolean:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&mh.type(e,t,r,s,i)}n(s)},regexp:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),oh(t)||mh.type(e,t,r,s,i)}n(s)},integer:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&(mh.type(e,t,r,s,i),mh.range(e,t,r,s,i))}n(s)},float:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&(mh.type(e,t,r,s,i),mh.range(e,t,r,s,i))}n(s)},array:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();mh.required(e,t,r,s,i,"array"),null!=t&&(mh.type(e,t,r,s,i),mh.range(e,t,r,s,i))}n(s)},object:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&mh.type(e,t,r,s,i)}n(s)},enum:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i),void 0!==t&&mh.enum(e,t,r,s,i)}n(s)},pattern:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t,"string")&&!e.required)return n();mh.required(e,t,r,s,i),oh(t,"string")||mh.pattern(e,t,r,s,i)}n(s)},date:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t,"date")&&!e.required)return n();var o;if(mh.required(e,t,r,s,i),!oh(t,"date"))o=t instanceof Date?t:new Date(t),mh.type(e,o,r,s,i),o&&mh.range(e,o.getTime(),r,s,i)}n(s)},url:yh,hex:yh,email:yh,required:function(e,t,n,r,i){var s=[],o=Array.isArray(t)?"array":typeof t;mh.required(e,t,r,s,i,o),n(s)},any:function(e,t,n,r,i){var s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(oh(t)&&!e.required)return n();mh.required(e,t,r,s,i)}n(s)}};function vh(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var _h=vh();function wh(e){this.rules=null,this._messages=_h,this.define(e)}wh.prototype={messages:function(e){return e&&(this._messages=dh(vh(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!=typeof e||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var i,s,o=e,a=t,l=n;if("function"==typeof a&&(l=a,a={}),!this.rules||0===Object.keys(this.rules).length)return l&&l(),Promise.resolve();if(a.messages){var c=this.messages();c===_h&&(c=vh()),dh(c,a.messages),a.messages=c}else a.messages=this.messages();var u={};(a.keys||Object.keys(this.rules)).forEach((function(t){i=r.rules[t],s=o[t],i.forEach((function(n){var i=n;"function"==typeof i.transform&&(o===e&&(o=Qd({},o)),s=o[t]=i.transform(s)),(i="function"==typeof i?{validator:i}:Qd({},i)).validator=r.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=r.getType(i),i.validator&&(u[t]=u[t]||[],u[t].push({rule:i,value:s,source:o,field:t}))}))}));var d={};return ch(u,a,(function(e,t){var n,r=e.rule,i=!("object"!==r.type&&"array"!==r.type||"object"!=typeof r.fields&&"object"!=typeof r.defaultField);function s(e,t){return Qd({},t,{fullField:r.fullField+"."+e})}function o(n){void 0===n&&(n=[]);var o=n;if(Array.isArray(o)||(o=[o]),!a.suppressWarning&&o.length&&wh.warning("async-validator:",o),o.length&&void 0!==r.message&&(o=[].concat(r.message)),o=o.map(uh(r)),a.first&&o.length)return d[r.field]=1,t(o);if(i){if(r.required&&!e.value)return void 0!==r.message?o=[].concat(r.message).map(uh(r)):a.error&&(o=[a.error(r,sh(a.messages.required,r.field))]),t(o);var l={};if(r.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(l[c]=r.defaultField);for(var u in l=Qd({},l,e.rule.fields))if(l.hasOwnProperty(u)){var h=Array.isArray(l[u])?l[u]:[l[u]];l[u]=h.map(s.bind(null,u))}var p=new wh(l);p.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),p.validate(e.value,e.rule.options||a,(function(e){var n=[];o&&o.length&&n.push.apply(n,o),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(o)}i=i&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,o,e.source,a):r.validator&&(!0===(n=r.validator(r,e.value,o,e.source,a))?o():!1===n?o(r.message||r.field+" fails"):n instanceof Array?o(n):n instanceof Error&&o(n.message)),n&&n.then&&n.then((function(){return o()}),(function(e){return o(e)}))}),(function(e){!function(e){var t,n=[],r={};function i(e){var t;Array.isArray(e)?n=(t=n).concat.apply(t,e):n.push(e)}for(t=0;t<e.length;t++)i(e[t]);n.length?r=ih(n):(n=null,r=null),l(n,r)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!bh.hasOwnProperty(e.type))throw new Error(sh("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?bh.required:bh[this.getType(e)]||!1}},wh.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");bh[e]=t},wh.warning=function(){},wh.messages=_h,wh.validators=bh;const Sh=wh,xh={PREFIX:`${D}-form`},Eh=["horizontal","vertical"],Ch=["left","top","inset"],kh=["left","right"],Oh=["middle","bottom"],Th="change";var Ih=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function zh(e){let t=!0;return"string"==typeof e&&e.length?t=!1:Array.isArray(e)&&e.length?t=e.every((e=>zh(e))):"boolean"==typeof e?t=e:e&&"symbol"==typeof e.$$typeof&&"Symbol(react.element)"===e.$$typeof.toString()&&(t=!1),t}function Rh(e){let t=Object.assign(Object.assign({},{allowEmptyString:!1,allowEmpty:!1,emptyValue:"",noLabel:!1,noErrorMessage:!1,isInInputGroup:!1}),e),{field:n,label:r,labelPosition:i,labelWidth:s,labelAlign:o,labelCol:a,wrapperCol:l,initValue:c,validate:u,validateStatus:d,trigger:h,allowEmptyString:p,allowEmpty:f,emptyValue:g,rules:m,onChange:y,keepState:b,transform:v,name:_,fieldClassName:w,fieldStyle:S,noLabel:x,noErrorMessage:E,isInInputGroup:C,stopValidateWithError:k,convert:O,showValidateIcon:T,helpText:I,extraText:z,extraTextPosition:R,pure:D,id:M}=t,N=Ih(t,["field","label","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","initValue","validate","validateStatus","trigger","allowEmptyString","allowEmpty","emptyValue","rules","onChange","keepState","transform","name","fieldClassName","fieldStyle","noLabel","noErrorMessage","isInInputGroup","stopValidateWithError","convert","showValidateIcon","helpText","extraText","extraTextPosition","pure","id"]);delete N.defaultChecked,delete N.defaultValue,delete N.checked,void 0!==c&&(c=(0,na.Z)(c));const j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!1;return"object"==typeof e&&"required"in e?t=e.required:Array.isArray(e)&&e.length&&e.forEach((e=>{e.required&&(t=!0)})),t}(m);return g=void 0!==g?g:"",{field:n,label:r,labelPosition:i,labelWidth:s,labelAlign:o,labelCol:a,wrapperCol:l,noLabel:x,noErrorMessage:E,isInInputGroup:C,initValue:c,validate:u,validateStatus:d,trigger:h,allowEmptyString:p,allowEmpty:f,emptyValue:g,rules:m,required:j,keepState:b,transform:v,name:_,fieldClassName:w,fieldStyle:S,convert:O,stopValidateWithError:k,showValidateIcon:T,helpText:I,extraText:z,extraTextPosition:R,pure:D,rest:N,id:M}}function Dh(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Mh(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Nh(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return Mh(n.overflowY,t)||Mh(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function jh(e,t,n,r,i,s,o,a){return s<e&&o>t||s>e&&o<t?0:s<=e&&a<=n||o>=t&&a>=n?s-e-r:o>t&&a<n||s<e&&a>n?o-t+i:0}var Ph=function(e,t){var n=window,r=t.scrollMode,i=t.block,s=t.inline,o=t.boundary,a=t.skipOverflowHiddenElements,l="function"==typeof o?o:function(e){return e!==o};if(!Dh(e))throw new TypeError("Invalid target");for(var c,u,d=document.scrollingElement||document.documentElement,h=[],p=e;Dh(p)&&l(p);){if((p=null==(u=(c=p).parentElement)?c.getRootNode().host||null:u)===d){h.push(p);break}null!=p&&p===document.body&&Nh(p)&&!Nh(document.documentElement)||null!=p&&Nh(p,a)&&h.push(p)}for(var f=n.visualViewport?n.visualViewport.width:innerWidth,g=n.visualViewport?n.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,y=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),v=b.height,_=b.width,w=b.top,S=b.right,x=b.bottom,E=b.left,C="start"===i||"nearest"===i?w:"end"===i?x:w+v/2,k="center"===s?E+_/2:"end"===s?S:E,O=[],T=0;T<h.length;T++){var I=h[T],z=I.getBoundingClientRect(),R=z.height,D=z.width,M=z.top,N=z.right,j=z.bottom,P=z.left;if("if-needed"===r&&w>=0&&E>=0&&x<=g&&S<=f&&w>=M&&x<=j&&E>=P&&S<=N)return O;var A=getComputedStyle(I),L=parseInt(A.borderLeftWidth,10),F=parseInt(A.borderTopWidth,10),U=parseInt(A.borderRightWidth,10),G=parseInt(A.borderBottomWidth,10),B=0,Z=0,K="offsetWidth"in I?I.offsetWidth-I.clientWidth-L-U:0,X="offsetHeight"in I?I.offsetHeight-I.clientHeight-F-G:0,V="offsetWidth"in I?0===I.offsetWidth?0:D/I.offsetWidth:0,W="offsetHeight"in I?0===I.offsetHeight?0:R/I.offsetHeight:0;if(d===I)B="start"===i?C:"end"===i?C-g:"nearest"===i?jh(y,y+g,g,F,G,y+C,y+C+v,v):C-g/2,Z="start"===s?k:"center"===s?k-f/2:"end"===s?k-f:jh(m,m+f,f,L,U,m+k,m+k+_,_),B=Math.max(0,B+y),Z=Math.max(0,Z+m);else{B="start"===i?C-M-F:"end"===i?C-j+G+X:"nearest"===i?jh(M,j,R,F,G+X,C,C+v,v):C-(M+R/2)+X/2,Z="start"===s?k-P-L:"center"===s?k-(P+D/2)+K/2:"end"===s?k-N+U+K:jh(P,N,D,L,U+K,k,k+_,_);var H=I.scrollLeft,$=I.scrollTop;C+=$-(B=Math.max(0,Math.min($+B/W,I.scrollHeight-R/W+X))),k+=H-(Z=Math.max(0,Math.min(H+Z/V,I.scrollWidth-D/V+K)))}O.push({el:I,top:B,left:Z})}return O};function Ah(e){return e===Object(e)&&0!==Object.keys(e).length}const Lh=function(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Ah(t)&&"function"==typeof t.behavior)return t.behavior(n?Ph(e,t):[]);if(n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:Ah(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,i=e.top,s=e.left;r.scroll&&n?r.scroll({top:i,left:s,behavior:t}):(r.scrollTop=i,r.scrollLeft=s)}))}(Ph(e,r),r.behavior)}};class Fh extends ue{constructor(e){super(Object.assign({},e));let{initValues:t}=this._adapter.getProps();t=this._adapter.cloneDeep(t),this.data={values:t||{},errors:{},touched:{}},this.fields=new Map,this.registered={},this.registeredArrayField=new Map,this.register=this.register.bind(this),this.unRegister=this.unRegister.bind(this),this.registerArrayField=this.registerArrayField.bind(this),this.unRegisterArrayField=this.unRegisterArrayField.bind(this),this.getArrayField=this.getArrayField.bind(this),this.updateArrayField=this.updateArrayField.bind(this),this.getField=this.getField.bind(this),this.setValues=this.setValues.bind(this),this.updateStateValue=this.updateStateValue.bind(this),this.updateStateError=this.updateStateError.bind(this),this.updateStateTouched=this.updateStateTouched.bind(this),this.getFormState=this.getFormState.bind(this),this.getValue=this.getValue.bind(this),this.getError=this.getError.bind(this),this.getTouched=this.getTouched.bind(this),this.getInitValues=this.getInitValues.bind(this),this.getInitValue=this.getInitValue.bind(this),this.getFormProps=this.getFormProps.bind(this),this.getFieldExist=this.getFieldExist.bind(this),this.scrollToField=this.scrollToField.bind(this)}init(){this._adapter.initFormId()}getField(e){return this.fields.get(e)}register(e,t,n){this.registered[e];if(this.registered[e]=!0,this.fields.set(e,n),n.keepState);else{const r=n.allowEmpty||!1,i={notNotify:!0,notUpdate:!1,allowEmpty:r};let s=t.value;r||""!==s||(s=void 0),this.updateStateValue(e,s,i),t.error&&this.updateStateError(e,t.error,i)}}unRegister(e){const t=this.fields.get(e);try{t.keepState||(Yd(this.data.values,e),Yd(this.data.errors,e),Yd(this.data.touched,e))}catch(n){console.error(`some thing wrong when unregister field:${e}`)}this.fields.delete(e),this._adapter.notifyChange(this.data),this._adapter.forceUpdate()}registerArrayField(e,t){this.updateArrayField(e,{updateKey:(new Date).valueOf(),initValue:t})}unRegisterArrayField(e){this.registeredArrayField.delete(e)}getArrayField(e){return this.registeredArrayField.get(e)}updateArrayField(e,t){const n=Object.assign(Object.assign({},this.registeredArrayField.get(e)),t);this.registeredArrayField.set(e,n)}validate(e){const{validateFields:t}=this.getProps();return t&&(0,Xe.Z)(t)?this._formValidate():this._fieldsValidate(e)}_formValidate(){const{values:e}=this.data,{validateFields:t}=this.getProps();return new Promise(((n,r)=>{let i;try{i=t(e)}catch(s){i=s}if(i)Ze(i)?i.then((t=>{if(t)this.data.errors=t,this._adapter.notifyChange(this.data),this.injectErrorToField(t),this._adapter.forceUpdate(),this._autoScroll(100),r(t);else{const t=this._adapter.cloneDeep(e);n(t),this.injectErrorToField({})}}),(e=>{this._autoScroll(100),r(e)})):(this.data.errors=i,this.injectErrorToField(i),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._autoScroll(100),r(i));else{const t=this._adapter.cloneDeep(e);n(t),this.injectErrorToField({})}}))}_fieldsValidate(e){const{values:t}=this.data;return new Promise(((n,r)=>{let i=[];const s=this._getOperateFieldMap(e);s.forEach(((e,t)=>{const n=this.getValue(t),r={notNotify:!0,notUpdate:!0},s=e.fieldApi.validate(n,r);i.push(s),e.fieldApi.setTouched(!0,r)})),Promise.all(i).then((()=>{this._adapter.notifyChange(this.data),this._adapter.forceUpdate();const e=this.getError();if(this._isValid(s)){const e=this._adapter.cloneDeep(t);n(e)}else this._autoScroll(),r(e)}))}))}submit(e){const{values:t}=this.data;this.validate().then((t=>{const n=this._adapter.cloneDeep(t);this._adapter.notifySubmit(n,e)})).catch((n=>{const r=this._adapter.cloneDeep(n),i=this._adapter.cloneDeep(t);this._adapter.notifySubmitFail(r,i,e)}))}_getNestedField(e){const t=this.fields,n=[...t].map((e=>e[0]));let r=new Map;return n.forEach((n=>{let i=Zd(n),s=Zd(e);if(s.every(((e,t)=>s[t]===i[t]))){const e=t.get(n);r.set(n,e)}})),r}_getOperateFieldMap(e){let t=new Map;return q(e)?t=this.fields:e.forEach((e=>{const n=this.fields.get(e);if(q(n)){const n=this._getNestedField(e);t=new Map([...t,...n])}else t.set(e,n)})),t}reset(e){this._getOperateFieldMap(e).forEach((e=>{e.fieldApi.reset()})),this.registeredArrayField.size&&this._resetArrayField(),this._adapter.notifyChange(this.data),this._adapter.forceUpdate(),this._adapter.notifyReset()}_resetArrayField(){[...this.registeredArrayField.keys()].forEach((e=>{const t=this.registeredArrayField.get(e).initValue;this.updateStateValue(e,t,{notNotify:!0,notUpdate:!0}),this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}injectErrorToField(e){this.fields.forEach((t=>{const n=$d(e,t.field);t.fieldApi.setError(n,{notNotify:!0,notUpdate:!0})}))}getValue(e,t){const n=void 0===e,r=t&&t.needClone;let i,s;switch(!0){case!n&&!r:i=$d(this.data.values,e);break;case!n&&r:s=$d(this.data.values,e),i=this._adapter.cloneDeep(s);break;case n&&!r:i=Object.assign({},this.data.values);break;case n&&r:i=this._adapter.cloneDeep(this.data.values)}return i}setValues(e,t){let{isOverride:n=!1}=t;const r=this._adapter.cloneDeep(e);if(this.fields.forEach((e=>{const t=$d(r,e.field);e.fieldApi.setValue(t,{notNotify:!0,notUpdate:!0})})),this.registeredArrayField.size){[...this.registeredArrayField.keys()].forEach((e=>{this.updateArrayField(e,{updateKey:(new Date).valueOf()})}))}n&&(this.data.values=r),this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,Object.assign({},e)),this._adapter.forceUpdate()}updateStateValue(e,t,n,r){const i=n&&n.notNotify,s=n&&n.notUpdate,o=n&&n.fieldAllowEmpty,a=this.getProp("allowEmpty"),l=o||a;Jd(this.data.values,e,t,l),i||(this._adapter.notifyChange(this.data),this._adapter.notifyValueChange(this.data.values,{[e]:t})),s||this._adapter.forceUpdate(r)}getTouched(e){return void 0===e?this.data.touched:$d(this.data.touched,e)}updateStateTouched(e,t,n,r){const i=n&&n.notNotify,s=n&&n.notUpdate;Jd(this.data.touched,e,t),i||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(r)}getError(e){return void 0===e?this.data.errors:$d(this.data.errors,e)}updateStateError(e,t,n,r){const i=n&&n.notNotify,s=n&&n.notUpdate;Jd(this.data.errors,e,t),i||this._adapter.notifyChange(this.data),s||this._adapter.forceUpdate(r)}getFieldSetterApi(){return{setValue:(e,t,n)=>{const r=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,i=this._adapter.cloneDeep(t);r?r.setValue(i,n):(this.updateStateValue(e,i,n,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,n=$d(this.data.values,t);e.fieldApi.setValue(n,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setError:(e,t,n)=>{const r=this.fields.get(e)?this.fields.get(e).fieldApi:void 0,i=this._adapter.cloneDeep(t);r?r.setError(i,n):(this.updateStateError(e,i,n,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,n=$d(this.data.errors,t);e.fieldApi.setError(n,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))},setTouched:(e,t,n)=>{const r=this.fields.get(e)?this.fields.get(e).fieldApi:void 0;r?r.setTouched(t,n):(this.updateStateTouched(e,t,n,(()=>{let t=this._getNestedField(e);t.size&&t.forEach((e=>{let t=e.field,n=$d(this.data.touched,t);e.fieldApi.setTouched(n,{notNotify:!0,notUpdate:!0})}))})),this.getArrayField(e)&&this.updateArrayField(e,{updateKey:(new Date).valueOf()}))}}}getModifyFormStateApi(){return{register:this.register,unRegister:this.unRegister,updateStateValue:this.updateStateValue,updateStateError:this.updateStateError,updateStateTouched:this.updateStateTouched,getValue:this.getValue,getError:this.getError,getTouched:this.getTouched,getInitValues:this.getInitValues,getInitValue:this.getInitValue,getFormProps:this.getFormProps,getField:this.getField,registerArrayField:this.registerArrayField,unRegisterArrayField:this.unRegisterArrayField,getArrayField:this.getArrayField,updateArrayField:this.updateArrayField}}getFormApi(){const e=this.getFieldSetterApi();return Object.assign(Object.assign({},e),{reset:e=>this.reset(e),validate:e=>this.validate(e),getValue:e=>this.getValue(e,{needClone:!0}),getValues:()=>this.getValue(void 0,{needClone:!0}),getFormState:()=>this.getFormState(!0),getInitValue:e=>this.getInitValue(e),getInitValues:()=>this.getInitValues(),getTouched:e=>this.getTouched(e),getError:e=>this.getError(e),setValues:(e,t)=>this.setValues(e,t||{isOverride:!1}),submitForm:()=>this.submit(),getFieldExist:e=>this.getFieldExist(e),scrollToField:(e,t)=>this.scrollToField(e,t)})}getFormState(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._adapter.cloneDeep(this.data):Object.assign({},this.data)}_isValid(e){let t=!0;if(e){[...e.keys()].forEach((e=>{zh($d(this.data.errors,e))||(t=!1)}))}else t=Boolean(function(e){return 0===Xd(e).length}(this.data.errors));return t}getInitValues(){return this._adapter.getInitValues()}getInitValue(e){return void 0===e?this._adapter.getInitValues():$d(this._adapter.getInitValues(),e)}getFormProps(e){return this._adapter.getFormProps(e)}getFieldExist(e){return Boolean(this.fields.has(e))}_autoScroll(e){const{autoScrollToError:t}=this.getFormProps();if(!t)return;let n={behavior:"smooth",block:"start"};"object"==typeof t&&(n=t),e?setTimeout((()=>this._getErrorFieldAndScroll(n)),100):this._getErrorFieldAndScroll(n)}_getErrorFieldAndScroll(e){const t=this._adapter.getAllErrorDOM();if(t&&t.length)try{const n=t[0].parentNode.parentNode;Lh(n,e)}catch(n){}}scrollToField(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth",block:"start"};if(this.getFieldExist(e)){const n=this._adapter.getFieldDOM(e);Lh(n,t)}}}const Uh=r.createContext({});Uh.displayName="FormState";const Gh=r.createContext({});Gh.displayName="FormApi";const Bh=r.createContext({});Bh.displayName="FormUpdater";const Zh=r.createContext({shouldUseInitValue:!0});function Kh(e){return r.isValidElement(e)}function Xh(e){return 0===r.Children.count(e)}const Vh={PREFIX:`${D}`};var Wh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Hh=["xxl","xl","lg","md","sm","xs"],$h=r.createContext(null),Yh={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class Jh extends r.Component{constructor(){super(...arguments),this.state={screens:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}},this.unRegisters=[]}componentDidMount(){this.unRegisters=Object.keys(Yh).map((e=>((e,t)=>{let{match:n,unmatch:r,callInInit:i=!0}=t;if("undefined"!=typeof window){const s=window.matchMedia(e);function o(e){e.matches?n&&n(e):r&&r(e)}return i&&o(s),Object.prototype.hasOwnProperty.call(s,"addEventListener")?(s.addEventListener("change",o),()=>s.removeEventListener("change",o)):(s.addListener(o),()=>s.removeListener(o))}return()=>{}})(Yh[e],{match:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!0})})))},unmatch:()=>{"object"==typeof this.props.gutter&&this.setState((t=>({screens:Object.assign(Object.assign({},t.screens),{[e]:!1})})))}})))}componentWillUnmount(){this.unRegisters.forEach((e=>e()))}getGutter(){const{gutter:e=0}=this.props,t=[0,0];return(Array.isArray(e)?e.slice(0,2):[e,0]).forEach(((e,n)=>{if("object"==typeof e)for(let r=0;r<Hh.length;r++){const i=Hh[r];if(this.state.screens[i]&&void 0!==e[i]){t[n]=e[i];break}}else t[n]=e||0})),t}render(){const e=this.props,{prefixCls:t,type:n,justify:i,align:s,className:o,style:a,children:l}=e,c=Wh(e,["prefixCls","type","justify","align","className","style","children"]),u=this.getGutter(),d=`${t}-row`,h=I()({[d]:"flex"!==n,[`${d}-${n}`]:n,[`${d}-${n}-${i}`]:n&&i,[`${d}-${n}-${s}`]:n&&s},o),p=Object.assign(Object.assign(Object.assign({},u[0]>0?{marginLeft:u[0]/-2,marginRight:u[0]/-2}:{}),u[1]>0?{marginTop:u[1]/-2,marginBottom:u[1]/-2}:{}),a),f=Object.assign({},c);return delete f.gutter,r.createElement($h.Provider,{value:{gutters:u}},r.createElement("div",Object.assign({},f,{className:h,style:p,"x-semi-prop":"children"}),l))}}Jh.propTypes={type:R().oneOf(["flex"]),align:R().oneOf(["top","middle","bottom"]),justify:R().oneOf(["start","end","center","space-around","space-between"]),className:R().string,style:R().object,children:R().node,gutter:R().oneOfType([R().object,R().number,R().array]),prefixCls:R().string},Jh.defaultProps={prefixCls:Vh.PREFIX},Jh.RowContext={gutters:R().any};const Qh=Jh,qh=xh.PREFIX;class ep extends r.PureComponent{render(){const{children:e,required:t,text:n,disabled:i,name:s,width:o,align:a,style:l,className:c,extra:u,id:d,optional:h}=this.props,p=I()(c,{[`${qh}-field-label`]:!0,[`${qh}-field-label-left`]:"left"===a,[`${qh}-field-label-right`]:"right"===a,[`${qh}-field-label-required`]:t,[`${qh}-field-label-disabled`]:i,[`${qh}-field-label-with-extra`]:u}),f=l||{};o&&(f.width=o);const g=r.createElement($n,{componentName:"Form"},(e=>r.createElement("span",{className:`${qh}-field-label-optional-text`},e.optional))),m=r.createElement("div",{className:`${qh}-field-label-text`,"x-semi-prop":"label"},void 0!==n?n:e,h?g:null),y=r.createElement(r.Fragment,null,m,r.createElement("div",{className:`${qh}-field-label-extra`},u));return r.createElement("label",{className:p,htmlFor:s,style:f,id:d},u?y:m)}}ep.defaultProps={required:!1,name:"",align:"left",className:"",optional:!1},ep.propTypes={id:R().string,children:R().node,required:R().bool,text:R().node,disabled:R().bool,name:R().string,align:R().string,width:R().oneOfType([R().number,R().string]),style:R().object,className:R().string,extra:R().node,optional:R().bool};var tp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const np=R().oneOfType([R().object,R().number]);class rp extends r.Component{render(){const{props:e}=this,{prefixCls:t,span:n,order:i,offset:s,push:o,pull:a,className:l,children:c}=e,u=tp(e,["prefixCls","span","order","offset","push","pull","className","children"]);let d={};const h=`${t}-col`;["xs","sm","md","lg","xl","xxl"].forEach((t=>{let n={};"number"==typeof e[t]?n.span=e[t]:"object"==typeof e[t]&&(n=e[t]||{}),delete u[t],d=Object.assign(Object.assign({},d),{[`${h}-${t}-${n.span}`]:void 0!==n.span,[`${h}-${t}-order-${n.order}`]:n.order||0===n.order,[`${h}-${t}-offset-${n.offset}`]:n.offset||0===n.offset,[`${h}-${t}-push-${n.push}`]:n.push||0===n.push,[`${h}-${t}-pull-${n.pull}`]:n.pull||0===n.pull})}));const p=I()(h,{[`${h}-${n}`]:void 0!==n,[`${h}-order-${i}`]:i,[`${h}-offset-${s}`]:s,[`${h}-push-${o}`]:o,[`${h}-pull-${a}`]:a},l,d);let f,{style:g}=u;try{f=this.context.gutters}catch(m){throw new Error("please make sure <Col> inside <Row>")}return g=Object.assign(Object.assign(Object.assign({},f[0]>0?{paddingLeft:f[0]/2,paddingRight:f[0]/2}:{}),f[1]>0?{paddingTop:f[1]/2,paddingBottom:f[1]/2}:{}),g),r.createElement("div",Object.assign({},u,{style:g,className:p,"x-semi-prop":"children"}),c)}}rp.contextType=$h,rp.propTypes={span:R().number,order:R().number,offset:R().number,push:R().number,pull:R().number,className:R().string,children:R().node,xs:np,sm:np,md:np,lg:np,xl:np,xxl:np,prefixCls:R().string},rp.defaultProps={prefixCls:Vh.PREFIX};const ip=rp,sp=xh.PREFIX;class op extends r.PureComponent{generatorText(e){const{helpTextId:t,errorMessageId:n}=this.props;let i=n;if(this.props.error||(i=t),"string"==typeof e)return r.createElement("span",{id:i},e);if(Array.isArray(e)){const t=e.filter((e=>e));return t.length?r.createElement("span",{id:i},t.join(", ")):null}return r.isValidElement(e)?e:null}render(){const{error:e,className:t,style:n,validateStatus:i,helpText:s,showValidateIcon:o,isInInputGroup:a}=this.props,l=I()({[sp+"-field-error-message"]:Boolean(e),[sp+"-field-help-text"]:Boolean(s)},t);if(!e&&!s)return null;const c={warning:r.createElement(ni,null),error:r.createElement(ri,null)},u=e?this.generatorText(e):this.generatorText(s),d=`${sp}-field-validate-status-icon`;let h=null;return a?h=r.createElement(ri,{className:d}):c[i]&&(h=r.cloneElement(c[i],{className:d})),r.createElement("div",{className:l,style:n},o&&u?h:null,u)}}op.propTypes={error:R().oneOfType([R().bool,R().string,R().array,R().node]),className:R().string,style:R().object,validateStatus:R().string,showValidateIcon:R().bool,helpText:R().node,isInInputGroup:R().bool,errorMessageId:R().string,helpTextId:R().string};var ap=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const lp=xh.PREFIX,cp=e=>{let t,n,i,s,o,a="top";try{const e=(0,r.useContext)(Bh).getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol"]);t=e.labelCol,n=e.wrapperCol,i=e.labelWidth,s=e.labelAlign,a=e.labelPosition?e.labelPosition:a}catch(h){}e.labelPosition&&(a=e.labelPosition);let{children:l,label:c,className:u,style:d,error:h,noLabel:p}=e;ap(e,["children","label","className","style","error","noLabel"]);const f=t&&n,g=I()({[`${lp}-field`]:!0,[`${lp}-slot`]:!0},u),m=I()({[`${lp}-col-${s}`]:!0});switch(!0){case(0,mt.Z)(c)&&!r.isValidElement(c):break;case tt(c)||Xi(c):case r.isValidElement(c):c={text:c}}let y=null;if(void 0!==typeof h){let e={};switch(!0){case(0,mt.Z)(h)&&!r.isValidElement(h):e=h;break;case tt(h)||Xi(h):case r.isValidElement(h):e={error:h}}y=r.createElement(op,Object.assign({},e))}let b=Object.assign({align:s,width:i},c),v=I()({[`${lp}-field-main`]:!0,[`${lp}-slot-main`]:!0});switch(!0){case!f&&!p:o=r.createElement(r.Fragment,null,r.createElement(ep,Object.assign({},b)),r.createElement("div",{className:v},l,y));break;case!f&&p:o=r.createElement(r.Fragment,null,r.createElement("div",{className:v},l,y));break;case f&&"top"===a:o=r.createElement(r.Fragment,null,r.createElement("div",{style:{overflow:"hidden"}},r.createElement(ip,Object.assign({},t,{className:m}),r.createElement(ep,Object.assign({},b)))),r.createElement(ip,null,l,y));break;case f&&"top"!==a:o=r.createElement(r.Fragment,null,r.createElement(ip,Object.assign({},t,{className:m}),r.createElement(ep,Object.assign({},b))),r.createElement(ip,null,l,y))}return r.createElement("div",{className:g,"x-label-pos":a,style:d},o)},up=xh.PREFIX;class dp extends r.PureComponent{render(){const{text:e,className:t,style:n,children:i}=this.props,s=I()({[up+"-section"]:!0},t),o=up+"-section-text";return r.createElement("section",{className:s,style:n},r.createElement("h5",{className:o},e),i)}}dp.propTypes={text:R().node,className:R().string,style:R().object,children:R().node};const hp=function(){return(0,r.useContext)(Uh)};var pp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const fp=es.PREFIX,gp=ts;class mp extends Oe{renderGroupWithLabel(e){const t=this.props,{size:n,className:i,label:s,labelPosition:o}=t,a=(pp(t,["size","className","label","labelPosition"]),I()({[`${fp}-group-wrapper`]:!0,[`${fp}-group-wrapper-with-top-label`]:"top"===o,[`${fp}-group-wrapper-with-left-label`]:"left"===o})),l=I()(`${fp}-group`,i,{[`${fp}-${n}`]:"default"!==n}),c="input-group";return r.createElement("div",{className:a},s&&s.text?r.createElement(ep,Object.assign({name:c},s)):null,r.createElement("span",{role:"group","aria-disabled":this.props.disabled,id:s&&s.name||c,className:l,style:this.props.style,onFocus:this.props.onFocus,onBlur:this.props.onBlur},e))}render(){const e=this.props,{size:t,style:n,className:i,children:s,label:o,onBlur:a,onFocus:l,disabled:c}=e,u=pp(e,["size","style","className","children","label","onBlur","onFocus","disabled"]),d=I()(`${fp}-group`,{[`${fp}-${t}`]:"default"!==t},i);let h;return s&&(h=(Array.isArray(s)?s:[s]).map(((e,n)=>{if(e){const{onBlur:i,onFocus:s,disabled:o}=e.props,d=(0,Xe.Z)(i)&&"noop"!==ae(i,"name")?i:a,h=(0,Xe.Z)(s)&&"noop"!==ae(s,"name")?s:l,p="boolean"==typeof o?o:c;return r.cloneElement(e,Object.assign(Object.assign({key:n},u),{size:t,onBlur:d,onFocus:h,disabled:p}))}return null}))),o&&o.text?this.renderGroupWithLabel(h):r.createElement("span",{role:"group","aria-label":"Input group","aria-disabled":this.props.disabled,className:d,style:n,onFocus:this.props.onFocus,onBlur:this.props.onBlur},h)}}mp.propTypes={className:R().string,children:R().node,size:R().oneOf(gp),style:R().object,onBlur:R().func,onFocus:R().func,label:R().object,labelPosition:R().string},mp.defaultProps={size:"default",className:"",onBlur:j,onFocus:j};var yp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const bp=xh.PREFIX,vp=e=>{const{fieldSet:t}=e,n=hp(),i=t.map((e=>$d(n.errors,e)));return zh(i)?null:r.createElement(op,{error:i,showValidateIcon:e.showValidateIcon,isInInputGroup:e.isInInputGroup})};class _p extends r.Component{renderLabel(e,t){return e?tt(e)?r.createElement(ep,{width:t.labelWidth,text:e}):r.createElement(ep,Object.assign({width:t.labelWidth},e)):null}render(){const e=this.props,{children:t,label:n,extraText:i,extraTextPosition:s}=e,o=yp(e,["children","label","extraText","extraTextPosition"]),a=this.context.getFormProps(["labelPosition","labelWidth","labelAlign","showValidateIcon","wrapperCol","labelCol","disabled"]),l=this.props.labelPosition||a.labelPosition,c=[],u=r.Children.map(t,(e=>e&&e.props&&e.props.field?(c.push(e.props.field),r.cloneElement(e,{isInInputGroup:!0})):null)),d=I()({[`${bp}-field-group`]:!0}),h=a.labelCol,p=a.wrapperCol,f=a.labelAlign,g=h&&p,m=h?`${bp}-col-${f}`:"",y=this.renderLabel(n,a),b=r.createElement(mp,Object.assign({disabled:a.disabled},o),u),v=r.createElement(vp,{fieldSet:c,showValidateIcon:a.showValidateIcon,isInInputGroup:!0}),_=I()(`${bp}-field-extra`,{[`${bp}-field-extra-string`]:"string"==typeof i,[`${bp}-field-extra-middle`]:"middle"===s,[`${bp}-field-extra-bottom`]:"bottom"===s}),w=i?r.createElement("div",{className:_,"x-semi-prop":"extraText"},i):null;let S;switch(!0){case!g:S=r.createElement(r.Fragment,null,y,r.createElement("div",null,"middle"===s?w:null,b,"bottom"===s?w:null,v));break;case g&&"top"===l:S=r.createElement(r.Fragment,null,r.createElement("div",{style:{overflow:"hidden"}},r.createElement(ip,Object.assign({},h,{className:m}),y)),r.createElement(ip,Object.assign({},p),"middle"===s?w:null,b,"bottom"===s?w:null,v));break;case g&&"top"!==l:S=r.createElement(r.Fragment,null,r.createElement(ip,Object.assign({},h,{className:m}),y),r.createElement(ip,Object.assign({},p),"middle"===s?w:null,b,"bottom"===s?w:null,v))}return r.createElement("div",{"x-label-pos":l,className:d},S)}}_p.contextType=Bh;const wp=_p;var Sp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const xp=xh.PREFIX;class Ep extends Oe{constructor(e){super(e),this.state={formId:""},fe(Boolean(e.component&&e.render),"[Semi Form] You should not use <Form component> and <Form render> in ths same time; <Form render> will be ignored"),fe(e.component&&e.children&&!Xh(e.children),"[Semi Form] You should not use <Form component> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),fe(e.render&&e.children&&!Xh(e.children),"[Semi Form] You should not use <Form render> and <Form>{children}</Form> in ths same time; <Form>{children}</Form> will be ignored"),this.submit=this.submit.bind(this),this.reset=this.reset.bind(this),this.foundation=new Fh(this.adapter),this.formApi=this.foundation.getFormApi(),this.props.getFormApi&&this.props.getFormApi(this.formApi)}componentDidMount(){this.foundation.init()}componentWillUnmount(){this.foundation.destroy()}get adapter(){return Object.assign(Object.assign({},super.adapter),{cloneDeep:on,notifySubmit:(e,t)=>{this.props.onSubmit(e,t)},notifySubmitFail:(e,t,n)=>{this.props.onSubmitFail(e,t,n)},forceUpdate:e=>{this.forceUpdate(e)},notifyChange:e=>{this.props.onChange(e)},notifyValueChange:(e,t)=>{this.props.onValueChange(e,t)},notifyReset:()=>{this.props.onReset()},initFormId:()=>{this.setState({formId:Ie()})},getInitValues:()=>this.props.initValues,getFormProps:e=>{if(void 0===e)return this.props;if("string"==typeof e)return this.props[e];{const t={};return e.forEach((e=>{t[e]=this.props[e]})),t}},getAllErrorDOM:()=>{const{formId:e}=this.state,{id:t}=this.props,n=t||e;return document.querySelectorAll(`form[x-form-id="${n}"] .${xh.PREFIX}-field-error-message`)},getFieldDOM:e=>document.querySelector(`.${xh.PREFIX}-field[x-field-id="${e}"]`)})}get content(){const{children:e,component:t,render:n}=this.props,i=this.foundation.getFormState(),s={formState:i,formApi:this.foundation.getFormApi(),values:i.values};return t?r.createElement(t,s):n?n(s):"function"==typeof e?e(s):e}submit(e){e.preventDefault(),this.foundation.submit(e)}reset(e){e.preventDefault(),this.foundation.reset()}render(){const e=this.foundation.getFormState(!1),t=this.foundation.getModifyFormStateApi(),{formId:n}=this.state,i=this.props,{children:s,getFormApi:o,onChange:a,onSubmit:l,onSubmitFail:c,onValueChange:u,component:d,render:h,validateFields:p,initValues:f,layout:g,style:m,className:y,labelPosition:b,labelWidth:v,labelAlign:_,labelCol:w,wrapperCol:S,allowEmpty:x,autoScrollToError:E,showValidateIcon:C,stopValidateWithError:k,extraTextPosition:O,id:T,trigger:z}=i,R=Sp(i,["children","getFormApi","onChange","onSubmit","onSubmitFail","onValueChange","component","render","validateFields","initValues","layout","style","className","labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","allowEmpty","autoScrollToError","showValidateIcon","stopValidateWithError","extraTextPosition","id","trigger"]),D=I()(xp,y,{[xp+"-vertical"]:"vertical"===g,[xp+"-horizontal"]:"horizontal"===g}),M=S&&w,N=r.createElement("form",Object.assign({style:m},R,{onReset:this.reset,onSubmit:this.submit,className:D,"x-form-id":T||n}),this.content),j=r.createElement(Qh,null,N);return r.createElement(Bh.Provider,{value:t},r.createElement(Gh.Provider,{value:this.formApi},r.createElement(Uh.Provider,{value:e},M?j:N)))}}Ep.propTypes={"aria-label":R().string,onSubmit:R().func,onSubmitFail:R().func,onChange:R().func,onReset:R().func,onValueChange:R().func,autoScrollToError:R().oneOfType([R().bool,R().object]),allowEmpty:R().bool,className:R().string,component:R().oneOfType([R().node,R().func]),disabled:R().bool,extraTextPosition:R().oneOf(Oh),getFormApi:R().func,initValues:R().object,validateFields:R().func,layout:R().oneOf(Eh),labelPosition:R().oneOf(Ch),labelWidth:R().oneOfType([R().number,R().string]),labelAlign:R().oneOf(kh),labelCol:R().object,render:R().func,style:R().object,showValidateIcon:R().bool,stopValidateWithError:R().bool,id:R().string,wrapperCol:R().object,trigger:R().oneOfType([R().oneOf(["blur","change","custom","mount"]),R().arrayOf(R().oneOf(["blur","change","custom","mount"]))])},Ep.defaultProps={onChange:G,onSubmitFail:G,onSubmit:G,onReset:G,onValueChange:G,layout:"vertical",labelPosition:"top",allowEmpty:!1,autoScrollToError:!1,showValidateIcon:!0},Ep.Slot=cp,Ep.ErrorMessage=op,Ep.InputGroup=wp,Ep.Label=ep,Ep.Section=dp;const Cp=Ep;const kp=function(){return(0,r.useContext)(Zh)};function Op(e){const t=(0,r.useRef)(),[n,i]=(0,r.useState)(e);t.current=n;return[n,e=>{t.current=e,i(e)},()=>t.current]}const Tp=xh.PREFIX,Ip="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;const zp=function(e,t){let n=(n,i)=>{let{field:s,label:o,labelPosition:a,labelWidth:l,labelAlign:c,labelCol:u,wrapperCol:d,noLabel:h,noErrorMessage:p,isInInputGroup:f,initValue:g,validate:m,validateStatus:y,trigger:b,allowEmptyString:v,allowEmpty:_,emptyValue:w,rules:S,required:x,keepState:E,transform:C,name:k,fieldClassName:O,fieldStyle:T,convert:z,stopValidateWithError:R,helpText:D,extraText:M,extraTextPosition:N,pure:j,id:P,rest:A}=Rh(n),{options:L,shouldInject:F}=function(e,t){const n=Object.assign(Object.assign({},{valueKey:"value",onKeyChangeFnName:"onChange",valuePath:"",maintainCursor:!1,shouldInject:!0,shouldMemo:!0}),e);return{options:n,shouldInject:"field"in t||n.shouldInject}}(t,n);if(fe(void 0===s&&L.shouldInject,"[Semi Form]: 'field' is required, please check your props of Field Component"),!F)return r.createElement(e,Object.assign({},A,{ref:i}));hp();const U=(0,r.useContext)(Bh);if(!U.getFormProps)return fe(!0,"[Semi Form]: Field Component must be use inside the Form, please check your dom declaration"),null;let G,B=U.getFormProps(["labelPosition","labelWidth","labelAlign","labelCol","wrapperCol","disabled","showValidateIcon","extraTextPosition","stopValidateWithError","trigger"]),Z=a||B.labelPosition,K=l||B.labelWidth,X=c||B.labelAlign,V=u||B.labelCol,W=d||B.wrapperCol,H=N||B.extraTextPosition||"bottom",$=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return q(e)?q(t)?n:t:e}(R,B.stopValidateWithError,!1),Y=function(e,t){let n=[],r=[];return n=q(e)?q(t)?Th:t:e,Array.isArray(n)&&(r=n),"string"==typeof n&&(r[0]=n),r}(b,B.trigger),J=void 0!==s?U.getValue(s):void 0,Q=void 0!==g?g:J;try{G=kp(),G&&(Q=G.shouldUseInitValue&&void 0!==g?g:J)}catch(Ne){}const[ee,te,ne]=Op(void 0!==typeof Q?Q:null),re=Y.includes("mount");_=_||U.getFormProps().allowEmpty;const[ie,se,oe]=Op(),[ae,le]=(0,r.useState)(),[ce,ue,de]=Op(0),[he,pe]=(0,r.useState)(y),ge=(0,r.useRef)(S),me=(0,r.useRef)(m),ye=(0,r.useRef)(null),be=(e,t)=>{le(e),U.updateStateTouched(s,e,t)},ve=(e,t)=>{e!==oe()&&(se(e),U.updateStateError(s,e,t),zh(e)?pe("success"):pe("error"))},_e=(e,t)=>{te(e);let n=Object.assign(Object.assign({},t),{allowEmpty:_});U.updateStateValue(s,e,n)},we=(e,t)=>{let n=ge.current||[];const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n={};return n[e]=t,new Sh(n)}(s,n),i={[s]:e},o=new Promise(((e,n)=>{r.validate(i,{first:$},((e,t)=>{})).then((n=>{ye.current===o&&(pe("success"),ve(void 0,t),e({}))})).catch((n=>{if(ye.current!==o)return;let{errors:r,fields:i}=n;if(!r||!i)throw pe("error"),ve(n.message,t),e(n.message),n;{let n=r.map((e=>e.message));1===n.length&&(n=n[0]),ve(n,t),zh(n)||(pe("error"),e(r))}}))}));return ye.current=o,o},Se=(e,t)=>{let n=e,r=ge.current;return C&&(n=C(e)),me.current?((e,t,n)=>{const r=new Promise((i=>{let s;try{s=me.current(e,t)}catch(Ne){s=Ne}void 0===s?(i({}),ve(void 0,n)):Ze(s)?s.then((e=>{ye.current===r&&(zh(e)?(ve(void 0,n),i(null)):(ve(e,n),i(e)))})):zh(s)?(ve(void 0,n),i(null)):(ve(s,n),i(s))}));return ye.current=r,r})(n,U.getValue(),t):r?we(n,t):null},xe=function(e,t){let r;if(L.onKeyChangeFnName in n&&"function"==typeof n[L.onKeyChangeFnName]){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];n[L.onKeyChangeFnName](e,t,...s)}r=L.valuePath?$d(e,L.valuePath):e,"function"==typeof z&&(r=z(r)),v||_||r===w&&(r=void 0);try{t&&t.target&&t.target.selectionStart&&ue(t.target.selectionStart)}catch(Ne){}be(!0,{notNotify:!0,notUpdate:!0}),_e(r),Y.includes("change")&&Se(r)},Ee=function(){if(n.onBlur&&n.onBlur(...arguments),ae||be(!0),Y.includes("blur")){let e=ne();Se(e)}},Ce={setValue:_e,setTouched:be,setError:ve,reset:()=>{let e={notNotify:!0,notUpdate:!0};_e(null!==Q?Q:void 0,e),ve(void 0,e),be(void 0,e),pe("default")},validate:Se},ke={value:ee,error:ie,touched:ae,status:he};Ip((()=>{ge.current=S,me.current=m}),[S,m]),Ip((()=>{re&&Se(ee)}),[]),Ip((()=>{if(void 0===s)return()=>{};const e=ne();return U.register(s,{value:e,error:ie,touched:ae,status:he},{field:s,fieldApi:Ce,keepState:E,allowEmpty:_||v}),()=>{U.unRegister(s)}}),[s]);const Oe=P||s,Te=`${Oe}-label`,Ie=`${Oe}-helpText`,ze=`${Oe}-extraText`,Re=`${Oe}-errormessage`,De=()=>{let t=y||he;const n=I()(`${Tp}-field-extra`,{[`${Tp}-field-extra-string`]:"string"==typeof M,[`${Tp}-field-extra-middle`]:"middle"===H,[`${Tp}-field-extra-bottom`]:"bottom"===H}),a=M?r.createElement("div",{className:n,id:ze,"x-semi-prop":"extraText"},M):null;let l=Object.assign(Object.assign({id:Oe,disabled:B.disabled},A),{ref:i,onBlur:Ee,[L.onKeyChangeFnName]:xe,[L.valueKey]:ee,validateStatus:t,"aria-required":x,"aria-labelledby":Te});k&&(l.name=k),D&&(l["aria-describedby"]=M?`${Ie} ${ze}`:Ie),M&&(l["aria-describedby"]=D?`${Ie} ${ze}`:ze),"error"===he&&(l["aria-errormessage"]=Re,l["aria-invalid"]=!0);const c=I()({[`${Tp}-field`]:!0,[`${Tp}-field-${k}`]:Boolean(k),[O]:Boolean(O)}),u=I()({[`${Tp}-field-main`]:!0});"inset"!==Z||h||(l.insetLabel=o||s,l.insetLabelId=Te,"object"!=typeof o||Kh(o)||(l.insetLabel=o.text,l.insetLabelId=Te));const d=r.createElement(e,Object.assign({},l));if(f)return d;if(j){let t=I()(A.className,{[`${Tp}-field-pure`]:!0,[`${Tp}-field-${k}`]:Boolean(k),[O]:Boolean(O)});return l.className=t,r.createElement(e,Object.assign({},l))}let g=V&&W;const m=X?`${Tp}-col-${X}`:"";let b=null;if(!h&&"inset"!==Z){let e="object"!=typeof o||Kh(o)?{}:o;b=r.createElement(ep,Object.assign({text:o||s,id:Te,required:x,name:Oe||k||s,width:K,align:X},e))}const v=r.createElement("div",{className:u},"middle"===H?a:null,d,p?null:r.createElement(op,{error:ie,validateStatus:t,helpText:D,helpTextId:Ie,errorMessageId:Re,showValidateIcon:B.showValidateIcon}),"bottom"===H?a:null),_=r.createElement(r.Fragment,null,"top"===Z?r.createElement("div",{style:{overflow:"hidden"}},r.createElement(ip,Object.assign({},V,{className:m}),b)):r.createElement(ip,Object.assign({},V,{className:m}),b),r.createElement(ip,Object.assign({},W),v));return r.createElement("div",{className:c,style:T,"x-label-pos":Z,"x-field-id":s,"x-extra-pos":H},g?_:r.createElement(r.Fragment,null,b,v))},Me=[...Object.values(ke),...Object.values(n),s,Z,X,B.disabled];return L.shouldMemo?(0,r.useMemo)(De,[...Me]):De()};return n=(0,r.forwardRef)(n),n.displayName=function(e){const t=e.displayName||e.name;return t?`SemiField${t}`:"SemiField"}(e),n},Rp=zp(De,{valueKey:"checked",valuePath:"target.checked",shouldInject:!1})},53697:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(95962),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};const h={version:void 0};var p=(e,t={})=>{return r.Z.call("getTextTemplateSingleInitialData",e,(n=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(n,o(i))));var n,i}},67856:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(95962),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};const h={version:void 0};var p=(e,t={})=>{return r.Z.call("openUrl",e,(n=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(n,o(i))));var n,i}},17473:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(95962),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};const h={version:void 0};var p=(e,t={})=>{return r.Z.call("reportAppLog",e,(n=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(n,o(i))));var n,i}},16652:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>p});var r=n(95962),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};const h={version:void 0};var p=(e,t={})=>{return r.Z.call("showDialog",e,(n=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(n,o(i))));var n,i}},23875:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(95962),i=Object.defineProperty,s=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&u(e,n,t[n]);return e};const h={version:void 0};var p=(e,t={})=>{return r.Z.call("syncTemplateResourceId",e,(n=d({},t),i={customOptions:d({jsb_rules:h},t.customOptions)},s(n,o(i))));var n,i}},45806:e=>{var t=.1,n="function"==typeof Float32Array;function r(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function o(e,t,n){return((r(t,n)*e+i(t,n))*e+s(t))*e}function a(e,t,n){return 3*r(t,n)*e*e+2*i(t,n)*e+s(t)}function l(e){return e}e.exports=function(e,r,i,s){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===s)return l;for(var c=n?new Float32Array(11):new Array(11),u=0;u<11;++u)c[u]=o(u*t,e,i);function d(n){for(var r=0,s=1;10!==s&&c[s]<=n;++s)r+=t;--s;var l=r+(n-c[s])/(c[s+1]-c[s])*t,u=a(l,e,i);return u>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var s=a(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(n,l,e,i):0===u?l:function(e,t,n,r,i){var s,a,l=0;do{(s=o(a=t+(n-t)/2,r,i)-e)>0?n=a:t=a}while(Math.abs(s)>1e-7&&++l<10);return a}(n,r,r+t,e,i)}return function(e){return 0===e?0:1===e?1:o(d(e),r,s)}}},12437:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},42454:e=>{"use strict";const t=(e,{target:t=document.body}={})=>{const n=document.createElement("textarea"),r=document.activeElement;n.value=e,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const i=document.getSelection();let s=!1;i.rangeCount>0&&(s=i.getRangeAt(0)),t.append(n),n.select(),n.selectionStart=0,n.selectionEnd=e.length;let o=!1;try{o=document.execCommand("copy")}catch(a){}return n.remove(),s&&(i.removeAllRanges(),i.addRange(s)),r&&r.focus(),o};e.exports=t,e.exports.default=t},45340:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],s=0;s<4;s++)8*r+6*s<=8*e.length?n.push(t.charAt(i>>>6*(3-s)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},77517:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,s,o,c;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=l(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},66980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deinterlace=void 0;t.deinterlace=function(e,t){for(var n=new Array(e.length),r=e.length/t,i=function(r,i){var s=e.slice(i*t,(i+1)*t);n.splice.apply(n,[r*t,t].concat(s))},s=[0,4,2,1],o=[8,8,4,2],a=0,l=0;l<4;l++)for(var c=s[l];c<r;c+=o[l])i(c,a),a++;return n}},91449:(e,t,n)=>{"use strict";t.zw=t.vq=void 0;var r,i=(r=n(79546))&&r.__esModule?r:{default:r},s=n(13110),o=n(74071),a=n(66980),l=n(85813);t.vq=function(e){var t=new Uint8Array(e);return(0,s.parse)((0,o.buildStream)(t),i.default)};var c=function(e,t,n){if(e.image){var r=e.image,i=r.descriptor.width*r.descriptor.height,s=(0,l.lzw)(r.data.minCodeSize,r.data.blocks,i);r.descriptor.lct.interlaced&&(s=(0,a.deinterlace)(s,r.descriptor.width));var o={pixels:s,dims:{top:e.image.descriptor.top,left:e.image.descriptor.left,width:e.image.descriptor.width,height:e.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?o.colorTable=r.lct:o.colorTable=t,e.gce&&(o.delay=10*(e.gce.delay||10),o.disposalType=e.gce.extras.disposal,e.gce.extras.transparentColorGiven&&(o.transparentIndex=e.gce.transparentColorIndex)),n&&(o.patch=function(e){for(var t=e.pixels.length,n=new Uint8ClampedArray(4*t),r=0;r<t;r++){var i=4*r,s=e.pixels[r],o=e.colorTable[s]||[0,0,0];n[i]=o[0],n[i+1]=o[1],n[i+2]=o[2],n[i+3]=s!==e.transparentIndex?255:0}return n}(o)),o}console.warn("gif frame does not have associated image.")};t.zw=function(e,t){return e.frames.filter((function(e){return e.image})).map((function(n){return c(n,e.gct,t)}))}},85813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lzw=void 0;t.lzw=function(e,t,n){var r,i,s,o,a,l,c,u,d,h,p,f,g,m,y,b,v=4096,_=n,w=new Array(n),S=new Array(v),x=new Array(v),E=new Array(4097);for(a=(i=1<<(h=e))+1,r=i+2,c=-1,s=(1<<(o=h+1))-1,u=0;u<i;u++)S[u]=0,x[u]=u;for(p=f=g=m=y=b=0,d=0;d<_;){if(0===m){if(f<o){p+=t[b]<<f,f+=8,b++;continue}if(u=p&s,p>>=o,f-=o,u>r||u==a)break;if(u==i){s=(1<<(o=h+1))-1,r=i+2,c=-1;continue}if(-1==c){E[m++]=x[u],c=u,g=u;continue}for(l=u,u==r&&(E[m++]=g,u=c);u>i;)E[m++]=x[u],u=S[u];g=255&x[u],E[m++]=g,r<v&&(S[r]=c,x[r]=g,!(++r&s)&&r<v&&(o++,s+=r)),c=l}m--,w[y++]=E[m],d++}for(d=y;d<_;d++)w[d]=0;return w}},86238:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},13110:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loop=t.conditional=t.parse=void 0;t.parse=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;if(Array.isArray(n))n.forEach((function(n){return e(t,n,r,i)}));else if("function"==typeof n)n(t,r,i,e);else{var s=Object.keys(n)[0];Array.isArray(n[s])?(i[s]={},e(t,n[s],r,i[s])):i[s]=n[s](t,r,i,e)}return r};t.conditional=function(e,t){return function(n,r,i,s){t(n,r,i)&&s(n,e,r,i)}};t.loop=function(e,t){return function(n,r,i,s){for(var o=[],a=n.pos;t(n,r,i);){var l={};if(s(n,e,r,l),n.pos===a)break;a=n.pos,o.push(l)}return o}}},74071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readBits=t.readArray=t.readUnsigned=t.readString=t.peekBytes=t.readBytes=t.peekByte=t.readByte=t.buildStream=void 0;t.buildStream=function(e){return{data:e,pos:0}};var n=function(){return function(e){return e.data[e.pos++]}};t.readByte=n;t.peekByte=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){return t.data[t.pos+e]}};var r=function(e){return function(t){return t.data.subarray(t.pos,t.pos+=e)}};t.readBytes=r;t.peekBytes=function(e){return function(t){return t.data.subarray(t.pos,t.pos+e)}};t.readString=function(e){return function(t){return Array.from(r(e)(t)).map((function(e){return String.fromCharCode(e)})).join("")}};t.readUnsigned=function(e){return function(t){var n=r(2)(t);return e?(n[1]<<8)+n[0]:(n[0]<<8)+n[1]}};t.readArray=function(e,t){return function(n,i,s){for(var o="function"==typeof t?t(n,i,s):t,a=r(e),l=new Array(o),c=0;c<o;c++)l[c]=a(n);return l}};t.readBits=function(e){return function(t){for(var n=function(e){return e.data[e.pos++]}(t),r=new Array(8),i=0;i<8;i++)r[7-i]=!!(n&1<<i);return Object.keys(e).reduce((function(t,n){var i=e[n];return i.length?t[n]=function(e,t,n){for(var r=0,i=0;i<n;i++)r+=e[t+i]&&Math.pow(2,n-i-1);return r}(r,i.index,i.length):t[n]=r[i.index],t}),{})}}},79546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(13110),i=n(74071),s={blocks:function(e){for(var t=[],n=e.data.length,r=0,s=(0,i.readByte)()(e);0!==s&&s;s=(0,i.readByte)()(e)){if(e.pos+s>=n){var o=n-e.pos;t.push((0,i.readBytes)(o)(e)),r+=o;break}t.push((0,i.readBytes)(s)(e)),r+=s}for(var a=new Uint8Array(r),l=0,c=0;c<t.length;c++)a.set(t[c],l),l+=t[c].length;return a}},o=(0,r.conditional)({gce:[{codes:(0,i.readBytes)(2)},{byteSize:(0,i.readByte)()},{extras:(0,i.readBits)({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:(0,i.readUnsigned)(!0)},{transparentColorIndex:(0,i.readByte)()},{terminator:(0,i.readByte)()}]},(function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&249===t[1]})),a=(0,r.conditional)({image:[{code:(0,i.readByte)()},{descriptor:[{left:(0,i.readUnsigned)(!0)},{top:(0,i.readUnsigned)(!0)},{width:(0,i.readUnsigned)(!0)},{height:(0,i.readUnsigned)(!0)},{lct:(0,i.readBits)({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},(0,r.conditional)({lct:(0,i.readArray)(3,(function(e,t,n){return Math.pow(2,n.descriptor.lct.size+1)}))},(function(e,t,n){return n.descriptor.lct.exists})),{data:[{minCodeSize:(0,i.readByte)()},s]}]},(function(e){return 44===(0,i.peekByte)()(e)})),l=(0,r.conditional)({text:[{codes:(0,i.readBytes)(2)},{blockSize:(0,i.readByte)()},{preData:function(e,t,n){return(0,i.readBytes)(n.text.blockSize)(e)}},s]},(function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&1===t[1]})),c=(0,r.conditional)({application:[{codes:(0,i.readBytes)(2)},{blockSize:(0,i.readByte)()},{id:function(e,t,n){return(0,i.readString)(n.blockSize)(e)}},s]},(function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&255===t[1]})),u=(0,r.conditional)({comment:[{codes:(0,i.readBytes)(2)},s]},(function(e){var t=(0,i.peekBytes)(2)(e);return 33===t[0]&&254===t[1]})),d=[{header:[{signature:(0,i.readString)(3)},{version:(0,i.readString)(3)}]},{lsd:[{width:(0,i.readUnsigned)(!0)},{height:(0,i.readUnsigned)(!0)},{gct:(0,i.readBits)({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:(0,i.readByte)()},{pixelAspectRatio:(0,i.readByte)()}]},(0,r.conditional)({gct:(0,i.readArray)(3,(function(e,t){return Math.pow(2,t.lsd.gct.size+1)}))},(function(e,t){return t.lsd.gct.exists})),{frames:(0,r.loop)([o,c,u,a,l],(function(e){var t=(0,i.peekByte)()(e);return 33===t||44===t}))}];t.default=d},17773:(e,t,n)=>{e.exports=function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,a,l,c,u=[],d=0,h=e.length,p=h,f="string"!==r.getTypeOf(e);d<e.length;)p=h-d,i=f?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),o=t>>2,a=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,c=2<p?63&i:64,u.push(s.charAt(o)+s.charAt(a)+s.charAt(l)+s.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,o,a,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|p):new Array(0|p);c<e.length;)t=s.indexOf(e.charAt(c++))<<2|(o=s.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(l=s.indexOf(e.charAt(c++))),h[u++]=t,64!==a&&(h[u++]=n),64!==l&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return~e}(0|t,e,e.length,0):function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return~e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=r?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,u){var d,h,p=e.file,f=e.compression,g=u!==a.utf8encode,m=s.transformTo("string",u(p.name)),y=s.transformTo("string",a.utf8encode(p.name)),b=p.comment,v=s.transformTo("string",u(b)),_=s.transformTo("string",a.utf8encode(b)),w=y.length!==p.name.length,S=_.length!==b.length,x="",E="",C="",k=p.dir,O=p.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),g||!w&&!S||(I|=2048);var z=0,R=0;k&&(z|=16),"UNIX"===o?(R=798,z|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(p.unixPermissions,k)):(R=20,z|=function(e){return 63&(e||0)}(p.dosPermissions)),d=O.getUTCHours(),d<<=6,d|=O.getUTCMinutes(),d<<=5,d|=O.getUTCSeconds()/2,h=O.getUTCFullYear()-1980,h<<=4,h|=O.getUTCMonth()+1,h<<=5,h|=O.getUTCDate(),w&&(E=r(1,1)+r(l(m),4)+y,x+="up"+r(E.length,2)+E),S&&(C=r(1,1)+r(l(v),4)+_,x+="uc"+r(C.length,2)+C);var D="";return D+="\n\0",D+=r(I,2),D+=f.magic,D+=r(d,2),D+=r(h,2),D+=r(T.crc32,4),D+=r(T.compressedSize,4),D+=r(T.uncompressedSize,4),D+=r(m.length,2),D+=r(x.length,2),{fileRecord:c.LOCAL_FILE_HEADER+D+m+x,dirRecord:c.CENTRAL_FILE_HEADER+r(R,2)+D+r(v.length,2)+"\0\0\0\0"+r(z,4)+r(i,4)+m+x+v}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var a=s.transformTo("string",o(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var s=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var s=0;s<r.length;s++)n.push(c(r[s]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],l=a.fileNameStr,c=r.resolve(a.fileNameStr);n.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=s.getTypeOf(t),a=s.extend(n||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=g(e)),a.createFolders&&(r=f(e))&&m.call(this,r,!0);var d="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!d),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var y=null;y=t instanceof c||t instanceof o?t:h.isNode&&h.isStream(t)?new p(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var b=new u(e,y,a);this.files[e]=b}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:l.createFolders,e=g(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new l(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t){return new l.Promise((function(n,i){var s=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),c);n(e)}catch(e){i(e)}s=[]})).resume()}))}function d(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,r,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,s,o=e.length,l=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)l[n++]=i;else if(4<(s=a[i]))l[n++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),l=t;o!==t.length&&(i.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var h={};h.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,s.allocBuffer(e.length))}},h.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},h.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},h.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&s.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,s,a,c){return o.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=i.decode(t):s&&!0!==a&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return s.reject(e,r)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=f((function(){t(i,r)}));"error"===o.status&&r(o.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(h,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return s.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(e[l],l);return c;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(c,o))}),(function(e){r||(r=!0,s.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,a=-1,l=new this(i);++a<n;)o=e[a],t.resolve(o).then((function(e){r||(r=!0,s.resolve(l,e))}),(function(e){r||(r=!0,s.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:u,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==c)throw new Error(o[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}p.prototype.push=function(e,t){var n,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,o))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==o||(this.onEnd(c),!(a.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(e,t){var n,a,l,c,d,h,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&g&&(h="string"==typeof g?s.string2buf(g):"[object ArrayBuffer]"===u.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,h)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(p.output,p.next_out),c=p.next_out-l,d=s.buf2string(p.output,l),p.next_out=c,p.avail_out=f-c,c&&i.arraySet(p.output,p.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,s,o,a=e.length,l=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),s=o=0;o<l;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,s,a=t||e.length,c=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if(4<(s=o[i]))c[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&n<a;)i=i<<6|63&e[n++],s--;1<s?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e,s=e>>>16&65535,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(i=i+t[r++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var s=r,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return~e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,h=-2,p=-1,f=4,g=2,m=8,y=9,b=286,v=30,_=19,w=2*b+1,S=15,x=3,E=258,C=E+x+1,k=42,O=113,T=1,I=2,z=3,R=4;function D(e,t){return e.msg=l[t],t}function M(e){return(e<<1)-(4<e?9:0)}function N(e){for(var t=e.length;0<=--t;)e[t]=0}function j(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function P(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,j(e.strm)}function A(e,t){e.pending_buf[e.pending++]=t}function L(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function F(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+E,p=c[s+o-1],f=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===f&&c[n+o-1]===p&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<h);if(r=E-(h-s),s=h-E,o<r){if(e.match_start=t,a<=(o=r))break;p=c[s+o-1],f=c[s+o]}}}while((t=d[t&u])>l&&0!=--i);return o<=e.lookahead?o:e.lookahead}function U(e){var t,n,r,s,l,c,u,d,h,p,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-C)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);s+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,p=void 0,(h=s)<(p=c.avail_in)&&(p=h),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=o(c.adler,u,p,d):2===c.state.wrap&&(c.adler=a(c.adler,u,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function G(e,t){for(var n,r;;){if(e.lookahead<C){if(U(e),e.lookahead<C&&t===c)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=F(e,n)),e.match_length>=x)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(P(e,!1),0===e.strm.avail_out))return T}return e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(P(e,!0),0===e.strm.avail_out?z:R):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?T:I}function B(e,t){for(var n,r,i;;){if(e.lookahead<C){if(U(e),e.lookahead<C&&t===c)return T;if(0===e.lookahead)break}if(n=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=F(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-x,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,r&&(P(e,!1),0===e.strm.avail_out))return T}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&P(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return T}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,t===u?(P(e,!0),0===e.strm.avail_out?z:R):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?T:I}function Z(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function K(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*w),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*_+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*b+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function X(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=g,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?k:O,e.adler=2===t.wrap?0:1,t.last_flush=c,s._tr_init(t),d):D(e,h)}function V(e){var t=X(e);return t===d&&function(e){e.window_size=2*e.w_size,N(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),t}function W(e,t,n,r,s,o){if(!e)return h;var a=1;if(t===p&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),s<1||y<s||n!==m||r<8||15<r||t<0||9<t||o<0||f<o)return D(e,h);8===r&&(r=9);var l=new K;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,V(e)}r=[new Z(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(U(e),0===e.lookahead&&t===c)return T;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,P(e,!1),0===e.strm.avail_out))return T;if(e.strstart-e.block_start>=e.w_size-C&&(P(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(P(e,!0),0===e.strm.avail_out?z:R):(e.strstart>e.block_start&&(P(e,!1),e.strm.avail_out),T)})),new Z(4,4,8,4,G),new Z(4,5,16,8,G),new Z(4,6,32,32,G),new Z(4,4,16,16,B),new Z(8,16,32,32,B),new Z(8,16,128,128,B),new Z(8,32,128,256,B),new Z(32,128,258,1024,B),new Z(32,258,258,4096,B)],n.deflateInit=function(e,t){return W(e,t,m,15,8,0)},n.deflateInit2=W,n.deflateReset=V,n.deflateResetKeep=X,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,i,o,l;if(!e||!e.state||5<t||t<0)return e?D(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return D(e,0===e.avail_out?-5:h);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===k)if(2===i.wrap)e.adler=0,A(i,31),A(i,139),A(i,8),i.gzhead?(A(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),A(i,255&i.gzhead.time),A(i,i.gzhead.time>>8&255),A(i,i.gzhead.time>>16&255),A(i,i.gzhead.time>>24&255),A(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),A(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(A(i,255&i.gzhead.extra.length),A(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(A(i,0),A(i,0),A(i,0),A(i,0),A(i,0),A(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),A(i,3),i.status=O);else{var p=m+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=O,L(i,p),0!==i.strstart&&(L(i,e.adler>>>16),L(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),j(e),o=i.pending,i.pending!==i.pending_buf_size));)A(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),j(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,A(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),j(e),o=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,A(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&j(e),i.pending+2<=i.pending_buf_size&&(A(i,255&e.adler),A(i,e.adler>>8&255),e.adler=0,i.status=O)):i.status=O),0!==i.pending){if(j(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&M(t)<=M(n)&&t!==u)return D(e,-5);if(666===i.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(U(e),0===e.lookahead)){if(t===c)return T;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(P(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(P(e,!0),0===e.strm.avail_out?z:R):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?T:I}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=E){if(U(e),e.lookahead<=E&&t===c)return T;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+E;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=E-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(n=s._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(P(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===u?(P(e,!0),0===e.strm.avail_out?z:R):e.last_lit&&(P(e,!1),0===e.strm.avail_out)?T:I}(i,t):r[i.level].func(i,t);if(f!==z&&f!==R||(i.status=666),f===T||f===z)return 0===e.avail_out&&(i.last_flush=-1),d;if(f===I&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(N(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),j(e),0===e.avail_out))return i.last_flush=-1,d}return t!==u?d:i.wrap<=0?1:(2===i.wrap?(A(i,255&e.adler),A(i,e.adler>>8&255),A(i,e.adler>>16&255),A(i,e.adler>>24&255),A(i,255&e.total_in),A(i,e.total_in>>8&255),A(i,e.total_in>>16&255),A(i,e.total_in>>24&255)):(L(i,e.adler>>>16),L(i,65535&e.adler)),j(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==k&&69!==t&&73!==t&&91!==t&&103!==t&&t!==O&&666!==t?D(e,h):(e.state=null,t===O?D(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,r,s,a,l,c,u,p,f=t.length;if(!e||!e.state)return h;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==k||n.lookahead)return h;for(1===a&&(e.adler=o(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(N(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,f-n.w_size,n.w_size,0),t=p,f=n.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,U(n);n.lookahead>=x;){for(r=n.strstart,s=n.lookahead-(x-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+x-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--s;);n.strstart=r,n.lookahead=x-1,U(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,n.wrap=a,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,s,o,a,l,c,u,d,h,p,f,g,m,y,b,v,_,w,S,x,E,C,k;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),s=e.next_out,k=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,p=n.hold,f=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{f<15&&(p+=C[r++]<<f,f+=8,p+=C[r++]<<f,f+=8),v=g[p&y];t:for(;;){if(p>>>=_=v>>>24,f-=_,0==(_=v>>>16&255))k[s++]=65535&v;else{if(!(16&_)){if(!(64&_)){v=g[(65535&v)+(p&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&v,(_&=15)&&(f<_&&(p+=C[r++]<<f,f+=8),w+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=C[r++]<<f,f+=8,p+=C[r++]<<f,f+=8),v=m[p&b];n:for(;;){if(p>>>=_=v>>>24,f-=_,!(16&(_=v>>>16&255))){if(!(64&_)){v=m[(65535&v)+(p&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(S=65535&v,f<(_&=15)&&(p+=C[r++]<<f,(f+=8)<_&&(p+=C[r++]<<f,f+=8)),l<(S+=p&(1<<_)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=_,f-=_,(_=s-o)<S){if(u<(_=S-_)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=h,(x=0)===d){if(x+=c-_,_<w){for(w-=_;k[s++]=h[x++],--_;);x=s-S,E=k}}else if(d<_){if(x+=c+d-_,(_-=d)<w){for(w-=_;k[s++]=h[x++],--_;);if(x=0,d<w){for(w-=_=d;k[s++]=h[x++],--_;);x=s-S,E=k}}}else if(x+=d-_,_<w){for(w-=_;k[s++]=h[x++],--_;);x=s-S,E=k}for(;2<w;)k[s++]=E[x++],k[s++]=E[x++],k[s++]=E[x++],w-=3;w&&(k[s++]=E[x++],1<w&&(k[s++]=E[x++]))}else{for(x=s-S;k[s++]=k[x++],k[s++]=k[x++],k[s++]=k[x++],2<(w-=3););w&&(k[s++]=k[x++],1<w&&(k[s++]=k[x++]))}break}}break}}while(r<i&&s<a);r-=w=f>>3,p&=(1<<(f-=w<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=p,n.bits=f}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=1,c=2,u=0,d=-2,h=1,p=852,f=592;function g(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):d}function b(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y(e)):d}function v(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,b(e))):d}function _(e,t){var n,r;return e?(r=new m,(e.state=r).window=null,(n=v(e,t))!==u&&(e.state=null),n):d}var w,S,x=!0;function E(e){if(x){var t;for(w=new r.Buf32(512),S=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(l,e.lens,0,288,w,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,S,0,e.work,{bits:5}),x=!1}e.lencode=w,e.lenbits=9,e.distcode=S,e.distbits=5}function C(e,t,n,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=b,n.inflateReset2=v,n.inflateResetKeep=y,n.inflateInit=function(e){return _(e,15)},n.inflateInit2=_,n.inflate=function(e,t){var n,p,f,m,y,b,v,_,w,S,x,k,O,T,I,z,R,D,M,N,j,P,A,L,F=0,U=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),y=e.next_out,f=e.output,v=e.avail_out,m=e.next_in,p=e.input,b=e.avail_in,_=n.hold,w=n.bits,S=b,x=v,P=u;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(2&n.wrap&&35615===_){U[n.check=0]=255&_,U[1]=_>>>8&255,n.check=s(n.check,U,2,0),w=_=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",n.mode=30;break}if(w-=4,j=8+(15&(_>>>=4)),0===n.wbits)n.wbits=j;else if(j>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<j,e.adler=n.check=1,n.mode=512&_?10:12,w=_=0;break;case 2:for(;w<16;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(n.flags=_,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=_>>8&1),512&n.flags&&(U[0]=255&_,U[1]=_>>>8&255,n.check=s(n.check,U,2,0)),w=_=0,n.mode=3;case 3:for(;w<32;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.head&&(n.head.time=_),512&n.flags&&(U[0]=255&_,U[1]=_>>>8&255,U[2]=_>>>16&255,U[3]=_>>>24&255,n.check=s(n.check,U,4,0)),w=_=0,n.mode=4;case 4:for(;w<16;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.head&&(n.head.xflags=255&_,n.head.os=_>>8),512&n.flags&&(U[0]=255&_,U[1]=_>>>8&255,n.check=s(n.check,U,2,0)),w=_=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.length=_,n.head&&(n.head.extra_len=_),512&n.flags&&(U[0]=255&_,U[1]=_>>>8&255,n.check=s(n.check,U,2,0)),w=_=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(b<(k=n.length)&&(k=b),k&&(n.head&&(j=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,m,k,j)),512&n.flags&&(n.check=s(n.check,p,k,m)),b-=k,m+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===b)break e;for(k=0;j=p[m+k++],n.head&&j&&n.length<65536&&(n.head.name+=String.fromCharCode(j)),j&&k<b;);if(512&n.flags&&(n.check=s(n.check,p,k,m)),b-=k,m+=k,j)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===b)break e;for(k=0;j=p[m+k++],n.head&&j&&n.length<65536&&(n.head.comment+=String.fromCharCode(j)),j&&k<b;);if(512&n.flags&&(n.check=s(n.check,p,k,m)),b-=k,m+=k,j)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(_!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}w=_=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;w<32;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}e.adler=n.check=g(_),w=_=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=y,e.avail_out=v,e.next_in=m,e.avail_in=b,n.hold=_,n.bits=w,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){_>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}switch(n.last=1&_,w-=1,3&(_>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;_>>>=2,w-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}_>>>=2,w-=2;break;case 14:for(_>>>=7&w,w-=7&w;w<32;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&_,w=_=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(k=n.length){if(b<k&&(k=b),v<k&&(k=v),0===k)break e;r.arraySet(f,p,m,k,y),b-=k,m+=k,v-=k,y+=k,n.length-=k;break}n.mode=12;break;case 17:for(;w<14;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(n.nlen=257+(31&_),_>>>=5,w-=5,n.ndist=1+(31&_),_>>>=5,w-=5,n.ncode=4+(15&_),_>>>=4,w-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.lens[G[n.have++]]=7&_,_>>>=3,w-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},P=a(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,P){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;z=(F=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,R=65535&F,!((I=F>>>24)<=w);){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(R<16)_>>>=I,w-=I,n.lens[n.have++]=R;else{if(16===R){for(L=I+2;w<L;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(_>>>=I,w-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}j=n.lens[n.have-1],k=3+(3&_),_>>>=2,w-=2}else if(17===R){for(L=I+3;w<L;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}w-=I,j=0,k=3+(7&(_>>>=I)),_>>>=3,w-=3}else{for(L=I+7;w<L;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}w-=I,j=0,k=11+(127&(_>>>=I)),_>>>=7,w-=7}if(n.have+k>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=j}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,A={bits:n.lenbits},P=a(l,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,P){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},P=a(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,P){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=b&&258<=v){e.next_out=y,e.avail_out=v,e.next_in=m,e.avail_in=b,n.hold=_,n.bits=w,o(e,x),y=e.next_out,f=e.output,v=e.avail_out,m=e.next_in,p=e.input,b=e.avail_in,_=n.hold,w=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;z=(F=n.lencode[_&(1<<n.lenbits)-1])>>>16&255,R=65535&F,!((I=F>>>24)<=w);){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(z&&!(240&z)){for(D=I,M=z,N=R;z=(F=n.lencode[N+((_&(1<<D+M)-1)>>D)])>>>16&255,R=65535&F,!(D+(I=F>>>24)<=w);){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}_>>>=D,w-=D,n.back+=D}if(_>>>=I,w-=I,n.back+=I,n.length=R,0===z){n.mode=26;break}if(32&z){n.back=-1,n.mode=12;break}if(64&z){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&z,n.mode=22;case 22:if(n.extra){for(L=n.extra;w<L;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.length+=_&(1<<n.extra)-1,_>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;z=(F=n.distcode[_&(1<<n.distbits)-1])>>>16&255,R=65535&F,!((I=F>>>24)<=w);){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(!(240&z)){for(D=I,M=z,N=R;z=(F=n.distcode[N+((_&(1<<D+M)-1)>>D)])>>>16&255,R=65535&F,!(D+(I=F>>>24)<=w);){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}_>>>=D,w-=D,n.back+=D}if(_>>>=I,w-=I,n.back+=I,64&z){e.msg="invalid distance code",n.mode=30;break}n.offset=R,n.extra=15&z,n.mode=24;case 24:if(n.extra){for(L=n.extra;w<L;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}n.offset+=_&(1<<n.extra)-1,_>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(k=x-v,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}O=k>n.wnext?(k-=n.wnext,n.wsize-k):n.wnext-k,k>n.length&&(k=n.length),T=n.window}else T=f,O=y-n.offset,k=n.length;for(v<k&&(k=v),v-=k,n.length-=k;f[y++]=T[O++],--k;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;f[y++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===b)break e;b--,_|=p[m++]<<w,w+=8}if(x-=v,e.total_out+=x,n.total+=x,x&&(e.adler=n.check=n.flags?s(n.check,f,x,y-x):i(n.check,f,x,y-x)),x=v,(n.flags?_:g(_))!==n.check){e.msg="incorrect data check",n.mode=30;break}w=_=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===b)break e;b--,_+=p[m++]<<w,w+=8}if(_!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}w=_=0}n.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=v,e.next_in=m,e.avail_in=b,n.hold=_,n.bits=w,(n.wsize||x!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&C(e,e.output,e.next_out,x-e.avail_out)?(n.mode=31,-4):(S-=e.avail_in,x-=e.avail_out,e.total_in+=S,e.total_out+=x,n.total+=x,n.wrap&&x&&(e.adler=n.check=n.flags?s(n.check,f,x,e.next_out-x):i(n.check,f,x,e.next_out-x)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==S&&0===x||4===t)&&P===u&&(P=-5),P)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,u):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:C(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var p,f,g,m,y,b,v,_,w,S=h.bits,x=0,E=0,C=0,k=0,O=0,T=0,I=0,z=0,R=0,D=0,M=null,N=0,j=new r.Buf16(16),P=new r.Buf16(16),A=null,L=0;for(x=0;x<=15;x++)j[x]=0;for(E=0;E<l;E++)j[t[n+E]]++;for(O=S,k=15;1<=k&&0===j[k];k--);if(k<O&&(O=k),0===k)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(C=1;C<k&&0===j[C];C++);for(O<C&&(O=C),x=z=1;x<=15;x++)if(z<<=1,(z-=j[x])<0)return-1;if(0<z&&(0===e||1!==k))return-1;for(P[1]=0,x=1;x<15;x++)P[x+1]=P[x]+j[x];for(E=0;E<l;E++)0!==t[n+E]&&(d[P[t[n+E]]++]=E);if(b=0===e?(M=A=d,19):1===e?(M=i,N-=257,A=s,L-=257,256):(M=o,A=a,-1),x=C,y=u,I=E=D=0,g=-1,m=(R=1<<(T=O))-1,1===e&&852<R||2===e&&592<R)return 1;for(;;){for(v=x-I,w=d[E]<b?(_=0,d[E]):d[E]>b?(_=A[L+d[E]],M[N+d[E]]):(_=96,0),p=1<<x-I,C=f=1<<T;c[y+(D>>I)+(f-=p)]=v<<24|_<<16|w,0!==f;);for(p=1<<x-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,E++,0==--j[x]){if(x===k)break;x=t[n+d[E]]}if(O<x&&(D&m)!==g){for(0===I&&(I=O),y+=C,z=1<<(T=x-I);T+I<k&&!((z-=j[T+I])<=0);)T++,z<<=1;if(R+=1<<T,1===e&&852<R||2===e&&592<R)return 1;c[g=D&m]=O<<24|T<<16|y-u}}return 0!==D&&(c[y+D]=x-I<<24|64<<16),h.bits=O,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,s=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,l=29,c=256,u=c+1+l,d=30,h=19,p=2*u+1,f=15,g=16,m=7,y=256,b=16,v=17,_=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(u+2));o(C);var k=new Array(2*d);o(k);var O=new Array(512);o(O);var T=new Array(256);o(T);var I=new Array(l);o(I);var z,R,D,M=new Array(d);function N(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function j(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function P(e){return e<256?O[e]:O[256+(e>>>7)]}function A(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function L(e,t,n){e.bi_valid>g-n?(e.bi_buf|=t<<e.bi_valid&65535,A(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=n-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function F(e,t,n){L(e,n[2*t],n[2*t+1])}function U(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function G(e,t,n){var r,i,s=new Array(f+1),o=0;for(r=1;r<=f;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=U(s[a]++,a))}}function B(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Z(e){8<e.bi_valid?A(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function K(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function X(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&K(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!K(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function V(e,t,n){var r,i,s,o,a=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?F(e,i,t):(F(e,(s=T[i])+c+1,t),0!==(o=w[s])&&L(e,i-=I[s],o),F(e,s=P(--r),n),0!==(o=S[s])&&L(e,r-=M[s],o)),a<e.last_lit;);F(e,y,t)}function W(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)X(e,s,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,X(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,m=t.stat_desc.max_length,y=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)m<(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(s=m,y++),l[2*r+1]=s,c<r||(e.bl_count[s]++,o=0,g<=r&&(o=h[r-g]),a=l[2*r],e.opt_len+=a*(s+o),d&&(e.static_len+=a*(u[2*r+1]+o)));if(0!==y){do{for(s=m-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[m]--,y-=2}while(0<y);for(s=m;0!==s;s--)for(r=e.bl_count[s];0!==r;)c<(i=e.heap[--n])||(l[2*i+1]!==s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(e,t),G(s,c,e.bl_count)}function H(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<l&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*b]++):a<=10?e.bl_tree[2*v]++:e.bl_tree[2*_]++,s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4))}function $(e,t,n){var r,i,s=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<l&&i===o)){if(a<c)for(;F(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(F(e,i,e.bl_tree),a--),F(e,b,e.bl_tree),L(e,a-3,2)):a<=10?(F(e,v,e.bl_tree),L(e,a-3,3)):(F(e,_,e.bl_tree),L(e,a-11,7));s=i,c=(a=0)===o?(l=138,3):i===o?(l=6,3):(l=7,4)}}o(M);var Y=!1;function J(e,t,n,i){L(e,(a<<1)+(i?1:0),3),function(e,t,n,i){Z(e),i&&(A(e,n),A(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Y||(function(){var e,t,n,r,i,s=new Array(f+1);for(r=n=0;r<l-1;r++)for(I[r]=n,e=0;e<1<<w[r];e++)T[n++]=r;for(T[n-1]=r,r=i=0;r<16;r++)for(M[r]=i,e=0;e<1<<S[r];e++)O[i++]=r;for(i>>=7;r<d;r++)for(M[r]=i<<7,e=0;e<1<<S[r]-7;e++)O[256+i++]=r;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,s[8]++;for(;e<=255;)C[2*e+1]=9,e++,s[9]++;for(;e<=279;)C[2*e+1]=7,e++,s[7]++;for(;e<=287;)C[2*e+1]=8,e++,s[8]++;for(G(C,u+1,s),e=0;e<d;e++)k[2*e+1]=5,k[2*e]=U(e,5);z=new N(C,w,c+1,u,f),R=new N(k,S,0,d,f),D=new N(new Array(0),x,0,h,m)}(),Y=!0),e.l_desc=new j(e.dyn_ltree,z),e.d_desc=new j(e.dyn_dtree,R),e.bl_desc=new j(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,B(e)},n._tr_stored_block=J,n._tr_flush_block=function(e,t,n,r){var o,a,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),W(e,e.l_desc),W(e,e.d_desc),l=function(e){var t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==t?J(e,t,n,r):4===e.strategy||a===o?(L(e,2+(r?1:0),3),V(e,C,k)):(L(e,4+(r?1:0),3),function(e,t,n,r){var i;for(L(e,t-257,5),L(e,n-1,5),L(e,r-4,4),i=0;i<r;i++)L(e,e.bl_tree[2*E[i]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),V(e,e.dyn_ltree,e.dyn_dtree)),B(e),r&&Z(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(T[n]+c+1)]++,e.dyn_dtree[2*P(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){L(e,2,3),F(e,y,C),function(e){16===e.bi_valid?(A(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,s,o=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[o]=i,n(o),o++},u.clearImmediate=d}function d(e){delete a[e]}function h(e){if(l)setTimeout(h,0,e);else{var n=a[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},57705:(e,t,n)=>{var r,i,s,o,a;r=n(45340),i=n(12437).utf8,s=n(86238),o=n(12437).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[l>>>5]|=128<<l%32,n[14+(l+64>>>9<<4)]=l;var f=a._ff,g=a._gg,m=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var b=c,v=u,_=d,w=h;c=f(c,u,d,h,n[p+0],7,-680876936),h=f(h,c,u,d,n[p+1],12,-389564586),d=f(d,h,c,u,n[p+2],17,606105819),u=f(u,d,h,c,n[p+3],22,-1044525330),c=f(c,u,d,h,n[p+4],7,-176418897),h=f(h,c,u,d,n[p+5],12,1200080426),d=f(d,h,c,u,n[p+6],17,-1473231341),u=f(u,d,h,c,n[p+7],22,-45705983),c=f(c,u,d,h,n[p+8],7,1770035416),h=f(h,c,u,d,n[p+9],12,-1958414417),d=f(d,h,c,u,n[p+10],17,-42063),u=f(u,d,h,c,n[p+11],22,-1990404162),c=f(c,u,d,h,n[p+12],7,1804603682),h=f(h,c,u,d,n[p+13],12,-40341101),d=f(d,h,c,u,n[p+14],17,-1502002290),c=g(c,u=f(u,d,h,c,n[p+15],22,1236535329),d,h,n[p+1],5,-165796510),h=g(h,c,u,d,n[p+6],9,-1069501632),d=g(d,h,c,u,n[p+11],14,643717713),u=g(u,d,h,c,n[p+0],20,-373897302),c=g(c,u,d,h,n[p+5],5,-701558691),h=g(h,c,u,d,n[p+10],9,38016083),d=g(d,h,c,u,n[p+15],14,-660478335),u=g(u,d,h,c,n[p+4],20,-405537848),c=g(c,u,d,h,n[p+9],5,568446438),h=g(h,c,u,d,n[p+14],9,-1019803690),d=g(d,h,c,u,n[p+3],14,-187363961),u=g(u,d,h,c,n[p+8],20,1163531501),c=g(c,u,d,h,n[p+13],5,-1444681467),h=g(h,c,u,d,n[p+2],9,-51403784),d=g(d,h,c,u,n[p+7],14,1735328473),c=m(c,u=g(u,d,h,c,n[p+12],20,-1926607734),d,h,n[p+5],4,-378558),h=m(h,c,u,d,n[p+8],11,-2022574463),d=m(d,h,c,u,n[p+11],16,1839030562),u=m(u,d,h,c,n[p+14],23,-35309556),c=m(c,u,d,h,n[p+1],4,-1530992060),h=m(h,c,u,d,n[p+4],11,1272893353),d=m(d,h,c,u,n[p+7],16,-155497632),u=m(u,d,h,c,n[p+10],23,-1094730640),c=m(c,u,d,h,n[p+13],4,681279174),h=m(h,c,u,d,n[p+0],11,-358537222),d=m(d,h,c,u,n[p+3],16,-722521979),u=m(u,d,h,c,n[p+6],23,76029189),c=m(c,u,d,h,n[p+9],4,-640364487),h=m(h,c,u,d,n[p+12],11,-421815835),d=m(d,h,c,u,n[p+15],16,530742520),c=y(c,u=m(u,d,h,c,n[p+2],23,-995338651),d,h,n[p+0],6,-198630844),h=y(h,c,u,d,n[p+7],10,1126891415),d=y(d,h,c,u,n[p+14],15,-1416354905),u=y(u,d,h,c,n[p+5],21,-57434055),c=y(c,u,d,h,n[p+12],6,1700485571),h=y(h,c,u,d,n[p+3],10,-1894986606),d=y(d,h,c,u,n[p+10],15,-1051523),u=y(u,d,h,c,n[p+1],21,-2054922799),c=y(c,u,d,h,n[p+8],6,1873313359),h=y(h,c,u,d,n[p+15],10,-30611744),d=y(d,h,c,u,n[p+6],15,-1560198380),u=y(u,d,h,c,n[p+13],21,1309151649),c=y(c,u,d,h,n[p+4],6,-145523070),h=y(h,c,u,d,n[p+11],10,-1120210379),d=y(d,h,c,u,n[p+2],15,718787259),u=y(u,d,h,c,n[p+9],21,-343485551),c=c+b>>>0,u=u+v>>>0,d=d+_>>>0,h=h+w>>>0}return r.endian([c,u,d,h])})._ff=function(e,t,n,r,i,s,o){var a=e+(t&n|~t&r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._gg=function(e,t,n,r,i,s,o){var a=e+(t&r|n&~r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._hh=function(e,t,n,r,i,s,o){var a=e+(t^n^r)+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._ii=function(e,t,n,r,i,s,o){var a=e+(n^(t|~r))+(i>>>0)+o;return(a<<s|a>>>32-s)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},75255:(e,t,n)=>{"use strict";n.d(t,{jd:()=>p,FY:()=>c,Pi:()=>w,fv:()=>C});var r=n(60963),i=n(18571);if(!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!r.rC)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var s=n(95291);function o(e){e()}function a(e){return(0,r.Gf)(e)}var l=!1;function c(){return l}var u,d,h=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(r,i){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(i))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),p=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:h)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null})),f=n(33879);function g(e){e.reaction=new r.le("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}function m(e,t){if(void 0===t&&(t="observed"),c())return e();var n=i.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return p.unregister(r),r.onStoreChange=e,r.reaction||(g(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var s,o,l=n.current;if(l.reaction||(g(l),p.register(n,l,l)),i.useDebugValue(l.reaction,a),(0,f.useSyncExternalStore)(l.subscribe,l.getSnapshot,l.getSnapshot),l.reaction.track((function(){try{s=e()}catch(t){o=t}})),o)throw o;return s}var y="function"==typeof Symbol&&Symbol.for,b=null!==(d=null===(u=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===u?void 0:u.configurable)&&void 0!==d&&d,v=y?Symbol.for("react.forward_ref"):"function"==typeof i.forwardRef&&(0,i.forwardRef)((function(e){return null})).$$typeof,_=y?Symbol.for("react.memo"):"function"==typeof i.memo&&(0,i.memo)((function(e){return null})).$$typeof;function w(e,t){var n;if(_&&e.$$typeof===_)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(c())return e;var r=null!==(n=null==t?void 0:t.forwardRef)&&void 0!==n&&n,s=e,o=e.displayName||e.name;if(v&&e.$$typeof===v&&(r=!0,"function"!=typeof(s=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,l,u=function(e,t){return m((function(){return s(e,t)}),o)};return u.displayName=e.displayName,b&&Object.defineProperty(u,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(u.contextTypes=e.contextTypes),r&&(u=(0,i.forwardRef)(u)),u=(0,i.memo)(u),a=e,l=u,Object.keys(a).forEach((function(e){E[e]||Object.defineProperty(l,e,Object.getOwnPropertyDescriptor(a,e))})),u}var S,x,E={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function C(e,t){return(0,i.useState)((function(){return(0,r.LO)(e(),t,{autoBind:!0})}))[0]}(x=s.unstable_batchedUpdates)||(x=o),(0,r.jQ)({reactionScheduler:x});S=p.finalizeAllImmediately},9367:(e,t,n)=>{"use strict";var r=n(2862);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},61235:(e,t,n)=>{e.exports=n(9367)()},2862:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},75107:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,s=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),o="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(s):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function s(){n&&(n=!1,e()),r&&l()}function a(){o(s)}function l(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||s},h=b(0,0,0,0);function p(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function g(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],s=e["padding-"+i];t[i]=p(s)}return t}(r),s=i.left+i.right,o=i.top+i.bottom,a=p(r.width),l=p(r.height);if("border-box"===r.boxSizing&&(Math.round(a+s)!==t&&(a-=f(r,"left","right")+s),Math.round(l+o)!==n&&(l-=f(r,"top","bottom")+o)),!function(e){return e===d(e).document.documentElement}(e)){var c=Math.round(a+s)-t,u=Math.round(l+o)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return b(i.left,i.top,a,l)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function y(e){return i?m(e)?function(e){var t=e.getBBox();return b(0,0,t.width,t.height)}(e):g(e):h}function b(e,t,n,r){return{x:e,y:t,width:n,height:r}}var v=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=y(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var n,r,i,s,o,a,l,c=(r=(n=t).x,i=n.y,s=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),u(l,{x:r,y:i,width:s,height:o,top:i,right:r+s,bottom:o+i,left:r}),l);u(this,{target:e,contentRect:c})},w=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!=typeof WeakMap?new WeakMap:new r,x=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new w(t,n,this);S.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){x.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));const E=void 0!==s.ResizeObserver?s.ResizeObserver:x},27381:(e,t,n)=>{"use strict";var r=n(18571);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},33879:(e,t,n)=>{"use strict";e.exports=n(27381)},18751:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},13589:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(31738);const i=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.Z;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s;const a=o},34073:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},37721:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(74529),i=n(337);const s=function(e,t){for(var n=0,s=(t=(0,r.Z)(t,e)).length;null!=e&&n<s;)e=e[(0,i.Z)(t[n++])];return n&&n==s?e:void 0}},8344:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(82736),i=n(74529),s=n(17022),o=n(7445),a=n(337);const l=function(e,t,n,l){if(!(0,o.Z)(e))return e;for(var c=-1,u=(t=(0,i.Z)(t,e)).length,d=u-1,h=e;null!=h&&++c<u;){var p=(0,a.Z)(t[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=d){var g=h[p];void 0===(f=l?l(g,p,h):void 0)&&(f=(0,o.Z)(g)?g:(0,s.Z)(t[c+1])?[]:{})}(0,r.Z)(h,p,f),h=h[p]}return e}},76208:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return e.has(t)}},74529:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(54618),i=n(31674),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;const a=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,i.Z)(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))};var l=n(89614),c=n(98435);const u=function(e,t){return(0,r.Z)(e)?e:a(e,t)?[e]:(0,l.Z)((0,c.Z)(e))}},69968:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(38210),i=n(64763),s=n(68167),o=n(54618),a=i.Z?i.Z.isConcatSpreadable:void 0;const l=function(e){return(0,o.Z)(e)||(0,s.Z)(e)||!!(a&&e&&e[a])};const c=function e(t,n,i,s,o){var a=-1,c=t.length;for(i||(i=l),o||(o=[]);++a<c;){var u=t[a];n>0&&i(u)?n>1?e(u,n-1,i,s,o):(0,r.Z)(o,u):s||(o[o.length]=u)}return o};const u=function(e){return(null==e?0:e.length)?c(e,1):[]};var d=n(70802),h=n(41023);const p=function(e){return(0,h.Z)((0,d.Z)(e,void 0,u),e+"")}},70802:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});const r=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var i=Math.max;const s=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=i(s.length-t,0),l=Array(a);++o<a;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=n(l),r(e,this,c)}}},41023:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});const r=function(e){return function(){return e}};var i=n(90379),s=n(80058);const o=i.Z?function(e,t){return(0,i.Z)(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:s.Z;var a=Date.now;const l=function(e){var t=0,n=0;return function(){var r=a(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(o)},89614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(31738);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r.Z),n}i.Cache=r.Z;const s=i;var o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;const l=function(e){var t=s(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}))},337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(31674);const i=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},80058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return e}},65656:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var r=n(74917),i=n(13589);const s=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var o=n(76208);const a=function(e,t,n,r,a,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,g=!0,m=2&n?new i.Z:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var y=e[f],b=t[f];if(r)var v=c?r(b,y,f,t,e,l):r(y,b,f,e,t,l);if(void 0!==v){if(v)continue;g=!1;break}if(m){if(!s(t,(function(e,t){if(!(0,o.Z)(m,t)&&(y===e||a(y,e,n,r,l)))return m.push(t)}))){g=!1;break}}else if(y!==b&&!a(y,b,n,r,l)){g=!1;break}}return l.delete(e),l.delete(t),g};var l=n(64763),c=n(5828),u=n(65136);const d=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const h=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var p=l.Z?l.Z.prototype:void 0,f=p?p.valueOf:void 0;const g=function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new c.Z(e),new c.Z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,u.Z)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=d;case"[object Set]":var p=1&r;if(l||(l=h),e.size!=t.size&&!p)return!1;var g=o.get(e);if(g)return g==t;r|=2,o.set(e,t);var m=a(l(e),l(t),r,i,s,o);return o.delete(e),m;case"[object Symbol]":if(f)return f.call(e)==f.call(t)}return!1};var m=n(36957),y=Object.prototype.hasOwnProperty;const b=function(e,t,n,r,i,s){var o=1&n,a=(0,m.Z)(e),l=a.length;if(l!=(0,m.Z)(t).length&&!o)return!1;for(var c=l;c--;){var u=a[c];if(!(o?u in t:y.call(t,u)))return!1}var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=!0;s.set(e,t),s.set(t,e);for(var f=o;++c<l;){var g=e[u=a[c]],b=t[u];if(r)var v=o?r(b,g,u,t,e,s):r(g,b,u,e,t,s);if(!(void 0===v?g===b||i(g,b,n,r,s):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(p=!1)}return s.delete(e),s.delete(t),p};var v=n(80206),_=n(54618),w=n(95960),S=n(32721),x="[object Arguments]",E="[object Array]",C="[object Object]",k=Object.prototype.hasOwnProperty;const O=function(e,t,n,i,s,o){var l=(0,_.Z)(e),c=(0,_.Z)(t),u=l?E:(0,v.Z)(e),d=c?E:(0,v.Z)(t),h=(u=u==x?C:u)==C,p=(d=d==x?C:d)==C,f=u==d;if(f&&(0,w.Z)(e)){if(!(0,w.Z)(t))return!1;l=!0,h=!1}if(f&&!h)return o||(o=new r.Z),l||(0,S.Z)(e)?a(e,t,n,i,s,o):g(e,t,u,n,i,s,o);if(!(1&n)){var m=h&&k.call(e,"__wrapped__"),y=p&&k.call(t,"__wrapped__");if(m||y){var O=m?e.value():e,T=y?t.value():t;return o||(o=new r.Z),s(O,T,n,i,o)}}return!!f&&(o||(o=new r.Z),b(e,t,n,i,s,o))};var T=n(11474);const I=function e(t,n,r,i,s){return t===n||(null==t||null==n||!(0,T.Z)(t)&&!(0,T.Z)(n)?t!=t&&n!=n:O(t,n,r,i,e,s))};const z=function(e,t){return I(e,t)}},56366:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(37721),i=n(8344),s=n(74529);const o=function(e,t,n){for(var o=-1,a=t.length,l={};++o<a;){var c=t[o],u=(0,r.Z)(e,c);n(u,c)&&(0,i.Z)(l,(0,s.Z)(c,e),u)}return l};const a=function(e,t){return null!=e&&t in Object(e)};var l=n(68167),c=n(54618),u=n(17022),d=n(36526),h=n(337);const p=function(e,t,n){for(var r=-1,i=(t=(0,s.Z)(t,e)).length,o=!1;++r<i;){var a=(0,h.Z)(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&(0,d.Z)(i)&&(0,u.Z)(a,i)&&((0,c.Z)(e)||(0,l.Z)(e))};const f=function(e,t){return null!=e&&p(e,t,a)};const g=function(e,t){return o(e,t,(function(t,n){return f(e,n)}))};const m=(0,n(69968).Z)((function(e,t){return null==e?{}:g(e,t)}))},71412:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(7445),i=n(1189);const s=function(){return i.Z.Date.now()};var o=n(40262),a=Math.max,l=Math.min;const c=function(e,t,n){var i,c,u,d,h,p,f=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=i,r=c;return i=c=void 0,f=t,d=e.apply(r,n)}function v(e){var n=e-p;return void 0===p||n>=t||n<0||m&&e-f>=u}function _(){var e=s();if(v(e))return w(e);h=setTimeout(_,function(e){var n=t-(e-p);return m?l(n,u-(e-f)):n}(e))}function w(e){return h=void 0,y&&i?b(e):(i=c=void 0,d)}function S(){var e=s(),n=v(e);if(i=arguments,c=this,p=e,n){if(void 0===h)return function(e){return f=e,h=setTimeout(_,t),g?b(e):d}(p);if(m)return clearTimeout(h),h=setTimeout(_,t),b(p)}return void 0===h&&(h=setTimeout(_,t)),d}return t=(0,o.Z)(t)||0,(0,r.Z)(n)&&(g=!!n.leading,u=(m="maxWait"in n)?a((0,o.Z)(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==h&&clearTimeout(h),f=0,i=p=c=h=void 0},S.flush=function(){return void 0===h?d:w(s())},S};const u=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,r.Z)(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),c(e,t,{leading:i,maxWait:t,trailing:s})}},98435:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(64763),i=n(34073),s=n(54618),o=n(31674),a=r.Z?r.Z.prototype:void 0,l=a?a.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,s.Z)(t))return(0,i.Z)(t,e)+"";if((0,o.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const u=function(e){return null==e?"":c(e)}}}]);