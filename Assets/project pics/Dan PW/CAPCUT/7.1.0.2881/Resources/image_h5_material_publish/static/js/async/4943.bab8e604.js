"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[4943],{49479:(e,t,n)=>{n.d(t,{Z:()=>r});n(18571);var l=n(18751),s=n.n(l),i=n(79337),a=n(80697),c=n(72322);const r=({className:e,value:t,selected:n,disabled:l,onClick:r})=>(0,c.jsx)(i.Vp,{className:s()(e,a.Z.tag,n&&a.Z.selected,l&&a.Z.disabled),color:n?"cyan":void 0,onClick:()=>null==r?void 0:r(t),children:t},t)},57939:(e,t,n)=>{n.d(t,{Z:()=>u});var l=n(18571),s=n(18751),i=n.n(s),a=n(79337),c=n(49479),r=n(6059),o=n(72322);const u=({className:e,title:t,loading:n,loadingText:s,value:u,options:d,onSelect:g})=>{const h=(0,l.useCallback)((e=>u.includes(e)),[u]),p=(0,l.useMemo)((()=>d.filter((e=>!u.includes(e)))),[u,d]);return 0===p.length?null:(0,o.jsxs)("div",{className:i()([r.Z.block,e]),children:[(0,o.jsx)("p",{className:r.Z.title,children:t}),(0,o.jsx)("div",{className:r.Z.content,children:n?(0,o.jsxs)("div",{className:r.Z.loading,children:[(0,o.jsx)("span",{className:r.Z.text,children:s}),(0,o.jsx)(a.yC,{size:"small"})]}):p.map((e=>(0,o.jsx)(c.Z,{selected:h(e),value:e,onClick:()=>g(e)},e)))})]})}},45328:(e,t,n)=>{n.d(t,{Z:()=>u});var l=n(18571),s=n(65625),i=n(42716),a=n(1234),c=n(40706),r=n(57939),o=n(72322);const u=(0,s.Pi)((({value:e,onSelect:t})=>{const[n,s]=(0,l.useState)([]),{t:u}=(0,i.$)();return(0,l.useEffect)((()=>{const e=(0,c.cF)(c.Qt.TagEachUser,a.$.userInfo.uid).get();s(e)}),[a.$.userInfo.uid,e]),(0,o.jsx)(r.Z,{title:u("pc_recently_used_web"),value:e,options:n,onSelect:t})}))},3502:(e,t,n)=>{var l=n(18571),s=n(65625),i=n(54275),a=n(61458),c=n(42716),r=n(57939),o=n(48647),u=n(72322);(0,s.Pi)((({title:e,uri:t,value:n,itemType:s,onSelect:d})=>{const[g,h]=(0,l.useState)([]),[p,v]=(0,l.useState)([]),[m,_]=(0,l.useState)(!1),f=(0,l.useRef)({selfConfigTagsReady:{}}),{t:b}=(0,c.$)(),w=(0,l.useMemo)((()=>[...p,...g]),[g,p]),x=(0,i.Z)((e=>{const{title:t,uri:n}=e;return t?f.current.cvid&&f.current.uri===n?{cvid:f.current.cvid,title:t}:n?{image_uri:n,title:t}:null:null})),y=(0,l.useCallback)((async()=>{try{_(!0);const n=x({title:e,uri:t});await Promise.all([n&&(0,o.Uz)(n).then((e=>{v(e.cv_tags),f.current.cvid=e.cvid,n.image_uri&&(f.current.uri=n.image_uri)})),!f.current.selfConfigTagsReady[s]&&(0,o.On)({effect_type:s}).then((e=>{h(e.rec_tags),f.current.selfConfigTagsReady[s]=!0}))])}finally{_(!1)}}),[e,t,s]);return(0,a.Z)(y,500,[y]),(0,l.useEffect)((()=>{y()}),[s]),(0,u.jsx)(r.Z,{title:b("recommend_signature_web"),loading:m,loadingText:b("loading_web"),value:n,options:w,onSelect:d})}))},45220:(e,t,n)=>{n.d(t,{u:()=>y});var l=n(18571),s=n(95291),i=n(79337),a=n(54275),c=n(61458),r=n(42716),o=n(65625),u=n(1234),d=n(40706),g=n(15621),h=n(83305),p=n(13928),v=n(48647),m=n(66795),_=n(45328),f=(n(3502),n(49479)),b=n(95331),w=n(72322);const x=(0,o.Pi)((({recommendConfig:e,value:t=[],itemType:n,disabled:o,disableRecommend:x,disableLatest:y,onChange:Z,placeholder:C,max:k=15,temporaryId:j,ignoreAddTagOnBlurSelector:S,onRecentTagSelect:E})=>{const T=(0,l.useRef)(!1),[I,L]=(0,l.useState)(""),[N,R]=(0,l.useState)(""),M=(0,l.useRef)(!1),A=M.current?N:I,[O,P]=(0,l.useState)([]),[D,F]=(0,l.useState)([]),{t:$}=(0,r.$)(),z=e=>(0,d.cF)(d.Qt.TagEachUser,u.$.userInfo.uid).set("add",[e]),B=(0,a.Z)((e=>{F(I?e:[])}));(0,c.Z)((async()=>{if(!n||!I)return;const e=await(0,v.EO)({query:I,count:10}),t=(null==e?void 0:e.sug_tags)||[];B(t)}),500,[I,n]),(0,l.useEffect)((()=>{I||F([])}),[I]);const Q=(0,l.useCallback)((e=>{if(k&&e.length>k)return i.FN.error($("pc_stickers_release_max_tag_web",{X:k})),void(null==Z||Z(e.slice(0,k)));null==Z||Z(e)}),[Z]),U=(0,a.Z)((e=>{t.includes(e)||Q([...t,e])})),H=(0,l.useMemo)((()=>new g.l),[]),V=(0,a.Z)((async e=>{const n=await H.lock("",(async()=>{if(t.includes(e))return!0;let n=!1;try{const t=await(0,v._K)({words:e,scene:v.Xb.Tag});n=!1===(null==t?void 0:t.is_hit)}catch(l){return(0,h.RF)("[TagSelect] call checkAntiDirt failed",l,{tag:e}),i.FN.error($("pc_tag_retry_web")),!1}return n?(U(e),!0):((0,h.c6)("[TagSelect] checkAntiDirt not passed",{tag:e}),i.FN.error($("pc_tag_illegal_fail_web")),!1)}));return null!=n&&n})),Y=(0,a.Z)((e=>{if(0===e.length)return;const n=t.filter((t=>!e.includes(t)));Q(n)})),W=(0,l.useRef)(null),{saveSelectionIfNeeded:q}=(0,m.u)({getInputElem:()=>{var e;return null===(e=W.current)||void 0===e?void 0:e.inputRef.current}}),X=e=>{const t=(0,p.aF)(e,30);q(t),L(t)},K=(0,a.Z)((e=>{X(""),t.includes(e)?Y([e]):(U(e),z(e))})),G=e=>{const t=O.includes(e);P(t?O.filter((t=>t!==e)):[...O,e])},J=(0,a.Z)((()=>{Y(O),P([])})),ee=(0,a.Z)((()=>W.current&&W.current.inputRef.current&&W.current.tagInputRef.current?{tagInput:W.current,tagInputElem:W.current.tagInputRef.current,inputElem:W.current.inputRef.current}:null)),te=(0,a.Z)((e=>{const t=ee();return!!(t&&e&&e instanceof Element)&&e.closest(".semi-tagInput")===t.tagInputElem})),ne=(0,a.Z)((e=>!!(e&&e instanceof Element)&&null!==e.closest(".semi-tag"))),le=(0,a.Z)((e=>{const t=e.target,n=ee();if(!n||!te(t))return;const{tagInput:l,tagInputElem:s,inputElem:i}=n,{selectionStart:a,selectionEnd:c}=i;return O.length>0&&ne(t)?(J(),null==i||i.setSelectionRange(0,0),void l.focus()):void 0})),se=(0,a.Z)((e=>{const t=e.target;ee()&&te(t)&&ne(t)&&(te(e.relatedTarget)&&ne(e.relatedTarget)||P([]))}));(0,l.useEffect)((()=>{const e=e=>{"Delete"===e.code||"Backspace"===e.code?(T.current=!0,le(e)):T.current=!1};return window.addEventListener("keydown",e,!0),window.addEventListener("blur",se,!0),()=>{window.removeEventListener("keydown",e,!0),window.removeEventListener("blur",se,!0)}}),[]);const ie=(0,a.Z)((e=>{e.replace(/ {1,}/g,"")===I.replace(/ {1,}/g,"")&&X("")})),ae=async e=>{const[t]=e;Promise.resolve().then((()=>X(I)));const n=t.replace(/ {1,}/g,"");if(0===n.length)return;await V(n)&&(z(n),ie(I))},ce=async e=>{if(M.current)return void R(e);const t=e.replace(/ {1,}$/,""),n=t.replace(/ {1,}/g,"");if(X(t),t===e||!t||T.current)return;await V(n)&&(z(n),ie(I))};(0,l.useEffect)((()=>{var e;const t=null===(e=W.current)||void 0===e?void 0:e.inputRef.current;if(!t)return;const n=()=>{M.current=!0,R(t.value)},l=()=>(0,s.unstable_batchedUpdates)((()=>{M.current=!1,R(""),ce(t.value)}));return t.addEventListener("compositionstart",n),t.addEventListener("compositionend",l),()=>{t.removeEventListener("compositionstart",n),t.removeEventListener("compositionend",l)}}),[]);(0,l.useEffect)((()=>{j&&L("")}),[j]);return(0,w.jsxs)("div",{className:b.Z.tagSelect,children:[(0,w.jsx)(i.Lt,{position:"bottomLeft",trigger:"focus",className:b.Z.suggestListDropdown,style:{maxHeight:200,overflow:"scroll"},render:(0,w.jsx)(i.Lt.Menu,{children:D.map((e=>(0,w.jsx)(i.Lt.Item,{className:b.Z.dropItem,onClick:()=>K(e),children:e},e)))}),children:(0,w.jsx)(i.EG,{ref:W,inputValue:A,onInputChange:ce,value:t,placeholder:C,renderTagItem:(e,t,n)=>(0,w.jsx)(f.Z,{value:e,selected:O.includes(e),disabled:o,onClick:G},e),onAdd:ae,onBlur:e=>{if(e.relatedTarget&&e.relatedTarget instanceof Element){const t=[`.${b.Z.suggestListDropdown}`,S].filter((e=>e)).join(",");if(null!==e.relatedTarget.closest(t)||ne(e.relatedTarget))return}ae([I])},disabled:o})}),!1,!o&&!y&&(0,w.jsx)(_.Z,{value:t,onSelect:e=>{K(e),null==E||E()}})]})})),y=(0,i.Q2)(x)},34549:(e,t,n)=>{n.d(t,{Z:()=>p});n(18571);var l=n(42716),s=n(79337),i=n(43792),a=n(73858),c=n(48647),r=n(96452);const o="root-gly6Qn",u="link-pZCc56",d="selectWrapper-PYDCrg",g="activitySelect-pwnL0y";var h=n(72322);const p=e=>{const{t}=(0,l.$)(),{value:n,onChange:p,taskList:v,loading:m,viewMoreUrl:_,onOrientationViewMoreClick:f}=e,[b,w]=(0,i.Z)(void 0,{dimension:"width"}),x=e=>{var t;null==p||p({postChannel:null!==(t=null==n?void 0:n.postChannel)&&void 0!==t?t:c.iu.Targeted,activityId:e})};return(0,h.jsxs)("div",{className:o,children:[(0,h.jsxs)(s.FX,{type:"card",value:null==n?void 0:n.postChannel,onChange:e=>{null==p||p({postChannel:e.target.value})},direction:"horizontal",name:"material-publish-group-pureCard",children:[(0,h.jsx)(s.Y8,{value:c.iu.Targeted,extra:(0,h.jsxs)("div",{style:{height:"100%"},children:[(0,h.jsx)("div",{children:t("cc_pc_material_visual_effect_publish_creation_type_event_desc_web")}),(0,h.jsx)("span",{className:u,onClick:e=>{null==f||f(),e.preventDefault(),(0,r.Z)({url:_})},children:t("cc_pc_material_visual_effect_publish_creation_type_event_detail_web")})]}),children:t("cc_pc_material_visual_effect_publish_creation_type_event_web")}),(0,h.jsx)(s.Y8,{value:c.iu.Open,extra:(0,h.jsx)("div",{style:{height:"100%"},children:(0,h.jsx)("div",{children:t("cc_pc_material_visual_effect_publish_creation_type_free_desc_web")})}),children:t("cc_pc_material_visual_effect_publish_creation_type_free_web")})]}),(0,h.jsx)("div",{className:d,ref:b,onClick:()=>{const e=document.getElementById("formAreaWrapper");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},children:(null==n?void 0:n.postChannel)===c.iu.Targeted&&(0,h.jsx)(s.Ph,{maxHeight:180,value:null==n?void 0:n.activityId,loading:m,placeholder:t("cc_pc_material_visual_effect_publish_creation_type_event_select_web"),className:g,optionList:v,renderOptionItem:t=>{var n;const{label:l,desc:s,value:i,onClick:c}=t,r=i===(null===(n=e.value)||void 0===n?void 0:n.activityId);return(0,h.jsxs)("div",{className:"custom-select-option",onClick:e=>{null==c||c(e),null==x||x(i)},style:{maxWidth:w.width-12},children:[r&&(0,h.jsx)(a.r,{className:"checkedIcon"}),!r&&(0,h.jsx)("div",{className:"placeholder"}),l]})}})})]})}},54970:(e,t,n)=>{n.d(t,{R:()=>v});var l=n(18751),s=n.n(l),i=n(79337),a=n(42716),c=n(48055),r=n(5065),o=n(37964),u=n(38432);const d="root-HoHMo9",g="disabled-VOcU3h",h="help-Q9jnn3";var p=n(72322);const v=(0,i.Q2)((e=>{const{t}=(0,a.$)(),{value:n,onChange:l,sendLogService:v,disabledTooltip:m,tooltip:_,...f}=e,{className:b,disabled:w}=f,x=r.YW.AuthorAgreement,{showModal:y,showModalWithoutReview:Z}=(0,r.ZP)({handleBtnText:t("pc_template_authorize_confirm_web"),closeIcon:!0,protocol:x,needReview:!0,onOk:()=>{(0,u.F)(x),null==l||l(!0),v.sendSubscriptionStatementLog({action:"confirm",entry_from:"checkbox"}),v.sendClickSubscriptionCheckboxLog(!0)}}),{handleMouseEnter:C}=(0,o.w)({cursor:"not-allowed",content:m}),{handleMouseEnter:k}=(0,o.w)({content:_}),{handleMouseOver:j}=(0,o.S)({checkIsTarget:e=>null!==e.closest(".semi-checkbox-addon")}),S=s()(f.className);return(0,p.jsxs)("div",{className:s()(d,w&&g,b),onMouseEnter:e=>{w&&m?C(e):_&&k(e)},onMouseOver:w&&m?void 0:j,children:[(0,p.jsx)(i.XZ,{...f,className:S,checked:n,onChange:e=>{const t=Boolean(e.target.checked);if(t&&!(0,u.K)(x))return y(),v.sendSubscriptionStatementLog({action:"show",entry_from:"checkbox"}),void v.sendPageActionLog({action:"choose_subscription_authorize"});v.sendClickSubscriptionCheckboxLog(t),null==l||l(t)},children:t("cc_pc_material_visual_effect_publish_authorize_desc_web")}),(0,p.jsx)(c.r,{className:h,onClick:()=>{Z(),v.sendSubscriptionStatementLog({action:"show",entry_from:"question_mark"}),v.sendPageActionLog({action:"click_subscription_detail"})}})]})}))},46350:(e,t,n)=>{n.d(t,{E:()=>i});var l=n(88154),s=n(48647);class i{constructor(e){(0,l.Z)(this,"_effectType",void 0),(0,l.Z)(this,"_isInitialized",!1),(0,l.Z)(this,"authConfig",{mustPaidAuth:!1,mustCommerceAuth:!1}),(0,l.Z)(this,"resourceCommonConfig",{maxTitleLen:0}),this._effectType=e,this.init()}async init(){{const e=await(0,s.A1)({effect_type:this._effectType});this.authConfig={mustPaidAuth:e.auth_config.must_paid_auth,mustCommerceAuth:e.auth_config.must_commerce_auth}}this._isInitialized=!0}}},73858:(e,t,n)=>{n.d(t,{r:()=>a});var l,s=n(18571);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},i.apply(null,arguments)}const a=e=>s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none","aria-hidden":"true",viewBox:"0 0 24 24"},e),l||(l=s.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.352 4.265a1.5 1.5 0 0 1 .383 2.087l-10 14.5a1.5 1.5 0 0 1-2.334.169l-6.5-7a1.5 1.5 0 0 1 2.198-2.042l5.228 5.63 8.938-12.96a1.5 1.5 0 0 1 2.087-.384",clipRule:"evenodd"})))},80697:(e,t,n)=>{n.d(t,{Z:()=>l});const l={tag:"tag-ZaY7YS",selected:"selected-umR1Vs",disabled:"disabled-A37DzB"}},6059:(e,t,n)=>{n.d(t,{Z:()=>l});const l={block:"block-smxiey",title:"title-aqS4Cg",content:"content-IyBLdN",loading:"loading-QuFv_G",text:"text-ukrQOj"}},95331:(e,t,n)=>{n.d(t,{Z:()=>l});const l={tagSelect:"tagSelect-KEPqcU",dropItem:"dropItem-bpnHuZ",suggestListDropdown:"suggestListDropdown-fV0lMc"}}}]);