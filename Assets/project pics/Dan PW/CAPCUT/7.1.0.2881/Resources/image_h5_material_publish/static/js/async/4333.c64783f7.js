"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[4333],{88256:(e,t,n)=>{n.d(t,{c:()=>y});var s=n(88154),i=n(18751),r=n.n(i),a=n(18774);const o=new class{constructor(){(0,s.Z)(this,"documentLoadPromise",this.initDocumentLoadPromise())}initDocumentLoadPromise(){return new Promise((e=>{if("complete"===document.readyState)return void e();const t=()=>{e(),document.removeEventListener("load",t)};document.addEventListener("load",t)}))}async preloadImagesOnIdle(e){await this.documentLoadPromise;const t=window.requestIdleCallback||window.setTimeout;for(const n of e)await new Promise((e=>{t((()=>{const t=new Image;t.src=n.src,t.onload=()=>e(),t.onerror=()=>e(),window.setTimeout(e,3e3)}))}))}},l="root-VcsGtp";var c=n(72322);const d=e=>{const{className:t,size:n=64}=e;return(0,c.jsx)("img",{src:a.RO,className:r()(t,l),style:{height:n,width:n}})};o.preloadImagesOnIdle([{src:a.RO}]);var h=n(42716),u=n(51091),p=n(79292),m=n(70126);const g="root-LGkvBj",f="panel-fE_gjU",v="icon-jLOlfC",x="text-qnYZsw",w=()=>{const{t:e}=(0,h.$)();return(0,c.jsxs)("div",{className:f,children:[(0,c.jsx)(d,{className:v}),(0,c.jsx)("div",{className:x,children:e("pc_sticker_load_web")})]})};const y=new class{constructor(){(0,s.Z)(this,"destroyLoading",null)}async show(e){try{const t=e();this.showImpl(),await t}finally{this.hide()}}hide(){var e;null===(e=this.destroyLoading)||void 0===e||e.call(this),this.destroyLoading=null}showImpl(){if(this.destroyLoading)return;const e=document.createElement("div");e.className=g,document.body.appendChild(e);const t=(0,m.createRoot)(e);this.destroyLoading=()=>{e.remove(),Promise.resolve().then((()=>t.unmount()))},t.render((0,c.jsx)(u.a,{i18n:p.I18n.i18nInstance.instance,children:(0,c.jsx)(w,{})}))}}},51509:(e,t,n)=>{n.d(t,{Y:()=>l});var s=n(18751),i=n.n(s),r=n(17150),a=n(43322),o=n(72322);const l=e=>{const{className:t,status:n,children:s}=e;return(0,o.jsxs)("div",{className:i()(t,a.Z.card),children:["loading"===n?(0,o.jsx)(r.a,{size:18},n):(0,o.jsx)(r.a,{size:18,circleColor:"#c30000",animated:!1},n),s&&(0,o.jsx)("div",{className:a.Z.text,children:s})]})}},17150:(e,t,n)=>{n.d(t,{a:()=>c});var s=n(18571),i=n(18751),r=n.n(i),a=n(59053),o=n(92475),l=n(72322);const c=(0,s.memo)((e=>{const{className:t,size:n,circleColor:s="var(--black-4)",arcColor:i="var(--white-0)",animated:c=!0}=e;return(0,l.jsx)(a.r,{className:r()(t,o.Z.root,c&&o.Z.animated),width:n,height:n,style:{"--heycan-loading-circle-color":s,"--heycan-loading-arc-color":i}})}))},13199:(e,t,n)=>{n.d(t,{t:()=>h});var s,i=n(18751),r=n.n(i),a=n(18571);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},o.apply(null,arguments)}const l=e=>a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:34,height:28,fill:"none",viewBox:"0 0 34 28"},e),s||(s=a.createElement("path",{fill:"#fff",fillOpacity:.09,d:"M33.71 6.32V1.11l-6.268 3.291v-.196c0-2.076-1.489-3.33-3.643-3.33H3.935C1.662.875.292 2.129.292 4.205v5.25L9.067 14 .291 18.584v5.25c0 2.037 1.371 3.291 3.643 3.291H23.8c2.154 0 3.643-1.254 3.643-3.291v-.274l6.269 3.33V21.6L19.136 14zM14.083 16.587l10.774 5.642H3.27zM24.778 5.773l-10.695 5.602L3.268 5.773z"}))),c="root-I5KeTG";var d=n(72322);const h=e=>{const{className:t,iconWidth:n}=e,s=Math.round(.785*n);return(0,d.jsx)("div",{className:r()(t,c),children:(0,d.jsx)(l,{height:s,width:n})})}},71410:(e,t,n)=>{n.d(t,{J:()=>l});var s=n(18571);const i="running-h0Lfzw";var r=n(72322);const a=26,o=e=>{const{text:t,gap:n,speed:o=a}=e,l=(0,s.useRef)(null),c=(0,s.useRef)(null),[d,h]=(0,s.useState)(0);(0,s.useEffect)((()=>{const e=l.current,t=c.current;if(!e||!t)return;const n=e.getBoundingClientRect().left,s=t.getBoundingClientRect().left;h(s-n)}),[]);const u={"--heycan-marquee-loop-text-animation-transform-to":`translateX(${-d}px)`,"--heycan-marquee-loop-text-animation-duration":`${(d/o).toFixed(2)}s`};return(0,r.jsxs)("span",{ref:l,className:d?i:"",style:u,children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)("span",{ref:c,style:{marginInlineStart:n},children:t})]})},l=e=>{const{text:t,getEllipsisDOM:n}=e,[i,a]=(0,s.useState)(!1);return{isMarqueeLoopRunning:i,setIsMarqueeLoopRunning:e=>{const t=null==n?void 0:n();t&&t.offsetWidth>=t.scrollWidth||a(e)},reactNode:i?(0,r.jsx)(o,{...e}):(0,r.jsx)("span",{children:t})}}},76664:(e,t,n)=>{n.d(t,{Z:()=>s,d:()=>i});let s=function(e){return e[e.Unsigned=0]="Unsigned",e[e.Signing=1]="Signing",e[e.Signed=2]="Signed",e}({}),i=function(e){return e.BusinessArtist="business_artist",e}({})},47791:(e,t,n)=>{n.d(t,{r:()=>u});var s=n(88154),i=n(60963),r=n(79337),a=n(79292),o=n(76892),l=n(98722),c=n(83305),d=n(12803);class h{constructor(){(0,s.Z)(this,"fileList",[]),(0,i.ky)(this)}addFiles(e){e.some((e=>e.size>10485760))?r.FN.error(a.I18n.t("pc_template_authorize_exceed_size_web")):(e.forEach((e=>{this.fileList.push({id:(0,o.V)(),file:e,uri:"",progress:0})})),this.fileList.slice(-e.length).forEach((e=>this.uploadOneFile(e))))}async uploadOneFile(e){try{const{uploadResult:t}=await(0,l.ws)({file:e.file,onProgress:(0,i.aD)((({total:t,loaded:n})=>{e.progress=n/t||0}))});await(new d.B).timeout(500),(0,i.z)((()=>{e.uri=t.Uri}))}catch(t){r.FN.error(a.I18n.t("pc_template_authorize_upload_failed_web")),this.deleteFile(e.id),(0,c.RF)("[ThirdPartyAuthFileUploadService] file upload failed",t,{id:e.id,fileName:e.file.name})}}deleteFile(e){this.fileList=this.fileList.filter((t=>t.id!==e))}get isAllUploaded(){return this.fileList.every((e=>e.uri))}addOnlineFiles(e){e.forEach((e=>this.fileList.push({id:(0,o.V)(),file:e.file,uri:e.uri,progress:100})))}}class u{constructor(e){this.props=e,(0,s.Z)(this,"map",new Map)}getKey(e){var t,n,s;return null!==(t=null===(n=(s=this.props).getKey)||void 0===n?void 0:n.call(s,e))&&void 0!==t?t:String(e)}get(e){const t=this.getKey(e);return this.map.get(t)}ensure(e){const t=this.getKey(e);let n=this.map.get(t);return n||(n=new h,this.map.set(t,n)),n}getUploadedFiles(e){const t=this.getKey(e),n=this.map.get(t);return(null==n?void 0:n.fileList.filter((e=>e.uri)))||[]}}},43130:(e,t,n)=>{n.d(t,{v:()=>O});var s=n(18571),i=n(65625),r=n(18751),a=n.n(r),o=n(91720);const l="root-uLKAXM",c="title-zTU1ta",d="titleText-IBFt9m",h="icon-_YRcF7",u="rotate-biqGJK",p="bottom-line-nHX1wW",m="contentWrapper-Nsy6v8",g="content-nUJ6jp";var f=n(72322);const v=({visible:e,className:t,contentClassName:n,onChange:i,title:r,children:v})=>{const[x,w]=(0,s.useState)(e),[y,C]=(0,s.useState)(e?null:0),_=(0,s.useRef)(null),j=e=>{if(e!==x){var t,n;const e=null!==(t=null===(n=_.current)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==t?t:null;C(e)}w(e)};(0,s.useLayoutEffect)((()=>{x||requestAnimationFrame((()=>C(0)))}),[x]);return(0,s.useLayoutEffect)((()=>{j(e)}),[e]),(0,f.jsxs)("div",{className:a()(t,l),children:[(0,f.jsxs)("div",{className:c,onClick:()=>{j(!x),null==i||i(!e)},children:[(0,f.jsx)(o.Z,{className:a()(h,{[u]:x})}),(0,f.jsx)("div",{className:d,children:r})]}),(0,f.jsxs)("div",{className:m,style:{height:null!=y?y:"auto"},onTransitionEnd:()=>x&&C(null),children:[(0,f.jsx)("div",{className:p}),(0,f.jsx)("div",{ref:_,className:a()(n,g),children:v})]})]})};var x;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},w.apply(null,arguments)}const y=e=>s.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:8,height:6,fill:"none",viewBox:"0 0 8 6"},e),x||(x=s.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m1 3 2.143 2L7 1"})));var C;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_.apply(null,arguments)}const j=e=>s.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",width:6,height:6,fill:"none",viewBox:"0 0 6 6"},e),C||(C=s.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m1 1 4 4M5 1 1 5"}))),k="root-ZH_C8Z",b="icon-box-FdFonZ",T="dot-VyF22G",S="word-oYDchC",N="error-NPw70q",E=({className:e,status:t,text:n})=>{const s=a()(k,e);return"init"===t?(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("div",{className:b,children:(0,f.jsx)("span",{className:T})}),(0,f.jsx)("div",{className:S,children:n})]}):"error"===t?(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("div",{className:b,children:(0,f.jsx)(j,{className:N})}),(0,f.jsx)("div",{className:a()([S,N]),children:n})]}):(0,f.jsxs)("div",{className:s,children:[(0,f.jsx)("div",{className:b,children:(0,f.jsx)(y,{})}),(0,f.jsx)("div",{className:S,children:n})]})};var I=n(96452);const F="root-peWMdc",L="wrapper-W8rapW",D="download-MCE7pb",R="instruction-SvWEjU",O=(0,i.Pi)((e=>{const{className:t,groups:n,initGroup:i,activeGroup:r,resetExpandedGroupKey:o,getStatus:l,onClickGroupLink:c}=e,[d,h]=(0,s.useState)([i]),u=(0,s.useRef)(!1);(0,s.useLayoutEffect)((()=>{o&&u.current&&h([r])}),[o]),(0,s.useEffect)((()=>{u.current=!0}),[]);return(0,f.jsx)("div",{className:a()(t,F),children:(0,f.jsx)("div",{className:L,children:n.map((e=>(0,f.jsxs)(v,{title:e.title,visible:d.includes(e.key),onChange:()=>{return t=e.key,void(d.includes(t)?h(d.filter((e=>e!==t))):h([...d,t]));var t},children:[e.link&&(0,f.jsx)("div",{className:D,onClick:()=>{var t,n;return n=null===(t=e.link)||void 0===t?void 0:t.src,null==c||c(),void(n&&(0,I.Z)({url:n}))},children:e.link.text}),e.instructions.map((t=>{var n;return(0,f.jsx)(E,{className:R,status:null!==(n=t.status)&&void 0!==n?n:l(t,e),text:t.title},t.key)}))]},e.key)))})})}))},18329:(e,t,n)=>{n.d(t,{Y:()=>f});var s=n(18751),i=n.n(s),r=n(42716),a=n(13199);const o="root-QyKpzG",l="border-igpdqP",c="content-i0g8M8",d="invalid-E06Qru",h="selected-vCvIxt",u="icon-uXwoK2",p="customIcon-BcMgG4",m="isUpdatingHint-TmA7x3";var g=n(72322);const f=({src:e,className:t,onClick:n,onContextMenu:s,isSelected:f,isInvalid:v,isUpdating:x=!1,size:w,customRenderIcon:y})=>{const{t:C}=(0,r.$)();return(0,g.jsxs)("div",{className:i()(t,o,v&&d,f&&h),style:{width:w,height:w},onClick:n,onContextMenu:s,children:[(0,g.jsxs)("div",{className:c,children:[y?(0,g.jsx)("div",{className:p,children:y()}):e?(0,g.jsx)("img",{className:u,src:e}):(0,g.jsx)(a.t,{className:u,iconWidth:Math.round(.41*w)}),x&&(0,g.jsx)("div",{className:m,children:C("pc_sticker_upgrading_web")})]}),(0,g.jsx)("div",{className:l})]})}},21418:(e,t,n)=>{n.d(t,{O:()=>w});var s,i,r=n(65625),a=n(18751),o=n.n(a),l=n(79337),c=n(42716),d=n(51509),h=n(18571);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(null,arguments)}const p=e=>h.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none",viewBox:"0 0 30 30"},e),s||(s=h.createElement("rect",{width:30,height:30,fill:"#00C1CD",rx:15})),i||(i=h.createElement("path",{stroke:"#FAFAFA",strokeLinecap:"square",strokeWidth:1.875,d:"M9.001 15h12M15.001 21.001v-12"})));var m=n(37964);const g={root:"root-rylHEj","root--small":"root--small-aQdS7l",rootSmall:"root--small-aQdS7l",disabled:"disabled-UDlazI",box:"box-ZWa78Y",dragging:"dragging-vqbsIa",largeBox:"largeBox-WcUW_R",addIcon:"addIcon-qWe0Z9",titleContainer:"titleContainer-h3CoYT",title:"title-vs2_SI",subTitle:"subTitle-cCG07G",smallBox:"smallBox-gFzkvY"};var f=n(72322);const v=(0,h.memo)((({className:e,size:t,title:n,draggingTitle:s="",draggingDisabled:i,subTitle:r="",disabled:a,disabledTooltip:l="",onDrop:c,onClick:d})=>{const[u,v]=(0,h.useState)(!1),x=u?s:n,w=e=>{i||v(e)},{handleMouseEnter:y}=(0,m.w)({content:l,cursor:"not-allowed"}),C=e=>t=>{a||(t.preventDefault(),t.stopPropagation(),null==e||e(t))};return(0,f.jsx)("div",{className:o()(e,g.root,g[`root--${t}`],a&&g.disabled,u&&g.dragging),onDragEnter:C((()=>!u&&w(!0))),onDragOver:C(),onDragLeave:C((e=>{e.currentTarget===e.target&&u&&w(!1)})),onDrop:C((e=>{w(!1),c(e)})),onMouseEnter:a&&null!=l&&l.length?y:void 0,children:"large"===t?(0,f.jsxs)("div",{className:o()(g.box,g.largeBox),onClick:a?void 0:d,children:[(0,f.jsx)(p,{className:g.addIcon}),(0,f.jsxs)("div",{className:g.titleContainer,children:[(0,f.jsx)("div",{className:g.title,children:x}),(0,f.jsx)("div",{className:g.subTitle,children:r})]})]}):(0,f.jsxs)("div",{className:o()(g.box,g.smallBox),onClick:a?void 0:d,children:[(0,f.jsx)(p,{className:g.addIcon}),(0,f.jsx)("span",{className:g.title,children:x})]})})})),x={root:"root-qiLomF",uploadArea:"uploadArea-CUnzAK",uploadAreaWithoutStickers:"uploadAreaWithoutStickers-lupETK",retryText:"retryText-CmFKf2",mainForm:"mainForm-QtsMBI",importArea:"importArea-t3T7nf",formArea:"formArea-cY23J0"};function w(e){const{className:t,layout:n,setFormApi:s,renderImportArea:i,renderFormArea:r,onRetry:a,importLoadingText:h,scrollAreaRef:u,uploadAreaProps:p}=e,{titleForUploadArea:m,titleForMainForm:g,...w}=p,{t:y}=(0,c.$)();return(0,f.jsx)(l.Form,{className:o()(t,x.root),getFormApi:s,children:"loading"===n?(0,f.jsx)(d.Y,{status:"loading",children:h||y("pc_filter_material_loading")}):"error"===n?(0,f.jsx)(d.Y,{status:"error",children:y("pc_sticker_abnormal_{X}_web",{X:(0,f.jsx)("span",{className:x.retryText,onClick:a,children:y("pc_sticker_retry_web")},"X")})}):"mainForm"===n?(0,f.jsxs)("div",{className:x.mainForm,children:[(0,f.jsx)("div",{className:x.importArea,ref:u,children:i((0,f.jsx)(v,{className:x.uploadArea,size:"small",title:g,...w}))}),(0,f.jsx)("div",{className:x.formArea,id:"formAreaWrapper",children:r()})]}):(0,f.jsx)(v,{className:x.uploadAreaWithoutStickers,size:"large",title:m,...w})})}(0,r.Pi)((e=>w(e)))},67509:(e,t,n)=>{n.d(t,{q:()=>g});var s=n(18571),i=n(79337),r=n(54275),a=n(42716),o=n(61843);const l="modal-uSGTo3",c="title-h7CfEL",d="detail-JFW1Vi",h="retryText-b6tno6",u="progress-WRObzP",p="cancelButton-zcznQe";var m=n(72322);const g=(0,s.forwardRef)(((e,t)=>{const{uploadStats:n,onRetryUpload:g,onCancel:f,onShowUploadFail:v,onPromptConfirmToCancel:x}=e,{pending:w,succeeded:y,failed:C,uninited:_=0}=n,j=w+y+C,k=Math.floor(y/j*100)||0,{t:b}=(0,a.$)(),[T,S]=(0,s.useState)(!1),N=w<=_&&C>0,E=(0,r.Z)((async()=>{try{return await o.Z.warn({mainText:b("pc_stickers_release_confirm_delete_web"),subText:b("pc_stickers_release_uploading_web"),confirmBtnText:b("pc_stickers_release_confirm_quit_web"),cancelBtnText:b("pc_stickers_release_cancel_web")})===o.L.Confirm}catch{return!1}})),I=(0,r.Z)((async()=>{if(!N){const e=E();x(e);if(!await e)return}f(),S(!1)})),F=()=>(0,m.jsx)(i.zx,{className:p,theme:"solid",type:"secondary",onClick:I,children:b("pc_stickers_release_cancel_web")});return(0,s.useImperativeHandle)(t,(()=>({show:()=>S(!0),hide:()=>S(!1)}))),(0,s.useEffect)((()=>{T&&N&&v()}),[T&&N]),(0,m.jsx)(i.u_,{visible:T,className:l,header:null,footer:null,width:"auto",centered:!0,maskClosable:!1,closable:!1,children:N?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:c,children:b("pc_stickers_release_network_anomaly_web")}),(0,m.jsx)("div",{className:d,children:(0,m.jsx)("span",{children:b("pc_stickers_release_upload_error_again_web",{X:(0,m.jsx)("span",{className:h,onClick:g,children:b("pc_sticker_retry_web")},"X")})})}),(0,m.jsx)(i.Ex,{className:u,percent:100,size:"small",stroke:"var(--yellow-0)"}),F()]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:c,children:b("pc_stickers_release_uploading_material_web")}),(0,m.jsx)("div",{className:d,children:b("pc_stickers_release_upload details_web",{X:y,Y:j,Z:k})}),(0,m.jsx)(i.Ex,{className:u,percent:k,size:"small",stroke:"var(--cyan-2)"}),F()]})})}))},47573:(e,t,n)=>{n.d(t,{G:()=>a});var s=n(60963),i=n(20165),r=n(39317);function a(e){const t=(0,r.e)({watch:()=>e.watch()&&!n.isPromptingConfirmToCancel}),n=(0,i.fv)((()=>({start:()=>t.start(),stop:()=>t.stop(),isPromptingConfirmToCancel:!1,handlePromptConfirmToCancel:async e=>{n.isPromptingConfirmToCancel=!0;const i=await e;(0,s.z)((()=>{i&&t.stop(),n.isPromptingConfirmToCancel=!1}))}})));return n}},57494:(e,t,n)=>{n.d(t,{I:()=>l});var s=n(88154),i=n(83305),r=n(42245),a=n(76664),o=n(48647);class l{constructor(e){this.props=e,(0,s.Z)(this,"signCode",null),(0,s.Z)(this,"isRefreshing",!1),(0,s.Z)(this,"fetchRegionDataPromise",null),(0,s.Z)(this,"fetchRegionDataImpl",(async()=>{const[{country_code_list:e},{doc_type_info:t},n]=await Promise.all([(0,r.Jr)({sign_scene:this.props.signScene}),(0,r.Yg)(),(0,o.vW)()]);return{country_code_list:e,doc_type_info:t,region:n}}))}async init(){this.refreshSignInfo().catch((()=>{})),this.fetchRegionData().catch((()=>{}))}async refreshSignInfo(){const{signScene:e}=this.props;try{this.isRefreshing=!0;const{sign_status_infos:t=[]}=await(0,r.x3)(),n=t.find((t=>t.sign_scene===e)),s=(null==n?void 0:n.sign_code)||a.Z.Unsigned;return this.signCode=s,s}catch(t){throw(0,i.RF)("[AuthorSignService] refreshSignInfo failed",t,{signScene:e}),t}finally{this.isRefreshing=!1}}async checkAuthorHasSigned(){if(this.signCode===a.Z.Signed)return!0;return await this.refreshSignInfo()===a.Z.Signed}fetchRegionData(){return this.fetchRegionDataPromise||(this.fetchRegionDataPromise=this.fetchRegionDataImpl().catch((e=>{throw this.fetchRegionDataPromise=null,e}))),this.fetchRegionDataPromise}async createContract(e){const t=await(0,r.OP)({...e,sign_scene:this.props.signScene});return this.signCode=a.Z.Signing,this.refreshSignInfo(),t}}},33452:(e,t,n)=>{n.d(t,{Pk:()=>c,uY:()=>u,md:()=>p});var s=n(88154),i=n(32547),r=n(7142),a=n(77517);var o=n(83305),l=n(46026);const c="fmp";class d extends((()=>a.EventEmitter)()){constructor(){super(),(0,s.Z)(this,"category",{}),(0,s.Z)(this,"customTiming",{}),(0,s.Z)(this,"hasReportedFmp",!1),(0,s.Z)(this,"messageChannel",new MessageChannel),(0,s.Z)(this,"afterFramePromise",null),this.messageChannel.port2.onmessage=()=>this.emit("_messagechannel")}updateCategory(e){this.category={...e,...this.category}}getCategoryToReport(){return{scene:"success",...this.category}}addTiming(e,t=performance.now()){this.customTiming[e]||(this.customTiming[e]=t)}addSetStateTiming(e,t){this.customTiming[e]||(this.addTiming(`${e}-setState`),this.addRenderTiming(e),t&&this.updateCategory(t))}afterFrame(){return this.afterFramePromise||(this.afterFramePromise=new Promise((e=>{window.requestAnimationFrame((()=>{this.once("_messagechannel",(()=>{this.afterFramePromise=null,e()})),this.messageChannel.port1.postMessage(null)}))}))),this.afterFramePromise}async addRenderTiming(e,t){this.customTiming[e]||("visible"===document.visibilityState&&await this.afterFrame(),this.addTiming(e),t&&this.updateCategory(t),e!==c||this.hasReportedFmp||this.report())}report(){var e;const t=(0,i.Z)(performance.timing,["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"]),n=t.navigationStart,s=this.getMetrics(n,t);Object.assign(s,this.customTiming);const a=this.getCategoryToReport();(0,o.hC)({module:"fmp",scene:a.scene,categories:a,metrics:s}),(0,l.g)({eventName:"heycan_performance_timing",params:{pid:null===(e=r.Z.config)||void 0===e||null===(e=e.call(r.Z))||void 0===e?void 0:e.pid,...a,...s}}),this.hasReportedFmp=!0,this.emit("fmp",{startTime:n,category:a})}getMetrics(e,t){const n={};return Object.keys(t).forEach((s=>{t[s]&&(n[s]=t[s]-e)})),n}}let h=null;function u(){return h||(h=new d),h}function p(){return h}},18552:(e,t,n)=>{n.d(t,{w:()=>h});var s=n(88154),i=n(79292),r=n(79337),a=n(88256),o=n(83305),l=n(34864),c=n(48647),d=n(42461);class h{constructor(){(0,s.Z)(this,"objectUploadType",c.AJ.Object),(0,s.Z)(this,"uploadConfigsCache",new l.C({refresh:async()=>{const[e,t,n]=await Promise.all([this.getUploadConfigByScene(c.AJ.Video),this.getUploadConfigByScene(c.AJ.Image),this.getUploadConfigByScene(this.objectUploadType)]),s={videoUploadConfig:e,imageUploadConfig:t,objectUploadConfig:n},i=new Date(t.currentTime).getTime();return{data:s,refreshTime:i,expireTime:Math.min(new Date(t.expiredTime).getTime(),i+18e5),silentRefreshTime:i+6e5}}}))}useVodObject(){this.objectUploadType=c.AJ.VodObject}async getUploadConfigs(e){try{return await this.uploadConfigsCache.get()}catch(t){throw(0,o.RF)(`[UploadConfigService] getUploadConfigs failed for ${e}`,t,{action:e}),t}}updateCache(){return this.uploadConfigsCache.update()}async refreshUploadConfigsIfNeeded({when:e,logPrefix:t,errorMsg:n=i.I18n.t("pc_sticker_failed_retry_web")}){if(this.uploadConfigsCache.isExpired())return a.c.show((async()=>{try{await this.uploadConfigsCache.update()}catch(s){throw r.FN.error(n),(0,o.RF)(`${t} refreshUploadConfigs failed when ${e}`,s,{action:e}),s}}))}async getUploadConfigByScene(e){const t=await(0,c._M)({scene:e});if(!t.upload_domain)throw new d.w("upload_domain is empty",{scene:e});return{currentTime:t.current_time,expiredTime:t.expired_time,accessKey:t.access_key_id,secretKey:t.secret_access_key,sessionToken:t.session_token,hostDomain:t.upload_domain,nameSpace:2===t.space_type?"":t.space_name,serviceId:2===t.space_type?t.space_name:"",region:t.region}}}},46026:(e,t,n)=>{n.d(t,{g:()=>i});var s=n(84900);function i(e){console.log("[sendLog]",e.eventName,e.params),(0,s.Z)(e)}},15621:(e,t,n)=>{n.d(t,{l:()=>i});var s=n(88154);class i{constructor(){(0,s.Z)(this,"lockedKey",new Set)}async lock(e,t){if(this.lockedKey.has(e))return null;this.lockedKey.add(e);try{return await t()}finally{this.lockedKey.delete(e)}}}},61843:(e,t,n)=>{n.d(t,{L:()=>r,Z:()=>a});var s=n(47920);var i=function(e){return e[e.Unknown=0]="Unknown",e[e.InfoDialog=1]="InfoDialog",e[e.AlertDialog=2]="AlertDialog",e}(i||{});let r=function(e){return e.Unknown="Unknown",e.Confirm="confirm",e.Cancel="cancel",e.Optional="optional",e.CheckboxClick="checkboxClick",e}({});class a{static async callDialog(e,t){const{onConfirm:n,onCancel:i,...a}=t,o={id:"pc_heycan",type:e,...a},l=await(0,s.ZP)(o);let c=r.Cancel;return c=void 0!==l.data?l.data.actionType:l.actionType,c===r.Confirm&&(null==n||n()),c===r.Cancel&&(null==i||i()),c}static async confirm(e){return this.callDialog(i.InfoDialog,e)}static async warn(e){return this.callDialog(i.AlertDialog,e)}}},34864:(e,t,n)=>{n.d(t,{C:()=>i});var s=n(88154);class i{constructor(e){var t;this.options=e,(0,s.Z)(this,"cacheData",null),this.cacheData=null!==(t=this.options.initCacheData)&&void 0!==t?t:null}async get(){if(this.cacheData&&!this.isExpired()){const{data:e}=this.cacheData;return this.silentRefreshIfNeeded(),e}return this.update()}getSync(){var e,t;return null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null}isExpired(){if(!this.cacheData)return!0;const{expireTime:e,refreshTime:t}=this.cacheData,n=Date.now();return n<t||e<=n}needSilentRefresh(){if(!this.cacheData)return!0;const{silentRefreshTime:e}=this.cacheData;return e<=Date.now()}async silentRefreshIfNeeded(){this.needSilentRefresh()&&await this.update()}async update(){var e,t;const{data:n,expireTime:s,silentRefreshTime:i}=await this.options.refresh(null!==(e=null===(t=this.cacheData)||void 0===t?void 0:t.data)&&void 0!==e?e:null);return this.cacheData={data:n,expireTime:s,silentRefreshTime:i,refreshTime:Date.now()},n}}},56230:(e,t,n)=>{n.d(t,{_:()=>a});var s=n(23818),i=n(54275),r=n(42716);const a=()=>{const{i18n:e}=(0,r.$)();return{getDisplayLength:(0,i.Z)((t=>(0,s.xB)({len:t,i18n:e})))}}},39317:(e,t,n)=>{n.d(t,{e:()=>a});var s=n(60963),i=n(20165),r=n(18571);const a=e=>{const t=(0,i.fv)((()=>({disposer:null,resolve:null,get watchResult(){return e.watch()},start:()=>(t.stop(),new Promise((e=>{t.resolve=e,t.disposer=(0,s.EH)((()=>{t.watchResult&&(e(),t.stop())}))}))),stop(){var e;null===(e=t.disposer)||void 0===e||e.call(t),t.disposer=null,t.resolve=null}})));return(0,r.useEffect)((()=>()=>t.stop()),[]),t}},90856:(e,t,n)=>{n.d(t,{d:()=>r});var s=n(18571),i=n(33452);function r(){const e=(0,s.useRef)(!1);var t;e.current||(e.current=!0,null===(t=(0,i.md)())||void 0===t||t.addRenderTiming("renderInitPage"))}},62293:(e,t,n)=>{n.d(t,{F:()=>a});var s=n(18571),i=n(52272),r=n(83305);const a=e=>{(0,s.useEffect)((()=>{(0,i.Td)({title:e.title}),(0,r.$G)({pid:e.pid})}),[])}},66795:(e,t,n)=>{n.d(t,{u:()=>r});var s=n(54275),i=n(18571);function r(e){const t=(0,s.Z)((()=>e.getInputElem())),n=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{const e=t();n.current&&e&&([e.selectionStart,e.selectionEnd]=n.current,n.current=null)})),{saveSelectionIfNeeded:e=>{const s=t();null!=(null==s?void 0:s.selectionStart)&&null!=s.selectionEnd&&e!==s.value&&(n.current=[Math.min(e.length,s.selectionStart),Math.min(e.length,s.selectionEnd)])}}}},13928:(e,t,n)=>{function s(e,t){return t[0]<=e&&e<=t[1]}n.d(t,{aF:()=>h});const i=[[8960,9215],[9728,55215],[65280,65519]];function r(e){const t=e.charCodeAt(0);return e.length>1||i.some((e=>s(t,e)))}const a=8205,o=[127462,127487],l=[[8419,8419],[65024,65039],[127995,127999],[917536,917631],[768,879],[3633,3633],[3636,3642],[3655,3662]];function c(e,t){const n=e.normalize(),i=[];let r=0,c=0,d="";for(;r<n.length;){const e=n.codePointAt(r),h=e>65535?2:1,u=n.slice(r,r+h),p=i.length-1,m=p>=0?i[p]:null;if(p>=0&&(e===a||c===a||s(e,o)&&s(c,o)&&m===d||l.some((t=>s(e,t))))&&(i[p]+=u),(p<0||m===i[p])&&u){if(null!=t&&t.maxLength&&i.length>=t.maxLength)return i;i.push(u)}c=e,d=u,r+=h}return i}function d(e,t,n){let s=0,i=0;for(;i<e.length;){const a=e[i],o=r(a)?2:1;if(s+=o,s>t&&i>0){i-=1,s-=o;break}if(n(a),s>=t)break;i+=1}return{segIndex:i,count:s}}function h(e,t){if(2*e.length<=t)return e;const n=c(e,{maxLength:t});let s="";return d(n,t,(e=>s=`${s}${e}`)),s}},98722:(e,t,n)=>{n.d(t,{ws:()=>u});var s=n(50140),i=n.n(s),r=n(79292),a=n(71157),o=n(1234),l=n(42461),c=n(48647);let d=function(e){return e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.Object=9]="Object",e}({});const h={[d.Video]:"video",[d.Image]:"image",[d.Object]:"object"};const u=e=>new Promise((async(t,n)=>{const{file:s,onProgress:u,onSuccess:p,onError:m,getUploadToken:g}=e,f=(v=s.type).includes("image")?d.Image:v.includes("video")?d.Video:d.Object;var v;const x=new Error("").stack,w=r.I18n.t("pc_upload_fail_web");let y=new l.w("upload failed: getUploadConfig error",{displayMessage:w,uploadType:f,uploadStack:x});const C=await async function(e){var t;const{uploadType:n,getUploadToken:s}=e,i=await(null!==(t=null==s?void 0:s())&&void 0!==t?t:(0,c._M)({scene:n})),r={CurrentTime:i.current_time,ExpiredTime:i.expired_time,SessionToken:i.session_token,AccessKeyId:i.access_key_id,SecretAccessKey:i.secret_access_key};return{config:{userId:o.$.userInfo.uid,appId:Number(a.appModel.appInfo.appID),region:i.region,videoHost:`https://${i.upload_domain}`,imageHost:`https://${i.upload_domain}`,useServerCurrentTime:!0,imageConfig:{serviceId:i.space_name},videoConfig:{spaceName:i.space_name,processAction:[{name:"GetMeta"},{name:"Snapshot",input:{SkipBlackDetect:!1,SnapshotTime:0}}]},objectConfig:{spaceName:1===i.space_type?i.space_name:void 0,serviceId:2===i.space_type?i.space_name:void 0}},stsToken:r}}({uploadType:f,getUploadToken:g}).catch((e=>{y=e||y}));if(!C)return null==m||m({status:-1,statusText:w}),void n(y);null==u||u({total:100,loaded:20});const{config:_,stsToken:j}=C,k=new(i())(_);k.on("complete",(e=>{null==u||u({total:100,loaded:100}),null==p||p(e),t(e)})),k.on("progress",(e=>{null==u||u({total:100,loaded:20+e.percent/100*80})})),k.on("error",(e=>{var t,s;null==m||m({status:(null===(t=e.extra)||void 0===t?void 0:t.errorCode)||-1,statusText:w});const i=new l.w("upload failed",{code:String((null===(s=e.extra)||void 0===s?void 0:s.errorCode)||-1),displayMessage:w,uploadStack:x});n(i)}));const b=k.addFile({file:s,stsToken:j,type:h[f]});k.start(b),null==u||u({total:100,loaded:20})}))},76892:(e,t,n)=>{function s(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e?`${e}-${t}`:t}n.d(t,{V:()=>s})},77991:(e,t,n)=>{n.d(t,{r:()=>a});var s,i=n(18571);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(null,arguments)}const a=e=>i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),s||(s=i.createElement("path",{fill:"#6C6C6C",fillRule:"evenodd",d:"M6.875 6.154a.22.22 0 0 0 0-.308L4.447 3.418A.783.783 0 1 1 5.554 2.31l3.415 3.415a.387.387 0 0 1 0 .548L5.554 9.689a.783.783 0 1 1-1.107-1.107z",clipRule:"evenodd"})))},92644:(e,t,n)=>{n.d(t,{r:()=>a});var s,i=n(18571);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(null,arguments)}const a=e=>i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),s||(s=i.createElement("path",{stroke:"#00C1CD",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m3 6 2.143 2L9 4"})))},65029:(e,t,n)=>{n.d(t,{r:()=>a});var s,i=n(18571);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(null,arguments)}const a=e=>i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),s||(s=i.createElement("path",{fill:"#D4D4D4",d:"M6.708 6 11 10.292l-.708.708L6 6.708 1.708 11 1 10.292 5.292 6 1 1.708 1.708 1 6 5.292 10.292 1l.708.708z"})))},12247:(e,t,n)=>{n.d(t,{r:()=>a});var s,i=n(18571);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r.apply(null,arguments)}const a=e=>i.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),s||(s=i.createElement("path",{stroke:"#AE1C1C",strokeLinecap:"round",strokeWidth:1.5,d:"m4 4 4 4M8 4 4 8"})))},59053:(e,t,n)=>{n.d(t,{r:()=>o});var s,i,r=n(18571);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},a.apply(null,arguments)}const o=e=>r.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",viewBox:"0 0 18 18"},e),s||(s=r.createElement("rect",{width:18,height:18,fill:"#29292D",opacity:.5,rx:9})),i||(i=r.createElement("path",{stroke:"#FAFAFA",strokeWidth:1.35,d:"M13.925 9a4.924 4.924 0 1 0-1.443 3.482"})))},93747:(e,t,n)=>{n.d(t,{Z:()=>s});const s={root:"root-wurvCd",point:"point-E_OjHv",tooltipWrapper:"tooltipWrapper-f4Ku2I","fade-in":"fade-in-CYzcgC",fadeIn:"fade-in-CYzcgC",fadingOut:"fadingOut-WkHWF7","fade-out":"fade-out-S__jW6",fadeOut:"fade-out-S__jW6"}},43322:(e,t,n)=>{n.d(t,{Z:()=>s});const s={card:"card-f4fcSb",text:"text-RGDuHx"}},92475:(e,t,n)=>{n.d(t,{Z:()=>s});const s={root:"root-yumxDJ",animated:"animated-IHczOy","loading-circle-rotate":"loading-circle-rotate-g3W34L",loadingCircleRotate:"loading-circle-rotate-g3W34L"}},2450:(e,t,n)=>{n.d(t,{Z:()=>s});const s={macos:"macos",windows:"windows",heycanRatioGroupEllipsis:"heycan-ratio-group-ellipsis",heycanCheckboxEllipsis:"heycan-checkbox-ellipsis",heycanFormFieldEllipsis:"heycan-form-field-ellipsis",heycanPopoverWrapperClearStyle:"heycan-popover-wrapper-clear-style",heycanTextareaThemeGrey:"heycan-textarea-theme-grey",heycanInputThemeGrey:"heycan-input-theme-grey",protocol:"protocol-VspS8l",content:"content-OyCrKs",withBorder:"withBorder-jbe4Zm",flexHeight:"flexHeight-OlM20e",gradientWrap:"gradientWrap-xsIHas",tips:"tips-_7MTVF",footer:"footer-PL68kt",btn:"btn-az9uHG",unreadTips:"unreadTips-rcFBJM",unreadTipsText:"unreadTipsText-HZIAAh",triangleIcon:"triangleIcon-aHMlc1",confirmArea:"confirmArea-HME5C1",confirmCheckbox:"confirmCheckbox-lf6E1b",confirmCheckboxText:"confirmCheckboxText-Tkueuw",confirmCheckboxProtocolTitle:"confirmCheckboxProtocolTitle-WvrrOC",protocolContent:"protocolContent-jt8xnN",authorAgreementSection:"authorAgreementSection-jQSe0F",title:"title-LtvpOX",desc:"desc-fU1I4k"}},4973:(e,t,n)=>{n.d(t,{Z:()=>s});const s={macos:"macos",windows:"windows",heycanRatioGroupEllipsis:"heycan-ratio-group-ellipsis",heycanCheckboxEllipsis:"heycan-checkbox-ellipsis",heycanFormFieldEllipsis:"heycan-form-field-ellipsis",heycanPopoverWrapperClearStyle:"heycan-popover-wrapper-clear-style",heycanTextareaThemeGrey:"heycan-textarea-theme-grey",heycanInputThemeGrey:"heycan-input-theme-grey",root:"root-EgNFDI",left:"left-E5g9si",right:"right-rFTuHS",remind:"remind-yX4spY",protocol:"protocol-M9K9e5",buttonContainer:"buttonContainer-pqhOLs",button:"button-G4gKq0"}},7890:(e,t,n)=>{n.d(t,{Z:()=>s});const s={root:"root-vUjaY_",icon:"icon-Rvn8cb",yellowIcon:"yellowIcon-ZUE7YW",yellowPoint:"yellowPoint-D92cGf",text:"text-FIGDkp",error:"error-CX16ns",checked:"checked-ot4aGx",tooltip:"tooltip-CeFJfC",errorTooltip:"errorTooltip-VmBB_H"}},18856:(e,t,n)=>{n.d(t,{Z:()=>s});const s={root:"root-QktMQ3",title:"title-QI6laf",right:"right-vx9IoL",closeIcon:"closeIcon-Z6vdI8"}}}]);